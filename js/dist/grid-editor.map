{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/backbone/backbone.js","webpack:///./node_modules/underscore/modules/_setup.js","webpack:///./node_modules/underscore/modules/restArguments.js","webpack:///./node_modules/underscore/modules/isObject.js","webpack:///./node_modules/underscore/modules/isNull.js","webpack:///./node_modules/underscore/modules/isUndefined.js","webpack:///./node_modules/underscore/modules/isBoolean.js","webpack:///./node_modules/underscore/modules/isElement.js","webpack:///./node_modules/underscore/modules/_tagTester.js","webpack:///./node_modules/underscore/modules/isString.js","webpack:///./node_modules/underscore/modules/isNumber.js","webpack:///./node_modules/underscore/modules/isDate.js","webpack:///./node_modules/underscore/modules/isRegExp.js","webpack:///./node_modules/underscore/modules/isError.js","webpack:///./node_modules/underscore/modules/isSymbol.js","webpack:///./node_modules/underscore/modules/isMap.js","webpack:///./node_modules/underscore/modules/isWeakMap.js","webpack:///./node_modules/underscore/modules/isSet.js","webpack:///./node_modules/underscore/modules/isWeakSet.js","webpack:///./node_modules/underscore/modules/isArrayBuffer.js","webpack:///./node_modules/underscore/modules/isDataView.js","webpack:///./node_modules/underscore/modules/isArray.js","webpack:///./node_modules/underscore/modules/isFunction.js","webpack:///./node_modules/underscore/modules/_has.js","webpack:///./node_modules/underscore/modules/isArguments.js","webpack:///./node_modules/underscore/modules/isFinite.js","webpack:///./node_modules/underscore/modules/isNaN.js","webpack:///./node_modules/underscore/modules/constant.js","webpack:///./node_modules/underscore/modules/_createSizePropertyCheck.js","webpack:///./node_modules/underscore/modules/_shallowProperty.js","webpack:///./node_modules/underscore/modules/_getByteLength.js","webpack:///./node_modules/underscore/modules/_isBufferLike.js","webpack:///./node_modules/underscore/modules/isTypedArray.js","webpack:///./node_modules/underscore/modules/_getLength.js","webpack:///./node_modules/underscore/modules/_isArrayLike.js","webpack:///./node_modules/underscore/modules/_collectNonEnumProps.js","webpack:///./node_modules/underscore/modules/keys.js","webpack:///./node_modules/underscore/modules/isEmpty.js","webpack:///./node_modules/underscore/modules/isMatch.js","webpack:///./node_modules/underscore/modules/underscore.js","webpack:///./node_modules/underscore/modules/isEqual.js","webpack:///./node_modules/underscore/modules/allKeys.js","webpack:///./node_modules/underscore/modules/values.js","webpack:///./node_modules/underscore/modules/pairs.js","webpack:///./node_modules/underscore/modules/invert.js","webpack:///./node_modules/underscore/modules/functions.js","webpack:///./node_modules/underscore/modules/_createAssigner.js","webpack:///./node_modules/underscore/modules/extend.js","webpack:///./node_modules/underscore/modules/extendOwn.js","webpack:///./node_modules/underscore/modules/defaults.js","webpack:///./node_modules/underscore/modules/_baseCreate.js","webpack:///./node_modules/underscore/modules/create.js","webpack:///./node_modules/underscore/modules/clone.js","webpack:///./node_modules/underscore/modules/tap.js","webpack:///./node_modules/underscore/modules/has.js","webpack:///./node_modules/underscore/modules/identity.js","webpack:///./node_modules/underscore/modules/matcher.js","webpack:///./node_modules/underscore/modules/_deepGet.js","webpack:///./node_modules/underscore/modules/property.js","webpack:///./node_modules/underscore/modules/_optimizeCb.js","webpack:///./node_modules/underscore/modules/_baseIteratee.js","webpack:///./node_modules/underscore/modules/iteratee.js","webpack:///./node_modules/underscore/modules/_cb.js","webpack:///./node_modules/underscore/modules/mapObject.js","webpack:///./node_modules/underscore/modules/noop.js","webpack:///./node_modules/underscore/modules/propertyOf.js","webpack:///./node_modules/underscore/modules/times.js","webpack:///./node_modules/underscore/modules/random.js","webpack:///./node_modules/underscore/modules/now.js","webpack:///./node_modules/underscore/modules/_createEscaper.js","webpack:///./node_modules/underscore/modules/_escapeMap.js","webpack:///./node_modules/underscore/modules/escape.js","webpack:///./node_modules/underscore/modules/unescape.js","webpack:///./node_modules/underscore/modules/_unescapeMap.js","webpack:///./node_modules/underscore/modules/templateSettings.js","webpack:///./node_modules/underscore/modules/template.js","webpack:///./node_modules/underscore/modules/result.js","webpack:///./node_modules/underscore/modules/uniqueId.js","webpack:///./node_modules/underscore/modules/chain.js","webpack:///./node_modules/underscore/modules/_executeBound.js","webpack:///./node_modules/underscore/modules/partial.js","webpack:///./node_modules/underscore/modules/bind.js","webpack:///./node_modules/underscore/modules/_flatten.js","webpack:///./node_modules/underscore/modules/bindAll.js","webpack:///./node_modules/underscore/modules/memoize.js","webpack:///./node_modules/underscore/modules/delay.js","webpack:///./node_modules/underscore/modules/defer.js","webpack:///./node_modules/underscore/modules/throttle.js","webpack:///./node_modules/underscore/modules/debounce.js","webpack:///./node_modules/underscore/modules/wrap.js","webpack:///./node_modules/underscore/modules/negate.js","webpack:///./node_modules/underscore/modules/compose.js","webpack:///./node_modules/underscore/modules/after.js","webpack:///./node_modules/underscore/modules/before.js","webpack:///./node_modules/underscore/modules/once.js","webpack:///./node_modules/underscore/modules/findKey.js","webpack:///./node_modules/underscore/modules/_createPredicateIndexFinder.js","webpack:///./node_modules/underscore/modules/findIndex.js","webpack:///./node_modules/underscore/modules/findLastIndex.js","webpack:///./node_modules/underscore/modules/sortedIndex.js","webpack:///./node_modules/underscore/modules/_createIndexFinder.js","webpack:///./node_modules/underscore/modules/indexOf.js","webpack:///./node_modules/underscore/modules/lastIndexOf.js","webpack:///./node_modules/underscore/modules/find.js","webpack:///./node_modules/underscore/modules/findWhere.js","webpack:///./node_modules/underscore/modules/each.js","webpack:///./node_modules/underscore/modules/map.js","webpack:///./node_modules/underscore/modules/_createReduce.js","webpack:///./node_modules/underscore/modules/reduce.js","webpack:///./node_modules/underscore/modules/reduceRight.js","webpack:///./node_modules/underscore/modules/filter.js","webpack:///./node_modules/underscore/modules/reject.js","webpack:///./node_modules/underscore/modules/every.js","webpack:///./node_modules/underscore/modules/some.js","webpack:///./node_modules/underscore/modules/contains.js","webpack:///./node_modules/underscore/modules/invoke.js","webpack:///./node_modules/underscore/modules/pluck.js","webpack:///./node_modules/underscore/modules/where.js","webpack:///./node_modules/underscore/modules/max.js","webpack:///./node_modules/underscore/modules/min.js","webpack:///./node_modules/underscore/modules/sample.js","webpack:///./node_modules/underscore/modules/shuffle.js","webpack:///./node_modules/underscore/modules/sortBy.js","webpack:///./node_modules/underscore/modules/_group.js","webpack:///./node_modules/underscore/modules/groupBy.js","webpack:///./node_modules/underscore/modules/indexBy.js","webpack:///./node_modules/underscore/modules/countBy.js","webpack:///./node_modules/underscore/modules/partition.js","webpack:///./node_modules/underscore/modules/toArray.js","webpack:///./node_modules/underscore/modules/size.js","webpack:///./node_modules/underscore/modules/_keyInObj.js","webpack:///./node_modules/underscore/modules/pick.js","webpack:///./node_modules/underscore/modules/omit.js","webpack:///./node_modules/underscore/modules/initial.js","webpack:///./node_modules/underscore/modules/first.js","webpack:///./node_modules/underscore/modules/rest.js","webpack:///./node_modules/underscore/modules/last.js","webpack:///./node_modules/underscore/modules/compact.js","webpack:///./node_modules/underscore/modules/flatten.js","webpack:///./node_modules/underscore/modules/difference.js","webpack:///./node_modules/underscore/modules/without.js","webpack:///./node_modules/underscore/modules/uniq.js","webpack:///./node_modules/underscore/modules/union.js","webpack:///./node_modules/underscore/modules/intersection.js","webpack:///./node_modules/underscore/modules/unzip.js","webpack:///./node_modules/underscore/modules/zip.js","webpack:///./node_modules/underscore/modules/object.js","webpack:///./node_modules/underscore/modules/range.js","webpack:///./node_modules/underscore/modules/chunk.js","webpack:///./node_modules/underscore/modules/_chainResult.js","webpack:///./node_modules/underscore/modules/mixin.js","webpack:///./node_modules/underscore/modules/underscore-array-methods.js","webpack:///./node_modules/underscore/modules/index-default.js","webpack:///./node_modules/icanhaz/ICanHaz.js","webpack:///external \"jQuery\"","webpack:///./node_modules/component-emitter/index.js","webpack:///./node_modules/engine.io-parser/lib/browser.js","webpack:///./node_modules/socket.io-client/node_modules/debug/src/browser.js","webpack:///./node_modules/component-inherit/index.js","webpack:///./node_modules/engine.io-client/node_modules/debug/src/browser.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/socket.io-client/node_modules/socket.io-parser/index.js","webpack:///./node_modules/buffer/index.js","webpack:///./node_modules/engine.io-client/lib/xmlhttprequest.js","webpack:///./node_modules/engine.io-client/lib/globalThis.browser.js","webpack:///./node_modules/engine.io-client/lib/transport.js","webpack:///./node_modules/engine.io-client/node_modules/parseqs/index.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/ms/index.js","webpack:///./node_modules/socket.io-client/node_modules/isarray/index.js","webpack:///./node_modules/socket.io-client/node_modules/socket.io-parser/is-buffer.js","webpack:///./node_modules/socket.io-client/lib/manager.js","webpack:///./node_modules/engine.io-client/lib/transports/index.js","webpack:///./node_modules/engine.io-client/lib/transports/polling.js","webpack:///./node_modules/has-binary2/index.js","webpack:///./node_modules/yeast/index.js","webpack:///./node_modules/indexof/index.js","webpack:///./node_modules/socket.io-client/lib/socket.js","webpack:///./node_modules/socket.io-client/lib/on.js","webpack:///./node_modules/component-bind/index.js","webpack:///./node_modules/socket.io-client/lib/index.js","webpack:///./src/grid-editor/frameworks/jquery.ui.touch-punch.js","webpack:///./src/grid-editor/frameworks/jquery.iframe-transport.js","webpack:///./node_modules/blueimp-file-upload/js/jquery.fileupload.js","webpack:///./node_modules/jquery-ui/ui/widget.js","webpack:///./node_modules/jquery-ui/ui/version.js","webpack:///./src/grid-editor/frameworks/mutate.events.js","webpack:///./src/grid-editor/frameworks/mutate.min.js","webpack:///./node_modules/socket.io-client/lib/url.js","webpack:///./node_modules/socket.io-client/node_modules/parseuri/index.js","webpack:///./node_modules/socket.io-client/node_modules/debug/src/debug.js","webpack:///./node_modules/socket.io-client/node_modules/socket.io-parser/binary.js","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/ieee754/index.js","webpack:///./node_modules/isarray/index.js","webpack:///./node_modules/engine.io-client/lib/index.js","webpack:///./node_modules/engine.io-client/lib/socket.js","webpack:///./node_modules/has-cors/index.js","webpack:///./node_modules/engine.io-client/lib/transports/polling-xhr.js","webpack:///./node_modules/engine.io-parser/lib/keys.js","webpack:///./node_modules/has-binary2/node_modules/isarray/index.js","webpack:///./node_modules/arraybuffer.slice/index.js","webpack:///./node_modules/after/index.js","webpack:///./node_modules/engine.io-parser/lib/utf8.js","webpack:///./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","webpack:///./node_modules/blob/index.js","webpack:///./node_modules/engine.io-client/node_modules/debug/src/debug.js","webpack:///./node_modules/engine.io-client/lib/transports/polling-jsonp.js","webpack:///./node_modules/engine.io-client/lib/transports/websocket.js","webpack:///./node_modules/engine.io-client/node_modules/parseuri/index.js","webpack:///./node_modules/to-array/index.js","webpack:///./node_modules/socket.io-client/node_modules/parseqs/index.js","webpack:///./node_modules/backo2/index.js","webpack:///./src/grid-editor/language/grid-en.js","webpack:///./src/grid-editor/lib/GridViews.js","webpack:///./src/grid-editor/lib/utils.js","webpack:///./src/grid-editor/lib/views/GridContainerEditorView.js","webpack:///./src/grid-editor/lib/views/GridBoxEditorView.js","webpack:///./src/grid-editor/lib/views/EditorWidgets/autocomplete.js","webpack:///./src/grid-editor/lib/views/EditorWidgets/autocomplete_with_links.js","webpack:///./src/grid-editor/lib/views/EditorWidgets/checkbox.js","webpack:///./src/grid-editor/lib/views/EditorWidgets/file.js","webpack:///./src/grid-editor/lib/views/EditorWidgets/hidden.js","webpack:///./src/grid-editor/lib/views/EditorWidgets/html.js","webpack:///./src/grid-editor/lib/views/EditorWidgets/info.js","webpack:///./src/grid-editor/lib/views/EditorWidgets/input.js","webpack:///./src/grid-editor/lib/views/EditorWidgets/list.js","webpack:///./src/grid-editor/lib/views/EditorWidgets/multi-autocomplete.js","webpack:///./src/grid-editor/lib/views/EditorWidgets/number.js","webpack:///./src/grid-editor/lib/views/EditorWidgets/select.js","webpack:///./src/grid-editor/lib/views/EditorWidgets/text.js","webpack:///./src/grid-editor/lib/views/EditorWidgets/textarea.js","webpack:///./src/grid-editor/lib/views/EditorWidgets/wp_mediaselect.js","webpack:///./src/grid-editor/lib/views/GridRevisionsView.js","webpack:///./src/grid-editor/lib/views/GridToolbarView.js","webpack:///./src/grid-editor/lib/views/GridToolContainersView.js","webpack:///./src/grid-editor/lib/views/GridToolBoxTypesView.js","webpack:///./src/grid-editor/lib/views/GridToolBoxBlueprintsView.js","webpack:///./src/grid-editor/lib/views/GridSlotStyleChangerView.js","webpack:///./src/grid-editor/lib/views/GridAuthorsView.js","webpack:///./src/grid-editor/lib/views/GridAuthorView.js","webpack:///./src/grid-editor/lib/GridModels.js","webpack:///./src/grid-editor/lib/models/GridBoxBlueprint.js","webpack:///./src/grid-editor/lib/models/GridRights.js","webpack:///./src/grid-editor/lib/models/GridAuthor.js","webpack:///./src/grid-editor/lib/GridCollections.js","webpack:///./src/grid-editor/lib/collections/GridBoxBlueprints.js","webpack:///./src/grid-editor/lib/collections/GridAuthors.js","webpack:///./src/grid-editor/lib/GridSync.js","webpack:///./src/grid-editor/lib/GridAsync.js","webpack:///./src/grid-editor/lib/Grid.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","root","self","global","_","$","Backbone","previousBackbone","slice","Array","VERSION","noConflict","this","emulateHTTP","emulateJSON","_listening","Events","eventSplitter","eventsApi","iteratee","events","callback","opts","names","context","keys","length","test","split","on","_events","onApi","ctx","listening","_listeners","id","interop","listenTo","obj","_listenId","uniqueId","listeningTo","_listeningTo","Listening","error","tryCatchOn","options","handlers","count","push","e","off","offApi","listeners","stopListening","ids","isEmpty","remaining","j","handler","_callback","cleanup","once","onceMap","listenToOnce","map","offer","apply","arguments","trigger","Math","max","args","triggerApi","objEvents","allEvents","all","triggerEvents","concat","ev","a1","a2","a3","listener","unbind","extend","Model","attributes","attrs","preinitialize","cid","cidPrefix","collection","parse","defaults","result","set","changed","initialize","validationError","idAttribute","toJSON","clone","sync","attr","escape","has","matches","val","_validate","unset","silent","changes","changing","_changing","_previousAttributes","current","prev","isEqual","_pending","clear","hasChanged","changedAttributes","diff","old","previous","previousAttributes","fetch","model","success","resp","serverAttrs","wrapError","save","wait","validate","method","isNew","patch","xhr","destroy","defer","url","base","urlError","replace","encodeURIComponent","constructor","isValid","Collection","models","comparator","_reset","reset","setOptions","add","remove","merge","addOptions","splice","array","insert","at","min","tail","singular","isArray","removed","_removeModels","added","merged","_isModel","toAdd","toMerge","toRemove","modelMap","sort","sortable","sortAttr","isString","existing","_prepareModel","_addReference","orderChanged","some","index","_removeReference","previousModels","pop","unshift","shift","_byId","modelId","where","first","findWhere","Error","isFunction","sortBy","pluck","callbackOpts","values","CollectionIterator","ITERATOR_VALUES","ITERATOR_KEYS","entries","ITERATOR_KEYSVALUES","indexOf","_onModelEvent","event","prevId","$$iterator","iterator","kind","_collection","_kind","_index","next","done","View","pick","viewOptions","_ensureElement","delegateEventSplitter","tagName","selector","$el","find","render","_removeElement","setElement","element","undelegateEvents","_setElement","delegateEvents","el","match","delegate","eventName","undelegate","_createElement","document","createElement","className","_setAttributes","addUnderscoreMethods","Class","methods","attribute","each","cb","defaultVal","addMethod","instance","isObject","modelMatcher","matcher","forEach","collect","reduce","foldl","inject","reduceRight","foldr","detect","filter","select","reject","every","any","include","includes","contains","invoke","toArray","size","head","take","initial","rest","drop","last","without","difference","shuffle","lastIndexOf","chain","sample","partition","groupBy","countBy","indexBy","findIndex","findLastIndex","pairs","invert","omit","config","Base","mixin","mappings","functions","memo","type","methodMap","params","dataType","data","contentType","JSON","stringify","_method","beforeSend","setRequestHeader","processData","textStatus","errorThrown","ajax","update","delete","read","Router","routes","_bindRoutes","optionalParam","namedParam","splatParam","escapeRegExp","route","isRegExp","_routeToRegExp","router","history","fragment","_extractParameters","execute","navigate","optional","RegExp","exec","param","decodeURIComponent","History","checkUrl","window","location","routeStripper","rootStripper","pathStripper","started","interval","atRoot","pathname","getSearch","matchRoot","decodeFragment","decodeURI","href","getHash","getPath","path","charAt","getFragment","_usePushState","_wantsHashChange","start","hashChange","_hasHashChange","documentMode","_useHashChange","_wantsPushState","pushState","_hasPushState","rootPath","iframe","src","style","display","tabIndex","body","iWindow","insertBefore","firstChild","contentWindow","open","close","hash","addEventListener","attachEvent","_checkUrlInterval","setInterval","loadUrl","stop","removeEventListener","detachEvent","removeChild","clearInterval","decodedFragment","title","assign","_updateHash","protoProps","staticProps","child","parent","__super__","factory","Function","ArrayProto","ObjProto","SymbolProto","toString","supportsArrayBuffer","ArrayBuffer","nativeIsArray","nativeKeys","nativeCreate","nativeIsView","isView","_isNaN","isNaN","_isFinite","isFinite","hasEnumBug","propertyIsEnumerable","nonEnumerableProps","MAX_ARRAY_INDEX","pow","restArguments","func","startIndex","isNull","isUndefined","isBoolean","isElement","nodeType","tagTester","nodelist","childNodes","Int8Array","isArguments","isSymbol","parseFloat","isNumber","constant","createSizePropertyCheck","getSizeProperty","sizeProperty","shallowProperty","typedArrayPattern","isDataView","collectNonEnumProps","emulatedSet","nonEnumIdx","proto","prop","isMatch","_keys","_wrapped","eq","a","b","aStack","bStack","deepEq","valueOf","DataView","byteLength","getUint8","buffer","areArrays","aCtor","bCtor","allKeys","createAssigner","keysFunc","source","String","baseCreate","Ctor","props","extendOwn","tap","interceptor","identity","deepGet","optimizeCb","argCount","accumulator","baseIteratee","Infinity","mapObject","results","currentKey","noop","propertyOf","times","accum","random","floor","Date","getTime","createEscaper","escaper","join","testRegexp","replaceRegexp","string","templateSettings","evaluate","interpolate","noMatch","escapes","escapeChar","text","settings","oldSettings","offset","variable","template","argument","fallback","idCounter","prefix","_chain","executeBound","sourceFunc","boundFunc","callingContext","partial","boundArgs","placeholder","bound","position","TypeError","callArgs","flatten","input","depth","strict","output","idx","len","hasher","memoize","cache","address","setTimeout","delay","throttle","timeout","later","leading","now","throttled","_now","clearTimeout","trailing","cancel","debounce","immediate","debounced","callNow","wrap","wrapper","negate","predicate","compose","after","before","findKey","createPredicateIndexFinder","dir","low","high","mid","createIndexFinder","predicateFind","sortedIndex","item","createReduce","reducer","list","fromIndex","guard","contextPath","computed","lastComputed","v","rand","temp","criteria","left","right","group","behavior","pass","reStrSymbol","keyInObj","compact","Boolean","otherArrays","uniq","isSorted","seen","arrays","intersection","argsLength","unzip","range","step","ceil","chunk","chainResult","Mustache","_toString","trim","trimLeft","trimRight","_trim","escapeMap","regexCache","Renderer","otag","ctag","pragmas","pragmas_implemented","partials","in_recursion","send","render_pragmas","html","render_section","render_tags","sendLines","line","lines","that","regex","getCachedRegex","pragma","message","render_partial","undefined","content","renderedContent","renderedBefore","renderedAfter","row","create_context","is_object","new_regex","tag_replace_callback","operator","set_delimiters","delimiters","dels","escape_regex","callee","sRE","specials","is_kinda_truthy","bool","childValue","walk_context","value_context","needle","haystack","_context","fn","generator","byOtag","byCtag","version","to_html","view","send_fun","renderer","stuff","ich","templates","jQuery","Zepto","addTemplate","templateString","console","raw","clearAll","refresh","grabTemplates","script","scripts","getElementsByTagName","trash","innerHTML","parentNode","Emitter","_callbacks","removeListener","removeAllListeners","callbacks","emit","hasListeners","base64encoder","hasBinary","sliceBuffer","utf8","isAndroid","navigator","userAgent","isPhantomJS","dontSendBlobs","protocol","packets","ping","pong","upgrade","packetslist","err","Blob","ary","eachWithIndex","msg","encodePacket","packet","supportsBinary","utf8encode","encodeBase64Packet","contentArray","Uint8Array","resultBuffer","encodeArrayBuffer","fr","FileReader","onload","readAsArrayBuffer","encodeBlobAsArrayBuffer","blob","encodeBlob","base64","encodeBase64Object","encoded","encode","b64data","b64","readAsDataURL","fromCharCode","typed","basic","btoa","decodePacket","binaryType","utf8decode","decodeBase64Packet","substr","decode","tryDecode","Number","substring","encodePayload","isBinary","encodePayloadAsBlob","encodePayloadAsArrayBuffer","doneCallback","setLengthHeader","decodePayload","decodePayloadAsBinary","chr","encodedPackets","totalLength","acc","resultArray","bufferIndex","ab","charCodeAt","lenStr","parseInt","binaryIdentifier","lengthAry","bufferTail","buffers","tailArray","msgLength","total","load","storage","debug","process","env","DEBUG","log","formatArgs","useColors","namespace","humanize","color","lastC","namespaces","removeItem","toLowerCase","documentElement","WebkitAppearance","firebug","exception","table","$1","chrome","local","localStorage","localstorage","colors","formatters","enable","g","binary","isBuf","Encoder","types","CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK","Decoder","ERROR_PACKET","encodeAsString","str","attachments","nsp","payload","tryStringify","reconstructor","BinaryReconstructor","reconPack","removeBlobs","bloblessData","deconstruction","deconstructPacket","pack","encodeAsBinary","buf","tryParse","decodeString","takeBinaryData","finishedReconstruction","binData","reconstructPacket","ieee754","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","RangeError","__proto__","arg","encodingOrOffset","allocUnsafe","from","byteOffset","fromArrayLike","fromArrayBuffer","encoding","isEncoding","actual","write","fromString","isBuffer","checked","copy","fromObject","assertSize","loweredCase","utf8ToBytes","base64ToBytes","slowToString","end","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","arrayIndexOf","arr","indexSize","arrLength","valLength","readUInt16BE","foundIndex","found","hexWrite","strLen","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","foo","subarray","typedArraySupport","poolSize","_augment","species","configurable","fill","allocUnsafeSlow","_isBuffer","compare","x","y","pos","swap16","swap32","swap64","equals","inspect","target","thisStart","thisEnd","thisCopy","targetCopy","_arr","ret","out","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","code","INVALID_BASE64_RE","leadSurrogate","toByteArray","stringtrim","base64clean","dst","hasCORS","globalThis","xdomain","xscheme","enablesXDR","XMLHttpRequest","XDomainRequest","parser","Transport","hostname","port","secure","query","timestampParam","timestampRequests","readyState","agent","socket","withCredentials","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","isReactNative","extraHeaders","localAddress","onError","desc","description","doOpen","doClose","onClose","onOpen","writable","onData","onPacket","qs","qry","pair","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","nextTick","browser","argv","versions","addListener","prependListener","prependOnceListener","binding","cwd","chdir","umask","h","plural","ms","long","round","fmtShort","withNativeBuffer","withNativeArrayBuffer","eio","Socket","Backoff","Manager","uri","nsps","subs","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","jitter","connecting","lastPing","packetBuffer","_parser","encoder","decoder","autoConnect","emitAll","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","setMin","_randomizationFactor","setJitter","_reconnectionDelayMax","setMax","_timeout","maybeReconnectOnOpen","reconnecting","attempts","reconnect","connect","skipReconnect","openSub","onopen","errorSub","timer","onping","onpong","ondata","ondecoded","onerror","onConnecting","processPacketQueue","subsLength","disconnect","onclose","reason","duration","onreconnect","attempt","XHR","JSONP","websocket","polling","xd","xs","jsonp","isSSL","forceJSONP","parseqs","inherit","yeast","Polling","hasXHR2","responseType","forceBase64","poll","pause","onPause","doPoll","callbackfn","doWrite","schema","sid","withNativeBlob","withNativeFile","File","alphabet","seed","num","decoded","hasBin","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","io","json","acks","receiveBuffer","sendBuffer","connected","disconnected","flags","subEvents","compress","onpacket","sameNamespace","rootNamespaceError","onconnect","onevent","onack","ondisconnect","ack","sent","emitBuffered","lookup","managers","forceNew","multiplex","support","touch","touchHandled","mouseProto","ui","mouse","_mouseInit","_mouseDestroy","_touchStart","_mouseCapture","originalEvent","changedTouches","_touchMoved","simulateMouseEvent","_touchMove","_touchEnd","touchstart","proxy","touchmove","touchend","simulatedType","touches","preventDefault","simulatedEvent","createEvent","initMouseEvent","screenX","screenY","clientX","clientY","dispatchEvent","define","counter","ajaxTransport","form","addParamChar","async","completeCallback","formAcceptCharset","fileInputClones","paramNames","paramName","response","contents","appendTo","formData","field","fileInput","append","submit","replaceWith","abort","ajaxSetup","converters","parseJSON","xmlDoc","isXMLDoc","parseXML","XMLDocument","xml","globalEval","getDragHandler","isDragOver","dataTransfer","inArray","_trigger","Event","delegatedEvent","dropEffect","xhrFileUpload","ProgressEvent","xhrFormDataFileUpload","FormData","blobSlice","webkitSlice","mozSlice","widget","dropZone","pasteZone","replaceFileInput","singleFileUploads","limitMultiFileUploads","limitMultiFileUploadSize","limitMultiFileUploadSizeOverhead","sequentialUploads","limitConcurrentUploads","forceIframeTransport","redirect","redirectParamName","postMessage","multipart","maxChunkSize","uploadedBytes","recalculateProgress","progressInterval","bitrateInterval","autoUpload","uniqueFilenames","messages","i18n","serializeArray","isDefaultPrevented","fileupload","_promisePipe","parts","jquery","_specialOptions","_blobSlice","_BitrateTimer","timestamp","loaded","bitrate","getBitrate","timeDiff","_isXHRUpload","_getFormData","_getTotal","files","file","_initProgressObject","progress","_progress","_initResponseObject","_response","_onProgress","lengthComputable","_time","chunkSize","_bitrateTimer","_initProgressListener","ajaxSettings","upload","oe","_deinitProgressListener","_isInstanceOf","_getUniqueFilename","p1","p2","_initXHRData","headers","contentRange","encodeURI","uploadName","fileName","_initIframeSettings","targetHost","host","_initDataSettings","_chunkedUpload","_getParamName","_initFormSettings","toUpperCase","_getAJAXSettings","_getDeferredState","deferred","state","isResolved","isRejected","_enhancePromise","promise","fail","complete","always","_getXHRPromise","resolveOrReject","dfd","Deferred","resolveWith","rejectWith","_addConvenienceMethods","getPromise","resolveFunc","rejectFunc","_processQueue","jqXHR","_onSend","processing","_getUploadedBytes","getResponseHeader","upperBytesPos","testOnly","fs","ub","mcs","currentLoaded","_beforeSend","_active","_onDone","_onFail","_onAlways","jqXHRorResult","jqXHRorError","aborted","slot","pipe","_sending","nextSlot","_slots","resolve","_sequence","_onAdd","paramNameSet","paramNameSlice","fileSet","filesLength","limitSize","overhead","batchSize","originalFiles","newData","_replaceFileInput","inputClone","restoreFocus","is","activeElement","fileInputClone","detach","cleanData","_handleFileTreeEntry","entry","dirReader","errorHandler","readEntries","_handleFileTreeEntries","successHandler","isFile","_file","relativePath","isDirectory","createReader","when","_getDroppedFiles","items","webkitGetAsEntry","getAsEntry","getAsFile","makeArray","_getSingleFileInputFiles","fileSize","_getFileInputFiles","_onChange","_onPaste","clipboardData","_onDrop","_onDragOver","_onDragEnter","_onDragLeave","_initEventHandlers","_on","dragover","dragenter","dragleave","paste","change","_destroyEventHandlers","_off","_destroy","_setOption","reinit","_super","_initSpecialOptions","_getRegExp","modifiers","_isRegExpOption","_initDataAttributes","_create","active","disabled","then","orig","widgetUuid","widgetSlice","elems","elem","_data","triggerHandler","existingConstructor","basePrototype","proxiedPrototype","fullName","Widget","expr","_createWidget","_proto","_childConstructors","_superApply","returnValue","__super","__superApply","widgetEventPrefix","widgetName","widgetFullName","childPrototype","bridge","inputIndex","inputLength","isPlainObject","isMethodCall","methodValue","pushStack","option","_init","defaultElement","classes","uuid","eventNamespace","bindings","hoverable","focusable","classesElementLookup","ownerDocument","defaultView","parentWindow","_getCreateOptions","_setOptionDisabled","_getCreateEventData","_removeClass","removeData","removeAttr","curOption","_setOptions","_setOptionClasses","classKey","elements","currentElements","addClass","_classes","_toggleClass","disable","full","processClassString","checkOption","unique","not","extra","_untrackClassesElement","_addClass","toggleClass","suppressDisabledCheck","delegateElement","handlerProxy","hasClass","guid","_delay","_hoverable","mouseenter","currentTarget","mouseleave","_focusable","focusin","focusout","show","hide","defaultEffect","hasOptions","effect","effectName","isEmptyObject","effects","easing","mutate_event_stack","width","height","css","scrollHeight","scrollWidth","scrollTop","scrollLeft","mutate","speed","event_stack","stack","add_event","evt","event_name","false_callback","k","parseuri","loc","re","authority","ipv6uri","pathNames","queryKey","$0","$2","createDebug","prevTime","enabled","curr","coerce","format","formatter","logFn","abs","selectColor","init","instances","skips","packetData","_deconstructPacket","_placeholder","_reconstructPacket","pendingBlobs","_removeBlobs","curKey","containingObject","fileReader","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","len2","encodeChunk","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","transports","transportOptions","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","onlyBinaryUpgrades","perMessageDeflate","threshold","product","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","priorWebsocketSuccess","createTransport","EIO","transport","requestTimeout","protocols","setTransport","onDrain","probe","failed","onTransportOpen","upgradeLosesBinary","upgrading","flush","freezeTransport","onTransportClose","onupgrade","to","onHandshake","setPing","filterUpgrades","onHeartbeat","sendPacket","waitForUpgrade","cleanupAndClose","filteredUpgrades","empty","Request","request","req","sendXhr","pollXhr","setDisableHeaderCheck","hasXDR","onLoad","responseText","onreadystatechange","status","requestsCount","requests","onSuccess","fromError","unloadHandler","arraybuffer","abv","ii","err_cb","bail","byteCount","byteIndex","stringFromCharCode","ucs2decode","checkScalarValue","createByte","encodeCodePoint","symbol","readContinuationByte","continuationByte","decodeSymbol","byte1","byteString","ucs2encode","chars","encoded1","encoded2","encoded3","encoded4","bufferLength","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","blobSupportsArrayBufferView","blobBuilderSupported","getBlob","mapArrayBufferViews","BlobBuilderConstructor","bb","part","BlobConstructor","JSONPPolling","rNewline","rEscapedNewline","___eio","insertAt","appendChild","area","iframeId","top","setAttribute","initIframe","action","BrowserWebSocket","NodeWebSocket","WebSocket","MozWebSocket","WebSocketImpl","WS","usingBrowserWebSocket","check","ws","supports","addEventListeners","onmessage","factor","deviation","lang_values","GridView","GridBackbone","_containersView","ContainersView","getContainers","tpl_grid","renderContainers","container","containerview","ContainerView","GRID","_initializeBoxSortable","_slotsView","SlotsView","getSlots","reused","getSpace","getType","space_to_left","space_to_right","title_short","prolog","prolog_short","epilog","epilog_short","right_edit","getRights","right_delete","right_options","right_move","isSidebar","startsWith","tpl_container","$slots_wrapper","onEdit","editor","GridContainerEditor","showEditor","$root_editor","saveEditor","$this","scope","onReuse","reusetitle","prompt","onToggleSlotStyles","selfdestruct","slotview","SlotView","_parentView","_boxesView","BoxesView","getBoxes","_slotStyleChangerView","GridSlotStyleChangerView","dimension","tpl_slot","box","boxview","BoxView","reference","right_create","right_none","SCRIPT_REGEX","isDuplicated","unsetDuplicated","tpl_box","edit","BoxEditor","deleteBox","duplicateBox","duplicate","styles","getBoxStyles","slug","selected","tpl_boxeditor","getIndex","getContainer","getSlot","contentstructure","fieldcontainer","views","boxEditorControls","structure","parentpath","CKEDITOR","customConfig","PathToConfig","onCancel","hideBoxEditor","onToggle","siblings","slideToggle","onMakeReusable","confirm","onSave","fetchValue","getData","getHTMLEditor","initHTMLEditor","Promise","hasHTMLEditor","getContainerStyles","tpl_containereditor","querySelector","prologEditor","epilogEditor","$url","onUrlToggle","$parent","hideEditor","class_prefix","label","readonly","key_value","GridAjax","getGrid","getGridID","success_fn","removeClass","keyup","which","selectItem","search","searching","doSearch","$item","listItemSelected","cancelSelection","old_search_string","emptyurl","emptylinktext","linktext","$linkUrl","$input","$upload_form_item","$preview","$file_input","fid","$key_field","$progress_display","$progress_bar_wrapper","$progress_bar_status","children","getFileChooseHelp","getFileReplaceHelp","uploadpath","uploadDone","loadPreview","progressall","getFormData","fileid","element_key","gridid","ID","percent","fileReplacementHelp","fileChooseHelp","inputType","$list","onAdd","sortItem","onRemove","$button","closest","newPos","insertAfter","click","isMultiple","multiple","hasMultipleValues","selections","c_val","media_type","$img_wrapper","$upload_btn","$select_image_size","buildImageSizeSelect","buildImagePreview","open_wp_media","frame","wp","media","library","button","selection","attachment","sizes","orientation","r_json","get_json_from_input","thumbnail","$img","GridRevisionsView","onRevisionsScroll","revisions","isDraft","isPublished","isDeprecated","date","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","tpl_revisions","list_width","outerWidth","nextpage","page","onPreview","$revision","parents","PREVIEW_PATTERN","toggle","onDelete","locked","alert","revert","onRevert","revision","setToRevision","GridToolbarView","_toolContainersView","_toolBoxesView","_revisionsView","setState","authors","onUpdateAuthors","tpl_toolbar","$toolbar","$tool_elements","$tool_element_content","$tab_container","$tab_box","$element_trash","$authors_count","showContainerTools","showBoxTools","publish","preview","animate","toggleBoxes","getToolContainersView","GridToolContainersView","getContainerTypes","containerToolsVisible","toggleContainerTools","hideBoxTools","hideContainerTools","getToolBoxesView","GridToolBoxTypesView","getBoxTypes","boxToolsVisible","toggleBoxTools","onResize","outerHeight","getCount","author","onClickAuthors","toggleAuthors","async_request_lock","tpl_toolContainers","renderContainerType","$type","role","reusables","getReusable","getRenderedContainerList","containers","initializesDraggable","tpl_toolContainersContainer","slots","slots_dimension","getDimension","numslots","getReusableContainers","draggable","helper","cursorAt","zIndex","getView","scroll","$grid","$containers","$dropArea","prepend","droppable","accept","hoverClass","$draggable","containerReusable","containerType","$dropwrapper","new_index","getModel","addReuseContainer","createContainer","boxtypes","boxtype","boxtype_json","tpl_toolBoxes","toggleBoxType","blueprints_view","GridToolBoxBlueprintsView","blueprints","getBlueprints","box_type","addBlueprintBox","searchBoxes","$_search","searchString","$blueprintslist","blueprint","reusable","tpl_toolBoxesBlueprint","$slots","$this_box","$this_drop","$this_slot","$this_container","$new_box","createBox","getSlotStyles","activestyle","tpl_slotstylechanger","changeStyle","Authors","onAddAuthor","tpl_authors","Author","onRequestLock","have_lock","haveLock","tpl_author","onClickSendLock","locking_handover","onClickRequestLock","locking_request_lock","ContainerType","BoxType","GridBoxBlueprints","StyleType","Revision","spec","Grid","DEBUGGING","SERVER","PREVIEW_URL","fn_success","Container","addContainer","containertype","GridRequest","grid","Containers","moveBox","new_slot","new_box_index","addBox","toIndex","setDuplicated","checkIsDraft","setSlots","side","space","space_arr","slots_array","addSlot","Slot","Slots","boxes","Box","Boxes","getBox","GridBoxBlueprint","GridRights","setNoRights","logRights","rights","GridAuthor","has_lock","request_lock","Revisions","ContainerTypes","containertypes","ReusableContainers","reusablecontainers","BoxTypes","Styles","move","to_index","boxblueprints","GridAuthors","async_authors_list","identifier","resetLock","setLock","async_authors_joined","async_authors_left","async_disconnect","params_array","finishLoading","error_fn","startLoading","reverted","flash","collection_slots","GridAsync","domain","observers","browser_identifier","getItem","setItem","last_time","_onIdleInterval","reload","_onActivity","service","initEvents","addObserver","observer","removeObserver","notifyAll","_event","_observer","f","authors_join","locking_deny_handover","authors_list","authors_joined","authors_left","authors_multihit","locking_is_locked","isLocked","locking_lock_requested","ping_send","$body","dom_root","$root","dom_root_editor","dom_root_authors","$root_authors","gridView","types_box","types_container","reusable_containers","styles_container","styles_slot","styles_box","_initConstants","$loading","tpl_loading","new_grid_success","altModificationClass","isPressed","altKey","newGrid","gridview","onRights","_initializeContainerSortable","toolbar","resize","gridmode","grid_debug_mode","gridajax","previewurl","previewpattern","scrollTo","showAuthors","hideAuthors","async_locking_is_locked","container_deleted","handle","pullPlaceholder","refreshPositions","bottom","old_container_id","newIndex","containermodel","old_box_index","old_slot_id","new_slot_id","new_container_id","box_deleted","box_duplicated","connectWith","forcePlaceholderSize","distance","over","beforeStop","fadeIn","fadeOut","loading_hide_timeout"],"mappings":"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","file":"grid-editor.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 65);\n","//     Backbone.js 1.4.0\n\n//     (c) 2010-2019 Jeremy Ashkenas and DocumentCloud\n//     Backbone may be freely distributed under the MIT license.\n//     For all details and documentation:\n//     http://backbonejs.org\n\n(function(factory) {\n\n  // Establish the root object, `window` (`self`) in the browser, or `global` on the server.\n  // We use `self` instead of `window` for `WebWorker` support.\n  var root = typeof self == 'object' && self.self === self && self ||\n            typeof global == 'object' && global.global === global && global;\n\n  // Set up Backbone appropriately for the environment. Start with AMD.\n  if (typeof define === 'function' && define.amd) {\n    define(['underscore', 'jquery', 'exports'], function(_, $, exports) {\n      // Export global even in AMD case in case this script is loaded with\n      // others that may still expect a global Backbone.\n      root.Backbone = factory(root, exports, _, $);\n    });\n\n  // Next for Node.js or CommonJS. jQuery may not be needed as a module.\n  } else if (typeof exports !== 'undefined') {\n    var _ = require('underscore'), $;\n    try { $ = require('jquery'); } catch (e) {}\n    factory(root, exports, _, $);\n\n  // Finally, as a browser global.\n  } else {\n    root.Backbone = factory(root, {}, root._, root.jQuery || root.Zepto || root.ender || root.$);\n  }\n\n})(function(root, Backbone, _, $) {\n\n  // Initial Setup\n  // -------------\n\n  // Save the previous value of the `Backbone` variable, so that it can be\n  // restored later on, if `noConflict` is used.\n  var previousBackbone = root.Backbone;\n\n  // Create a local reference to a common array method we'll want to use later.\n  var slice = Array.prototype.slice;\n\n  // Current version of the library. Keep in sync with `package.json`.\n  Backbone.VERSION = '1.4.0';\n\n  // For Backbone's purposes, jQuery, Zepto, Ender, or My Library (kidding) owns\n  // the `$` variable.\n  Backbone.$ = $;\n\n  // Runs Backbone.js in *noConflict* mode, returning the `Backbone` variable\n  // to its previous owner. Returns a reference to this Backbone object.\n  Backbone.noConflict = function() {\n    root.Backbone = previousBackbone;\n    return this;\n  };\n\n  // Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option\n  // will fake `\"PATCH\"`, `\"PUT\"` and `\"DELETE\"` requests via the `_method` parameter and\n  // set a `X-Http-Method-Override` header.\n  Backbone.emulateHTTP = false;\n\n  // Turn on `emulateJSON` to support legacy servers that can't deal with direct\n  // `application/json` requests ... this will encode the body as\n  // `application/x-www-form-urlencoded` instead and will send the model in a\n  // form param named `model`.\n  Backbone.emulateJSON = false;\n\n  // Backbone.Events\n  // ---------------\n\n  // A module that can be mixed in to *any object* in order to provide it with\n  // a custom event channel. You may bind a callback to an event with `on` or\n  // remove with `off`; `trigger`-ing an event fires all callbacks in\n  // succession.\n  //\n  //     var object = {};\n  //     _.extend(object, Backbone.Events);\n  //     object.on('expand', function(){ alert('expanded'); });\n  //     object.trigger('expand');\n  //\n  var Events = Backbone.Events = {};\n\n  // Regular expression used to split event strings.\n  var eventSplitter = /\\s+/;\n\n  // A private global variable to share between listeners and listenees.\n  var _listening;\n\n  // Iterates over the standard `event, callback` (as well as the fancy multiple\n  // space-separated events `\"change blur\", callback` and jQuery-style event\n  // maps `{event: callback}`).\n  var eventsApi = function(iteratee, events, name, callback, opts) {\n    var i = 0, names;\n    if (name && typeof name === 'object') {\n      // Handle event maps.\n      if (callback !== void 0 && 'context' in opts && opts.context === void 0) opts.context = callback;\n      for (names = _.keys(name); i < names.length ; i++) {\n        events = eventsApi(iteratee, events, names[i], name[names[i]], opts);\n      }\n    } else if (name && eventSplitter.test(name)) {\n      // Handle space-separated event names by delegating them individually.\n      for (names = name.split(eventSplitter); i < names.length; i++) {\n        events = iteratee(events, names[i], callback, opts);\n      }\n    } else {\n      // Finally, standard events.\n      events = iteratee(events, name, callback, opts);\n    }\n    return events;\n  };\n\n  // Bind an event to a `callback` function. Passing `\"all\"` will bind\n  // the callback to all events fired.\n  Events.on = function(name, callback, context) {\n    this._events = eventsApi(onApi, this._events || {}, name, callback, {\n      context: context,\n      ctx: this,\n      listening: _listening\n    });\n\n    if (_listening) {\n      var listeners = this._listeners || (this._listeners = {});\n      listeners[_listening.id] = _listening;\n      // Allow the listening to use a counter, instead of tracking\n      // callbacks for library interop\n      _listening.interop = false;\n    }\n\n    return this;\n  };\n\n  // Inversion-of-control versions of `on`. Tell *this* object to listen to\n  // an event in another object... keeping track of what it's listening to\n  // for easier unbinding later.\n  Events.listenTo = function(obj, name, callback) {\n    if (!obj) return this;\n    var id = obj._listenId || (obj._listenId = _.uniqueId('l'));\n    var listeningTo = this._listeningTo || (this._listeningTo = {});\n    var listening = _listening = listeningTo[id];\n\n    // This object is not listening to any other events on `obj` yet.\n    // Setup the necessary references to track the listening callbacks.\n    if (!listening) {\n      this._listenId || (this._listenId = _.uniqueId('l'));\n      listening = _listening = listeningTo[id] = new Listening(this, obj);\n    }\n\n    // Bind callbacks on obj.\n    var error = tryCatchOn(obj, name, callback, this);\n    _listening = void 0;\n\n    if (error) throw error;\n    // If the target obj is not Backbone.Events, track events manually.\n    if (listening.interop) listening.on(name, callback);\n\n    return this;\n  };\n\n  // The reducing API that adds a callback to the `events` object.\n  var onApi = function(events, name, callback, options) {\n    if (callback) {\n      var handlers = events[name] || (events[name] = []);\n      var context = options.context, ctx = options.ctx, listening = options.listening;\n      if (listening) listening.count++;\n\n      handlers.push({callback: callback, context: context, ctx: context || ctx, listening: listening});\n    }\n    return events;\n  };\n\n  // An try-catch guarded #on function, to prevent poisoning the global\n  // `_listening` variable.\n  var tryCatchOn = function(obj, name, callback, context) {\n    try {\n      obj.on(name, callback, context);\n    } catch (e) {\n      return e;\n    }\n  };\n\n  // Remove one or many callbacks. If `context` is null, removes all\n  // callbacks with that function. If `callback` is null, removes all\n  // callbacks for the event. If `name` is null, removes all bound\n  // callbacks for all events.\n  Events.off = function(name, callback, context) {\n    if (!this._events) return this;\n    this._events = eventsApi(offApi, this._events, name, callback, {\n      context: context,\n      listeners: this._listeners\n    });\n\n    return this;\n  };\n\n  // Tell this object to stop listening to either specific events ... or\n  // to every object it's currently listening to.\n  Events.stopListening = function(obj, name, callback) {\n    var listeningTo = this._listeningTo;\n    if (!listeningTo) return this;\n\n    var ids = obj ? [obj._listenId] : _.keys(listeningTo);\n    for (var i = 0; i < ids.length; i++) {\n      var listening = listeningTo[ids[i]];\n\n      // If listening doesn't exist, this object is not currently\n      // listening to obj. Break out early.\n      if (!listening) break;\n\n      listening.obj.off(name, callback, this);\n      if (listening.interop) listening.off(name, callback);\n    }\n    if (_.isEmpty(listeningTo)) this._listeningTo = void 0;\n\n    return this;\n  };\n\n  // The reducing API that removes a callback from the `events` object.\n  var offApi = function(events, name, callback, options) {\n    if (!events) return;\n\n    var context = options.context, listeners = options.listeners;\n    var i = 0, names;\n\n    // Delete all event listeners and \"drop\" events.\n    if (!name && !context && !callback) {\n      for (names = _.keys(listeners); i < names.length; i++) {\n        listeners[names[i]].cleanup();\n      }\n      return;\n    }\n\n    names = name ? [name] : _.keys(events);\n    for (; i < names.length; i++) {\n      name = names[i];\n      var handlers = events[name];\n\n      // Bail out if there are no events stored.\n      if (!handlers) break;\n\n      // Find any remaining events.\n      var remaining = [];\n      for (var j = 0; j < handlers.length; j++) {\n        var handler = handlers[j];\n        if (\n          callback && callback !== handler.callback &&\n            callback !== handler.callback._callback ||\n              context && context !== handler.context\n        ) {\n          remaining.push(handler);\n        } else {\n          var listening = handler.listening;\n          if (listening) listening.off(name, callback);\n        }\n      }\n\n      // Replace events if there are any remaining.  Otherwise, clean up.\n      if (remaining.length) {\n        events[name] = remaining;\n      } else {\n        delete events[name];\n      }\n    }\n\n    return events;\n  };\n\n  // Bind an event to only be triggered a single time. After the first time\n  // the callback is invoked, its listener will be removed. If multiple events\n  // are passed in using the space-separated syntax, the handler will fire\n  // once for each event, not once for a combination of all events.\n  Events.once = function(name, callback, context) {\n    // Map the event into a `{event: once}` object.\n    var events = eventsApi(onceMap, {}, name, callback, this.off.bind(this));\n    if (typeof name === 'string' && context == null) callback = void 0;\n    return this.on(events, callback, context);\n  };\n\n  // Inversion-of-control versions of `once`.\n  Events.listenToOnce = function(obj, name, callback) {\n    // Map the event into a `{event: once}` object.\n    var events = eventsApi(onceMap, {}, name, callback, this.stopListening.bind(this, obj));\n    return this.listenTo(obj, events);\n  };\n\n  // Reduces the event callbacks into a map of `{event: onceWrapper}`.\n  // `offer` unbinds the `onceWrapper` after it has been called.\n  var onceMap = function(map, name, callback, offer) {\n    if (callback) {\n      var once = map[name] = _.once(function() {\n        offer(name, once);\n        callback.apply(this, arguments);\n      });\n      once._callback = callback;\n    }\n    return map;\n  };\n\n  // Trigger one or many events, firing all bound callbacks. Callbacks are\n  // passed the same arguments as `trigger` is, apart from the event name\n  // (unless you're listening on `\"all\"`, which will cause your callback to\n  // receive the true name of the event as the first argument).\n  Events.trigger = function(name) {\n    if (!this._events) return this;\n\n    var length = Math.max(0, arguments.length - 1);\n    var args = Array(length);\n    for (var i = 0; i < length; i++) args[i] = arguments[i + 1];\n\n    eventsApi(triggerApi, this._events, name, void 0, args);\n    return this;\n  };\n\n  // Handles triggering the appropriate event callbacks.\n  var triggerApi = function(objEvents, name, callback, args) {\n    if (objEvents) {\n      var events = objEvents[name];\n      var allEvents = objEvents.all;\n      if (events && allEvents) allEvents = allEvents.slice();\n      if (events) triggerEvents(events, args);\n      if (allEvents) triggerEvents(allEvents, [name].concat(args));\n    }\n    return objEvents;\n  };\n\n  // A difficult-to-believe, but optimized internal dispatch function for\n  // triggering events. Tries to keep the usual cases speedy (most internal\n  // Backbone events have 3 arguments).\n  var triggerEvents = function(events, args) {\n    var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];\n    switch (args.length) {\n      case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx); return;\n      case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1); return;\n      case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2); return;\n      case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3); return;\n      default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args); return;\n    }\n  };\n\n  // A listening class that tracks and cleans up memory bindings\n  // when all callbacks have been offed.\n  var Listening = function(listener, obj) {\n    this.id = listener._listenId;\n    this.listener = listener;\n    this.obj = obj;\n    this.interop = true;\n    this.count = 0;\n    this._events = void 0;\n  };\n\n  Listening.prototype.on = Events.on;\n\n  // Offs a callback (or several).\n  // Uses an optimized counter if the listenee uses Backbone.Events.\n  // Otherwise, falls back to manual tracking to support events\n  // library interop.\n  Listening.prototype.off = function(name, callback) {\n    var cleanup;\n    if (this.interop) {\n      this._events = eventsApi(offApi, this._events, name, callback, {\n        context: void 0,\n        listeners: void 0\n      });\n      cleanup = !this._events;\n    } else {\n      this.count--;\n      cleanup = this.count === 0;\n    }\n    if (cleanup) this.cleanup();\n  };\n\n  // Cleans up memory bindings between the listener and the listenee.\n  Listening.prototype.cleanup = function() {\n    delete this.listener._listeningTo[this.obj._listenId];\n    if (!this.interop) delete this.obj._listeners[this.id];\n  };\n\n  // Aliases for backwards compatibility.\n  Events.bind   = Events.on;\n  Events.unbind = Events.off;\n\n  // Allow the `Backbone` object to serve as a global event bus, for folks who\n  // want global \"pubsub\" in a convenient place.\n  _.extend(Backbone, Events);\n\n  // Backbone.Model\n  // --------------\n\n  // Backbone **Models** are the basic data object in the framework --\n  // frequently representing a row in a table in a database on your server.\n  // A discrete chunk of data and a bunch of useful, related methods for\n  // performing computations and transformations on that data.\n\n  // Create a new model with the specified attributes. A client id (`cid`)\n  // is automatically generated and assigned for you.\n  var Model = Backbone.Model = function(attributes, options) {\n    var attrs = attributes || {};\n    options || (options = {});\n    this.preinitialize.apply(this, arguments);\n    this.cid = _.uniqueId(this.cidPrefix);\n    this.attributes = {};\n    if (options.collection) this.collection = options.collection;\n    if (options.parse) attrs = this.parse(attrs, options) || {};\n    var defaults = _.result(this, 'defaults');\n    attrs = _.defaults(_.extend({}, defaults, attrs), defaults);\n    this.set(attrs, options);\n    this.changed = {};\n    this.initialize.apply(this, arguments);\n  };\n\n  // Attach all inheritable methods to the Model prototype.\n  _.extend(Model.prototype, Events, {\n\n    // A hash of attributes whose current and previous value differ.\n    changed: null,\n\n    // The value returned during the last failed validation.\n    validationError: null,\n\n    // The default name for the JSON `id` attribute is `\"id\"`. MongoDB and\n    // CouchDB users may want to set this to `\"_id\"`.\n    idAttribute: 'id',\n\n    // The prefix is used to create the client id which is used to identify models locally.\n    // You may want to override this if you're experiencing name clashes with model ids.\n    cidPrefix: 'c',\n\n    // preinitialize is an empty function by default. You can override it with a function\n    // or object.  preinitialize will run before any instantiation logic is run in the Model.\n    preinitialize: function(){},\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Return a copy of the model's `attributes` object.\n    toJSON: function(options) {\n      return _.clone(this.attributes);\n    },\n\n    // Proxy `Backbone.sync` by default -- but override this if you need\n    // custom syncing semantics for *this* particular model.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Get the value of an attribute.\n    get: function(attr) {\n      return this.attributes[attr];\n    },\n\n    // Get the HTML-escaped value of an attribute.\n    escape: function(attr) {\n      return _.escape(this.get(attr));\n    },\n\n    // Returns `true` if the attribute contains a value that is not null\n    // or undefined.\n    has: function(attr) {\n      return this.get(attr) != null;\n    },\n\n    // Special-cased proxy to underscore's `_.matches` method.\n    matches: function(attrs) {\n      return !!_.iteratee(attrs, this)(this.attributes);\n    },\n\n    // Set a hash of model attributes on the object, firing `\"change\"`. This is\n    // the core primitive operation of a model, updating the data and notifying\n    // anyone who needs to know about the change in state. The heart of the beast.\n    set: function(key, val, options) {\n      if (key == null) return this;\n\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      var attrs;\n      if (typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options || (options = {});\n\n      // Run validation.\n      if (!this._validate(attrs, options)) return false;\n\n      // Extract attributes and options.\n      var unset      = options.unset;\n      var silent     = options.silent;\n      var changes    = [];\n      var changing   = this._changing;\n      this._changing = true;\n\n      if (!changing) {\n        this._previousAttributes = _.clone(this.attributes);\n        this.changed = {};\n      }\n\n      var current = this.attributes;\n      var changed = this.changed;\n      var prev    = this._previousAttributes;\n\n      // For each `set` attribute, update or delete the current value.\n      for (var attr in attrs) {\n        val = attrs[attr];\n        if (!_.isEqual(current[attr], val)) changes.push(attr);\n        if (!_.isEqual(prev[attr], val)) {\n          changed[attr] = val;\n        } else {\n          delete changed[attr];\n        }\n        unset ? delete current[attr] : current[attr] = val;\n      }\n\n      // Update the `id`.\n      if (this.idAttribute in attrs) this.id = this.get(this.idAttribute);\n\n      // Trigger all relevant attribute changes.\n      if (!silent) {\n        if (changes.length) this._pending = options;\n        for (var i = 0; i < changes.length; i++) {\n          this.trigger('change:' + changes[i], this, current[changes[i]], options);\n        }\n      }\n\n      // You might be wondering why there's a `while` loop here. Changes can\n      // be recursively nested within `\"change\"` events.\n      if (changing) return this;\n      if (!silent) {\n        while (this._pending) {\n          options = this._pending;\n          this._pending = false;\n          this.trigger('change', this, options);\n        }\n      }\n      this._pending = false;\n      this._changing = false;\n      return this;\n    },\n\n    // Remove an attribute from the model, firing `\"change\"`. `unset` is a noop\n    // if the attribute doesn't exist.\n    unset: function(attr, options) {\n      return this.set(attr, void 0, _.extend({}, options, {unset: true}));\n    },\n\n    // Clear all attributes on the model, firing `\"change\"`.\n    clear: function(options) {\n      var attrs = {};\n      for (var key in this.attributes) attrs[key] = void 0;\n      return this.set(attrs, _.extend({}, options, {unset: true}));\n    },\n\n    // Determine if the model has changed since the last `\"change\"` event.\n    // If you specify an attribute name, determine if that attribute has changed.\n    hasChanged: function(attr) {\n      if (attr == null) return !_.isEmpty(this.changed);\n      return _.has(this.changed, attr);\n    },\n\n    // Return an object containing all the attributes that have changed, or\n    // false if there are no changed attributes. Useful for determining what\n    // parts of a view need to be updated and/or what attributes need to be\n    // persisted to the server. Unset attributes will be set to undefined.\n    // You can also pass an attributes object to diff against the model,\n    // determining if there *would be* a change.\n    changedAttributes: function(diff) {\n      if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;\n      var old = this._changing ? this._previousAttributes : this.attributes;\n      var changed = {};\n      var hasChanged;\n      for (var attr in diff) {\n        var val = diff[attr];\n        if (_.isEqual(old[attr], val)) continue;\n        changed[attr] = val;\n        hasChanged = true;\n      }\n      return hasChanged ? changed : false;\n    },\n\n    // Get the previous value of an attribute, recorded at the time the last\n    // `\"change\"` event was fired.\n    previous: function(attr) {\n      if (attr == null || !this._previousAttributes) return null;\n      return this._previousAttributes[attr];\n    },\n\n    // Get all of the attributes of the model at the time of the previous\n    // `\"change\"` event.\n    previousAttributes: function() {\n      return _.clone(this._previousAttributes);\n    },\n\n    // Fetch the model from the server, merging the response with the model's\n    // local attributes. Any changed attributes will trigger a \"change\" event.\n    fetch: function(options) {\n      options = _.extend({parse: true}, options);\n      var model = this;\n      var success = options.success;\n      options.success = function(resp) {\n        var serverAttrs = options.parse ? model.parse(resp, options) : resp;\n        if (!model.set(serverAttrs, options)) return false;\n        if (success) success.call(options.context, model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Set a hash of model attributes, and sync the model to the server.\n    // If the server returns an attributes hash that differs, the model's\n    // state will be `set` again.\n    save: function(key, val, options) {\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      var attrs;\n      if (key == null || typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options = _.extend({validate: true, parse: true}, options);\n      var wait = options.wait;\n\n      // If we're not waiting and attributes exist, save acts as\n      // `set(attr).save(null, opts)` with validation. Otherwise, check if\n      // the model will be valid when the attributes, if any, are set.\n      if (attrs && !wait) {\n        if (!this.set(attrs, options)) return false;\n      } else if (!this._validate(attrs, options)) {\n        return false;\n      }\n\n      // After a successful server-side save, the client is (optionally)\n      // updated with the server-side state.\n      var model = this;\n      var success = options.success;\n      var attributes = this.attributes;\n      options.success = function(resp) {\n        // Ensure attributes are restored during synchronous saves.\n        model.attributes = attributes;\n        var serverAttrs = options.parse ? model.parse(resp, options) : resp;\n        if (wait) serverAttrs = _.extend({}, attrs, serverAttrs);\n        if (serverAttrs && !model.set(serverAttrs, options)) return false;\n        if (success) success.call(options.context, model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n\n      // Set temporary attributes if `{wait: true}` to properly find new ids.\n      if (attrs && wait) this.attributes = _.extend({}, attributes, attrs);\n\n      var method = this.isNew() ? 'create' : options.patch ? 'patch' : 'update';\n      if (method === 'patch' && !options.attrs) options.attrs = attrs;\n      var xhr = this.sync(method, this, options);\n\n      // Restore attributes.\n      this.attributes = attributes;\n\n      return xhr;\n    },\n\n    // Destroy this model on the server if it was already persisted.\n    // Optimistically removes the model from its collection, if it has one.\n    // If `wait: true` is passed, waits for the server to respond before removal.\n    destroy: function(options) {\n      options = options ? _.clone(options) : {};\n      var model = this;\n      var success = options.success;\n      var wait = options.wait;\n\n      var destroy = function() {\n        model.stopListening();\n        model.trigger('destroy', model, model.collection, options);\n      };\n\n      options.success = function(resp) {\n        if (wait) destroy();\n        if (success) success.call(options.context, model, resp, options);\n        if (!model.isNew()) model.trigger('sync', model, resp, options);\n      };\n\n      var xhr = false;\n      if (this.isNew()) {\n        _.defer(options.success);\n      } else {\n        wrapError(this, options);\n        xhr = this.sync('delete', this, options);\n      }\n      if (!wait) destroy();\n      return xhr;\n    },\n\n    // Default URL for the model's representation on the server -- if you're\n    // using Backbone's restful methods, override this to change the endpoint\n    // that will be called.\n    url: function() {\n      var base =\n        _.result(this, 'urlRoot') ||\n        _.result(this.collection, 'url') ||\n        urlError();\n      if (this.isNew()) return base;\n      var id = this.get(this.idAttribute);\n      return base.replace(/[^\\/]$/, '$&/') + encodeURIComponent(id);\n    },\n\n    // **parse** converts a response into the hash of attributes to be `set` on\n    // the model. The default implementation is just to pass the response along.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new model with identical attributes to this one.\n    clone: function() {\n      return new this.constructor(this.attributes);\n    },\n\n    // A model is new if it has never been saved to the server, and lacks an id.\n    isNew: function() {\n      return !this.has(this.idAttribute);\n    },\n\n    // Check if the model is currently in a valid state.\n    isValid: function(options) {\n      return this._validate({}, _.extend({}, options, {validate: true}));\n    },\n\n    // Run validation against the next complete set of model attributes,\n    // returning `true` if all is well. Otherwise, fire an `\"invalid\"` event.\n    _validate: function(attrs, options) {\n      if (!options.validate || !this.validate) return true;\n      attrs = _.extend({}, this.attributes, attrs);\n      var error = this.validationError = this.validate(attrs, options) || null;\n      if (!error) return true;\n      this.trigger('invalid', this, error, _.extend(options, {validationError: error}));\n      return false;\n    }\n\n  });\n\n  // Backbone.Collection\n  // -------------------\n\n  // If models tend to represent a single row of data, a Backbone Collection is\n  // more analogous to a table full of data ... or a small slice or page of that\n  // table, or a collection of rows that belong together for a particular reason\n  // -- all of the messages in this particular folder, all of the documents\n  // belonging to this particular author, and so on. Collections maintain\n  // indexes of their models, both in order, and for lookup by `id`.\n\n  // Create a new **Collection**, perhaps to contain a specific type of `model`.\n  // If a `comparator` is specified, the Collection will maintain\n  // its models in sort order, as they're added and removed.\n  var Collection = Backbone.Collection = function(models, options) {\n    options || (options = {});\n    this.preinitialize.apply(this, arguments);\n    if (options.model) this.model = options.model;\n    if (options.comparator !== void 0) this.comparator = options.comparator;\n    this._reset();\n    this.initialize.apply(this, arguments);\n    if (models) this.reset(models, _.extend({silent: true}, options));\n  };\n\n  // Default options for `Collection#set`.\n  var setOptions = {add: true, remove: true, merge: true};\n  var addOptions = {add: true, remove: false};\n\n  // Splices `insert` into `array` at index `at`.\n  var splice = function(array, insert, at) {\n    at = Math.min(Math.max(at, 0), array.length);\n    var tail = Array(array.length - at);\n    var length = insert.length;\n    var i;\n    for (i = 0; i < tail.length; i++) tail[i] = array[i + at];\n    for (i = 0; i < length; i++) array[i + at] = insert[i];\n    for (i = 0; i < tail.length; i++) array[i + length + at] = tail[i];\n  };\n\n  // Define the Collection's inheritable methods.\n  _.extend(Collection.prototype, Events, {\n\n    // The default model for a collection is just a **Backbone.Model**.\n    // This should be overridden in most cases.\n    model: Model,\n\n\n    // preinitialize is an empty function by default. You can override it with a function\n    // or object.  preinitialize will run before any instantiation logic is run in the Collection.\n    preinitialize: function(){},\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // The JSON representation of a Collection is an array of the\n    // models' attributes.\n    toJSON: function(options) {\n      return this.map(function(model) { return model.toJSON(options); });\n    },\n\n    // Proxy `Backbone.sync` by default.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Add a model, or list of models to the set. `models` may be Backbone\n    // Models or raw JavaScript objects to be converted to Models, or any\n    // combination of the two.\n    add: function(models, options) {\n      return this.set(models, _.extend({merge: false}, options, addOptions));\n    },\n\n    // Remove a model, or a list of models from the set.\n    remove: function(models, options) {\n      options = _.extend({}, options);\n      var singular = !_.isArray(models);\n      models = singular ? [models] : models.slice();\n      var removed = this._removeModels(models, options);\n      if (!options.silent && removed.length) {\n        options.changes = {added: [], merged: [], removed: removed};\n        this.trigger('update', this, options);\n      }\n      return singular ? removed[0] : removed;\n    },\n\n    // Update a collection by `set`-ing a new list of models, adding new ones,\n    // removing models that are no longer present, and merging models that\n    // already exist in the collection, as necessary. Similar to **Model#set**,\n    // the core operation for updating the data contained by the collection.\n    set: function(models, options) {\n      if (models == null) return;\n\n      options = _.extend({}, setOptions, options);\n      if (options.parse && !this._isModel(models)) {\n        models = this.parse(models, options) || [];\n      }\n\n      var singular = !_.isArray(models);\n      models = singular ? [models] : models.slice();\n\n      var at = options.at;\n      if (at != null) at = +at;\n      if (at > this.length) at = this.length;\n      if (at < 0) at += this.length + 1;\n\n      var set = [];\n      var toAdd = [];\n      var toMerge = [];\n      var toRemove = [];\n      var modelMap = {};\n\n      var add = options.add;\n      var merge = options.merge;\n      var remove = options.remove;\n\n      var sort = false;\n      var sortable = this.comparator && at == null && options.sort !== false;\n      var sortAttr = _.isString(this.comparator) ? this.comparator : null;\n\n      // Turn bare objects into model references, and prevent invalid models\n      // from being added.\n      var model, i;\n      for (i = 0; i < models.length; i++) {\n        model = models[i];\n\n        // If a duplicate is found, prevent it from being added and\n        // optionally merge it into the existing model.\n        var existing = this.get(model);\n        if (existing) {\n          if (merge && model !== existing) {\n            var attrs = this._isModel(model) ? model.attributes : model;\n            if (options.parse) attrs = existing.parse(attrs, options);\n            existing.set(attrs, options);\n            toMerge.push(existing);\n            if (sortable && !sort) sort = existing.hasChanged(sortAttr);\n          }\n          if (!modelMap[existing.cid]) {\n            modelMap[existing.cid] = true;\n            set.push(existing);\n          }\n          models[i] = existing;\n\n        // If this is a new, valid model, push it to the `toAdd` list.\n        } else if (add) {\n          model = models[i] = this._prepareModel(model, options);\n          if (model) {\n            toAdd.push(model);\n            this._addReference(model, options);\n            modelMap[model.cid] = true;\n            set.push(model);\n          }\n        }\n      }\n\n      // Remove stale models.\n      if (remove) {\n        for (i = 0; i < this.length; i++) {\n          model = this.models[i];\n          if (!modelMap[model.cid]) toRemove.push(model);\n        }\n        if (toRemove.length) this._removeModels(toRemove, options);\n      }\n\n      // See if sorting is needed, update `length` and splice in new models.\n      var orderChanged = false;\n      var replace = !sortable && add && remove;\n      if (set.length && replace) {\n        orderChanged = this.length !== set.length || _.some(this.models, function(m, index) {\n          return m !== set[index];\n        });\n        this.models.length = 0;\n        splice(this.models, set, 0);\n        this.length = this.models.length;\n      } else if (toAdd.length) {\n        if (sortable) sort = true;\n        splice(this.models, toAdd, at == null ? this.length : at);\n        this.length = this.models.length;\n      }\n\n      // Silently sort the collection if appropriate.\n      if (sort) this.sort({silent: true});\n\n      // Unless silenced, it's time to fire all appropriate add/sort/update events.\n      if (!options.silent) {\n        for (i = 0; i < toAdd.length; i++) {\n          if (at != null) options.index = at + i;\n          model = toAdd[i];\n          model.trigger('add', model, this, options);\n        }\n        if (sort || orderChanged) this.trigger('sort', this, options);\n        if (toAdd.length || toRemove.length || toMerge.length) {\n          options.changes = {\n            added: toAdd,\n            removed: toRemove,\n            merged: toMerge\n          };\n          this.trigger('update', this, options);\n        }\n      }\n\n      // Return the added (or merged) model (or models).\n      return singular ? models[0] : models;\n    },\n\n    // When you have more items than you want to add or remove individually,\n    // you can reset the entire set with a new list of models, without firing\n    // any granular `add` or `remove` events. Fires `reset` when finished.\n    // Useful for bulk operations and optimizations.\n    reset: function(models, options) {\n      options = options ? _.clone(options) : {};\n      for (var i = 0; i < this.models.length; i++) {\n        this._removeReference(this.models[i], options);\n      }\n      options.previousModels = this.models;\n      this._reset();\n      models = this.add(models, _.extend({silent: true}, options));\n      if (!options.silent) this.trigger('reset', this, options);\n      return models;\n    },\n\n    // Add a model to the end of the collection.\n    push: function(model, options) {\n      return this.add(model, _.extend({at: this.length}, options));\n    },\n\n    // Remove a model from the end of the collection.\n    pop: function(options) {\n      var model = this.at(this.length - 1);\n      return this.remove(model, options);\n    },\n\n    // Add a model to the beginning of the collection.\n    unshift: function(model, options) {\n      return this.add(model, _.extend({at: 0}, options));\n    },\n\n    // Remove a model from the beginning of the collection.\n    shift: function(options) {\n      var model = this.at(0);\n      return this.remove(model, options);\n    },\n\n    // Slice out a sub-array of models from the collection.\n    slice: function() {\n      return slice.apply(this.models, arguments);\n    },\n\n    // Get a model from the set by id, cid, model object with id or cid\n    // properties, or an attributes object that is transformed through modelId.\n    get: function(obj) {\n      if (obj == null) return void 0;\n      return this._byId[obj] ||\n        this._byId[this.modelId(this._isModel(obj) ? obj.attributes : obj)] ||\n        obj.cid && this._byId[obj.cid];\n    },\n\n    // Returns `true` if the model is in the collection.\n    has: function(obj) {\n      return this.get(obj) != null;\n    },\n\n    // Get the model at the given index.\n    at: function(index) {\n      if (index < 0) index += this.length;\n      return this.models[index];\n    },\n\n    // Return models with matching attributes. Useful for simple cases of\n    // `filter`.\n    where: function(attrs, first) {\n      return this[first ? 'find' : 'filter'](attrs);\n    },\n\n    // Return the first model with matching attributes. Useful for simple cases\n    // of `find`.\n    findWhere: function(attrs) {\n      return this.where(attrs, true);\n    },\n\n    // Force the collection to re-sort itself. You don't need to call this under\n    // normal circumstances, as the set will maintain sort order as each item\n    // is added.\n    sort: function(options) {\n      var comparator = this.comparator;\n      if (!comparator) throw new Error('Cannot sort a set without a comparator');\n      options || (options = {});\n\n      var length = comparator.length;\n      if (_.isFunction(comparator)) comparator = comparator.bind(this);\n\n      // Run sort based on type of `comparator`.\n      if (length === 1 || _.isString(comparator)) {\n        this.models = this.sortBy(comparator);\n      } else {\n        this.models.sort(comparator);\n      }\n      if (!options.silent) this.trigger('sort', this, options);\n      return this;\n    },\n\n    // Pluck an attribute from each model in the collection.\n    pluck: function(attr) {\n      return this.map(attr + '');\n    },\n\n    // Fetch the default set of models for this collection, resetting the\n    // collection when they arrive. If `reset: true` is passed, the response\n    // data will be passed through the `reset` method instead of `set`.\n    fetch: function(options) {\n      options = _.extend({parse: true}, options);\n      var success = options.success;\n      var collection = this;\n      options.success = function(resp) {\n        var method = options.reset ? 'reset' : 'set';\n        collection[method](resp, options);\n        if (success) success.call(options.context, collection, resp, options);\n        collection.trigger('sync', collection, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Create a new instance of a model in this collection. Add the model to the\n    // collection immediately, unless `wait: true` is passed, in which case we\n    // wait for the server to agree.\n    create: function(model, options) {\n      options = options ? _.clone(options) : {};\n      var wait = options.wait;\n      model = this._prepareModel(model, options);\n      if (!model) return false;\n      if (!wait) this.add(model, options);\n      var collection = this;\n      var success = options.success;\n      options.success = function(m, resp, callbackOpts) {\n        if (wait) collection.add(m, callbackOpts);\n        if (success) success.call(callbackOpts.context, m, resp, callbackOpts);\n      };\n      model.save(null, options);\n      return model;\n    },\n\n    // **parse** converts a response into a list of models to be added to the\n    // collection. The default implementation is just to pass it through.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new collection with an identical list of models as this one.\n    clone: function() {\n      return new this.constructor(this.models, {\n        model: this.model,\n        comparator: this.comparator\n      });\n    },\n\n    // Define how to uniquely identify models in the collection.\n    modelId: function(attrs) {\n      return attrs[this.model.prototype.idAttribute || 'id'];\n    },\n\n    // Get an iterator of all models in this collection.\n    values: function() {\n      return new CollectionIterator(this, ITERATOR_VALUES);\n    },\n\n    // Get an iterator of all model IDs in this collection.\n    keys: function() {\n      return new CollectionIterator(this, ITERATOR_KEYS);\n    },\n\n    // Get an iterator of all [ID, model] tuples in this collection.\n    entries: function() {\n      return new CollectionIterator(this, ITERATOR_KEYSVALUES);\n    },\n\n    // Private method to reset all internal state. Called when the collection\n    // is first initialized or reset.\n    _reset: function() {\n      this.length = 0;\n      this.models = [];\n      this._byId  = {};\n    },\n\n    // Prepare a hash of attributes (or other model) to be added to this\n    // collection.\n    _prepareModel: function(attrs, options) {\n      if (this._isModel(attrs)) {\n        if (!attrs.collection) attrs.collection = this;\n        return attrs;\n      }\n      options = options ? _.clone(options) : {};\n      options.collection = this;\n      var model = new this.model(attrs, options);\n      if (!model.validationError) return model;\n      this.trigger('invalid', this, model.validationError, options);\n      return false;\n    },\n\n    // Internal method called by both remove and set.\n    _removeModels: function(models, options) {\n      var removed = [];\n      for (var i = 0; i < models.length; i++) {\n        var model = this.get(models[i]);\n        if (!model) continue;\n\n        var index = this.indexOf(model);\n        this.models.splice(index, 1);\n        this.length--;\n\n        // Remove references before triggering 'remove' event to prevent an\n        // infinite loop. #3693\n        delete this._byId[model.cid];\n        var id = this.modelId(model.attributes);\n        if (id != null) delete this._byId[id];\n\n        if (!options.silent) {\n          options.index = index;\n          model.trigger('remove', model, this, options);\n        }\n\n        removed.push(model);\n        this._removeReference(model, options);\n      }\n      return removed;\n    },\n\n    // Method for checking whether an object should be considered a model for\n    // the purposes of adding to the collection.\n    _isModel: function(model) {\n      return model instanceof Model;\n    },\n\n    // Internal method to create a model's ties to a collection.\n    _addReference: function(model, options) {\n      this._byId[model.cid] = model;\n      var id = this.modelId(model.attributes);\n      if (id != null) this._byId[id] = model;\n      model.on('all', this._onModelEvent, this);\n    },\n\n    // Internal method to sever a model's ties to a collection.\n    _removeReference: function(model, options) {\n      delete this._byId[model.cid];\n      var id = this.modelId(model.attributes);\n      if (id != null) delete this._byId[id];\n      if (this === model.collection) delete model.collection;\n      model.off('all', this._onModelEvent, this);\n    },\n\n    // Internal method called every time a model in the set fires an event.\n    // Sets need to update their indexes when models change ids. All other\n    // events simply proxy through. \"add\" and \"remove\" events that originate\n    // in other collections are ignored.\n    _onModelEvent: function(event, model, collection, options) {\n      if (model) {\n        if ((event === 'add' || event === 'remove') && collection !== this) return;\n        if (event === 'destroy') this.remove(model, options);\n        if (event === 'change') {\n          var prevId = this.modelId(model.previousAttributes());\n          var id = this.modelId(model.attributes);\n          if (prevId !== id) {\n            if (prevId != null) delete this._byId[prevId];\n            if (id != null) this._byId[id] = model;\n          }\n        }\n      }\n      this.trigger.apply(this, arguments);\n    }\n\n  });\n\n  // Defining an @@iterator method implements JavaScript's Iterable protocol.\n  // In modern ES2015 browsers, this value is found at Symbol.iterator.\n  /* global Symbol */\n  var $$iterator = typeof Symbol === 'function' && Symbol.iterator;\n  if ($$iterator) {\n    Collection.prototype[$$iterator] = Collection.prototype.values;\n  }\n\n  // CollectionIterator\n  // ------------------\n\n  // A CollectionIterator implements JavaScript's Iterator protocol, allowing the\n  // use of `for of` loops in modern browsers and interoperation between\n  // Backbone.Collection and other JavaScript functions and third-party libraries\n  // which can operate on Iterables.\n  var CollectionIterator = function(collection, kind) {\n    this._collection = collection;\n    this._kind = kind;\n    this._index = 0;\n  };\n\n  // This \"enum\" defines the three possible kinds of values which can be emitted\n  // by a CollectionIterator that correspond to the values(), keys() and entries()\n  // methods on Collection, respectively.\n  var ITERATOR_VALUES = 1;\n  var ITERATOR_KEYS = 2;\n  var ITERATOR_KEYSVALUES = 3;\n\n  // All Iterators should themselves be Iterable.\n  if ($$iterator) {\n    CollectionIterator.prototype[$$iterator] = function() {\n      return this;\n    };\n  }\n\n  CollectionIterator.prototype.next = function() {\n    if (this._collection) {\n\n      // Only continue iterating if the iterated collection is long enough.\n      if (this._index < this._collection.length) {\n        var model = this._collection.at(this._index);\n        this._index++;\n\n        // Construct a value depending on what kind of values should be iterated.\n        var value;\n        if (this._kind === ITERATOR_VALUES) {\n          value = model;\n        } else {\n          var id = this._collection.modelId(model.attributes);\n          if (this._kind === ITERATOR_KEYS) {\n            value = id;\n          } else { // ITERATOR_KEYSVALUES\n            value = [id, model];\n          }\n        }\n        return {value: value, done: false};\n      }\n\n      // Once exhausted, remove the reference to the collection so future\n      // calls to the next method always return done.\n      this._collection = void 0;\n    }\n\n    return {value: void 0, done: true};\n  };\n\n  // Backbone.View\n  // -------------\n\n  // Backbone Views are almost more convention than they are actual code. A View\n  // is simply a JavaScript object that represents a logical chunk of UI in the\n  // DOM. This might be a single item, an entire list, a sidebar or panel, or\n  // even the surrounding frame which wraps your whole app. Defining a chunk of\n  // UI as a **View** allows you to define your DOM events declaratively, without\n  // having to worry about render order ... and makes it easy for the view to\n  // react to specific changes in the state of your models.\n\n  // Creating a Backbone.View creates its initial element outside of the DOM,\n  // if an existing element is not provided...\n  var View = Backbone.View = function(options) {\n    this.cid = _.uniqueId('view');\n    this.preinitialize.apply(this, arguments);\n    _.extend(this, _.pick(options, viewOptions));\n    this._ensureElement();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regex to split keys for `delegate`.\n  var delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\n  // List of view options to be set as properties.\n  var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];\n\n  // Set up all inheritable **Backbone.View** properties and methods.\n  _.extend(View.prototype, Events, {\n\n    // The default `tagName` of a View's element is `\"div\"`.\n    tagName: 'div',\n\n    // jQuery delegate for element lookup, scoped to DOM elements within the\n    // current view. This should be preferred to global lookups where possible.\n    $: function(selector) {\n      return this.$el.find(selector);\n    },\n\n    // preinitialize is an empty function by default. You can override it with a function\n    // or object.  preinitialize will run before any instantiation logic is run in the View\n    preinitialize: function(){},\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // **render** is the core function that your view should override, in order\n    // to populate its element (`this.el`), with the appropriate HTML. The\n    // convention is for **render** to always return `this`.\n    render: function() {\n      return this;\n    },\n\n    // Remove this view by taking the element out of the DOM, and removing any\n    // applicable Backbone.Events listeners.\n    remove: function() {\n      this._removeElement();\n      this.stopListening();\n      return this;\n    },\n\n    // Remove this view's element from the document and all event listeners\n    // attached to it. Exposed for subclasses using an alternative DOM\n    // manipulation API.\n    _removeElement: function() {\n      this.$el.remove();\n    },\n\n    // Change the view's element (`this.el` property) and re-delegate the\n    // view's events on the new element.\n    setElement: function(element) {\n      this.undelegateEvents();\n      this._setElement(element);\n      this.delegateEvents();\n      return this;\n    },\n\n    // Creates the `this.el` and `this.$el` references for this view using the\n    // given `el`. `el` can be a CSS selector or an HTML string, a jQuery\n    // context or an element. Subclasses can override this to utilize an\n    // alternative DOM manipulation API and are only required to set the\n    // `this.el` property.\n    _setElement: function(el) {\n      this.$el = el instanceof Backbone.$ ? el : Backbone.$(el);\n      this.el = this.$el[0];\n    },\n\n    // Set callbacks, where `this.events` is a hash of\n    //\n    // *{\"event selector\": \"callback\"}*\n    //\n    //     {\n    //       'mousedown .title':  'edit',\n    //       'click .button':     'save',\n    //       'click .open':       function(e) { ... }\n    //     }\n    //\n    // pairs. Callbacks will be bound to the view, with `this` set properly.\n    // Uses event delegation for efficiency.\n    // Omitting the selector binds the event to `this.el`.\n    delegateEvents: function(events) {\n      events || (events = _.result(this, 'events'));\n      if (!events) return this;\n      this.undelegateEvents();\n      for (var key in events) {\n        var method = events[key];\n        if (!_.isFunction(method)) method = this[method];\n        if (!method) continue;\n        var match = key.match(delegateEventSplitter);\n        this.delegate(match[1], match[2], method.bind(this));\n      }\n      return this;\n    },\n\n    // Add a single event listener to the view's element (or a child element\n    // using `selector`). This only works for delegate-able events: not `focus`,\n    // `blur`, and not `change`, `submit`, and `reset` in Internet Explorer.\n    delegate: function(eventName, selector, listener) {\n      this.$el.on(eventName + '.delegateEvents' + this.cid, selector, listener);\n      return this;\n    },\n\n    // Clears all callbacks previously bound to the view by `delegateEvents`.\n    // You usually don't need to use this, but may wish to if you have multiple\n    // Backbone views attached to the same DOM element.\n    undelegateEvents: function() {\n      if (this.$el) this.$el.off('.delegateEvents' + this.cid);\n      return this;\n    },\n\n    // A finer-grained `undelegateEvents` for removing a single delegated event.\n    // `selector` and `listener` are both optional.\n    undelegate: function(eventName, selector, listener) {\n      this.$el.off(eventName + '.delegateEvents' + this.cid, selector, listener);\n      return this;\n    },\n\n    // Produces a DOM element to be assigned to your view. Exposed for\n    // subclasses using an alternative DOM manipulation API.\n    _createElement: function(tagName) {\n      return document.createElement(tagName);\n    },\n\n    // Ensure that the View has a DOM element to render into.\n    // If `this.el` is a string, pass it through `$()`, take the first\n    // matching element, and re-assign it to `el`. Otherwise, create\n    // an element from the `id`, `className` and `tagName` properties.\n    _ensureElement: function() {\n      if (!this.el) {\n        var attrs = _.extend({}, _.result(this, 'attributes'));\n        if (this.id) attrs.id = _.result(this, 'id');\n        if (this.className) attrs['class'] = _.result(this, 'className');\n        this.setElement(this._createElement(_.result(this, 'tagName')));\n        this._setAttributes(attrs);\n      } else {\n        this.setElement(_.result(this, 'el'));\n      }\n    },\n\n    // Set attributes from a hash on this view's element.  Exposed for\n    // subclasses using an alternative DOM manipulation API.\n    _setAttributes: function(attributes) {\n      this.$el.attr(attributes);\n    }\n\n  });\n\n  // Proxy Backbone class methods to Underscore functions, wrapping the model's\n  // `attributes` object or collection's `models` array behind the scenes.\n  //\n  // collection.filter(function(model) { return model.get('age') > 10 });\n  // collection.each(this.addView);\n  //\n  // `Function#apply` can be slow so we use the method's arg count, if we know it.\n  var addMethod = function(base, length, method, attribute) {\n    switch (length) {\n      case 1: return function() {\n        return base[method](this[attribute]);\n      };\n      case 2: return function(value) {\n        return base[method](this[attribute], value);\n      };\n      case 3: return function(iteratee, context) {\n        return base[method](this[attribute], cb(iteratee, this), context);\n      };\n      case 4: return function(iteratee, defaultVal, context) {\n        return base[method](this[attribute], cb(iteratee, this), defaultVal, context);\n      };\n      default: return function() {\n        var args = slice.call(arguments);\n        args.unshift(this[attribute]);\n        return base[method].apply(base, args);\n      };\n    }\n  };\n\n  var addUnderscoreMethods = function(Class, base, methods, attribute) {\n    _.each(methods, function(length, method) {\n      if (base[method]) Class.prototype[method] = addMethod(base, length, method, attribute);\n    });\n  };\n\n  // Support `collection.sortBy('attr')` and `collection.findWhere({id: 1})`.\n  var cb = function(iteratee, instance) {\n    if (_.isFunction(iteratee)) return iteratee;\n    if (_.isObject(iteratee) && !instance._isModel(iteratee)) return modelMatcher(iteratee);\n    if (_.isString(iteratee)) return function(model) { return model.get(iteratee); };\n    return iteratee;\n  };\n  var modelMatcher = function(attrs) {\n    var matcher = _.matches(attrs);\n    return function(model) {\n      return matcher(model.attributes);\n    };\n  };\n\n  // Underscore methods that we want to implement on the Collection.\n  // 90% of the core usefulness of Backbone Collections is actually implemented\n  // right here:\n  var collectionMethods = {forEach: 3, each: 3, map: 3, collect: 3, reduce: 0,\n    foldl: 0, inject: 0, reduceRight: 0, foldr: 0, find: 3, detect: 3, filter: 3,\n    select: 3, reject: 3, every: 3, all: 3, some: 3, any: 3, include: 3, includes: 3,\n    contains: 3, invoke: 0, max: 3, min: 3, toArray: 1, size: 1, first: 3,\n    head: 3, take: 3, initial: 3, rest: 3, tail: 3, drop: 3, last: 3,\n    without: 0, difference: 0, indexOf: 3, shuffle: 1, lastIndexOf: 3,\n    isEmpty: 1, chain: 1, sample: 3, partition: 3, groupBy: 3, countBy: 3,\n    sortBy: 3, indexBy: 3, findIndex: 3, findLastIndex: 3};\n\n\n  // Underscore methods that we want to implement on the Model, mapped to the\n  // number of arguments they take.\n  var modelMethods = {keys: 1, values: 1, pairs: 1, invert: 1, pick: 0,\n    omit: 0, chain: 1, isEmpty: 1};\n\n  // Mix in each Underscore method as a proxy to `Collection#models`.\n\n  _.each([\n    [Collection, collectionMethods, 'models'],\n    [Model, modelMethods, 'attributes']\n  ], function(config) {\n    var Base = config[0],\n        methods = config[1],\n        attribute = config[2];\n\n    Base.mixin = function(obj) {\n      var mappings = _.reduce(_.functions(obj), function(memo, name) {\n        memo[name] = 0;\n        return memo;\n      }, {});\n      addUnderscoreMethods(Base, obj, mappings, attribute);\n    };\n\n    addUnderscoreMethods(Base, _, methods, attribute);\n  });\n\n  // Backbone.sync\n  // -------------\n\n  // Override this function to change the manner in which Backbone persists\n  // models to the server. You will be passed the type of request, and the\n  // model in question. By default, makes a RESTful Ajax request\n  // to the model's `url()`. Some possible customizations could be:\n  //\n  // * Use `setTimeout` to batch rapid-fire updates into a single request.\n  // * Send up the models as XML instead of JSON.\n  // * Persist models via WebSockets instead of Ajax.\n  //\n  // Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests\n  // as `POST`, with a `_method` parameter containing the true HTTP method,\n  // as well as all requests with the body as `application/x-www-form-urlencoded`\n  // instead of `application/json` with the model in a param named `model`.\n  // Useful when interfacing with server-side languages like **PHP** that make\n  // it difficult to read the body of `PUT` requests.\n  Backbone.sync = function(method, model, options) {\n    var type = methodMap[method];\n\n    // Default options, unless specified.\n    _.defaults(options || (options = {}), {\n      emulateHTTP: Backbone.emulateHTTP,\n      emulateJSON: Backbone.emulateJSON\n    });\n\n    // Default JSON-request options.\n    var params = {type: type, dataType: 'json'};\n\n    // Ensure that we have a URL.\n    if (!options.url) {\n      params.url = _.result(model, 'url') || urlError();\n    }\n\n    // Ensure that we have the appropriate request data.\n    if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {\n      params.contentType = 'application/json';\n      params.data = JSON.stringify(options.attrs || model.toJSON(options));\n    }\n\n    // For older servers, emulate JSON by encoding the request into an HTML-form.\n    if (options.emulateJSON) {\n      params.contentType = 'application/x-www-form-urlencoded';\n      params.data = params.data ? {model: params.data} : {};\n    }\n\n    // For older servers, emulate HTTP by mimicking the HTTP method with `_method`\n    // And an `X-HTTP-Method-Override` header.\n    if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {\n      params.type = 'POST';\n      if (options.emulateJSON) params.data._method = type;\n      var beforeSend = options.beforeSend;\n      options.beforeSend = function(xhr) {\n        xhr.setRequestHeader('X-HTTP-Method-Override', type);\n        if (beforeSend) return beforeSend.apply(this, arguments);\n      };\n    }\n\n    // Don't process data on a non-GET request.\n    if (params.type !== 'GET' && !options.emulateJSON) {\n      params.processData = false;\n    }\n\n    // Pass along `textStatus` and `errorThrown` from jQuery.\n    var error = options.error;\n    options.error = function(xhr, textStatus, errorThrown) {\n      options.textStatus = textStatus;\n      options.errorThrown = errorThrown;\n      if (error) error.call(options.context, xhr, textStatus, errorThrown);\n    };\n\n    // Make the request, allowing the user to override any Ajax options.\n    var xhr = options.xhr = Backbone.ajax(_.extend(params, options));\n    model.trigger('request', model, xhr, options);\n    return xhr;\n  };\n\n  // Map from CRUD to HTTP for our default `Backbone.sync` implementation.\n  var methodMap = {\n    create: 'POST',\n    update: 'PUT',\n    patch: 'PATCH',\n    delete: 'DELETE',\n    read: 'GET'\n  };\n\n  // Set the default implementation of `Backbone.ajax` to proxy through to `$`.\n  // Override this if you'd like to use a different library.\n  Backbone.ajax = function() {\n    return Backbone.$.ajax.apply(Backbone.$, arguments);\n  };\n\n  // Backbone.Router\n  // ---------------\n\n  // Routers map faux-URLs to actions, and fire events when routes are\n  // matched. Creating a new one sets its `routes` hash, if not set statically.\n  var Router = Backbone.Router = function(options) {\n    options || (options = {});\n    this.preinitialize.apply(this, arguments);\n    if (options.routes) this.routes = options.routes;\n    this._bindRoutes();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regular expressions for matching named param parts and splatted\n  // parts of route strings.\n  var optionalParam = /\\((.*?)\\)/g;\n  var namedParam    = /(\\(\\?)?:\\w+/g;\n  var splatParam    = /\\*\\w+/g;\n  var escapeRegExp  = /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;\n\n  // Set up all inheritable **Backbone.Router** properties and methods.\n  _.extend(Router.prototype, Events, {\n\n    // preinitialize is an empty function by default. You can override it with a function\n    // or object.  preinitialize will run before any instantiation logic is run in the Router.\n    preinitialize: function(){},\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Manually bind a single named route to a callback. For example:\n    //\n    //     this.route('search/:query/p:num', 'search', function(query, num) {\n    //       ...\n    //     });\n    //\n    route: function(route, name, callback) {\n      if (!_.isRegExp(route)) route = this._routeToRegExp(route);\n      if (_.isFunction(name)) {\n        callback = name;\n        name = '';\n      }\n      if (!callback) callback = this[name];\n      var router = this;\n      Backbone.history.route(route, function(fragment) {\n        var args = router._extractParameters(route, fragment);\n        if (router.execute(callback, args, name) !== false) {\n          router.trigger.apply(router, ['route:' + name].concat(args));\n          router.trigger('route', name, args);\n          Backbone.history.trigger('route', router, name, args);\n        }\n      });\n      return this;\n    },\n\n    // Execute a route handler with the provided parameters.  This is an\n    // excellent place to do pre-route setup or post-route cleanup.\n    execute: function(callback, args, name) {\n      if (callback) callback.apply(this, args);\n    },\n\n    // Simple proxy to `Backbone.history` to save a fragment into the history.\n    navigate: function(fragment, options) {\n      Backbone.history.navigate(fragment, options);\n      return this;\n    },\n\n    // Bind all defined routes to `Backbone.history`. We have to reverse the\n    // order of the routes here to support behavior where the most general\n    // routes can be defined at the bottom of the route map.\n    _bindRoutes: function() {\n      if (!this.routes) return;\n      this.routes = _.result(this, 'routes');\n      var route, routes = _.keys(this.routes);\n      while ((route = routes.pop()) != null) {\n        this.route(route, this.routes[route]);\n      }\n    },\n\n    // Convert a route string into a regular expression, suitable for matching\n    // against the current location hash.\n    _routeToRegExp: function(route) {\n      route = route.replace(escapeRegExp, '\\\\$&')\n        .replace(optionalParam, '(?:$1)?')\n        .replace(namedParam, function(match, optional) {\n          return optional ? match : '([^/?]+)';\n        })\n        .replace(splatParam, '([^?]*?)');\n      return new RegExp('^' + route + '(?:\\\\?([\\\\s\\\\S]*))?$');\n    },\n\n    // Given a route, and a URL fragment that it matches, return the array of\n    // extracted decoded parameters. Empty or unmatched parameters will be\n    // treated as `null` to normalize cross-browser behavior.\n    _extractParameters: function(route, fragment) {\n      var params = route.exec(fragment).slice(1);\n      return _.map(params, function(param, i) {\n        // Don't decode the search params.\n        if (i === params.length - 1) return param || null;\n        return param ? decodeURIComponent(param) : null;\n      });\n    }\n\n  });\n\n  // Backbone.History\n  // ----------------\n\n  // Handles cross-browser history management, based on either\n  // [pushState](http://diveintohtml5.info/history.html) and real URLs, or\n  // [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)\n  // and URL fragments. If the browser supports neither (old IE, natch),\n  // falls back to polling.\n  var History = Backbone.History = function() {\n    this.handlers = [];\n    this.checkUrl = this.checkUrl.bind(this);\n\n    // Ensure that `History` can be used outside of the browser.\n    if (typeof window !== 'undefined') {\n      this.location = window.location;\n      this.history = window.history;\n    }\n  };\n\n  // Cached regex for stripping a leading hash/slash and trailing space.\n  var routeStripper = /^[#\\/]|\\s+$/g;\n\n  // Cached regex for stripping leading and trailing slashes.\n  var rootStripper = /^\\/+|\\/+$/g;\n\n  // Cached regex for stripping urls of hash.\n  var pathStripper = /#.*$/;\n\n  // Has the history handling already been started?\n  History.started = false;\n\n  // Set up all inheritable **Backbone.History** properties and methods.\n  _.extend(History.prototype, Events, {\n\n    // The default interval to poll for hash changes, if necessary, is\n    // twenty times a second.\n    interval: 50,\n\n    // Are we at the app root?\n    atRoot: function() {\n      var path = this.location.pathname.replace(/[^\\/]$/, '$&/');\n      return path === this.root && !this.getSearch();\n    },\n\n    // Does the pathname match the root?\n    matchRoot: function() {\n      var path = this.decodeFragment(this.location.pathname);\n      var rootPath = path.slice(0, this.root.length - 1) + '/';\n      return rootPath === this.root;\n    },\n\n    // Unicode characters in `location.pathname` are percent encoded so they're\n    // decoded for comparison. `%25` should not be decoded since it may be part\n    // of an encoded parameter.\n    decodeFragment: function(fragment) {\n      return decodeURI(fragment.replace(/%25/g, '%2525'));\n    },\n\n    // In IE6, the hash fragment and search params are incorrect if the\n    // fragment contains `?`.\n    getSearch: function() {\n      var match = this.location.href.replace(/#.*/, '').match(/\\?.+/);\n      return match ? match[0] : '';\n    },\n\n    // Gets the true hash value. Cannot use location.hash directly due to bug\n    // in Firefox where location.hash will always be decoded.\n    getHash: function(window) {\n      var match = (window || this).location.href.match(/#(.*)$/);\n      return match ? match[1] : '';\n    },\n\n    // Get the pathname and search params, without the root.\n    getPath: function() {\n      var path = this.decodeFragment(\n        this.location.pathname + this.getSearch()\n      ).slice(this.root.length - 1);\n      return path.charAt(0) === '/' ? path.slice(1) : path;\n    },\n\n    // Get the cross-browser normalized URL fragment from the path or hash.\n    getFragment: function(fragment) {\n      if (fragment == null) {\n        if (this._usePushState || !this._wantsHashChange) {\n          fragment = this.getPath();\n        } else {\n          fragment = this.getHash();\n        }\n      }\n      return fragment.replace(routeStripper, '');\n    },\n\n    // Start the hash change handling, returning `true` if the current URL matches\n    // an existing route, and `false` otherwise.\n    start: function(options) {\n      if (History.started) throw new Error('Backbone.history has already been started');\n      History.started = true;\n\n      // Figure out the initial configuration. Do we need an iframe?\n      // Is pushState desired ... is it available?\n      this.options          = _.extend({root: '/'}, this.options, options);\n      this.root             = this.options.root;\n      this._wantsHashChange = this.options.hashChange !== false;\n      this._hasHashChange   = 'onhashchange' in window && (document.documentMode === void 0 || document.documentMode > 7);\n      this._useHashChange   = this._wantsHashChange && this._hasHashChange;\n      this._wantsPushState  = !!this.options.pushState;\n      this._hasPushState    = !!(this.history && this.history.pushState);\n      this._usePushState    = this._wantsPushState && this._hasPushState;\n      this.fragment         = this.getFragment();\n\n      // Normalize root to always include a leading and trailing slash.\n      this.root = ('/' + this.root + '/').replace(rootStripper, '/');\n\n      // Transition from hashChange to pushState or vice versa if both are\n      // requested.\n      if (this._wantsHashChange && this._wantsPushState) {\n\n        // If we've started off with a route from a `pushState`-enabled\n        // browser, but we're currently in a browser that doesn't support it...\n        if (!this._hasPushState && !this.atRoot()) {\n          var rootPath = this.root.slice(0, -1) || '/';\n          this.location.replace(rootPath + '#' + this.getPath());\n          // Return immediately as browser will do redirect to new url\n          return true;\n\n        // Or if we've started out with a hash-based route, but we're currently\n        // in a browser where it could be `pushState`-based instead...\n        } else if (this._hasPushState && this.atRoot()) {\n          this.navigate(this.getHash(), {replace: true});\n        }\n\n      }\n\n      // Proxy an iframe to handle location events if the browser doesn't\n      // support the `hashchange` event, HTML5 history, or the user wants\n      // `hashChange` but not `pushState`.\n      if (!this._hasHashChange && this._wantsHashChange && !this._usePushState) {\n        this.iframe = document.createElement('iframe');\n        this.iframe.src = 'javascript:0';\n        this.iframe.style.display = 'none';\n        this.iframe.tabIndex = -1;\n        var body = document.body;\n        // Using `appendChild` will throw on IE < 9 if the document is not ready.\n        var iWindow = body.insertBefore(this.iframe, body.firstChild).contentWindow;\n        iWindow.document.open();\n        iWindow.document.close();\n        iWindow.location.hash = '#' + this.fragment;\n      }\n\n      // Add a cross-platform `addEventListener` shim for older browsers.\n      var addEventListener = window.addEventListener || function(eventName, listener) {\n        return attachEvent('on' + eventName, listener);\n      };\n\n      // Depending on whether we're using pushState or hashes, and whether\n      // 'onhashchange' is supported, determine how we check the URL state.\n      if (this._usePushState) {\n        addEventListener('popstate', this.checkUrl, false);\n      } else if (this._useHashChange && !this.iframe) {\n        addEventListener('hashchange', this.checkUrl, false);\n      } else if (this._wantsHashChange) {\n        this._checkUrlInterval = setInterval(this.checkUrl, this.interval);\n      }\n\n      if (!this.options.silent) return this.loadUrl();\n    },\n\n    // Disable Backbone.history, perhaps temporarily. Not useful in a real app,\n    // but possibly useful for unit testing Routers.\n    stop: function() {\n      // Add a cross-platform `removeEventListener` shim for older browsers.\n      var removeEventListener = window.removeEventListener || function(eventName, listener) {\n        return detachEvent('on' + eventName, listener);\n      };\n\n      // Remove window listeners.\n      if (this._usePushState) {\n        removeEventListener('popstate', this.checkUrl, false);\n      } else if (this._useHashChange && !this.iframe) {\n        removeEventListener('hashchange', this.checkUrl, false);\n      }\n\n      // Clean up the iframe if necessary.\n      if (this.iframe) {\n        document.body.removeChild(this.iframe);\n        this.iframe = null;\n      }\n\n      // Some environments will throw when clearing an undefined interval.\n      if (this._checkUrlInterval) clearInterval(this._checkUrlInterval);\n      History.started = false;\n    },\n\n    // Add a route to be tested when the fragment changes. Routes added later\n    // may override previous routes.\n    route: function(route, callback) {\n      this.handlers.unshift({route: route, callback: callback});\n    },\n\n    // Checks the current URL to see if it has changed, and if it has,\n    // calls `loadUrl`, normalizing across the hidden iframe.\n    checkUrl: function(e) {\n      var current = this.getFragment();\n\n      // If the user pressed the back button, the iframe's hash will have\n      // changed and we should use that for comparison.\n      if (current === this.fragment && this.iframe) {\n        current = this.getHash(this.iframe.contentWindow);\n      }\n\n      if (current === this.fragment) return false;\n      if (this.iframe) this.navigate(current);\n      this.loadUrl();\n    },\n\n    // Attempt to load the current URL fragment. If a route succeeds with a\n    // match, returns `true`. If no defined routes matches the fragment,\n    // returns `false`.\n    loadUrl: function(fragment) {\n      // If the root doesn't match, no routes can match either.\n      if (!this.matchRoot()) return false;\n      fragment = this.fragment = this.getFragment(fragment);\n      return _.some(this.handlers, function(handler) {\n        if (handler.route.test(fragment)) {\n          handler.callback(fragment);\n          return true;\n        }\n      });\n    },\n\n    // Save a fragment into the hash history, or replace the URL state if the\n    // 'replace' option is passed. You are responsible for properly URL-encoding\n    // the fragment in advance.\n    //\n    // The options object can contain `trigger: true` if you wish to have the\n    // route callback be fired (not usually desirable), or `replace: true`, if\n    // you wish to modify the current URL without adding an entry to the history.\n    navigate: function(fragment, options) {\n      if (!History.started) return false;\n      if (!options || options === true) options = {trigger: !!options};\n\n      // Normalize the fragment.\n      fragment = this.getFragment(fragment || '');\n\n      // Don't include a trailing slash on the root.\n      var rootPath = this.root;\n      if (fragment === '' || fragment.charAt(0) === '?') {\n        rootPath = rootPath.slice(0, -1) || '/';\n      }\n      var url = rootPath + fragment;\n\n      // Strip the fragment of the query and hash for matching.\n      fragment = fragment.replace(pathStripper, '');\n\n      // Decode for matching.\n      var decodedFragment = this.decodeFragment(fragment);\n\n      if (this.fragment === decodedFragment) return;\n      this.fragment = decodedFragment;\n\n      // If pushState is available, we use it to set the fragment as a real URL.\n      if (this._usePushState) {\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n\n      // If hash changes haven't been explicitly disabled, update the hash\n      // fragment to store history.\n      } else if (this._wantsHashChange) {\n        this._updateHash(this.location, fragment, options.replace);\n        if (this.iframe && fragment !== this.getHash(this.iframe.contentWindow)) {\n          var iWindow = this.iframe.contentWindow;\n\n          // Opening and closing the iframe tricks IE7 and earlier to push a\n          // history entry on hash-tag change.  When replace is true, we don't\n          // want this.\n          if (!options.replace) {\n            iWindow.document.open();\n            iWindow.document.close();\n          }\n\n          this._updateHash(iWindow.location, fragment, options.replace);\n        }\n\n      // If you've told us that you explicitly don't want fallback hashchange-\n      // based history, then `navigate` becomes a page refresh.\n      } else {\n        return this.location.assign(url);\n      }\n      if (options.trigger) return this.loadUrl(fragment);\n    },\n\n    // Update the hash location, either replacing the current entry, or adding\n    // a new one to the browser history.\n    _updateHash: function(location, fragment, replace) {\n      if (replace) {\n        var href = location.href.replace(/(javascript:|#).*$/, '');\n        location.replace(href + '#' + fragment);\n      } else {\n        // Some browsers require that `hash` contains a leading #.\n        location.hash = '#' + fragment;\n      }\n    }\n\n  });\n\n  // Create the default Backbone.history.\n  Backbone.history = new History;\n\n  // Helpers\n  // -------\n\n  // Helper function to correctly set up the prototype chain for subclasses.\n  // Similar to `goog.inherits`, but uses a hash of prototype properties and\n  // class properties to be extended.\n  var extend = function(protoProps, staticProps) {\n    var parent = this;\n    var child;\n\n    // The constructor function for the new subclass is either defined by you\n    // (the \"constructor\" property in your `extend` definition), or defaulted\n    // by us to simply call the parent constructor.\n    if (protoProps && _.has(protoProps, 'constructor')) {\n      child = protoProps.constructor;\n    } else {\n      child = function(){ return parent.apply(this, arguments); };\n    }\n\n    // Add static properties to the constructor function, if supplied.\n    _.extend(child, parent, staticProps);\n\n    // Set the prototype chain to inherit from `parent`, without calling\n    // `parent`'s constructor function and add the prototype properties.\n    child.prototype = _.create(parent.prototype, protoProps);\n    child.prototype.constructor = child;\n\n    // Set a convenience property in case the parent's prototype is needed\n    // later.\n    child.__super__ = parent.prototype;\n\n    return child;\n  };\n\n  // Set up inheritance for the model, collection, router, view and history.\n  Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;\n\n  // Throw an error when a URL is needed, and none is supplied.\n  var urlError = function() {\n    throw new Error('A \"url\" property or function must be specified');\n  };\n\n  // Wrap an optional error callback with a fallback error event.\n  var wrapError = function(model, options) {\n    var error = options.error;\n    options.error = function(resp) {\n      if (error) error.call(options.context, model, resp, options);\n      model.trigger('error', model, resp, options);\n    };\n  };\n\n  return Backbone;\n});\n","// Current version.\nexport var VERSION = '1.11.0';\n\n// Establish the root object, `window` (`self`) in the browser, `global`\n// on the server, or `this` in some virtual machines. We use `self`\n// instead of `window` for `WebWorker` support.\nexport var root = typeof self == 'object' && self.self === self && self ||\n          typeof global == 'object' && global.global === global && global ||\n          Function('return this')() ||\n          {};\n\n// Save bytes in the minified (but not gzipped) version:\nexport var ArrayProto = Array.prototype, ObjProto = Object.prototype;\nexport var SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;\n\n// Create quick reference variables for speed access to core prototypes.\nexport var push = ArrayProto.push,\n    slice = ArrayProto.slice,\n    toString = ObjProto.toString,\n    hasOwnProperty = ObjProto.hasOwnProperty;\n\n// Modern feature detection.\nexport var supportsArrayBuffer = typeof ArrayBuffer !== 'undefined';\n\n// All **ECMAScript 5+** native function implementations that we hope to use\n// are declared here.\nexport var nativeIsArray = Array.isArray,\n    nativeKeys = Object.keys,\n    nativeCreate = Object.create,\n    nativeIsView = supportsArrayBuffer && ArrayBuffer.isView;\n\n// Create references to these builtin functions because we override them.\nexport var _isNaN = isNaN,\n    _isFinite = isFinite;\n\n// Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\nexport var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\nexport var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n  'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n// The largest integer that can be represented exactly.\nexport var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n","// Some functions take a variable number of arguments, or a few expected\n// arguments at the beginning and then a variable number of values to operate\n// on. This helper accumulates all remaining arguments past the functions\n// argument length (or an explicit `startIndex`), into an array that becomes\n// the last argument. Similar to ES6s \"rest parameter\".\nexport default function restArguments(func, startIndex) {\n  startIndex = startIndex == null ? func.length - 1 : +startIndex;\n  return function() {\n    var length = Math.max(arguments.length - startIndex, 0),\n        rest = Array(length),\n        index = 0;\n    for (; index < length; index++) {\n      rest[index] = arguments[index + startIndex];\n    }\n    switch (startIndex) {\n      case 0: return func.call(this, rest);\n      case 1: return func.call(this, arguments[0], rest);\n      case 2: return func.call(this, arguments[0], arguments[1], rest);\n    }\n    var args = Array(startIndex + 1);\n    for (index = 0; index < startIndex; index++) {\n      args[index] = arguments[index];\n    }\n    args[startIndex] = rest;\n    return func.apply(this, args);\n  };\n}\n","// Is a given variable an object?\nexport default function isObject(obj) {\n  var type = typeof obj;\n  return type === 'function' || type === 'object' && !!obj;\n}\n","// Is a given value equal to null?\nexport default function isNull(obj) {\n  return obj === null;\n}\n","// Is a given variable undefined?\nexport default function isUndefined(obj) {\n  return obj === void 0;\n}\n","import { toString } from './_setup.js';\n\n// Is a given value a boolean?\nexport default function isBoolean(obj) {\n  return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n}\n","// Is a given value a DOM element?\nexport default function isElement(obj) {\n  return !!(obj && obj.nodeType === 1);\n}\n","import { toString } from './_setup.js';\n\n// Internal function for creating a `toString`-based type tester.\nexport default function tagTester(name) {\n  return function(obj) {\n    return toString.call(obj) === '[object ' + name + ']';\n  };\n}\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('String');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Number');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Date');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('RegExp');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Error');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Symbol');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Map');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('WeakMap');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Set');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('WeakSet');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('ArrayBuffer');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('DataView');\n","import { nativeIsArray } from './_setup.js';\nimport tagTester from './_tagTester.js';\n\n// Is a given value an array?\n// Delegates to ECMA5's native `Array.isArray`.\nexport default nativeIsArray || tagTester('Array');\n","import tagTester from './_tagTester.js';\nimport { root } from './_setup.js';\n\nvar isFunction = tagTester('Function');\n\n// Optimize `isFunction` if appropriate. Work around some `typeof` bugs in old\n// v8, IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).\nvar nodelist = root.document && root.document.childNodes;\nif (typeof /./ != 'function' && typeof Int8Array != 'object' && typeof nodelist != 'function') {\n  isFunction = function(obj) {\n    return typeof obj == 'function' || false;\n  };\n}\n\nexport default isFunction;\n","import { hasOwnProperty } from './_setup.js';\n\n// Internal function to check whether `key` is an own property name of `obj`.\nexport default function has(obj, key) {\n  return obj != null && hasOwnProperty.call(obj, key);\n}\n","import tagTester from './_tagTester.js';\nimport has from './_has.js';\n\nvar isArguments = tagTester('Arguments');\n\n// Define a fallback version of the method in browsers (ahem, IE < 9), where\n// there isn't any inspectable \"Arguments\" type.\n(function() {\n  if (!isArguments(arguments)) {\n    isArguments = function(obj) {\n      return has(obj, 'callee');\n    };\n  }\n}());\n\nexport default isArguments;\n","import { _isFinite } from './_setup.js';\nimport isSymbol from './isSymbol.js';\n\n// Is a given object a finite number?\nexport default function isFinite(obj) {\n  return !isSymbol(obj) && _isFinite(obj) && !isNaN(parseFloat(obj));\n}\n","import { _isNaN } from './_setup.js';\nimport isNumber from './isNumber.js';\n\n// Is the given value `NaN`?\nexport default function isNaN(obj) {\n  return isNumber(obj) && _isNaN(obj);\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function constant(value) {\n  return function() {\n    return value;\n  };\n}\n","import { MAX_ARRAY_INDEX } from './_setup.js';\n\n// Common internal logic for `isArrayLike` and `isBufferLike`.\nexport default function createSizePropertyCheck(getSizeProperty) {\n  return function(collection) {\n    var sizeProperty = getSizeProperty(collection);\n    return typeof sizeProperty == 'number' && sizeProperty >= 0 && sizeProperty <= MAX_ARRAY_INDEX;\n  }\n}\n","// Internal helper to generate a function to obtain property `key` from `obj`.\nexport default function shallowProperty(key) {\n  return function(obj) {\n    return obj == null ? void 0 : obj[key];\n  };\n}\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `byteLength` property of an object.\nexport default shallowProperty('byteLength');\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getByteLength from './_getByteLength.js';\n\n// Internal helper to determine whether we should spend extensive checks against\n// `ArrayBuffer` et al.\nexport default createSizePropertyCheck(getByteLength);\n","import { supportsArrayBuffer, nativeIsView, toString } from './_setup.js';\nimport isDataView from './isDataView.js';\nimport constant from './constant.js';\nimport isBufferLike from './_isBufferLike.js';\n\n// Is a given value a typed array?\nvar typedArrayPattern = /\\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\\]/;\nfunction isTypedArray(obj) {\n  // `ArrayBuffer.isView` is the most future-proof, so use it when available.\n  // Otherwise, fall back on the above regular expression.\n  return nativeIsView ? (nativeIsView(obj) && !isDataView(obj)) :\n                isBufferLike(obj) && typedArrayPattern.test(toString.call(obj));\n}\n\nexport default supportsArrayBuffer ? isTypedArray : constant(false);\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `length` property of an object.\nexport default shallowProperty('length');\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getLength from './_getLength.js';\n\n// Internal helper for collection methods to determine whether a collection\n// should be iterated as an array or as an object.\n// Related: https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n// Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\nexport default createSizePropertyCheck(getLength);\n","import { nonEnumerableProps, ObjProto } from './_setup.js';\nimport isFunction from './isFunction.js';\nimport has from './_has.js';\n\n// Internal helper to create a simple lookup structure.\n// `collectNonEnumProps` used to depend on `_.contains`, but this led to\n// circular imports. `emulatedSet` is a one-off solution that only works for\n// arrays of strings.\nfunction emulatedSet(keys) {\n  var hash = {};\n  for (var l = keys.length, i = 0; i < l; ++i) hash[keys[i]] = true;\n  return {\n    contains: function(key) { return hash[key]; },\n    push: function(key) {\n      hash[key] = true;\n      return keys.push(key);\n    }\n  };\n}\n\n// Internal helper. Checks `keys` for the presence of keys in IE < 9 that won't\n// be iterated by `for key in ...` and thus missed. Extends `keys` in place if\n// needed.\nexport default function collectNonEnumProps(obj, keys) {\n  keys = emulatedSet(keys);\n  var nonEnumIdx = nonEnumerableProps.length;\n  var constructor = obj.constructor;\n  var proto = isFunction(constructor) && constructor.prototype || ObjProto;\n\n  // Constructor is a special case.\n  var prop = 'constructor';\n  if (has(obj, prop) && !keys.contains(prop)) keys.push(prop);\n\n  while (nonEnumIdx--) {\n    prop = nonEnumerableProps[nonEnumIdx];\n    if (prop in obj && obj[prop] !== proto[prop] && !keys.contains(prop)) {\n      keys.push(prop);\n    }\n  }\n}\n","import isObject from './isObject.js';\nimport { nativeKeys, hasEnumBug } from './_setup.js';\nimport has from './_has.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve the names of an object's own properties.\n// Delegates to **ECMAScript 5**'s native `Object.keys`.\nexport default function keys(obj) {\n  if (!isObject(obj)) return [];\n  if (nativeKeys) return nativeKeys(obj);\n  var keys = [];\n  for (var key in obj) if (has(obj, key)) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport isArray from './isArray.js';\nimport isString from './isString.js';\nimport isArguments from './isArguments.js';\nimport keys from './keys.js';\n\n// Is a given array, string, or object empty?\n// An \"empty\" object has no enumerable own-properties.\nexport default function isEmpty(obj) {\n  if (obj == null) return true;\n  // Skip the more expensive `toString`-based type checks if `obj` has no\n  // `.length`.\n  if (isArrayLike(obj) && (isArray(obj) || isString(obj) || isArguments(obj))) return obj.length === 0;\n  return keys(obj).length === 0;\n}\n","import keys from './keys.js';\n\n// Returns whether an object has a given set of `key:value` pairs.\nexport default function isMatch(object, attrs) {\n  var _keys = keys(attrs), length = _keys.length;\n  if (object == null) return !length;\n  var obj = Object(object);\n  for (var i = 0; i < length; i++) {\n    var key = _keys[i];\n    if (attrs[key] !== obj[key] || !(key in obj)) return false;\n  }\n  return true;\n}\n","import { VERSION } from './_setup.js';\n\n// If Underscore is called as a function, it returns a wrapped object that can\n// be used OO-style. This wrapper holds altered versions of all functions added\n// through `_.mixin`. Wrapped objects may be chained.\nexport default function _(obj) {\n  if (obj instanceof _) return obj;\n  if (!(this instanceof _)) return new _(obj);\n  this._wrapped = obj;\n}\n\n_.VERSION = VERSION;\n\n// Extracts the result from a wrapped and chained object.\n_.prototype.value = function() {\n  return this._wrapped;\n};\n\n// Provide unwrapping proxies for some methods used in engine operations\n// such as arithmetic and JSON stringification.\n_.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n_.prototype.toString = function() {\n  return String(this._wrapped);\n};\n","import _ from './underscore.js';\nimport { toString, SymbolProto } from './_setup.js';\nimport getByteLength from './_getByteLength.js';\nimport isTypedArray from './isTypedArray.js';\nimport isFunction from './isFunction.js';\nimport keys from './keys.js';\nimport has from './_has.js';\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction eq(a, b, aStack, bStack) {\n  // Identical objects are equal. `0 === -0`, but they aren't identical.\n  // See the [Harmony `egal` proposal](https://wiki.ecmascript.org/doku.php?id=harmony:egal).\n  if (a === b) return a !== 0 || 1 / a === 1 / b;\n  // `null` or `undefined` only equal to itself (strict comparison).\n  if (a == null || b == null) return false;\n  // `NaN`s are equivalent, but non-reflexive.\n  if (a !== a) return b !== b;\n  // Exhaust primitive checks\n  var type = typeof a;\n  if (type !== 'function' && type !== 'object' && typeof b != 'object') return false;\n  return deepEq(a, b, aStack, bStack);\n}\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction deepEq(a, b, aStack, bStack) {\n  // Unwrap any wrapped objects.\n  if (a instanceof _) a = a._wrapped;\n  if (b instanceof _) b = b._wrapped;\n  // Compare `[[Class]]` names.\n  var className = toString.call(a);\n  if (className !== toString.call(b)) return false;\n  switch (className) {\n    // These types are compared by value.\n    case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n    case '[object String]':\n      // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n      // equivalent to `new String(\"5\")`.\n      return '' + a === '' + b;\n    case '[object Number]':\n      // `NaN`s are equivalent, but non-reflexive.\n      // Object(NaN) is equivalent to NaN.\n      if (+a !== +a) return +b !== +b;\n      // An `egal` comparison is performed for other numeric values.\n      return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n    case '[object Date]':\n    case '[object Boolean]':\n      // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n      // millisecond representations. Note that invalid dates with millisecond representations\n      // of `NaN` are not equivalent.\n      return +a === +b;\n    case '[object Symbol]':\n      return SymbolProto.valueOf.call(a) === SymbolProto.valueOf.call(b);\n    case '[object ArrayBuffer]':\n      // Coerce to `DataView` so we can fall through to the next case.\n      return deepEq(new DataView(a), new DataView(b), aStack, bStack);\n    case '[object DataView]':\n      var byteLength = getByteLength(a);\n      if (byteLength !== getByteLength(b)) {\n        return false;\n      }\n      while (byteLength--) {\n        if (a.getUint8(byteLength) !== b.getUint8(byteLength)) {\n          return false;\n        }\n      }\n      return true;\n  }\n\n  if (isTypedArray(a)) {\n    // Coerce typed arrays to `DataView`.\n    return deepEq(new DataView(a.buffer), new DataView(b.buffer), aStack, bStack);\n  }\n\n  var areArrays = className === '[object Array]';\n  if (!areArrays) {\n    if (typeof a != 'object' || typeof b != 'object') return false;\n\n    // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n    // from different frames are.\n    var aCtor = a.constructor, bCtor = b.constructor;\n    if (aCtor !== bCtor && !(isFunction(aCtor) && aCtor instanceof aCtor &&\n                             isFunction(bCtor) && bCtor instanceof bCtor)\n                        && ('constructor' in a && 'constructor' in b)) {\n      return false;\n    }\n  }\n  // Assume equality for cyclic structures. The algorithm for detecting cyclic\n  // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n  // Initializing stack of traversed objects.\n  // It's done here since we only need them for objects and arrays comparison.\n  aStack = aStack || [];\n  bStack = bStack || [];\n  var length = aStack.length;\n  while (length--) {\n    // Linear search. Performance is inversely proportional to the number of\n    // unique nested structures.\n    if (aStack[length] === a) return bStack[length] === b;\n  }\n\n  // Add the first object to the stack of traversed objects.\n  aStack.push(a);\n  bStack.push(b);\n\n  // Recursively compare objects and arrays.\n  if (areArrays) {\n    // Compare array lengths to determine if a deep comparison is necessary.\n    length = a.length;\n    if (length !== b.length) return false;\n    // Deep compare the contents, ignoring non-numeric properties.\n    while (length--) {\n      if (!eq(a[length], b[length], aStack, bStack)) return false;\n    }\n  } else {\n    // Deep compare objects.\n    var _keys = keys(a), key;\n    length = _keys.length;\n    // Ensure that both objects contain the same number of properties before comparing deep equality.\n    if (keys(b).length !== length) return false;\n    while (length--) {\n      // Deep compare each member\n      key = _keys[length];\n      if (!(has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n    }\n  }\n  // Remove the first object from the stack of traversed objects.\n  aStack.pop();\n  bStack.pop();\n  return true;\n}\n\n// Perform a deep comparison to check if two objects are equal.\nexport default function isEqual(a, b) {\n  return eq(a, b);\n}\n","import isObject from './isObject.js';\nimport { hasEnumBug } from './_setup.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve all the enumerable property names of an object.\nexport default function allKeys(obj) {\n  if (!isObject(obj)) return [];\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import keys from './keys.js';\n\n// Retrieve the values of an object's properties.\nexport default function values(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var values = Array(length);\n  for (var i = 0; i < length; i++) {\n    values[i] = obj[_keys[i]];\n  }\n  return values;\n}\n","import keys from './keys.js';\n\n// Convert an object into a list of `[key, value]` pairs.\n// The opposite of `_.object` with one argument.\nexport default function pairs(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var pairs = Array(length);\n  for (var i = 0; i < length; i++) {\n    pairs[i] = [_keys[i], obj[_keys[i]]];\n  }\n  return pairs;\n}\n","import keys from './keys.js';\n\n// Invert the keys and values of an object. The values must be serializable.\nexport default function invert(obj) {\n  var result = {};\n  var _keys = keys(obj);\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    result[obj[_keys[i]]] = _keys[i];\n  }\n  return result;\n}\n","import isFunction from './isFunction.js';\n\n// Return a sorted list of the function names available on the object.\nexport default function functions(obj) {\n  var names = [];\n  for (var key in obj) {\n    if (isFunction(obj[key])) names.push(key);\n  }\n  return names.sort();\n}\n","// An internal function for creating assigner functions.\nexport default function createAssigner(keysFunc, defaults) {\n  return function(obj) {\n    var length = arguments.length;\n    if (defaults) obj = Object(obj);\n    if (length < 2 || obj == null) return obj;\n    for (var index = 1; index < length; index++) {\n      var source = arguments[index],\n          keys = keysFunc(source),\n          l = keys.length;\n      for (var i = 0; i < l; i++) {\n        var key = keys[i];\n        if (!defaults || obj[key] === void 0) obj[key] = source[key];\n      }\n    }\n    return obj;\n  };\n}\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Extend a given object with all the properties in passed-in object(s).\nexport default createAssigner(allKeys);\n","import createAssigner from './_createAssigner.js';\nimport keys from './keys.js';\n\n// Assigns a given object with all the own properties in the passed-in\n// object(s).\n// (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\nexport default createAssigner(keys);\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Fill in a given object with default properties.\nexport default createAssigner(allKeys, true);\n","import isObject from './isObject.js';\nimport { nativeCreate } from './_setup.js';\n\n// Create a naked function reference for surrogate-prototype-swapping.\nfunction ctor() {\n  return function(){};\n}\n\n// An internal function for creating a new object that inherits from another.\nexport default function baseCreate(prototype) {\n  if (!isObject(prototype)) return {};\n  if (nativeCreate) return nativeCreate(prototype);\n  var Ctor = ctor();\n  Ctor.prototype = prototype;\n  var result = new Ctor;\n  Ctor.prototype = null;\n  return result;\n}\n","import baseCreate from './_baseCreate.js';\nimport extendOwn from './extendOwn.js';\n\n// Creates an object that inherits from the given prototype object.\n// If additional properties are provided then they will be added to the\n// created object.\nexport default function create(prototype, props) {\n  var result = baseCreate(prototype);\n  if (props) extendOwn(result, props);\n  return result;\n}\n","import isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport extend from './extend.js';\n\n// Create a (shallow-cloned) duplicate of an object.\nexport default function clone(obj) {\n  if (!isObject(obj)) return obj;\n  return isArray(obj) ? obj.slice() : extend({}, obj);\n}\n","// Invokes `interceptor` with the `obj` and then returns `obj`.\n// The primary purpose of this method is to \"tap into\" a method chain, in\n// order to perform operations on intermediate results within the chain.\nexport default function tap(obj, interceptor) {\n  interceptor(obj);\n  return obj;\n}\n","import isArray from './isArray.js';\nimport _has from './_has.js';\nimport { hasOwnProperty } from './_setup.js';\n\n// Shortcut function for checking if an object has a given property directly on\n// itself (in other words, not on a prototype). Unlike the internal `has`\n// function, this public version can also traverse nested properties.\nexport default function has(obj, path) {\n  if (!isArray(path)) {\n    return _has(obj, path);\n  }\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    var key = path[i];\n    if (obj == null || !hasOwnProperty.call(obj, key)) {\n      return false;\n    }\n    obj = obj[key];\n  }\n  return !!length;\n}\n","// Keep the identity function around for default iteratees.\nexport default function identity(value) {\n  return value;\n}\n","import extendOwn from './extendOwn.js';\nimport isMatch from './isMatch.js';\n\n// Returns a predicate for checking whether an object has a given set of\n// `key:value` pairs.\nexport default function matcher(attrs) {\n  attrs = extendOwn({}, attrs);\n  return function(obj) {\n    return isMatch(obj, attrs);\n  };\n}\n","// Internal function to obtain a nested property in `obj` along `path`.\nexport default function deepGet(obj, path) {\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    if (obj == null) return void 0;\n    obj = obj[path[i]];\n  }\n  return length ? obj : void 0;\n}\n","import isArray from './isArray.js';\nimport shallowProperty from './_shallowProperty.js';\nimport deepGet from './_deepGet.js';\n\n// Creates a function that, when passed an object, will traverse that objects\n// properties down the given `path`, specified as an array of keys or indices.\nexport default function property(path) {\n  if (!isArray(path)) {\n    return shallowProperty(path);\n  }\n  return function(obj) {\n    return deepGet(obj, path);\n  };\n}\n","// Internal function that returns an efficient (for current engines) version\n// of the passed-in callback, to be repeatedly applied in other Underscore\n// functions.\nexport default function optimizeCb(func, context, argCount) {\n  if (context === void 0) return func;\n  switch (argCount == null ? 3 : argCount) {\n    case 1: return function(value) {\n      return func.call(context, value);\n    };\n    // The 2-argument case is omitted because were not using it.\n    case 3: return function(value, index, collection) {\n      return func.call(context, value, index, collection);\n    };\n    case 4: return function(accumulator, value, index, collection) {\n      return func.call(context, accumulator, value, index, collection);\n    };\n  }\n  return function() {\n    return func.apply(context, arguments);\n  };\n}\n","import identity from './identity.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport matcher from './matcher.js';\nimport property from './property.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// An internal function to generate callbacks that can be applied to each\n// element in a collection, returning the desired result  either `_.identity`,\n// an arbitrary callback, a property matcher, or a property accessor.\nexport default function baseIteratee(value, context, argCount) {\n  if (value == null) return identity;\n  if (isFunction(value)) return optimizeCb(value, context, argCount);\n  if (isObject(value) && !isArray(value)) return matcher(value);\n  return property(value);\n}\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\n\n// External wrapper for our callback generator. Users may customize\n// `_.iteratee` if they want additional predicate/iteratee shorthand styles.\n// This abstraction hides the internal-only `argCount` argument.\nexport default function iteratee(value, context) {\n  return baseIteratee(value, context, Infinity);\n}\n_.iteratee = iteratee;\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\nimport iteratee from './iteratee.js';\n\n// The function we call internally to generate a callback. It invokes\n// `_.iteratee` if overridden, otherwise `baseIteratee`.\nexport default function cb(value, context, argCount) {\n  if (_.iteratee !== iteratee) return _.iteratee(value, context);\n  return baseIteratee(value, context, argCount);\n}\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the results of applying the `iteratee` to each element of `obj`.\n// In contrast to `_.map` it returns an object.\nexport default function mapObject(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = keys(obj),\n      length = _keys.length,\n      results = {};\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys[index];\n    results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function noop(){}\n","import isArray from './isArray.js';\nimport deepGet from './_deepGet.js';\n\n// Generates a function for a given object that returns a given property.\nexport default function propertyOf(obj) {\n  if (obj == null) {\n    return function(){};\n  }\n  return function(path) {\n    return !isArray(path) ? obj[path] : deepGet(obj, path);\n  };\n}\n","import optimizeCb from './_optimizeCb.js';\n\n// Run a function **n** times.\nexport default function times(n, iteratee, context) {\n  var accum = Array(Math.max(0, n));\n  iteratee = optimizeCb(iteratee, context, 1);\n  for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n  return accum;\n}\n","// Return a random integer between `min` and `max` (inclusive).\nexport default function random(min, max) {\n  if (max == null) {\n    max = min;\n    min = 0;\n  }\n  return min + Math.floor(Math.random() * (max - min + 1));\n}\n","// A (possibly faster) way to get the current timestamp as an integer.\nexport default Date.now || function() {\n  return new Date().getTime();\n};\n","import keys from './keys.js';\n\n// Internal helper to generate functions for escaping and unescaping strings\n// to/from HTML interpolation.\nexport default function createEscaper(map) {\n  var escaper = function(match) {\n    return map[match];\n  };\n  // Regexes for identifying a key that needs to be escaped.\n  var source = '(?:' + keys(map).join('|') + ')';\n  var testRegexp = RegExp(source);\n  var replaceRegexp = RegExp(source, 'g');\n  return function(string) {\n    string = string == null ? '' : '' + string;\n    return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n  };\n}\n","// Internal list of HTML entities for escaping.\nexport default {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;'\n};\n","import createEscaper from './_createEscaper.js';\nimport escapeMap from './_escapeMap.js';\n\n// Function for escaping strings to HTML interpolation.\nexport default createEscaper(escapeMap);\n","import createEscaper from './_createEscaper.js';\nimport unescapeMap from './_unescapeMap.js';\n\n// Function for unescaping strings from HTML interpolation.\nexport default createEscaper(unescapeMap);\n","import invert from './invert.js';\nimport escapeMap from './_escapeMap.js';\n\n// Internal list of HTML entities for unescaping.\nexport default invert(escapeMap);\n","import _ from './underscore.js';\n\n// By default, Underscore uses ERB-style template delimiters. Change the\n// following template settings to use alternative delimiters.\nexport default _.templateSettings = {\n  evaluate: /<%([\\s\\S]+?)%>/g,\n  interpolate: /<%=([\\s\\S]+?)%>/g,\n  escape: /<%-([\\s\\S]+?)%>/g\n};\n","import defaults from './defaults.js';\nimport _ from './underscore.js';\nimport './templateSettings.js';\n\n// When customizing `_.templateSettings`, if you don't want to define an\n// interpolation, evaluation or escaping regex, we need one that is\n// guaranteed not to match.\nvar noMatch = /(.)^/;\n\n// Certain characters need to be escaped so that they can be put into a\n// string literal.\nvar escapes = {\n  \"'\": \"'\",\n  '\\\\': '\\\\',\n  '\\r': 'r',\n  '\\n': 'n',\n  '\\u2028': 'u2028',\n  '\\u2029': 'u2029'\n};\n\nvar escapeRegExp = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\nfunction escapeChar(match) {\n  return '\\\\' + escapes[match];\n}\n\n// JavaScript micro-templating, similar to John Resig's implementation.\n// Underscore templating handles arbitrary delimiters, preserves whitespace,\n// and correctly escapes quotes within interpolated code.\n// NB: `oldSettings` only exists for backwards compatibility.\nexport default function template(text, settings, oldSettings) {\n  if (!settings && oldSettings) settings = oldSettings;\n  settings = defaults({}, settings, _.templateSettings);\n\n  // Combine delimiters into one regular expression via alternation.\n  var matcher = RegExp([\n    (settings.escape || noMatch).source,\n    (settings.interpolate || noMatch).source,\n    (settings.evaluate || noMatch).source\n  ].join('|') + '|$', 'g');\n\n  // Compile the template source, escaping string literals appropriately.\n  var index = 0;\n  var source = \"__p+='\";\n  text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n    source += text.slice(index, offset).replace(escapeRegExp, escapeChar);\n    index = offset + match.length;\n\n    if (escape) {\n      source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n    } else if (interpolate) {\n      source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n    } else if (evaluate) {\n      source += \"';\\n\" + evaluate + \"\\n__p+='\";\n    }\n\n    // Adobe VMs need the match returned to produce the correct offset.\n    return match;\n  });\n  source += \"';\\n\";\n\n  // If a variable is not specified, place data values in local scope.\n  if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n  source = \"var __t,__p='',__j=Array.prototype.join,\" +\n    \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n    source + 'return __p;\\n';\n\n  var render;\n  try {\n    render = new Function(settings.variable || 'obj', '_', source);\n  } catch (e) {\n    e.source = source;\n    throw e;\n  }\n\n  var template = function(data) {\n    return render.call(this, data, _);\n  };\n\n  // Provide the compiled source as a convenience for precompilation.\n  var argument = settings.variable || 'obj';\n  template.source = 'function(' + argument + '){\\n' + source + '}';\n\n  return template;\n}\n","import isArray from './isArray.js';\nimport isFunction from './isFunction.js';\n\n// Traverses the children of `obj` along `path`. If a child is a function, it\n// is invoked with its parent as context. Returns the value of the final\n// child, or `fallback` if any child is undefined.\nexport default function result(obj, path, fallback) {\n  if (!isArray(path)) path = [path];\n  var length = path.length;\n  if (!length) {\n    return isFunction(fallback) ? fallback.call(obj) : fallback;\n  }\n  for (var i = 0; i < length; i++) {\n    var prop = obj == null ? void 0 : obj[path[i]];\n    if (prop === void 0) {\n      prop = fallback;\n      i = length; // Ensure we don't continue iterating.\n    }\n    obj = isFunction(prop) ? prop.call(obj) : prop;\n  }\n  return obj;\n}\n","// Generate a unique integer id (unique within the entire client session).\n// Useful for temporary DOM ids.\nvar idCounter = 0;\nexport default function uniqueId(prefix) {\n  var id = ++idCounter + '';\n  return prefix ? prefix + id : id;\n}\n","import _ from './underscore.js';\n\n// Start chaining a wrapped Underscore object.\nexport default function chain(obj) {\n  var instance = _(obj);\n  instance._chain = true;\n  return instance;\n}\n","import baseCreate from './_baseCreate.js';\nimport isObject from './isObject.js';\n\n// Internal function to execute `sourceFunc` bound to `context` with optional\n// `args`. Determines whether to execute a function as a constructor or as a\n// normal function.\nexport default function executeBound(sourceFunc, boundFunc, context, callingContext, args) {\n  if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n  var self = baseCreate(sourceFunc.prototype);\n  var result = sourceFunc.apply(self, args);\n  if (isObject(result)) return result;\n  return self;\n}\n","import restArguments from './restArguments.js';\nimport executeBound from './_executeBound.js';\nimport _ from './underscore.js';\n\n// Partially apply a function by creating a version that has had some of its\n// arguments pre-filled, without changing its dynamic `this` context. `_` acts\n// as a placeholder by default, allowing any combination of arguments to be\n// pre-filled. Set `_.partial.placeholder` for a custom placeholder argument.\nvar partial = restArguments(function(func, boundArgs) {\n  var placeholder = partial.placeholder;\n  var bound = function() {\n    var position = 0, length = boundArgs.length;\n    var args = Array(length);\n    for (var i = 0; i < length; i++) {\n      args[i] = boundArgs[i] === placeholder ? arguments[position++] : boundArgs[i];\n    }\n    while (position < arguments.length) args.push(arguments[position++]);\n    return executeBound(func, bound, this, this, args);\n  };\n  return bound;\n});\n\npartial.placeholder = _;\nexport default partial;\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport executeBound from './_executeBound.js';\n\n// Create a function bound to a given object (assigning `this`, and arguments,\n// optionally).\nexport default restArguments(function(func, context, args) {\n  if (!isFunction(func)) throw new TypeError('Bind must be called on a function');\n  var bound = restArguments(function(callArgs) {\n    return executeBound(func, bound, context, this, args.concat(callArgs));\n  });\n  return bound;\n});\n","import getLength from './_getLength.js';\nimport isArrayLike from './_isArrayLike.js';\nimport isArray from './isArray.js';\nimport isArguments from './isArguments.js';\n\n// Internal implementation of a recursive `flatten` function.\nexport default function flatten(input, depth, strict, output) {\n  output = output || [];\n  if (!depth && depth !== 0) {\n    depth = Infinity;\n  } else if (depth <= 0) {\n    return output.concat(input);\n  }\n  var idx = output.length;\n  for (var i = 0, length = getLength(input); i < length; i++) {\n    var value = input[i];\n    if (isArrayLike(value) && (isArray(value) || isArguments(value))) {\n      // Flatten current level of array or arguments object.\n      if (depth > 1) {\n        flatten(value, depth - 1, strict, output);\n        idx = output.length;\n      } else {\n        var j = 0, len = value.length;\n        while (j < len) output[idx++] = value[j++];\n      }\n    } else if (!strict) {\n      output[idx++] = value;\n    }\n  }\n  return output;\n}\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport bind from './bind.js';\n\n// Bind a number of an object's methods to that object. Remaining arguments\n// are the method names to be bound. Useful for ensuring that all callbacks\n// defined on an object belong to it.\nexport default restArguments(function(obj, keys) {\n  keys = flatten(keys, false, false);\n  var index = keys.length;\n  if (index < 1) throw new Error('bindAll must be passed function names');\n  while (index--) {\n    var key = keys[index];\n    obj[key] = bind(obj[key], obj);\n  }\n  return obj;\n});\n","import has from './_has.js';\n\n// Memoize an expensive function by storing its results.\nexport default function memoize(func, hasher) {\n  var memoize = function(key) {\n    var cache = memoize.cache;\n    var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n    if (!has(cache, address)) cache[address] = func.apply(this, arguments);\n    return cache[address];\n  };\n  memoize.cache = {};\n  return memoize;\n}\n","import restArguments from './restArguments.js';\n\n// Delays a function for the given number of milliseconds, and then calls\n// it with the arguments supplied.\nexport default restArguments(function(func, wait, args) {\n  return setTimeout(function() {\n    return func.apply(null, args);\n  }, wait);\n});\n","import partial from './partial.js';\nimport delay from './delay.js';\nimport _ from './underscore.js';\n\n// Defers a function, scheduling it to run after the current call stack has\n// cleared.\nexport default partial(delay, _, 1);\n","import now from './now.js';\n\n// Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\nexport default function throttle(func, wait, options) {\n  var timeout, context, args, result;\n  var previous = 0;\n  if (!options) options = {};\n\n  var later = function() {\n    previous = options.leading === false ? 0 : now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n\n  var throttled = function() {\n    var _now = now();\n    if (!previous && options.leading === false) previous = _now;\n    var remaining = wait - (_now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = _now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n\n  throttled.cancel = function() {\n    clearTimeout(timeout);\n    previous = 0;\n    timeout = context = args = null;\n  };\n\n  return throttled;\n}\n","import restArguments from './restArguments.js';\nimport delay from './delay.js';\n\n// When a sequence of calls of the returned function ends, the argument\n// function is triggered. The end of a sequence is defined by the `wait`\n// parameter. If `immediate` is passed, the argument function will be\n// triggered at the beginning of the sequence instead of at the end.\nexport default function debounce(func, wait, immediate) {\n  var timeout, result;\n\n  var later = function(context, args) {\n    timeout = null;\n    if (args) result = func.apply(context, args);\n  };\n\n  var debounced = restArguments(function(args) {\n    if (timeout) clearTimeout(timeout);\n    if (immediate) {\n      var callNow = !timeout;\n      timeout = setTimeout(later, wait);\n      if (callNow) result = func.apply(this, args);\n    } else {\n      timeout = delay(later, wait, this, args);\n    }\n\n    return result;\n  });\n\n  debounced.cancel = function() {\n    clearTimeout(timeout);\n    timeout = null;\n  };\n\n  return debounced;\n}\n","import partial from './partial.js';\n\n// Returns the first function passed as an argument to the second,\n// allowing you to adjust arguments, run code before and after, and\n// conditionally execute the original function.\nexport default function wrap(func, wrapper) {\n  return partial(wrapper, func);\n}\n","// Returns a negated version of the passed-in predicate.\nexport default function negate(predicate) {\n  return function() {\n    return !predicate.apply(this, arguments);\n  };\n}\n","// Returns a function that is the composition of a list of functions, each\n// consuming the return value of the function that follows.\nexport default function compose() {\n  var args = arguments;\n  var start = args.length - 1;\n  return function() {\n    var i = start;\n    var result = args[start].apply(this, arguments);\n    while (i--) result = args[i].call(this, result);\n    return result;\n  };\n}\n","// Returns a function that will only be executed on and after the Nth call.\nexport default function after(times, func) {\n  return function() {\n    if (--times < 1) {\n      return func.apply(this, arguments);\n    }\n  };\n}\n","// Returns a function that will only be executed up to (but not including) the\n// Nth call.\nexport default function before(times, func) {\n  var memo;\n  return function() {\n    if (--times > 0) {\n      memo = func.apply(this, arguments);\n    }\n    if (times <= 1) func = null;\n    return memo;\n  };\n}\n","import partial from './partial.js';\nimport before from './before.js';\n\n// Returns a function that will be executed at most one time, no matter how\n// often you call it. Useful for lazy initialization.\nexport default partial(before, 2);\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the first key on an object that passes a truth test.\nexport default function findKey(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = keys(obj), key;\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    key = _keys[i];\n    if (predicate(obj[key], key, obj)) return key;\n  }\n}\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Internal function to generate `_.findIndex` and `_.findLastIndex`.\nexport default function createPredicateIndexFinder(dir) {\n  return function(array, predicate, context) {\n    predicate = cb(predicate, context);\n    var length = getLength(array);\n    var index = dir > 0 ? 0 : length - 1;\n    for (; index >= 0 && index < length; index += dir) {\n      if (predicate(array[index], index, array)) return index;\n    }\n    return -1;\n  };\n}\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the first index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(1);\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the last index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(-1);\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Use a comparator function to figure out the smallest index at which\n// an object should be inserted so as to maintain order. Uses binary search.\nexport default function sortedIndex(array, obj, iteratee, context) {\n  iteratee = cb(iteratee, context, 1);\n  var value = iteratee(obj);\n  var low = 0, high = getLength(array);\n  while (low < high) {\n    var mid = Math.floor((low + high) / 2);\n    if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n  }\n  return low;\n}\n","import getLength from './_getLength.js';\nimport { slice } from './_setup.js';\nimport isNaN from './isNaN.js';\n\n// Internal function to generate the `_.indexOf` and `_.lastIndexOf` functions.\nexport default function createIndexFinder(dir, predicateFind, sortedIndex) {\n  return function(array, item, idx) {\n    var i = 0, length = getLength(array);\n    if (typeof idx == 'number') {\n      if (dir > 0) {\n        i = idx >= 0 ? idx : Math.max(idx + length, i);\n      } else {\n        length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n      }\n    } else if (sortedIndex && idx && length) {\n      idx = sortedIndex(array, item);\n      return array[idx] === item ? idx : -1;\n    }\n    if (item !== item) {\n      idx = predicateFind(slice.call(array, i, length), isNaN);\n      return idx >= 0 ? idx + i : -1;\n    }\n    for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n      if (array[idx] === item) return idx;\n    }\n    return -1;\n  };\n}\n","import sortedIndex from './sortedIndex.js';\nimport findIndex from './findIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the first occurrence of an item in an array,\n// or -1 if the item is not included in the array.\n// If the array is large and already in sort order, pass `true`\n// for **isSorted** to use binary search.\nexport default createIndexFinder(1, findIndex, sortedIndex);\n","import findLastIndex from './findLastIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the last occurrence of an item in an array,\n// or -1 if the item is not included in the array.\nexport default createIndexFinder(-1, findLastIndex);\n","import isArrayLike from './_isArrayLike.js';\nimport findIndex from './findIndex.js';\nimport findKey from './findKey.js';\n\n// Return the first value which passes a truth test.\nexport default function find(obj, predicate, context) {\n  var keyFinder = isArrayLike(obj) ? findIndex : findKey;\n  var key = keyFinder(obj, predicate, context);\n  if (key !== void 0 && key !== -1) return obj[key];\n}\n","import find from './find.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.find`: getting the first\n// object containing specific `key:value` pairs.\nexport default function findWhere(obj, attrs) {\n  return find(obj, matcher(attrs));\n}\n","import optimizeCb from './_optimizeCb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// The cornerstone for collection functions, an `each`\n// implementation, aka `forEach`.\n// Handles raw objects in addition to array-likes. Treats all\n// sparse array-likes as if they were dense.\nexport default function each(obj, iteratee, context) {\n  iteratee = optimizeCb(iteratee, context);\n  var i, length;\n  if (isArrayLike(obj)) {\n    for (i = 0, length = obj.length; i < length; i++) {\n      iteratee(obj[i], i, obj);\n    }\n  } else {\n    var _keys = keys(obj);\n    for (i = 0, length = _keys.length; i < length; i++) {\n      iteratee(obj[_keys[i]], _keys[i], obj);\n    }\n  }\n  return obj;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the results of applying the iteratee to each element.\nexport default function map(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length,\n      results = Array(length);\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    results[index] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// Internal helper to create a reducing function, iterating left or right.\nexport default function createReduce(dir) {\n  // Wrap code that reassigns argument variables in a separate function than\n  // the one that accesses `arguments.length` to avoid a perf hit. (#1991)\n  var reducer = function(obj, iteratee, memo, initial) {\n    var _keys = !isArrayLike(obj) && keys(obj),\n        length = (_keys || obj).length,\n        index = dir > 0 ? 0 : length - 1;\n    if (!initial) {\n      memo = obj[_keys ? _keys[index] : index];\n      index += dir;\n    }\n    for (; index >= 0 && index < length; index += dir) {\n      var currentKey = _keys ? _keys[index] : index;\n      memo = iteratee(memo, obj[currentKey], currentKey, obj);\n    }\n    return memo;\n  };\n\n  return function(obj, iteratee, memo, context) {\n    var initial = arguments.length >= 3;\n    return reducer(obj, optimizeCb(iteratee, context, 4), memo, initial);\n  };\n}\n","import createReduce from './_createReduce.js';\n\n// **Reduce** builds up a single result from a list of values, aka `inject`,\n// or `foldl`.\nexport default createReduce(1);\n","import createReduce from './_createReduce.js';\n\n// The right-associative version of reduce, also known as `foldr`.\nexport default createReduce(-1);\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// Return all the elements that pass a truth test.\nexport default function filter(obj, predicate, context) {\n  var results = [];\n  predicate = cb(predicate, context);\n  each(obj, function(value, index, list) {\n    if (predicate(value, index, list)) results.push(value);\n  });\n  return results;\n}\n","import filter from './filter.js';\nimport negate from './negate.js';\nimport cb from './_cb.js';\n\n// Return all the elements for which a truth test fails.\nexport default function reject(obj, predicate, context) {\n  return filter(obj, negate(cb(predicate)), context);\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine whether all of the elements pass a truth test.\nexport default function every(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (!predicate(obj[currentKey], currentKey, obj)) return false;\n  }\n  return true;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine if at least one element in the object passes a truth test.\nexport default function some(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (predicate(obj[currentKey], currentKey, obj)) return true;\n  }\n  return false;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport indexOf from './indexOf.js';\n\n// Determine if the array or object contains a given item (using `===`).\nexport default function contains(obj, item, fromIndex, guard) {\n  if (!isArrayLike(obj)) obj = values(obj);\n  if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n  return indexOf(obj, item, fromIndex) >= 0;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport isArray from './isArray.js';\nimport map from './map.js';\nimport deepGet from './_deepGet.js';\n\n// Invoke a method (with arguments) on every item in a collection.\nexport default restArguments(function(obj, path, args) {\n  var contextPath, func;\n  if (isFunction(path)) {\n    func = path;\n  } else if (isArray(path)) {\n    contextPath = path.slice(0, -1);\n    path = path[path.length - 1];\n  }\n  return map(obj, function(context) {\n    var method = func;\n    if (!method) {\n      if (contextPath && contextPath.length) {\n        context = deepGet(context, contextPath);\n      }\n      if (context == null) return void 0;\n      method = context[path];\n    }\n    return method == null ? method : method.apply(context, args);\n  });\n});\n","import map from './map.js';\nimport property from './property.js';\n\n// Convenience version of a common use case of `_.map`: fetching a property.\nexport default function pluck(obj, key) {\n  return map(obj, property(key));\n}\n","import filter from './filter.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.filter`: selecting only\n// objects containing specific `key:value` pairs.\nexport default function where(obj, attrs) {\n  return filter(obj, matcher(attrs));\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the maximum element (or element-based computation).\nexport default function max(obj, iteratee, context) {\n  var result = -Infinity, lastComputed = -Infinity,\n      value, computed;\n  if (iteratee == null || typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value > result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed > lastComputed || computed === -Infinity && result === -Infinity) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the minimum element (or element-based computation).\nexport default function min(obj, iteratee, context) {\n  var result = Infinity, lastComputed = Infinity,\n      value, computed;\n  if (iteratee == null || typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value < result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed < lastComputed || computed === Infinity && result === Infinity) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport clone from './clone.js';\nimport values from './values.js';\nimport getLength from './_getLength.js';\nimport random from './random.js';\n\n// Sample **n** random values from a collection using the modern version of the\n// [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/FisherYates_shuffle).\n// If **n** is not specified, returns a single random element.\n// The internal `guard` argument allows it to work with `_.map`.\nexport default function sample(obj, n, guard) {\n  if (n == null || guard) {\n    if (!isArrayLike(obj)) obj = values(obj);\n    return obj[random(obj.length - 1)];\n  }\n  var sample = isArrayLike(obj) ? clone(obj) : values(obj);\n  var length = getLength(sample);\n  n = Math.max(Math.min(n, length), 0);\n  var last = length - 1;\n  for (var index = 0; index < n; index++) {\n    var rand = random(index, last);\n    var temp = sample[index];\n    sample[index] = sample[rand];\n    sample[rand] = temp;\n  }\n  return sample.slice(0, n);\n}\n","import sample from './sample.js';\n\n// Shuffle a collection.\nexport default function shuffle(obj) {\n  return sample(obj, Infinity);\n}\n","import cb from './_cb.js';\nimport pluck from './pluck.js';\nimport map from './map.js';\n\n// Sort the object's values by a criterion produced by an iteratee.\nexport default function sortBy(obj, iteratee, context) {\n  var index = 0;\n  iteratee = cb(iteratee, context);\n  return pluck(map(obj, function(value, key, list) {\n    return {\n      value: value,\n      index: index++,\n      criteria: iteratee(value, key, list)\n    };\n  }).sort(function(left, right) {\n    var a = left.criteria;\n    var b = right.criteria;\n    if (a !== b) {\n      if (a > b || a === void 0) return 1;\n      if (a < b || b === void 0) return -1;\n    }\n    return left.index - right.index;\n  }), 'value');\n}\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// An internal function used for aggregate \"group by\" operations.\nexport default function group(behavior, partition) {\n  return function(obj, iteratee, context) {\n    var result = partition ? [[], []] : {};\n    iteratee = cb(iteratee, context);\n    each(obj, function(value, index) {\n      var key = iteratee(value, index, obj);\n      behavior(result, value, key);\n    });\n    return result;\n  };\n}\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Groups the object's values by a criterion. Pass either a string attribute\n// to group by, or a function that returns the criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key].push(value); else result[key] = [value];\n});\n","import group from './_group.js';\n\n// Indexes the object's values by a criterion, similar to `_.groupBy`, but for\n// when you know that your index values will be unique.\nexport default group(function(result, value, key) {\n  result[key] = value;\n});\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Counts instances of an object that group by a certain criterion. Pass\n// either a string attribute to count by, or a function that returns the\n// criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key]++; else result[key] = 1;\n});\n","import group from './_group.js';\n\n// Split a collection into two arrays: one whose elements all pass the given\n// truth test, and one whose elements all do not pass the truth test.\nexport default group(function(result, value, pass) {\n  result[pass ? 0 : 1].push(value);\n}, true);\n","import isArray from './isArray.js';\nimport { slice } from './_setup.js';\nimport isString from './isString.js';\nimport isArrayLike from './_isArrayLike.js';\nimport map from './map.js';\nimport identity from './identity.js';\nimport values from './values.js';\n\n// Safely create a real, live array from anything iterable.\nvar reStrSymbol = /[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;\nexport default function toArray(obj) {\n  if (!obj) return [];\n  if (isArray(obj)) return slice.call(obj);\n  if (isString(obj)) {\n    // Keep surrogate pair characters together.\n    return obj.match(reStrSymbol);\n  }\n  if (isArrayLike(obj)) return map(obj, identity);\n  return values(obj);\n}\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the number of elements in a collection.\nexport default function size(obj) {\n  if (obj == null) return 0;\n  return isArrayLike(obj) ? obj.length : keys(obj).length;\n}\n","// Internal `_.pick` helper function to determine whether `key` is an enumerable\n// property name of `obj`.\nexport default function keyInObj(value, key, obj) {\n  return key in obj;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport optimizeCb from './_optimizeCb.js';\nimport allKeys from './allKeys.js';\nimport keyInObj from './_keyInObj.js';\nimport flatten from './_flatten.js';\n\n// Return a copy of the object only containing the allowed properties.\nexport default restArguments(function(obj, keys) {\n  var result = {}, iteratee = keys[0];\n  if (obj == null) return result;\n  if (isFunction(iteratee)) {\n    if (keys.length > 1) iteratee = optimizeCb(iteratee, keys[1]);\n    keys = allKeys(obj);\n  } else {\n    iteratee = keyInObj;\n    keys = flatten(keys, false, false);\n    obj = Object(obj);\n  }\n  for (var i = 0, length = keys.length; i < length; i++) {\n    var key = keys[i];\n    var value = obj[key];\n    if (iteratee(value, key, obj)) result[key] = value;\n  }\n  return result;\n});\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport negate from './negate.js';\nimport map from './map.js';\nimport flatten from './_flatten.js';\nimport contains from './contains.js';\nimport pick from './pick.js';\n\n// Return a copy of the object without the disallowed properties.\nexport default restArguments(function(obj, keys) {\n  var iteratee = keys[0], context;\n  if (isFunction(iteratee)) {\n    iteratee = negate(iteratee);\n    if (keys.length > 1) context = keys[1];\n  } else {\n    keys = map(flatten(keys, false, false), String);\n    iteratee = function(value, key) {\n      return !contains(keys, key);\n    };\n  }\n  return pick(obj, iteratee, context);\n});\n","import { slice } from './_setup.js';\n\n// Returns everything but the last entry of the array. Especially useful on\n// the arguments object. Passing **n** will return all the values in\n// the array, excluding the last N.\nexport default function initial(array, n, guard) {\n  return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n}\n","import initial from './initial.js';\n\n// Get the first element of an array. Passing **n** will return the first N\n// values in the array. The **guard** check allows it to work with `_.map`.\nexport default function first(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[0];\n  return initial(array, array.length - n);\n}\n","import { slice } from './_setup.js';\n\n// Returns everything but the first entry of the `array`. Especially useful on\n// the `arguments` object. Passing an **n** will return the rest N values in the\n// `array`.\nexport default function rest(array, n, guard) {\n  return slice.call(array, n == null || guard ? 1 : n);\n}\n","import rest from './rest.js';\n\n// Get the last element of an array. Passing **n** will return the last N\n// values in the array.\nexport default function last(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[array.length - 1];\n  return rest(array, Math.max(0, array.length - n));\n}\n","import filter from './filter.js';\n\n// Trim out all falsy values from an array.\nexport default function compact(array) {\n  return filter(array, Boolean);\n}\n","import _flatten from './_flatten.js';\n\n// Flatten out an array, either recursively (by default), or up to `depth`.\n// Passing `true` or `false` as `depth` means `1` or `Infinity`, respectively.\nexport default function flatten(array, depth) {\n  return _flatten(array, depth, false);\n}\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport filter from './filter.js';\nimport contains from './contains.js';\n\n// Take the difference between one array and a number of other arrays.\n// Only the elements present in just the first array will remain.\nexport default restArguments(function(array, rest) {\n  rest = flatten(rest, true, true);\n  return filter(array, function(value){\n    return !contains(rest, value);\n  });\n});\n","import restArguments from './restArguments.js';\nimport difference from './difference.js';\n\n// Return a version of the array that does not contain the specified value(s).\nexport default restArguments(function(array, otherArrays) {\n  return difference(array, otherArrays);\n});\n","import isBoolean from './isBoolean.js';\nimport cb from './_cb.js';\nimport getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce a duplicate-free version of the array. If the array has already\n// been sorted, you have the option of using a faster algorithm.\n// The faster algorithm will not work with an iteratee if the iteratee\n// is not a one-to-one function, so providing an iteratee will disable\n// the faster algorithm.\nexport default function uniq(array, isSorted, iteratee, context) {\n  if (!isBoolean(isSorted)) {\n    context = iteratee;\n    iteratee = isSorted;\n    isSorted = false;\n  }\n  if (iteratee != null) iteratee = cb(iteratee, context);\n  var result = [];\n  var seen = [];\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var value = array[i],\n        computed = iteratee ? iteratee(value, i, array) : value;\n    if (isSorted && !iteratee) {\n      if (!i || seen !== computed) result.push(value);\n      seen = computed;\n    } else if (iteratee) {\n      if (!contains(seen, computed)) {\n        seen.push(computed);\n        result.push(value);\n      }\n    } else if (!contains(result, value)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport uniq from './uniq.js';\nimport flatten from './_flatten.js';\n\n// Produce an array that contains the union: each distinct element from all of\n// the passed-in arrays.\nexport default restArguments(function(arrays) {\n  return uniq(flatten(arrays, true, true));\n});\n","import getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce an array that contains every item shared between all the\n// passed-in arrays.\nexport default function intersection(array) {\n  var result = [];\n  var argsLength = arguments.length;\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var item = array[i];\n    if (contains(result, item)) continue;\n    var j;\n    for (j = 1; j < argsLength; j++) {\n      if (!contains(arguments[j], item)) break;\n    }\n    if (j === argsLength) result.push(item);\n  }\n  return result;\n}\n","import max from './max.js';\nimport getLength from './_getLength.js';\nimport pluck from './pluck.js';\n\n// Complement of zip. Unzip accepts an array of arrays and groups\n// each array's elements on shared indices.\nexport default function unzip(array) {\n  var length = array && max(array, getLength).length || 0;\n  var result = Array(length);\n\n  for (var index = 0; index < length; index++) {\n    result[index] = pluck(array, index);\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport unzip from './unzip.js';\n\n// Zip together multiple lists into a single array -- elements that share\n// an index go together.\nexport default restArguments(unzip);\n","import getLength  from './_getLength.js';\n\n// Converts lists into objects. Pass either a single array of `[key, value]`\n// pairs, or two parallel arrays of the same length -- one of keys, and one of\n// the corresponding values. Passing by pairs is the reverse of `_.pairs`.\nexport default function object(list, values) {\n  var result = {};\n  for (var i = 0, length = getLength(list); i < length; i++) {\n    if (values) {\n      result[list[i]] = values[i];\n    } else {\n      result[list[i][0]] = list[i][1];\n    }\n  }\n  return result;\n}\n","// Generate an integer Array containing an arithmetic progression. A port of\n// the native Python `range()` function. See\n// [the Python documentation](https://docs.python.org/library/functions.html#range).\nexport default function range(start, stop, step) {\n  if (stop == null) {\n    stop = start || 0;\n    start = 0;\n  }\n  if (!step) {\n    step = stop < start ? -1 : 1;\n  }\n\n  var length = Math.max(Math.ceil((stop - start) / step), 0);\n  var range = Array(length);\n\n  for (var idx = 0; idx < length; idx++, start += step) {\n    range[idx] = start;\n  }\n\n  return range;\n}\n","import { slice } from './_setup.js';\n\n// Chunk a single array into multiple arrays, each containing `count` or fewer\n// items.\nexport default function chunk(array, count) {\n  if (count == null || count < 1) return [];\n  var result = [];\n  var i = 0, length = array.length;\n  while (i < length) {\n    result.push(slice.call(array, i, i += count));\n  }\n  return result;\n}\n","import _ from './underscore.js';\n\n// Helper function to continue chaining intermediate results.\nexport default function chainResult(instance, obj) {\n  return instance._chain ? _(obj).chain() : obj;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport functions from './functions.js';\nimport { push } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add your own custom functions to the Underscore object.\nexport default function mixin(obj) {\n  each(functions(obj), function(name) {\n    var func = _[name] = obj[name];\n    _.prototype[name] = function() {\n      var args = [this._wrapped];\n      push.apply(args, arguments);\n      return chainResult(this, func.apply(_, args));\n    };\n  });\n  return _;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport { ArrayProto } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add all mutator `Array` functions to the wrapper.\neach(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) {\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) {\n        delete obj[0];\n      }\n    }\n    return chainResult(this, obj);\n  };\n});\n\n// Add all accessor `Array` functions to the wrapper.\neach(['concat', 'join', 'slice'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) obj = method.apply(obj, arguments);\n    return chainResult(this, obj);\n  };\n});\n\nexport default _;\n","// Default Export\n// ==============\n// In this module, we mix our bundled exports into the `_` object and export\n// the result. This is analogous to setting `module.exports = _` in CommonJS.\n// Hence, this module is also the entry point of our UMD bundle and the package\n// entry point for CommonJS and AMD users. In other words, this is (the source\n// of) the module you are interfacing with when you do any of the following:\n//\n// ```js\n// // CommonJS\n// var _ = require('underscore');\n//\n// // AMD\n// define(['underscore'], function(_) {...});\n//\n// // UMD in the browser\n// // _ is available as a global variable\n// ```\nimport * as allExports from './index.js';\nimport { mixin } from './index.js';\n\n// Add all of the Underscore functions to the wrapper object.\nvar _ = mixin(allExports);\n// Legacy Node.js API.\n_._ = _;\n// Export the Underscore API.\nexport default _;\n","/*!\nICanHaz.js version 0.10.2 -- by @HenrikJoreteg\nMore info at: http://icanhazjs.com\n*/\n(function () {\n/*\n  mustache.js  Logic-less templates in JavaScript\n\n  See http://mustache.github.com/ for more info.\n*/\n\nvar Mustache = function () {\n  var _toString = Object.prototype.toString;\n\n  Array.isArray = Array.isArray || function (obj) {\n    return _toString.call(obj) == \"[object Array]\";\n  }\n\n  var _trim = String.prototype.trim, trim;\n\n  if (_trim) {\n    trim = function (text) {\n      return text == null ? \"\" : _trim.call(text);\n    }\n  } else {\n    var trimLeft, trimRight;\n\n    // IE doesn't match non-breaking spaces with \\s.\n    if ((/\\S/).test(\"\\xA0\")) {\n      trimLeft = /^[\\s\\xA0]+/;\n      trimRight = /[\\s\\xA0]+$/;\n    } else {\n      trimLeft = /^\\s+/;\n      trimRight = /\\s+$/;\n    }\n\n    trim = function (text) {\n      return text == null ? \"\" :\n        text.toString().replace(trimLeft, \"\").replace(trimRight, \"\");\n    }\n  }\n\n  var escapeMap = {\n    \"&\": \"&amp;\",\n    \"<\": \"&lt;\",\n    \">\": \"&gt;\",\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  function escapeHTML(string) {\n    return String(string).replace(/&(?!\\w+;)|[<>\"']/g, function (s) {\n      return escapeMap[s] || s;\n    });\n  }\n\n  var regexCache = {};\n  var Renderer = function () {};\n\n  Renderer.prototype = {\n    otag: \"{{\",\n    ctag: \"}}\",\n    pragmas: {},\n    buffer: [],\n    pragmas_implemented: {\n      \"IMPLICIT-ITERATOR\": true\n    },\n    context: {},\n\n    render: function (template, context, partials, in_recursion) {\n      // reset buffer & set context\n      if (!in_recursion) {\n        this.context = context;\n        this.buffer = []; // TODO: make this non-lazy\n      }\n\n      // fail fast\n      if (!this.includes(\"\", template)) {\n        if (in_recursion) {\n          return template;\n        } else {\n          this.send(template);\n          return;\n        }\n      }\n\n      // get the pragmas together\n      template = this.render_pragmas(template);\n\n      // render the template\n      var html = this.render_section(template, context, partials);\n\n      // render_section did not find any sections, we still need to render the tags\n      if (html === false) {\n        html = this.render_tags(template, context, partials, in_recursion);\n      }\n\n      if (in_recursion) {\n        return html;\n      } else {\n        this.sendLines(html);\n      }\n    },\n\n    /*\n      Sends parsed lines\n    */\n    send: function (line) {\n      if (line !== \"\") {\n        this.buffer.push(line);\n      }\n    },\n\n    sendLines: function (text) {\n      if (text) {\n        var lines = text.split(\"\\n\");\n        for (var i = 0; i < lines.length; i++) {\n          this.send(lines[i]);\n        }\n      }\n    },\n\n    /*\n      Looks for %PRAGMAS\n    */\n    render_pragmas: function (template) {\n      // no pragmas\n      if (!this.includes(\"%\", template)) {\n        return template;\n      }\n\n      var that = this;\n      var regex = this.getCachedRegex(\"render_pragmas\", function (otag, ctag) {\n        return new RegExp(otag + \"%([\\\\w-]+) ?([\\\\w]+=[\\\\w]+)?\" + ctag, \"g\");\n      });\n\n      return template.replace(regex, function (match, pragma, options) {\n        if (!that.pragmas_implemented[pragma]) {\n          throw({message:\n            \"This implementation of mustache doesn't understand the '\" +\n            pragma + \"' pragma\"});\n        }\n        that.pragmas[pragma] = {};\n        if (options) {\n          var opts = options.split(\"=\");\n          that.pragmas[pragma][opts[0]] = opts[1];\n        }\n        return \"\";\n        // ignore unknown pragmas silently\n      });\n    },\n\n    /*\n      Tries to find a partial in the curent scope and render it\n    */\n    render_partial: function (name, context, partials) {\n      name = trim(name);\n      if (!partials || partials[name] === undefined) {\n        throw({message: \"unknown_partial '\" + name + \"'\"});\n      }\n      if (!context || typeof context[name] != \"object\") {\n        return this.render(partials[name], context, partials, true);\n      }\n      return this.render(partials[name], context[name], partials, true);\n    },\n\n    /*\n      Renders inverted (^) and normal (#) sections\n    */\n    render_section: function (template, context, partials) {\n      if (!this.includes(\"#\", template) && !this.includes(\"^\", template)) {\n        // did not render anything, there were no sections\n        return false;\n      }\n\n      var that = this;\n\n      var regex = this.getCachedRegex(\"render_section\", function (otag, ctag) {\n        // This regex matches _the first_ section ({{#foo}}{{/foo}}), and captures the remainder\n        return new RegExp(\n          \"^([\\\\s\\\\S]*?)\" +         // all the crap at the beginning that is not {{*}} ($1)\n\n          otag +                    // {{\n          \"(\\\\^|\\\\#)\\\\s*(.+)\\\\s*\" + //  #foo (# == $2, foo == $3)\n          ctag +                    // }}\n\n          \"\\n*([\\\\s\\\\S]*?)\" +       // between the tag ($2). leading newlines are dropped\n\n          otag +                    // {{\n          \"\\\\/\\\\s*\\\\3\\\\s*\" +        //  /foo (backreference to the opening tag).\n          ctag +                    // }}\n\n          \"\\\\s*([\\\\s\\\\S]*)$\",       // everything else in the string ($4). leading whitespace is dropped.\n\n        \"g\");\n      });\n\n\n      // for each {{#foo}}{{/foo}} section do...\n      return template.replace(regex, function (match, before, type, name, content, after) {\n        // before contains only tags, no sections\n        var renderedBefore = before ? that.render_tags(before, context, partials, true) : \"\",\n\n        // after may contain both sections and tags, so use full rendering function\n            renderedAfter = after ? that.render(after, context, partials, true) : \"\",\n\n        // will be computed below\n            renderedContent,\n\n            value = that.find(name, context);\n\n        if (type === \"^\") { // inverted section\n          if (!value || Array.isArray(value) && value.length === 0) {\n            // false or empty list, render it\n            renderedContent = that.render(content, context, partials, true);\n          } else {\n            renderedContent = \"\";\n          }\n        } else if (type === \"#\") { // normal section\n          if (Array.isArray(value)) { // Enumerable, Let's loop!\n            renderedContent = that.map(value, function (row) {\n              return that.render(content, that.create_context(row), partials, true);\n            }).join(\"\");\n          } else if (that.is_object(value)) { // Object, Use it as subcontext!\n            renderedContent = that.render(content, that.create_context(value),\n              partials, true);\n          } else if (typeof value == \"function\") {\n            // higher order section\n            renderedContent = value.call(context, content, function (text) {\n              return that.render(text, context, partials, true);\n            });\n          } else if (value) { // boolean section\n            renderedContent = that.render(content, context, partials, true);\n          } else {\n            renderedContent = \"\";\n          }\n        }\n\n        return renderedBefore + renderedContent + renderedAfter;\n      });\n    },\n\n    /*\n      Replace {{foo}} and friends with values from our view\n    */\n    render_tags: function (template, context, partials, in_recursion) {\n      // tit for tat\n      var that = this;\n\n      var new_regex = function () {\n        return that.getCachedRegex(\"render_tags\", function (otag, ctag) {\n          return new RegExp(otag + \"(=|!|>|&|\\\\{|%)?([^#\\\\^]+?)\\\\1?\" + ctag + \"+\", \"g\");\n        });\n      };\n\n      var regex = new_regex();\n      var tag_replace_callback = function (match, operator, name) {\n        switch(operator) {\n        case \"!\": // ignore comments\n          return \"\";\n        case \"=\": // set new delimiters, rebuild the replace regexp\n          that.set_delimiters(name);\n          regex = new_regex();\n          return \"\";\n        case \">\": // render partial\n          return that.render_partial(name, context, partials);\n        case \"{\": // the triple mustache is unescaped\n        case \"&\": // & operator is an alternative unescape method\n          return that.find(name, context);\n        default: // escape the value\n          return escapeHTML(that.find(name, context));\n        }\n      };\n      var lines = template.split(\"\\n\");\n      for(var i = 0; i < lines.length; i++) {\n        lines[i] = lines[i].replace(regex, tag_replace_callback, this);\n        if (!in_recursion) {\n          this.send(lines[i]);\n        }\n      }\n\n      if (in_recursion) {\n        return lines.join(\"\\n\");\n      }\n    },\n\n    set_delimiters: function (delimiters) {\n      var dels = delimiters.split(\" \");\n      this.otag = this.escape_regex(dels[0]);\n      this.ctag = this.escape_regex(dels[1]);\n    },\n\n    escape_regex: function (text) {\n      // thank you Simon Willison\n      if (!arguments.callee.sRE) {\n        var specials = [\n          '/', '.', '*', '+', '?', '|',\n          '(', ')', '[', ']', '{', '}', '\\\\'\n        ];\n        arguments.callee.sRE = new RegExp(\n          '(\\\\' + specials.join('|\\\\') + ')', 'g'\n        );\n      }\n      return text.replace(arguments.callee.sRE, '\\\\$1');\n    },\n\n    /*\n      find `name` in current `context`. That is find me a value\n      from the view object\n    */\n    find: function (name, context) {\n      name = trim(name);\n\n      // Checks whether a value is thruthy or false or 0\n      function is_kinda_truthy(bool) {\n        return bool === false || bool === 0 || bool;\n      }\n\n      var value;\n\n      // check for dot notation eg. foo.bar\n      if (name.match(/([a-z_]+)\\./ig)) {\n        var childValue = this.walk_context(name, context);\n        if (is_kinda_truthy(childValue)) {\n          value = childValue;\n        }\n      } else {\n        if (is_kinda_truthy(context[name])) {\n          value = context[name];\n        } else if (is_kinda_truthy(this.context[name])) {\n          value = this.context[name];\n        }\n      }\n\n      if (typeof value == \"function\") {\n        return value.apply(context);\n      }\n      if (value !== undefined) {\n        return value;\n      }\n      // silently ignore unkown variables\n      return \"\";\n    },\n\n    walk_context: function (name, context) {\n      var path = name.split('.');\n      // if the var doesn't exist in current context, check the top level context\n      var value_context = (context[path[0]] != undefined) ? context : this.context;\n      var value = value_context[path.shift()];\n      while (value != undefined && path.length > 0) {\n        value_context = value;\n        value = value[path.shift()];\n      }\n      // if the value is a function, call it, binding the correct context\n      if (typeof value == \"function\") {\n        return value.apply(value_context);\n      }\n      return value;\n    },\n\n    // Utility methods\n\n    /* includes tag */\n    includes: function (needle, haystack) {\n      return haystack.indexOf(this.otag + needle) != -1;\n    },\n\n    // by @langalex, support for arrays of strings\n    create_context: function (_context) {\n      if (this.is_object(_context)) {\n        return _context;\n      } else {\n        var iterator = \".\";\n        if (this.pragmas[\"IMPLICIT-ITERATOR\"]) {\n          iterator = this.pragmas[\"IMPLICIT-ITERATOR\"].iterator;\n        }\n        var ctx = {};\n        ctx[iterator] = _context;\n        return ctx;\n      }\n    },\n\n    is_object: function (a) {\n      return a && typeof a == \"object\";\n    },\n\n    /*\n      Why, why, why? Because IE. Cry, cry cry.\n    */\n    map: function (array, fn) {\n      if (typeof array.map == \"function\") {\n        return array.map(fn);\n      } else {\n        var r = [];\n        var l = array.length;\n        for(var i = 0; i < l; i++) {\n          r.push(fn(array[i]));\n        }\n        return r;\n      }\n    },\n\n    getCachedRegex: function (name, generator) {\n      var byOtag = regexCache[this.otag];\n      if (!byOtag) {\n        byOtag = regexCache[this.otag] = {};\n      }\n\n      var byCtag = byOtag[this.ctag];\n      if (!byCtag) {\n        byCtag = byOtag[this.ctag] = {};\n      }\n\n      var regex = byCtag[name];\n      if (!regex) {\n        regex = byCtag[name] = generator(this.otag, this.ctag);\n      }\n\n      return regex;\n    }\n  };\n\n  return({\n    name: \"mustache.js\",\n    version: \"0.4.0\",\n\n    /*\n      Turns a template and view into HTML\n    */\n    to_html: function (template, view, partials, send_fun) {\n      var renderer = new Renderer();\n      if (send_fun) {\n        renderer.send = send_fun;\n      }\n      renderer.render(template, view || {}, partials);\n      if (!send_fun) {\n        return renderer.buffer.join(\"\\n\");\n      }\n    }\n  });\n}();\n/*!\n  ICanHaz.js -- by @HenrikJoreteg\n*/\n/*global  */\n(function () {\n    function trim(stuff) {\n        if (''.trim) return stuff.trim();\n        else return stuff.replace(/^\\s+/, '').replace(/\\s+$/, '');\n    }\n\n    // Establish the root object, `window` in the browser, or `global` on the server.\n    var root = this;\n\n    var ich = {\n        VERSION: \"0.10.2\",\n        templates: {},\n\n        // grab jquery or zepto if it's there\n        $: (typeof window !== 'undefined') ? window.jQuery || window.Zepto || null : null,\n\n        // public function for adding templates\n        // can take a name and template string arguments\n        // or can take an object with name/template pairs\n        // We're enforcing uniqueness to avoid accidental template overwrites.\n        // If you want a different template, it should have a different name.\n        addTemplate: function (name, templateString) {\n            if (typeof name === 'object') {\n                for (var template in name) {\n                    this.addTemplate(template, name[template]);\n                }\n                return;\n            }\n            if (ich[name]) {\n                console.error(\"Invalid name: \" + name + \".\");\n            } else if (ich.templates[name]) {\n                console.error(\"Template \\\"\" + name + \"  \\\" exists\");\n            } else {\n                ich.templates[name] = templateString;\n                ich[name] = function (data, raw) {\n                    data = data || {};\n                    var result = Mustache.to_html(ich.templates[name], data, ich.templates);\n                    return (ich.$ && !raw) ? ich.$(trim(result)) : result;\n                };\n            }\n        },\n\n        // clears all retrieval functions and empties cache\n        clearAll: function () {\n            for (var key in ich.templates) {\n                delete ich[key];\n            }\n            ich.templates = {};\n        },\n\n        // clears/grabs\n        refresh: function () {\n            ich.clearAll();\n            ich.grabTemplates();\n        },\n\n        // grabs templates from the DOM and caches them.\n        // Loop through and add templates.\n        // Whitespace at beginning and end of all templates inside <script> tags will\n        // be trimmed. If you want whitespace around a partial, add it in the parent,\n        // not the partial. Or do it explicitly using <br/> or &nbsp;\n        grabTemplates: function () {\n            var i,\n                l,\n                scripts = document.getElementsByTagName('script'),\n                script,\n                trash = [];\n            for (i = 0, l = scripts.length; i < l; i++) {\n                script = scripts[i];\n                if (script && script.innerHTML && script.id && (script.type === \"text/html\" || script.type === \"text/x-icanhaz\")) {\n                    ich.addTemplate(script.id, trim(script.innerHTML));\n                    trash.unshift(script);\n                }\n            }\n            for (i = 0, l = trash.length; i < l; i++) {\n                trash[i].parentNode.removeChild(trash[i]);\n            }\n        }\n    };\n\n    // Export the ICanHaz object for **Node.js**, with\n    // backwards-compatibility for the old `require()` API. If we're in\n    // the browser, add `ich` as a global object via a string identifier,\n    // for Closure Compiler \"advanced\" mode.\n    if (typeof exports !== 'undefined') {\n        if (typeof module !== 'undefined' && module.exports) {\n            exports = module.exports = ich;\n        }\n        exports.ich = ich;\n    } else {\n        root['ich'] = ich;\n    }\n\n    if (typeof document !== 'undefined') {\n        if (ich.$) {\n            ich.$(function () {\n                ich.grabTemplates();\n            });\n        } else {\n            document.addEventListener('DOMContentLoaded', function () {\n                ich.grabTemplates();\n            }, true);\n        }\n    }\n\n})();\n})();\n","module.exports = jQuery;","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary2');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('./utf8');\n\nvar base64encoder;\nif (typeof ArrayBuffer !== 'undefined') {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if (typeof utf8encode === 'function') {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (typeof ArrayBuffer !== 'undefined' && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (typeof Blob !== 'undefined' && data instanceof Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    exports.encodePacket({ type: packet.type, data: fr.result }, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (typeof Blob !== 'undefined' && packet.data instanceof Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data === 'string') {\n    if (data.charAt(0) === 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data, { strict: false });\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, false, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data !== 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data === '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = '', n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (chr !== ':') {\n      length += chr;\n      continue;\n    }\n\n    if (length === '' || (length != (n = Number(length)))) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    msg = data.substr(i + 1, n);\n\n    if (length != msg.length) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    if (msg.length) {\n      packet = exports.decodePacket(msg, binaryType, false);\n\n      if (err.type === packet.type && err.data === packet.data) {\n        // parser error in individual packet - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      var ret = callback(packet, i + n, l);\n      if (false === ret) return;\n    }\n\n    // advance cursor\n    i += n;\n    length = '';\n  }\n\n  if (length !== '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] === 255) break;\n\n      // 310 = char length of Number.MAX_VALUE\n      if (msgLength.length > 310) {\n        return callback(err, 0, 1);\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar binary = require('./binary');\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\nvar ERROR_PACKET = exports.ERROR + '\"encode error\"';\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    encodeAsBinary(obj, callback);\n  } else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n\n  // first is type\n  var str = '' + obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    str += obj.attachments + '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' !== obj.nsp) {\n    str += obj.nsp + ',';\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    var payload = tryStringify(obj.data);\n    if (payload !== false) {\n      str += payload;\n    } else {\n      return ERROR_PACKET;\n    }\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\nfunction tryStringify(str) {\n  try {\n    return JSON.stringify(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an encoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if (typeof obj === 'string') {\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  } else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  } else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var i = 0;\n  // look up type\n  var p = {\n    type: Number(str.charAt(0))\n  };\n\n  if (null == exports.types[p.type]) {\n    return error('unknown packet type ' + p.type);\n  }\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n    var buf = '';\n    while (str.charAt(++i) !== '-') {\n      buf += str.charAt(i);\n      if (i == str.length) break;\n    }\n    if (buf != Number(buf) || str.charAt(i) !== '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' === str.charAt(i + 1)) {\n    p.nsp = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' === c) break;\n      p.nsp += c;\n      if (i === str.length) break;\n    }\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    p.id = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      p.id += str.charAt(i);\n      if (i === str.length) break;\n    }\n    p.id = Number(p.id);\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    var payload = tryParse(str.substr(i));\n    var isPayloadValid = payload !== false && (p.type === exports.ERROR || isArray(payload));\n    if (isPayloadValid) {\n      p.data = payload;\n    } else {\n      return error('invalid payload');\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(msg) {\n  return {\n    type: exports.ERROR,\n    data: 'parser error: ' + msg\n  };\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\nvar globalThis = require('./globalThis');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new globalThis[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n","module.exports = (function () {\n  if (typeof self !== 'undefined') {\n    return self;\n  } else if (typeof window !== 'undefined') {\n    return window;\n  } else {\n    return Function('return this')(); // eslint-disable-line no-new-func\n  }\n})();\n","/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // results of ReactNative environment detection\n  this.isReactNative = opts.isReactNative;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","\nmodule.exports = isBuf;\n\nvar withNativeBuffer = typeof Buffer === 'function' && typeof Buffer.isBuffer === 'function';\nvar withNativeArrayBuffer = typeof ArrayBuffer === 'function';\n\nvar isView = function (obj) {\n  return typeof ArrayBuffer.isView === 'function' ? ArrayBuffer.isView(obj) : (obj.buffer instanceof ArrayBuffer);\n};\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (withNativeBuffer && Buffer.isBuffer(obj)) ||\n          (withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)));\n}\n","\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  var _parser = opts.parser || parser;\n  this.encoder = new _parser.Encoder();\n  this.decoder = new _parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.generateId(nsp);\n    }\n  }\n};\n\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\n\nManager.prototype.generateId = function (nsp) {\n  return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    if (timeout === 0) {\n      openSub.destroy(); // prevents a race condition with the 'open' event\n    }\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.generateId(nsp);\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting event is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n","/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('xmlhttprequest-ssl');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState) {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n","/* global Blob File */\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' ||\n                        typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof File === 'function' ||\n                        typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]';\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary (obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if ((typeof Buffer === 'function' && Buffer.isBuffer && Buffer.isBuffer(obj)) ||\n    (typeof ArrayBuffer === 'function' && obj instanceof ArrayBuffer) ||\n    (withNativeBlob && obj instanceof Blob) ||\n    (withNativeFile && obj instanceof File)\n  ) {\n    return true;\n  }\n\n  // see: https://github.com/Automattic/has-binary/pull/4\n  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};","\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar parseqs = require('parseqs');\nvar hasBin = require('has-binary2');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  this.flags = {};\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  if (!this.io.reconnecting) this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var packet = {\n    type: (this.flags.binary !== undefined ? this.flags.binary : hasBin(args)) ? parser.BINARY_EVENT : parser.EVENT,\n    data: args\n  };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  this.flags = {};\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n      debug('sending connect packet with query %s', query);\n      this.packet({type: parser.CONNECT, query: query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  var sameNamespace = packet.nsp === this.nsp;\n  var rootNamespaceError = packet.type === parser.ERROR && packet.nsp === '/';\n\n  if (!sameNamespace && !rootNamespaceError) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    self.packet({\n      type: hasBin(args) ? parser.BINARY_ACK : parser.ACK,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags.compress = compress;\n  return this;\n};\n\n/**\n * Sets the binary flag\n *\n * @param {Boolean} whether the emitted data contains binary\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.binary = function (binary) {\n  this.flags.binary = binary;\n  return this;\n};\n","\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n","/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n","\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  }\n  return io.socket(parsed.path, opts);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n","/*!\n * jQuery UI Touch Punch 0.2.3\n *\n * Copyright 20112014, Dave Furfero\n * Dual licensed under the MIT or GPL Version 2 licenses.\n *\n * Depends:\n *  jquery.ui.widget.js\n *  jquery.ui.mouse.js\n */\n(function ($) {\n\n  // Detect touch support\n  $.support.touch = 'ontouchend' in document;\n\n  // Ignore browsers without touch support\n  if (!$.support.touch) {\n    return;\n  }\n\n  var mouseProto = $.ui.mouse.prototype,\n      _mouseInit = mouseProto._mouseInit,\n      _mouseDestroy = mouseProto._mouseDestroy,\n      touchHandled;\n\n  /**\n   * Simulate a mouse event based on a corresponding touch event\n   * @param {Object} event A touch event\n   * @param {String} simulatedType The corresponding mouse event\n   */\n  function simulateMouseEvent (event, simulatedType) {\n\n    // Ignore multi-touch events\n    if (event.originalEvent.touches.length > 1) {\n      return;\n    }\n\n    event.preventDefault();\n\n    var touch = event.originalEvent.changedTouches[0],\n        simulatedEvent = document.createEvent('MouseEvents');\n    \n    // Initialize the simulated mouse event using the touch event's coordinates\n    simulatedEvent.initMouseEvent(\n      simulatedType,    // type\n      true,             // bubbles                    \n      true,             // cancelable                 \n      window,           // view                       \n      1,                // detail                     \n      touch.screenX,    // screenX                    \n      touch.screenY,    // screenY                    \n      touch.clientX,    // clientX                    \n      touch.clientY,    // clientY                    \n      false,            // ctrlKey                    \n      false,            // altKey                     \n      false,            // shiftKey                   \n      false,            // metaKey                    \n      0,                // button                     \n      null              // relatedTarget              \n    );\n\n    // Dispatch the simulated event to the target element\n    event.target.dispatchEvent(simulatedEvent);\n  }\n\n  /**\n   * Handle the jQuery UI widget's touchstart events\n   * @param {Object} event The widget element's touchstart event\n   */\n  mouseProto._touchStart = function (event) {\n\n    var self = this;\n\n    // Ignore the event if another widget is already being handled\n    if (touchHandled || !self._mouseCapture(event.originalEvent.changedTouches[0])) {\n      return;\n    }\n\n    // Set the flag to prevent other widgets from inheriting the touch event\n    touchHandled = true;\n\n    // Track movement to determine if interaction was a click\n    self._touchMoved = false;\n\n    // Simulate the mouseover event\n    simulateMouseEvent(event, 'mouseover');\n\n    // Simulate the mousemove event\n    simulateMouseEvent(event, 'mousemove');\n\n    // Simulate the mousedown event\n    simulateMouseEvent(event, 'mousedown');\n  };\n\n  /**\n   * Handle the jQuery UI widget's touchmove events\n   * @param {Object} event The document's touchmove event\n   */\n  mouseProto._touchMove = function (event) {\n\n    // Ignore event if not handled\n    if (!touchHandled) {\n      return;\n    }\n\n    // Interaction was not a click\n    this._touchMoved = true;\n\n    // Simulate the mousemove event\n    simulateMouseEvent(event, 'mousemove');\n  };\n\n  /**\n   * Handle the jQuery UI widget's touchend events\n   * @param {Object} event The document's touchend event\n   */\n  mouseProto._touchEnd = function (event) {\n\n    // Ignore event if not handled\n    if (!touchHandled) {\n      return;\n    }\n\n    // Simulate the mouseup event\n    simulateMouseEvent(event, 'mouseup');\n\n    // Simulate the mouseout event\n    simulateMouseEvent(event, 'mouseout');\n\n    // If the touch interaction did not move, it should trigger a click\n    if (!this._touchMoved) {\n\n      // Simulate the click event\n      simulateMouseEvent(event, 'click');\n    }\n\n    // Unset the flag to allow other widgets to inherit the touch event\n    touchHandled = false;\n  };\n\n  /**\n   * A duck punch of the $.ui.mouse _mouseInit method to support touch events.\n   * This method extends the widget with bound touch event handlers that\n   * translate touch events to mouse events and pass them to the widget's\n   * original mouse event handling methods.\n   */\n  mouseProto._mouseInit = function () {\n    \n    var self = this;\n\n    // Delegate the touch handlers to the widget's element\n    self.element.bind({\n      touchstart: $.proxy(self, '_touchStart'),\n      touchmove: $.proxy(self, '_touchMove'),\n      touchend: $.proxy(self, '_touchEnd')\n    });\n\n    // Call the original $.ui.mouse init method\n    _mouseInit.call(self);\n  };\n\n  /**\n   * Remove the touch event handlers\n   */\n  mouseProto._mouseDestroy = function () {\n    \n    var self = this;\n\n    // Delegate the touch handlers to the widget's element\n    self.element.unbind({\n      touchstart: $.proxy(self, '_touchStart'),\n      touchmove: $.proxy(self, '_touchMove'),\n      touchend: $.proxy(self, '_touchEnd')\n    });\n\n    // Call the original $.ui.mouse destroy method\n    _mouseDestroy.call(self);\n  };\n\n})(jQuery);","/*\n * jQuery Iframe Transport Plugin 1.7\n * https://github.com/blueimp/jQuery-File-Upload\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * http://www.opensource.org/licenses/MIT\n */\n\n/*jslint unparam: true, nomen: true */\n/*global define, window, document */\n\n(function (factory) {\n    'use strict';\n    if (typeof define === 'function' && define.amd) {\n        // Register as an anonymous AMD module:\n        define(['jquery'], factory);\n    } else {\n        // Browser globals:\n        factory(window.jQuery);\n    }\n}(function ($) {\n    'use strict';\n\n    // Helper variable to create unique names for the transport iframes:\n    var counter = 0;\n\n    // The iframe transport accepts three additional options:\n    // options.fileInput: a jQuery collection of file input fields\n    // options.paramName: the parameter name for the file form data,\n    //  overrides the name property of the file input field(s),\n    //  can be a string or an array of strings.\n    // options.formData: an array of objects with name and value properties,\n    //  equivalent to the return data of .serializeArray(), e.g.:\n    //  [{name: 'a', value: 1}, {name: 'b', value: 2}]\n    $.ajaxTransport('iframe', function (options) {\n        if (options.async) {\n            var form,\n                iframe,\n                addParamChar;\n            return {\n                send: function (_, completeCallback) {\n                    form = $('<form style=\"display:none;\"></form>');\n                    form.attr('accept-charset', options.formAcceptCharset);\n                    addParamChar = /\\?/.test(options.url) ? '&' : '?';\n                    // XDomainRequest only supports GET and POST:\n                    if (options.type === 'DELETE') {\n                        options.url = options.url + addParamChar + '_method=DELETE';\n                        options.type = 'POST';\n                    } else if (options.type === 'PUT') {\n                        options.url = options.url + addParamChar + '_method=PUT';\n                        options.type = 'POST';\n                    } else if (options.type === 'PATCH') {\n                        options.url = options.url + addParamChar + '_method=PATCH';\n                        options.type = 'POST';\n                    }\n                    // javascript:false as initial iframe src\n                    // prevents warning popups on HTTPS in IE6.\n                    // IE versions below IE8 cannot set the name property of\n                    // elements that have already been added to the DOM,\n                    // so we set the name along with the iframe HTML markup:\n                    counter += 1;\n                    iframe = $(\n                        '<iframe src=\"javascript:false;\" name=\"iframe-transport-' +\n                            counter + '\"></iframe>'\n                    ).bind('load', function () {\n                        var fileInputClones,\n                            paramNames = $.isArray(options.paramName) ?\n                                    options.paramName : [options.paramName];\n                        iframe\n                            .unbind('load')\n                            .bind('load', function () {\n                                var response;\n                                // Wrap in a try/catch block to catch exceptions thrown\n                                // when trying to access cross-domain iframe contents:\n                                try {\n                                    response = iframe.contents();\n                                    // Google Chrome and Firefox do not throw an\n                                    // exception when calling iframe.contents() on\n                                    // cross-domain requests, so we unify the response:\n                                    if (!response.length || !response[0].firstChild) {\n                                        throw new Error();\n                                    }\n                                } catch (e) {\n                                    response = undefined;\n                                }\n                                // The complete callback returns the\n                                // iframe content document as response object:\n                                completeCallback(\n                                    200,\n                                    'success',\n                                    {'iframe': response}\n                                );\n                                // Fix for IE endless progress bar activity bug\n                                // (happens on form submits to iframe targets):\n                                $('<iframe src=\"javascript:false;\"></iframe>')\n                                    .appendTo(form);\n                                window.setTimeout(function () {\n                                    // Removing the form in a setTimeout call\n                                    // allows Chrome's developer tools to display\n                                    // the response result\n                                    form.remove();\n                                }, 0);\n                            });\n                        form\n                            .prop('target', iframe.prop('name'))\n                            .prop('action', options.url)\n                            .prop('method', options.type);\n                        if (options.formData) {\n                            $.each(options.formData, function (index, field) {\n                                $('<input type=\"hidden\"/>')\n                                    .prop('name', field.name)\n                                    .val(field.value)\n                                    .appendTo(form);\n                            });\n                        }\n                        if (options.fileInput && options.fileInput.length &&\n                                options.type === 'POST') {\n                            fileInputClones = options.fileInput.clone();\n                            // Insert a clone for each file input field:\n                            options.fileInput.after(function (index) {\n                                return fileInputClones[index];\n                            });\n                            if (options.paramName) {\n                                options.fileInput.each(function (index) {\n                                    $(this).prop(\n                                        'name',\n                                        paramNames[index] || options.paramName\n                                    );\n                                });\n                            }\n                            // Appending the file input fields to the hidden form\n                            // removes them from their original location:\n                            form\n                                .append(options.fileInput)\n                                .prop('enctype', 'multipart/form-data')\n                                // enctype must be set as encoding for IE:\n                                .prop('encoding', 'multipart/form-data');\n                        }\n                        form.submit();\n                        // Insert the file input fields at their original location\n                        // by replacing the clones with the originals:\n                        if (fileInputClones && fileInputClones.length) {\n                            options.fileInput.each(function (index, input) {\n                                var clone = $(fileInputClones[index]);\n                                $(input).prop('name', clone.prop('name'));\n                                clone.replaceWith(input);\n                            });\n                        }\n                    });\n                    form.append(iframe).appendTo(document.body);\n                },\n                abort: function () {\n                    if (iframe) {\n                        // javascript:false as iframe src aborts the request\n                        // and prevents warning popups on HTTPS in IE6.\n                        // concat is used to avoid the \"Script URL\" JSLint error:\n                        iframe\n                            .unbind('load')\n                            .prop('src', 'javascript'.concat(':false;'));\n                    }\n                    if (form) {\n                        form.remove();\n                    }\n                }\n            };\n        }\n    });\n\n    // The iframe transport returns the iframe content document as response.\n    // The following adds converters from iframe to text, json, html, xml\n    // and script.\n    // Please note that the Content-Type for JSON responses has to be text/plain\n    // or text/html, if the browser doesn't include application/json in the\n    // Accept header, else IE will show a download dialog.\n    // The Content-Type for XML responses on the other hand has to be always\n    // application/xml or text/xml, so IE properly parses the XML response.\n    // See also\n    // https://github.com/blueimp/jQuery-File-Upload/wiki/Setup#content-type-negotiation\n    $.ajaxSetup({\n        converters: {\n            'iframe text': function (iframe) {\n                return iframe && $(iframe[0].body).text();\n            },\n            'iframe json': function (iframe) {\n                return iframe && $.parseJSON($(iframe[0].body).text());\n            },\n            'iframe html': function (iframe) {\n                return iframe && $(iframe[0].body).html();\n            },\n            'iframe xml': function (iframe) {\n                var xmlDoc = iframe && iframe[0];\n                return xmlDoc && $.isXMLDoc(xmlDoc) ? xmlDoc :\n                        $.parseXML((xmlDoc.XMLDocument && xmlDoc.XMLDocument.xml) ||\n                            $(xmlDoc.body).html());\n            },\n            'iframe script': function (iframe) {\n                return iframe && $.globalEval($(iframe[0].body).text());\n            }\n        }\n    });\n\n}));\n","/*\n * jQuery File Upload Plugin\n * https://github.com/blueimp/jQuery-File-Upload\n *\n * Copyright 2010, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, require */\n/* eslint-disable new-cap */\n\n(function (factory) {\n  'use strict';\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['jquery', 'jquery-ui/ui/widget'], factory);\n  } else if (typeof exports === 'object') {\n    // Node/CommonJS:\n    factory(require('jquery'), require('./vendor/jquery.ui.widget'));\n  } else {\n    // Browser globals:\n    factory(window.jQuery);\n  }\n})(function ($) {\n  'use strict';\n\n  // Detect file input support, based on\n  // https://viljamis.com/2012/file-upload-support-on-mobile/\n  $.support.fileInput = !(\n    new RegExp(\n      // Handle devices which give false positives for the feature detection:\n      '(Android (1\\\\.[0156]|2\\\\.[01]))' +\n        '|(Windows Phone (OS 7|8\\\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)' +\n        '|(w(eb)?OSBrowser)|(webOS)' +\n        '|(Kindle/(1\\\\.0|2\\\\.[05]|3\\\\.0))'\n    ).test(window.navigator.userAgent) ||\n    // Feature detection for all other devices:\n    $('<input type=\"file\"/>').prop('disabled')\n  );\n\n  // The FileReader API is not actually used, but works as feature detection,\n  // as some Safari versions (5?) support XHR file uploads via the FormData API,\n  // but not non-multipart XHR file uploads.\n  // window.XMLHttpRequestUpload is not available on IE10, so we check for\n  // window.ProgressEvent instead to detect XHR2 file upload capability:\n  $.support.xhrFileUpload = !!(window.ProgressEvent && window.FileReader);\n  $.support.xhrFormDataFileUpload = !!window.FormData;\n\n  // Detect support for Blob slicing (required for chunked uploads):\n  $.support.blobSlice =\n    window.Blob &&\n    (Blob.prototype.slice ||\n      Blob.prototype.webkitSlice ||\n      Blob.prototype.mozSlice);\n\n  /**\n   * Helper function to create drag handlers for dragover/dragenter/dragleave\n   *\n   * @param {string} type Event type\n   * @returns {Function} Drag handler\n   */\n  function getDragHandler(type) {\n    var isDragOver = type === 'dragover';\n    return function (e) {\n      e.dataTransfer = e.originalEvent && e.originalEvent.dataTransfer;\n      var dataTransfer = e.dataTransfer;\n      if (\n        dataTransfer &&\n        $.inArray('Files', dataTransfer.types) !== -1 &&\n        this._trigger(type, $.Event(type, { delegatedEvent: e })) !== false\n      ) {\n        e.preventDefault();\n        if (isDragOver) {\n          dataTransfer.dropEffect = 'copy';\n        }\n      }\n    };\n  }\n\n  // The fileupload widget listens for change events on file input fields defined\n  // via fileInput setting and paste or drop events of the given dropZone.\n  // In addition to the default jQuery Widget methods, the fileupload widget\n  // exposes the \"add\" and \"send\" methods, to add or directly send files using\n  // the fileupload API.\n  // By default, files added via file input selection, paste, drag & drop or\n  // \"add\" method are uploaded immediately, but it is possible to override\n  // the \"add\" callback option to queue file uploads.\n  $.widget('blueimp.fileupload', {\n    options: {\n      // The drop target element(s), by the default the complete document.\n      // Set to null to disable drag & drop support:\n      dropZone: $(document),\n      // The paste target element(s), by the default undefined.\n      // Set to a DOM node or jQuery object to enable file pasting:\n      pasteZone: undefined,\n      // The file input field(s), that are listened to for change events.\n      // If undefined, it is set to the file input fields inside\n      // of the widget element on plugin initialization.\n      // Set to null to disable the change listener.\n      fileInput: undefined,\n      // By default, the file input field is replaced with a clone after\n      // each input field change event. This is required for iframe transport\n      // queues and allows change events to be fired for the same file\n      // selection, but can be disabled by setting the following option to false:\n      replaceFileInput: true,\n      // The parameter name for the file form data (the request argument name).\n      // If undefined or empty, the name property of the file input field is\n      // used, or \"files[]\" if the file input name property is also empty,\n      // can be a string or an array of strings:\n      paramName: undefined,\n      // By default, each file of a selection is uploaded using an individual\n      // request for XHR type uploads. Set to false to upload file\n      // selections in one request each:\n      singleFileUploads: true,\n      // To limit the number of files uploaded with one XHR request,\n      // set the following option to an integer greater than 0:\n      limitMultiFileUploads: undefined,\n      // The following option limits the number of files uploaded with one\n      // XHR request to keep the request size under or equal to the defined\n      // limit in bytes:\n      limitMultiFileUploadSize: undefined,\n      // Multipart file uploads add a number of bytes to each uploaded file,\n      // therefore the following option adds an overhead for each file used\n      // in the limitMultiFileUploadSize configuration:\n      limitMultiFileUploadSizeOverhead: 512,\n      // Set the following option to true to issue all file upload requests\n      // in a sequential order:\n      sequentialUploads: false,\n      // To limit the number of concurrent uploads,\n      // set the following option to an integer greater than 0:\n      limitConcurrentUploads: undefined,\n      // Set the following option to true to force iframe transport uploads:\n      forceIframeTransport: false,\n      // Set the following option to the location of a redirect url on the\n      // origin server, for cross-domain iframe transport uploads:\n      redirect: undefined,\n      // The parameter name for the redirect url, sent as part of the form\n      // data and set to 'redirect' if this option is empty:\n      redirectParamName: undefined,\n      // Set the following option to the location of a postMessage window,\n      // to enable postMessage transport uploads:\n      postMessage: undefined,\n      // By default, XHR file uploads are sent as multipart/form-data.\n      // The iframe transport is always using multipart/form-data.\n      // Set to false to enable non-multipart XHR uploads:\n      multipart: true,\n      // To upload large files in smaller chunks, set the following option\n      // to a preferred maximum chunk size. If set to 0, null or undefined,\n      // or the browser does not support the required Blob API, files will\n      // be uploaded as a whole.\n      maxChunkSize: undefined,\n      // When a non-multipart upload or a chunked multipart upload has been\n      // aborted, this option can be used to resume the upload by setting\n      // it to the size of the already uploaded bytes. This option is most\n      // useful when modifying the options object inside of the \"add\" or\n      // \"send\" callbacks, as the options are cloned for each file upload.\n      uploadedBytes: undefined,\n      // By default, failed (abort or error) file uploads are removed from the\n      // global progress calculation. Set the following option to false to\n      // prevent recalculating the global progress data:\n      recalculateProgress: true,\n      // Interval in milliseconds to calculate and trigger progress events:\n      progressInterval: 100,\n      // Interval in milliseconds to calculate progress bitrate:\n      bitrateInterval: 500,\n      // By default, uploads are started automatically when adding files:\n      autoUpload: true,\n      // By default, duplicate file names are expected to be handled on\n      // the server-side. If this is not possible (e.g. when uploading\n      // files directly to Amazon S3), the following option can be set to\n      // an empty object or an object mapping existing filenames, e.g.:\n      // { \"image.jpg\": true, \"image (1).jpg\": true }\n      // If it is set, all files will be uploaded with unique filenames,\n      // adding increasing number suffixes if necessary, e.g.:\n      // \"image (2).jpg\"\n      uniqueFilenames: undefined,\n\n      // Error and info messages:\n      messages: {\n        uploadedBytes: 'Uploaded bytes exceed file size'\n      },\n\n      // Translation function, gets the message key to be translated\n      // and an object with context specific data as arguments:\n      i18n: function (message, context) {\n        // eslint-disable-next-line no-param-reassign\n        message = this.messages[message] || message.toString();\n        if (context) {\n          $.each(context, function (key, value) {\n            // eslint-disable-next-line no-param-reassign\n            message = message.replace('{' + key + '}', value);\n          });\n        }\n        return message;\n      },\n\n      // Additional form data to be sent along with the file uploads can be set\n      // using this option, which accepts an array of objects with name and\n      // value properties, a function returning such an array, a FormData\n      // object (for XHR file uploads), or a simple object.\n      // The form of the first fileInput is given as parameter to the function:\n      formData: function (form) {\n        return form.serializeArray();\n      },\n\n      // The add callback is invoked as soon as files are added to the fileupload\n      // widget (via file input selection, drag & drop, paste or add API call).\n      // If the singleFileUploads option is enabled, this callback will be\n      // called once for each file in the selection for XHR file uploads, else\n      // once for each file selection.\n      //\n      // The upload starts when the submit method is invoked on the data parameter.\n      // The data object contains a files property holding the added files\n      // and allows you to override plugin options as well as define ajax settings.\n      //\n      // Listeners for this callback can also be bound the following way:\n      // .on('fileuploadadd', func);\n      //\n      // data.submit() returns a Promise object and allows to attach additional\n      // handlers using jQuery's Deferred callbacks:\n      // data.submit().done(func).fail(func).always(func);\n      add: function (e, data) {\n        if (e.isDefaultPrevented()) {\n          return false;\n        }\n        if (\n          data.autoUpload ||\n          (data.autoUpload !== false &&\n            $(this).fileupload('option', 'autoUpload'))\n        ) {\n          data.process().done(function () {\n            data.submit();\n          });\n        }\n      },\n\n      // Other callbacks:\n\n      // Callback for the submit event of each file upload:\n      // submit: function (e, data) {}, // .on('fileuploadsubmit', func);\n\n      // Callback for the start of each file upload request:\n      // send: function (e, data) {}, // .on('fileuploadsend', func);\n\n      // Callback for successful uploads:\n      // done: function (e, data) {}, // .on('fileuploaddone', func);\n\n      // Callback for failed (abort or error) uploads:\n      // fail: function (e, data) {}, // .on('fileuploadfail', func);\n\n      // Callback for completed (success, abort or error) requests:\n      // always: function (e, data) {}, // .on('fileuploadalways', func);\n\n      // Callback for upload progress events:\n      // progress: function (e, data) {}, // .on('fileuploadprogress', func);\n\n      // Callback for global upload progress events:\n      // progressall: function (e, data) {}, // .on('fileuploadprogressall', func);\n\n      // Callback for uploads start, equivalent to the global ajaxStart event:\n      // start: function (e) {}, // .on('fileuploadstart', func);\n\n      // Callback for uploads stop, equivalent to the global ajaxStop event:\n      // stop: function (e) {}, // .on('fileuploadstop', func);\n\n      // Callback for change events of the fileInput(s):\n      // change: function (e, data) {}, // .on('fileuploadchange', func);\n\n      // Callback for paste events to the pasteZone(s):\n      // paste: function (e, data) {}, // .on('fileuploadpaste', func);\n\n      // Callback for drop events of the dropZone(s):\n      // drop: function (e, data) {}, // .on('fileuploaddrop', func);\n\n      // Callback for dragover events of the dropZone(s):\n      // dragover: function (e) {}, // .on('fileuploaddragover', func);\n\n      // Callback before the start of each chunk upload request (before form data initialization):\n      // chunkbeforesend: function (e, data) {}, // .on('fileuploadchunkbeforesend', func);\n\n      // Callback for the start of each chunk upload request:\n      // chunksend: function (e, data) {}, // .on('fileuploadchunksend', func);\n\n      // Callback for successful chunk uploads:\n      // chunkdone: function (e, data) {}, // .on('fileuploadchunkdone', func);\n\n      // Callback for failed (abort or error) chunk uploads:\n      // chunkfail: function (e, data) {}, // .on('fileuploadchunkfail', func);\n\n      // Callback for completed (success, abort or error) chunk upload requests:\n      // chunkalways: function (e, data) {}, // .on('fileuploadchunkalways', func);\n\n      // The plugin options are used as settings object for the ajax calls.\n      // The following are jQuery ajax settings required for the file uploads:\n      processData: false,\n      contentType: false,\n      cache: false,\n      timeout: 0\n    },\n\n    // jQuery versions before 1.8 require promise.pipe if the return value is\n    // used, as promise.then in older versions has a different behavior, see:\n    // https://blog.jquery.com/2012/08/09/jquery-1-8-released/\n    // https://bugs.jquery.com/ticket/11010\n    // https://github.com/blueimp/jQuery-File-Upload/pull/3435\n    _promisePipe: (function () {\n      var parts = $.fn.jquery.split('.');\n      return Number(parts[0]) > 1 || Number(parts[1]) > 7 ? 'then' : 'pipe';\n    })(),\n\n    // A list of options that require reinitializing event listeners and/or\n    // special initialization code:\n    _specialOptions: [\n      'fileInput',\n      'dropZone',\n      'pasteZone',\n      'multipart',\n      'forceIframeTransport'\n    ],\n\n    _blobSlice:\n      $.support.blobSlice &&\n      function () {\n        var slice = this.slice || this.webkitSlice || this.mozSlice;\n        return slice.apply(this, arguments);\n      },\n\n    _BitrateTimer: function () {\n      this.timestamp = Date.now ? Date.now() : new Date().getTime();\n      this.loaded = 0;\n      this.bitrate = 0;\n      this.getBitrate = function (now, loaded, interval) {\n        var timeDiff = now - this.timestamp;\n        if (!this.bitrate || !interval || timeDiff > interval) {\n          this.bitrate = (loaded - this.loaded) * (1000 / timeDiff) * 8;\n          this.loaded = loaded;\n          this.timestamp = now;\n        }\n        return this.bitrate;\n      };\n    },\n\n    _isXHRUpload: function (options) {\n      return (\n        !options.forceIframeTransport &&\n        ((!options.multipart && $.support.xhrFileUpload) ||\n          $.support.xhrFormDataFileUpload)\n      );\n    },\n\n    _getFormData: function (options) {\n      var formData;\n      if ($.type(options.formData) === 'function') {\n        return options.formData(options.form);\n      }\n      if ($.isArray(options.formData)) {\n        return options.formData;\n      }\n      if ($.type(options.formData) === 'object') {\n        formData = [];\n        $.each(options.formData, function (name, value) {\n          formData.push({ name: name, value: value });\n        });\n        return formData;\n      }\n      return [];\n    },\n\n    _getTotal: function (files) {\n      var total = 0;\n      $.each(files, function (index, file) {\n        total += file.size || 1;\n      });\n      return total;\n    },\n\n    _initProgressObject: function (obj) {\n      var progress = {\n        loaded: 0,\n        total: 0,\n        bitrate: 0\n      };\n      if (obj._progress) {\n        $.extend(obj._progress, progress);\n      } else {\n        obj._progress = progress;\n      }\n    },\n\n    _initResponseObject: function (obj) {\n      var prop;\n      if (obj._response) {\n        for (prop in obj._response) {\n          if (Object.prototype.hasOwnProperty.call(obj._response, prop)) {\n            delete obj._response[prop];\n          }\n        }\n      } else {\n        obj._response = {};\n      }\n    },\n\n    _onProgress: function (e, data) {\n      if (e.lengthComputable) {\n        var now = Date.now ? Date.now() : new Date().getTime(),\n          loaded;\n        if (\n          data._time &&\n          data.progressInterval &&\n          now - data._time < data.progressInterval &&\n          e.loaded !== e.total\n        ) {\n          return;\n        }\n        data._time = now;\n        loaded =\n          Math.floor(\n            (e.loaded / e.total) * (data.chunkSize || data._progress.total)\n          ) + (data.uploadedBytes || 0);\n        // Add the difference from the previously loaded state\n        // to the global loaded counter:\n        this._progress.loaded += loaded - data._progress.loaded;\n        this._progress.bitrate = this._bitrateTimer.getBitrate(\n          now,\n          this._progress.loaded,\n          data.bitrateInterval\n        );\n        data._progress.loaded = data.loaded = loaded;\n        data._progress.bitrate = data.bitrate = data._bitrateTimer.getBitrate(\n          now,\n          loaded,\n          data.bitrateInterval\n        );\n        // Trigger a custom progress event with a total data property set\n        // to the file size(s) of the current upload and a loaded data\n        // property calculated accordingly:\n        this._trigger(\n          'progress',\n          $.Event('progress', { delegatedEvent: e }),\n          data\n        );\n        // Trigger a global progress event for all current file uploads,\n        // including ajax calls queued for sequential file uploads:\n        this._trigger(\n          'progressall',\n          $.Event('progressall', { delegatedEvent: e }),\n          this._progress\n        );\n      }\n    },\n\n    _initProgressListener: function (options) {\n      var that = this,\n        xhr = options.xhr ? options.xhr() : $.ajaxSettings.xhr();\n      // Accesss to the native XHR object is required to add event listeners\n      // for the upload progress event:\n      if (xhr.upload) {\n        $(xhr.upload).on('progress', function (e) {\n          var oe = e.originalEvent;\n          // Make sure the progress event properties get copied over:\n          e.lengthComputable = oe.lengthComputable;\n          e.loaded = oe.loaded;\n          e.total = oe.total;\n          that._onProgress(e, options);\n        });\n        options.xhr = function () {\n          return xhr;\n        };\n      }\n    },\n\n    _deinitProgressListener: function (options) {\n      var xhr = options.xhr ? options.xhr() : $.ajaxSettings.xhr();\n      if (xhr.upload) {\n        $(xhr.upload).off('progress');\n      }\n    },\n\n    _isInstanceOf: function (type, obj) {\n      // Cross-frame instanceof check\n      return Object.prototype.toString.call(obj) === '[object ' + type + ']';\n    },\n\n    _getUniqueFilename: function (name, map) {\n      // eslint-disable-next-line no-param-reassign\n      name = String(name);\n      if (map[name]) {\n        // eslint-disable-next-line no-param-reassign\n        name = name.replace(/(?: \\(([\\d]+)\\))?(\\.[^.]+)?$/, function (\n          _,\n          p1,\n          p2\n        ) {\n          var index = p1 ? Number(p1) + 1 : 1;\n          var ext = p2 || '';\n          return ' (' + index + ')' + ext;\n        });\n        return this._getUniqueFilename(name, map);\n      }\n      map[name] = true;\n      return name;\n    },\n\n    _initXHRData: function (options) {\n      var that = this,\n        formData,\n        file = options.files[0],\n        // Ignore non-multipart setting if not supported:\n        multipart = options.multipart || !$.support.xhrFileUpload,\n        paramName =\n          $.type(options.paramName) === 'array'\n            ? options.paramName[0]\n            : options.paramName;\n      options.headers = $.extend({}, options.headers);\n      if (options.contentRange) {\n        options.headers['Content-Range'] = options.contentRange;\n      }\n      if (!multipart || options.blob || !this._isInstanceOf('File', file)) {\n        options.headers['Content-Disposition'] =\n          'attachment; filename=\"' +\n          encodeURI(file.uploadName || file.name) +\n          '\"';\n      }\n      if (!multipart) {\n        options.contentType = file.type || 'application/octet-stream';\n        options.data = options.blob || file;\n      } else if ($.support.xhrFormDataFileUpload) {\n        if (options.postMessage) {\n          // window.postMessage does not allow sending FormData\n          // objects, so we just add the File/Blob objects to\n          // the formData array and let the postMessage window\n          // create the FormData object out of this array:\n          formData = this._getFormData(options);\n          if (options.blob) {\n            formData.push({\n              name: paramName,\n              value: options.blob\n            });\n          } else {\n            $.each(options.files, function (index, file) {\n              formData.push({\n                name:\n                  ($.type(options.paramName) === 'array' &&\n                    options.paramName[index]) ||\n                  paramName,\n                value: file\n              });\n            });\n          }\n        } else {\n          if (that._isInstanceOf('FormData', options.formData)) {\n            formData = options.formData;\n          } else {\n            formData = new FormData();\n            $.each(this._getFormData(options), function (index, field) {\n              formData.append(field.name, field.value);\n            });\n          }\n          if (options.blob) {\n            formData.append(\n              paramName,\n              options.blob,\n              file.uploadName || file.name\n            );\n          } else {\n            $.each(options.files, function (index, file) {\n              // This check allows the tests to run with\n              // dummy objects:\n              if (\n                that._isInstanceOf('File', file) ||\n                that._isInstanceOf('Blob', file)\n              ) {\n                var fileName = file.uploadName || file.name;\n                if (options.uniqueFilenames) {\n                  fileName = that._getUniqueFilename(\n                    fileName,\n                    options.uniqueFilenames\n                  );\n                }\n                formData.append(\n                  ($.type(options.paramName) === 'array' &&\n                    options.paramName[index]) ||\n                    paramName,\n                  file,\n                  fileName\n                );\n              }\n            });\n          }\n        }\n        options.data = formData;\n      }\n      // Blob reference is not needed anymore, free memory:\n      options.blob = null;\n    },\n\n    _initIframeSettings: function (options) {\n      var targetHost = $('<a></a>').prop('href', options.url).prop('host');\n      // Setting the dataType to iframe enables the iframe transport:\n      options.dataType = 'iframe ' + (options.dataType || '');\n      // The iframe transport accepts a serialized array as form data:\n      options.formData = this._getFormData(options);\n      // Add redirect url to form data on cross-domain uploads:\n      if (options.redirect && targetHost && targetHost !== location.host) {\n        options.formData.push({\n          name: options.redirectParamName || 'redirect',\n          value: options.redirect\n        });\n      }\n    },\n\n    _initDataSettings: function (options) {\n      if (this._isXHRUpload(options)) {\n        if (!this._chunkedUpload(options, true)) {\n          if (!options.data) {\n            this._initXHRData(options);\n          }\n          this._initProgressListener(options);\n        }\n        if (options.postMessage) {\n          // Setting the dataType to postmessage enables the\n          // postMessage transport:\n          options.dataType = 'postmessage ' + (options.dataType || '');\n        }\n      } else {\n        this._initIframeSettings(options);\n      }\n    },\n\n    _getParamName: function (options) {\n      var fileInput = $(options.fileInput),\n        paramName = options.paramName;\n      if (!paramName) {\n        paramName = [];\n        fileInput.each(function () {\n          var input = $(this),\n            name = input.prop('name') || 'files[]',\n            i = (input.prop('files') || [1]).length;\n          while (i) {\n            paramName.push(name);\n            i -= 1;\n          }\n        });\n        if (!paramName.length) {\n          paramName = [fileInput.prop('name') || 'files[]'];\n        }\n      } else if (!$.isArray(paramName)) {\n        paramName = [paramName];\n      }\n      return paramName;\n    },\n\n    _initFormSettings: function (options) {\n      // Retrieve missing options from the input field and the\n      // associated form, if available:\n      if (!options.form || !options.form.length) {\n        options.form = $(options.fileInput.prop('form'));\n        // If the given file input doesn't have an associated form,\n        // use the default widget file input's form:\n        if (!options.form.length) {\n          options.form = $(this.options.fileInput.prop('form'));\n        }\n      }\n      options.paramName = this._getParamName(options);\n      if (!options.url) {\n        options.url = options.form.prop('action') || location.href;\n      }\n      // The HTTP request method must be \"POST\" or \"PUT\":\n      options.type = (\n        options.type ||\n        ($.type(options.form.prop('method')) === 'string' &&\n          options.form.prop('method')) ||\n        ''\n      ).toUpperCase();\n      if (\n        options.type !== 'POST' &&\n        options.type !== 'PUT' &&\n        options.type !== 'PATCH'\n      ) {\n        options.type = 'POST';\n      }\n      if (!options.formAcceptCharset) {\n        options.formAcceptCharset = options.form.attr('accept-charset');\n      }\n    },\n\n    _getAJAXSettings: function (data) {\n      var options = $.extend({}, this.options, data);\n      this._initFormSettings(options);\n      this._initDataSettings(options);\n      return options;\n    },\n\n    // jQuery 1.6 doesn't provide .state(),\n    // while jQuery 1.8+ removed .isRejected() and .isResolved():\n    _getDeferredState: function (deferred) {\n      if (deferred.state) {\n        return deferred.state();\n      }\n      if (deferred.isResolved()) {\n        return 'resolved';\n      }\n      if (deferred.isRejected()) {\n        return 'rejected';\n      }\n      return 'pending';\n    },\n\n    // Maps jqXHR callbacks to the equivalent\n    // methods of the given Promise object:\n    _enhancePromise: function (promise) {\n      promise.success = promise.done;\n      promise.error = promise.fail;\n      promise.complete = promise.always;\n      return promise;\n    },\n\n    // Creates and returns a Promise object enhanced with\n    // the jqXHR methods abort, success, error and complete:\n    _getXHRPromise: function (resolveOrReject, context, args) {\n      var dfd = $.Deferred(),\n        promise = dfd.promise();\n      // eslint-disable-next-line no-param-reassign\n      context = context || this.options.context || promise;\n      if (resolveOrReject === true) {\n        dfd.resolveWith(context, args);\n      } else if (resolveOrReject === false) {\n        dfd.rejectWith(context, args);\n      }\n      promise.abort = dfd.promise;\n      return this._enhancePromise(promise);\n    },\n\n    // Adds convenience methods to the data callback argument:\n    _addConvenienceMethods: function (e, data) {\n      var that = this,\n        getPromise = function (args) {\n          return $.Deferred().resolveWith(that, args).promise();\n        };\n      data.process = function (resolveFunc, rejectFunc) {\n        if (resolveFunc || rejectFunc) {\n          data._processQueue = this._processQueue = (this._processQueue ||\n            getPromise([this]))\n            [that._promisePipe](function () {\n              if (data.errorThrown) {\n                return $.Deferred().rejectWith(that, [data]).promise();\n              }\n              return getPromise(arguments);\n            })\n            [that._promisePipe](resolveFunc, rejectFunc);\n        }\n        return this._processQueue || getPromise([this]);\n      };\n      data.submit = function () {\n        if (this.state() !== 'pending') {\n          data.jqXHR = this.jqXHR =\n            that._trigger(\n              'submit',\n              $.Event('submit', { delegatedEvent: e }),\n              this\n            ) !== false && that._onSend(e, this);\n        }\n        return this.jqXHR || that._getXHRPromise();\n      };\n      data.abort = function () {\n        if (this.jqXHR) {\n          return this.jqXHR.abort();\n        }\n        this.errorThrown = 'abort';\n        that._trigger('fail', null, this);\n        return that._getXHRPromise(false);\n      };\n      data.state = function () {\n        if (this.jqXHR) {\n          return that._getDeferredState(this.jqXHR);\n        }\n        if (this._processQueue) {\n          return that._getDeferredState(this._processQueue);\n        }\n      };\n      data.processing = function () {\n        return (\n          !this.jqXHR &&\n          this._processQueue &&\n          that._getDeferredState(this._processQueue) === 'pending'\n        );\n      };\n      data.progress = function () {\n        return this._progress;\n      };\n      data.response = function () {\n        return this._response;\n      };\n    },\n\n    // Parses the Range header from the server response\n    // and returns the uploaded bytes:\n    _getUploadedBytes: function (jqXHR) {\n      var range = jqXHR.getResponseHeader('Range'),\n        parts = range && range.split('-'),\n        upperBytesPos = parts && parts.length > 1 && parseInt(parts[1], 10);\n      return upperBytesPos && upperBytesPos + 1;\n    },\n\n    // Uploads a file in multiple, sequential requests\n    // by splitting the file up in multiple blob chunks.\n    // If the second parameter is true, only tests if the file\n    // should be uploaded in chunks, but does not invoke any\n    // upload requests:\n    _chunkedUpload: function (options, testOnly) {\n      options.uploadedBytes = options.uploadedBytes || 0;\n      var that = this,\n        file = options.files[0],\n        fs = file.size,\n        ub = options.uploadedBytes,\n        mcs = options.maxChunkSize || fs,\n        slice = this._blobSlice,\n        dfd = $.Deferred(),\n        promise = dfd.promise(),\n        jqXHR,\n        upload;\n      if (\n        !(\n          this._isXHRUpload(options) &&\n          slice &&\n          (ub || ($.type(mcs) === 'function' ? mcs(options) : mcs) < fs)\n        ) ||\n        options.data\n      ) {\n        return false;\n      }\n      if (testOnly) {\n        return true;\n      }\n      if (ub >= fs) {\n        file.error = options.i18n('uploadedBytes');\n        return this._getXHRPromise(false, options.context, [\n          null,\n          'error',\n          file.error\n        ]);\n      }\n      // The chunk upload method:\n      upload = function () {\n        // Clone the options object for each chunk upload:\n        var o = $.extend({}, options),\n          currentLoaded = o._progress.loaded;\n        o.blob = slice.call(\n          file,\n          ub,\n          ub + ($.type(mcs) === 'function' ? mcs(o) : mcs),\n          file.type\n        );\n        // Store the current chunk size, as the blob itself\n        // will be dereferenced after data processing:\n        o.chunkSize = o.blob.size;\n        // Expose the chunk bytes position range:\n        o.contentRange =\n          'bytes ' + ub + '-' + (ub + o.chunkSize - 1) + '/' + fs;\n        // Trigger chunkbeforesend to allow form data to be updated for this chunk\n        that._trigger('chunkbeforesend', null, o);\n        // Process the upload data (the blob and potential form data):\n        that._initXHRData(o);\n        // Add progress listeners for this chunk upload:\n        that._initProgressListener(o);\n        jqXHR = (\n          (that._trigger('chunksend', null, o) !== false && $.ajax(o)) ||\n          that._getXHRPromise(false, o.context)\n        )\n          .done(function (result, textStatus, jqXHR) {\n            ub = that._getUploadedBytes(jqXHR) || ub + o.chunkSize;\n            // Create a progress event if no final progress event\n            // with loaded equaling total has been triggered\n            // for this chunk:\n            if (currentLoaded + o.chunkSize - o._progress.loaded) {\n              that._onProgress(\n                $.Event('progress', {\n                  lengthComputable: true,\n                  loaded: ub - o.uploadedBytes,\n                  total: ub - o.uploadedBytes\n                }),\n                o\n              );\n            }\n            options.uploadedBytes = o.uploadedBytes = ub;\n            o.result = result;\n            o.textStatus = textStatus;\n            o.jqXHR = jqXHR;\n            that._trigger('chunkdone', null, o);\n            that._trigger('chunkalways', null, o);\n            if (ub < fs) {\n              // File upload not yet complete,\n              // continue with the next chunk:\n              upload();\n            } else {\n              dfd.resolveWith(o.context, [result, textStatus, jqXHR]);\n            }\n          })\n          .fail(function (jqXHR, textStatus, errorThrown) {\n            o.jqXHR = jqXHR;\n            o.textStatus = textStatus;\n            o.errorThrown = errorThrown;\n            that._trigger('chunkfail', null, o);\n            that._trigger('chunkalways', null, o);\n            dfd.rejectWith(o.context, [jqXHR, textStatus, errorThrown]);\n          })\n          .always(function () {\n            that._deinitProgressListener(o);\n          });\n      };\n      this._enhancePromise(promise);\n      promise.abort = function () {\n        return jqXHR.abort();\n      };\n      upload();\n      return promise;\n    },\n\n    _beforeSend: function (e, data) {\n      if (this._active === 0) {\n        // the start callback is triggered when an upload starts\n        // and no other uploads are currently running,\n        // equivalent to the global ajaxStart event:\n        this._trigger('start');\n        // Set timer for global bitrate progress calculation:\n        this._bitrateTimer = new this._BitrateTimer();\n        // Reset the global progress values:\n        this._progress.loaded = this._progress.total = 0;\n        this._progress.bitrate = 0;\n      }\n      // Make sure the container objects for the .response() and\n      // .progress() methods on the data object are available\n      // and reset to their initial state:\n      this._initResponseObject(data);\n      this._initProgressObject(data);\n      data._progress.loaded = data.loaded = data.uploadedBytes || 0;\n      data._progress.total = data.total = this._getTotal(data.files) || 1;\n      data._progress.bitrate = data.bitrate = 0;\n      this._active += 1;\n      // Initialize the global progress values:\n      this._progress.loaded += data.loaded;\n      this._progress.total += data.total;\n    },\n\n    _onDone: function (result, textStatus, jqXHR, options) {\n      var total = options._progress.total,\n        response = options._response;\n      if (options._progress.loaded < total) {\n        // Create a progress event if no final progress event\n        // with loaded equaling total has been triggered:\n        this._onProgress(\n          $.Event('progress', {\n            lengthComputable: true,\n            loaded: total,\n            total: total\n          }),\n          options\n        );\n      }\n      response.result = options.result = result;\n      response.textStatus = options.textStatus = textStatus;\n      response.jqXHR = options.jqXHR = jqXHR;\n      this._trigger('done', null, options);\n    },\n\n    _onFail: function (jqXHR, textStatus, errorThrown, options) {\n      var response = options._response;\n      if (options.recalculateProgress) {\n        // Remove the failed (error or abort) file upload from\n        // the global progress calculation:\n        this._progress.loaded -= options._progress.loaded;\n        this._progress.total -= options._progress.total;\n      }\n      response.jqXHR = options.jqXHR = jqXHR;\n      response.textStatus = options.textStatus = textStatus;\n      response.errorThrown = options.errorThrown = errorThrown;\n      this._trigger('fail', null, options);\n    },\n\n    _onAlways: function (jqXHRorResult, textStatus, jqXHRorError, options) {\n      // jqXHRorResult, textStatus and jqXHRorError are added to the\n      // options object via done and fail callbacks\n      this._trigger('always', null, options);\n    },\n\n    _onSend: function (e, data) {\n      if (!data.submit) {\n        this._addConvenienceMethods(e, data);\n      }\n      var that = this,\n        jqXHR,\n        aborted,\n        slot,\n        pipe,\n        options = that._getAJAXSettings(data),\n        send = function () {\n          that._sending += 1;\n          // Set timer for bitrate progress calculation:\n          options._bitrateTimer = new that._BitrateTimer();\n          jqXHR =\n            jqXHR ||\n            (\n              ((aborted ||\n                that._trigger(\n                  'send',\n                  $.Event('send', { delegatedEvent: e }),\n                  options\n                ) === false) &&\n                that._getXHRPromise(false, options.context, aborted)) ||\n              that._chunkedUpload(options) ||\n              $.ajax(options)\n            )\n              .done(function (result, textStatus, jqXHR) {\n                that._onDone(result, textStatus, jqXHR, options);\n              })\n              .fail(function (jqXHR, textStatus, errorThrown) {\n                that._onFail(jqXHR, textStatus, errorThrown, options);\n              })\n              .always(function (jqXHRorResult, textStatus, jqXHRorError) {\n                that._deinitProgressListener(options);\n                that._onAlways(\n                  jqXHRorResult,\n                  textStatus,\n                  jqXHRorError,\n                  options\n                );\n                that._sending -= 1;\n                that._active -= 1;\n                if (\n                  options.limitConcurrentUploads &&\n                  options.limitConcurrentUploads > that._sending\n                ) {\n                  // Start the next queued upload,\n                  // that has not been aborted:\n                  var nextSlot = that._slots.shift();\n                  while (nextSlot) {\n                    if (that._getDeferredState(nextSlot) === 'pending') {\n                      nextSlot.resolve();\n                      break;\n                    }\n                    nextSlot = that._slots.shift();\n                  }\n                }\n                if (that._active === 0) {\n                  // The stop callback is triggered when all uploads have\n                  // been completed, equivalent to the global ajaxStop event:\n                  that._trigger('stop');\n                }\n              });\n          return jqXHR;\n        };\n      this._beforeSend(e, options);\n      if (\n        this.options.sequentialUploads ||\n        (this.options.limitConcurrentUploads &&\n          this.options.limitConcurrentUploads <= this._sending)\n      ) {\n        if (this.options.limitConcurrentUploads > 1) {\n          slot = $.Deferred();\n          this._slots.push(slot);\n          pipe = slot[that._promisePipe](send);\n        } else {\n          this._sequence = this._sequence[that._promisePipe](send, send);\n          pipe = this._sequence;\n        }\n        // Return the piped Promise object, enhanced with an abort method,\n        // which is delegated to the jqXHR object of the current upload,\n        // and jqXHR callbacks mapped to the equivalent Promise methods:\n        pipe.abort = function () {\n          aborted = [undefined, 'abort', 'abort'];\n          if (!jqXHR) {\n            if (slot) {\n              slot.rejectWith(options.context, aborted);\n            }\n            return send();\n          }\n          return jqXHR.abort();\n        };\n        return this._enhancePromise(pipe);\n      }\n      return send();\n    },\n\n    _onAdd: function (e, data) {\n      var that = this,\n        result = true,\n        options = $.extend({}, this.options, data),\n        files = data.files,\n        filesLength = files.length,\n        limit = options.limitMultiFileUploads,\n        limitSize = options.limitMultiFileUploadSize,\n        overhead = options.limitMultiFileUploadSizeOverhead,\n        batchSize = 0,\n        paramName = this._getParamName(options),\n        paramNameSet,\n        paramNameSlice,\n        fileSet,\n        i,\n        j = 0;\n      if (!filesLength) {\n        return false;\n      }\n      if (limitSize && files[0].size === undefined) {\n        limitSize = undefined;\n      }\n      if (\n        !(options.singleFileUploads || limit || limitSize) ||\n        !this._isXHRUpload(options)\n      ) {\n        fileSet = [files];\n        paramNameSet = [paramName];\n      } else if (!(options.singleFileUploads || limitSize) && limit) {\n        fileSet = [];\n        paramNameSet = [];\n        for (i = 0; i < filesLength; i += limit) {\n          fileSet.push(files.slice(i, i + limit));\n          paramNameSlice = paramName.slice(i, i + limit);\n          if (!paramNameSlice.length) {\n            paramNameSlice = paramName;\n          }\n          paramNameSet.push(paramNameSlice);\n        }\n      } else if (!options.singleFileUploads && limitSize) {\n        fileSet = [];\n        paramNameSet = [];\n        for (i = 0; i < filesLength; i = i + 1) {\n          batchSize += files[i].size + overhead;\n          if (\n            i + 1 === filesLength ||\n            batchSize + files[i + 1].size + overhead > limitSize ||\n            (limit && i + 1 - j >= limit)\n          ) {\n            fileSet.push(files.slice(j, i + 1));\n            paramNameSlice = paramName.slice(j, i + 1);\n            if (!paramNameSlice.length) {\n              paramNameSlice = paramName;\n            }\n            paramNameSet.push(paramNameSlice);\n            j = i + 1;\n            batchSize = 0;\n          }\n        }\n      } else {\n        paramNameSet = paramName;\n      }\n      data.originalFiles = files;\n      $.each(fileSet || files, function (index, element) {\n        var newData = $.extend({}, data);\n        newData.files = fileSet ? element : [element];\n        newData.paramName = paramNameSet[index];\n        that._initResponseObject(newData);\n        that._initProgressObject(newData);\n        that._addConvenienceMethods(e, newData);\n        result = that._trigger(\n          'add',\n          $.Event('add', { delegatedEvent: e }),\n          newData\n        );\n        return result;\n      });\n      return result;\n    },\n\n    _replaceFileInput: function (data) {\n      var input = data.fileInput,\n        inputClone = input.clone(true),\n        restoreFocus = input.is(document.activeElement);\n      // Add a reference for the new cloned file input to the data argument:\n      data.fileInputClone = inputClone;\n      $('<form></form>').append(inputClone)[0].reset();\n      // Detaching allows to insert the fileInput on another form\n      // without loosing the file input value:\n      input.after(inputClone).detach();\n      // If the fileInput had focus before it was detached,\n      // restore focus to the inputClone.\n      if (restoreFocus) {\n        inputClone.trigger('focus');\n      }\n      // Avoid memory leaks with the detached file input:\n      $.cleanData(input.off('remove'));\n      // Replace the original file input element in the fileInput\n      // elements set with the clone, which has been copied including\n      // event handlers:\n      this.options.fileInput = this.options.fileInput.map(function (i, el) {\n        if (el === input[0]) {\n          return inputClone[0];\n        }\n        return el;\n      });\n      // If the widget has been initialized on the file input itself,\n      // override this.element with the file input clone:\n      if (input[0] === this.element[0]) {\n        this.element = inputClone;\n      }\n    },\n\n    _handleFileTreeEntry: function (entry, path) {\n      var that = this,\n        dfd = $.Deferred(),\n        entries = [],\n        dirReader,\n        errorHandler = function (e) {\n          if (e && !e.entry) {\n            e.entry = entry;\n          }\n          // Since $.when returns immediately if one\n          // Deferred is rejected, we use resolve instead.\n          // This allows valid files and invalid items\n          // to be returned together in one set:\n          dfd.resolve([e]);\n        },\n        successHandler = function (entries) {\n          that\n            ._handleFileTreeEntries(entries, path + entry.name + '/')\n            .done(function (files) {\n              dfd.resolve(files);\n            })\n            .fail(errorHandler);\n        },\n        readEntries = function () {\n          dirReader.readEntries(function (results) {\n            if (!results.length) {\n              successHandler(entries);\n            } else {\n              entries = entries.concat(results);\n              readEntries();\n            }\n          }, errorHandler);\n        };\n      // eslint-disable-next-line no-param-reassign\n      path = path || '';\n      if (entry.isFile) {\n        if (entry._file) {\n          // Workaround for Chrome bug #149735\n          entry._file.relativePath = path;\n          dfd.resolve(entry._file);\n        } else {\n          entry.file(function (file) {\n            file.relativePath = path;\n            dfd.resolve(file);\n          }, errorHandler);\n        }\n      } else if (entry.isDirectory) {\n        dirReader = entry.createReader();\n        readEntries();\n      } else {\n        // Return an empty list for file system items\n        // other than files or directories:\n        dfd.resolve([]);\n      }\n      return dfd.promise();\n    },\n\n    _handleFileTreeEntries: function (entries, path) {\n      var that = this;\n      return $.when\n        .apply(\n          $,\n          $.map(entries, function (entry) {\n            return that._handleFileTreeEntry(entry, path);\n          })\n        )\n        [this._promisePipe](function () {\n          return Array.prototype.concat.apply([], arguments);\n        });\n    },\n\n    _getDroppedFiles: function (dataTransfer) {\n      // eslint-disable-next-line no-param-reassign\n      dataTransfer = dataTransfer || {};\n      var items = dataTransfer.items;\n      if (\n        items &&\n        items.length &&\n        (items[0].webkitGetAsEntry || items[0].getAsEntry)\n      ) {\n        return this._handleFileTreeEntries(\n          $.map(items, function (item) {\n            var entry;\n            if (item.webkitGetAsEntry) {\n              entry = item.webkitGetAsEntry();\n              if (entry) {\n                // Workaround for Chrome bug #149735:\n                entry._file = item.getAsFile();\n              }\n              return entry;\n            }\n            return item.getAsEntry();\n          })\n        );\n      }\n      return $.Deferred().resolve($.makeArray(dataTransfer.files)).promise();\n    },\n\n    _getSingleFileInputFiles: function (fileInput) {\n      // eslint-disable-next-line no-param-reassign\n      fileInput = $(fileInput);\n      var entries =\n          fileInput.prop('webkitEntries') || fileInput.prop('entries'),\n        files,\n        value;\n      if (entries && entries.length) {\n        return this._handleFileTreeEntries(entries);\n      }\n      files = $.makeArray(fileInput.prop('files'));\n      if (!files.length) {\n        value = fileInput.prop('value');\n        if (!value) {\n          return $.Deferred().resolve([]).promise();\n        }\n        // If the files property is not available, the browser does not\n        // support the File API and we add a pseudo File object with\n        // the input value as name with path information removed:\n        files = [{ name: value.replace(/^.*\\\\/, '') }];\n      } else if (files[0].name === undefined && files[0].fileName) {\n        // File normalization for Safari 4 and Firefox 3:\n        $.each(files, function (index, file) {\n          file.name = file.fileName;\n          file.size = file.fileSize;\n        });\n      }\n      return $.Deferred().resolve(files).promise();\n    },\n\n    _getFileInputFiles: function (fileInput) {\n      if (!(fileInput instanceof $) || fileInput.length === 1) {\n        return this._getSingleFileInputFiles(fileInput);\n      }\n      return $.when\n        .apply($, $.map(fileInput, this._getSingleFileInputFiles))\n        [this._promisePipe](function () {\n          return Array.prototype.concat.apply([], arguments);\n        });\n    },\n\n    _onChange: function (e) {\n      var that = this,\n        data = {\n          fileInput: $(e.target),\n          form: $(e.target.form)\n        };\n      this._getFileInputFiles(data.fileInput).always(function (files) {\n        data.files = files;\n        if (that.options.replaceFileInput) {\n          that._replaceFileInput(data);\n        }\n        if (\n          that._trigger(\n            'change',\n            $.Event('change', { delegatedEvent: e }),\n            data\n          ) !== false\n        ) {\n          that._onAdd(e, data);\n        }\n      });\n    },\n\n    _onPaste: function (e) {\n      var items =\n          e.originalEvent &&\n          e.originalEvent.clipboardData &&\n          e.originalEvent.clipboardData.items,\n        data = { files: [] };\n      if (items && items.length) {\n        $.each(items, function (index, item) {\n          var file = item.getAsFile && item.getAsFile();\n          if (file) {\n            data.files.push(file);\n          }\n        });\n        if (\n          this._trigger(\n            'paste',\n            $.Event('paste', { delegatedEvent: e }),\n            data\n          ) !== false\n        ) {\n          this._onAdd(e, data);\n        }\n      }\n    },\n\n    _onDrop: function (e) {\n      e.dataTransfer = e.originalEvent && e.originalEvent.dataTransfer;\n      var that = this,\n        dataTransfer = e.dataTransfer,\n        data = {};\n      if (dataTransfer && dataTransfer.files && dataTransfer.files.length) {\n        e.preventDefault();\n        this._getDroppedFiles(dataTransfer).always(function (files) {\n          data.files = files;\n          if (\n            that._trigger(\n              'drop',\n              $.Event('drop', { delegatedEvent: e }),\n              data\n            ) !== false\n          ) {\n            that._onAdd(e, data);\n          }\n        });\n      }\n    },\n\n    _onDragOver: getDragHandler('dragover'),\n\n    _onDragEnter: getDragHandler('dragenter'),\n\n    _onDragLeave: getDragHandler('dragleave'),\n\n    _initEventHandlers: function () {\n      if (this._isXHRUpload(this.options)) {\n        this._on(this.options.dropZone, {\n          dragover: this._onDragOver,\n          drop: this._onDrop,\n          // event.preventDefault() on dragenter is required for IE10+:\n          dragenter: this._onDragEnter,\n          // dragleave is not required, but added for completeness:\n          dragleave: this._onDragLeave\n        });\n        this._on(this.options.pasteZone, {\n          paste: this._onPaste\n        });\n      }\n      if ($.support.fileInput) {\n        this._on(this.options.fileInput, {\n          change: this._onChange\n        });\n      }\n    },\n\n    _destroyEventHandlers: function () {\n      this._off(this.options.dropZone, 'dragenter dragleave dragover drop');\n      this._off(this.options.pasteZone, 'paste');\n      this._off(this.options.fileInput, 'change');\n    },\n\n    _destroy: function () {\n      this._destroyEventHandlers();\n    },\n\n    _setOption: function (key, value) {\n      var reinit = $.inArray(key, this._specialOptions) !== -1;\n      if (reinit) {\n        this._destroyEventHandlers();\n      }\n      this._super(key, value);\n      if (reinit) {\n        this._initSpecialOptions();\n        this._initEventHandlers();\n      }\n    },\n\n    _initSpecialOptions: function () {\n      var options = this.options;\n      if (options.fileInput === undefined) {\n        options.fileInput = this.element.is('input[type=\"file\"]')\n          ? this.element\n          : this.element.find('input[type=\"file\"]');\n      } else if (!(options.fileInput instanceof $)) {\n        options.fileInput = $(options.fileInput);\n      }\n      if (!(options.dropZone instanceof $)) {\n        options.dropZone = $(options.dropZone);\n      }\n      if (!(options.pasteZone instanceof $)) {\n        options.pasteZone = $(options.pasteZone);\n      }\n    },\n\n    _getRegExp: function (str) {\n      var parts = str.split('/'),\n        modifiers = parts.pop();\n      parts.shift();\n      return new RegExp(parts.join('/'), modifiers);\n    },\n\n    _isRegExpOption: function (key, value) {\n      return (\n        key !== 'url' &&\n        $.type(value) === 'string' &&\n        /^\\/.*\\/[igm]{0,3}$/.test(value)\n      );\n    },\n\n    _initDataAttributes: function () {\n      var that = this,\n        options = this.options,\n        data = this.element.data();\n      // Initialize options set via HTML5 data-attributes:\n      $.each(this.element[0].attributes, function (index, attr) {\n        var key = attr.name.toLowerCase(),\n          value;\n        if (/^data-/.test(key)) {\n          // Convert hyphen-ated key to camelCase:\n          key = key.slice(5).replace(/-[a-z]/g, function (str) {\n            return str.charAt(1).toUpperCase();\n          });\n          value = data[key];\n          if (that._isRegExpOption(key, value)) {\n            value = that._getRegExp(value);\n          }\n          options[key] = value;\n        }\n      });\n    },\n\n    _create: function () {\n      this._initDataAttributes();\n      this._initSpecialOptions();\n      this._slots = [];\n      this._sequence = this._getXHRPromise(true);\n      this._sending = this._active = 0;\n      this._initProgressObject(this);\n      this._initEventHandlers();\n    },\n\n    // This method is exposed to the widget API and allows to query\n    // the number of active uploads:\n    active: function () {\n      return this._active;\n    },\n\n    // This method is exposed to the widget API and allows to query\n    // the widget upload progress.\n    // It returns an object with loaded, total and bitrate properties\n    // for the running uploads:\n    progress: function () {\n      return this._progress;\n    },\n\n    // This method is exposed to the widget API and allows adding files\n    // using the fileupload API. The data parameter accepts an object which\n    // must have a files property and can contain additional options:\n    // .fileupload('add', {files: filesList});\n    add: function (data) {\n      var that = this;\n      if (!data || this.options.disabled) {\n        return;\n      }\n      if (data.fileInput && !data.files) {\n        this._getFileInputFiles(data.fileInput).always(function (files) {\n          data.files = files;\n          that._onAdd(null, data);\n        });\n      } else {\n        data.files = $.makeArray(data.files);\n        this._onAdd(null, data);\n      }\n    },\n\n    // This method is exposed to the widget API and allows sending files\n    // using the fileupload API. The data parameter accepts an object which\n    // must have a files or fileInput property and can contain additional options:\n    // .fileupload('send', {files: filesList});\n    // The method returns a Promise object for the file upload call.\n    send: function (data) {\n      if (data && !this.options.disabled) {\n        if (data.fileInput && !data.files) {\n          var that = this,\n            dfd = $.Deferred(),\n            promise = dfd.promise(),\n            jqXHR,\n            aborted;\n          promise.abort = function () {\n            aborted = true;\n            if (jqXHR) {\n              return jqXHR.abort();\n            }\n            dfd.reject(null, 'abort', 'abort');\n            return promise;\n          };\n          this._getFileInputFiles(data.fileInput).always(function (files) {\n            if (aborted) {\n              return;\n            }\n            if (!files.length) {\n              dfd.reject();\n              return;\n            }\n            data.files = files;\n            jqXHR = that._onSend(null, data);\n            jqXHR.then(\n              function (result, textStatus, jqXHR) {\n                dfd.resolve(result, textStatus, jqXHR);\n              },\n              function (jqXHR, textStatus, errorThrown) {\n                dfd.reject(jqXHR, textStatus, errorThrown);\n              }\n            );\n          });\n          return this._enhancePromise(promise);\n        }\n        data.files = $.makeArray(data.files);\n        if (data.files.length) {\n          return this._onSend(null, data);\n        }\n      }\n      return this._getXHRPromise(false, data && data.context);\n    }\n  });\n});\n","/*!\n * jQuery UI Widget 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Widget\n//>>group: Core\n//>>description: Provides a factory for creating stateful widgets with a common API.\n//>>docs: http://api.jqueryui.com/jQuery.widget/\n//>>demos: http://jqueryui.com/widget/\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n}( function( $ ) {\n\nvar widgetUuid = 0;\nvar widgetSlice = Array.prototype.slice;\n\n$.cleanData = ( function( orig ) {\n\treturn function( elems ) {\n\t\tvar events, elem, i;\n\t\tfor ( i = 0; ( elem = elems[ i ] ) != null; i++ ) {\n\t\t\ttry {\n\n\t\t\t\t// Only trigger remove when necessary to save time\n\t\t\t\tevents = $._data( elem, \"events\" );\n\t\t\t\tif ( events && events.remove ) {\n\t\t\t\t\t$( elem ).triggerHandler( \"remove\" );\n\t\t\t\t}\n\n\t\t\t// Http://bugs.jquery.com/ticket/8235\n\t\t\t} catch ( e ) {}\n\t\t}\n\t\torig( elems );\n\t};\n} )( $.cleanData );\n\n$.widget = function( name, base, prototype ) {\n\tvar existingConstructor, constructor, basePrototype;\n\n\t// ProxiedPrototype allows the provided prototype to remain unmodified\n\t// so that it can be used as a mixin for multiple widgets (#8876)\n\tvar proxiedPrototype = {};\n\n\tvar namespace = name.split( \".\" )[ 0 ];\n\tname = name.split( \".\" )[ 1 ];\n\tvar fullName = namespace + \"-\" + name;\n\n\tif ( !prototype ) {\n\t\tprototype = base;\n\t\tbase = $.Widget;\n\t}\n\n\tif ( $.isArray( prototype ) ) {\n\t\tprototype = $.extend.apply( null, [ {} ].concat( prototype ) );\n\t}\n\n\t// Create selector for plugin\n\t$.expr[ \":\" ][ fullName.toLowerCase() ] = function( elem ) {\n\t\treturn !!$.data( elem, fullName );\n\t};\n\n\t$[ namespace ] = $[ namespace ] || {};\n\texistingConstructor = $[ namespace ][ name ];\n\tconstructor = $[ namespace ][ name ] = function( options, element ) {\n\n\t\t// Allow instantiation without \"new\" keyword\n\t\tif ( !this._createWidget ) {\n\t\t\treturn new constructor( options, element );\n\t\t}\n\n\t\t// Allow instantiation without initializing for simple inheritance\n\t\t// must use \"new\" keyword (the code above always passes args)\n\t\tif ( arguments.length ) {\n\t\t\tthis._createWidget( options, element );\n\t\t}\n\t};\n\n\t// Extend with the existing constructor to carry over any static properties\n\t$.extend( constructor, existingConstructor, {\n\t\tversion: prototype.version,\n\n\t\t// Copy the object used to create the prototype in case we need to\n\t\t// redefine the widget later\n\t\t_proto: $.extend( {}, prototype ),\n\n\t\t// Track widgets that inherit from this widget in case this widget is\n\t\t// redefined after a widget inherits from it\n\t\t_childConstructors: []\n\t} );\n\n\tbasePrototype = new base();\n\n\t// We need to make the options hash a property directly on the new instance\n\t// otherwise we'll modify the options hash on the prototype that we're\n\t// inheriting from\n\tbasePrototype.options = $.widget.extend( {}, basePrototype.options );\n\t$.each( prototype, function( prop, value ) {\n\t\tif ( !$.isFunction( value ) ) {\n\t\t\tproxiedPrototype[ prop ] = value;\n\t\t\treturn;\n\t\t}\n\t\tproxiedPrototype[ prop ] = ( function() {\n\t\t\tfunction _super() {\n\t\t\t\treturn base.prototype[ prop ].apply( this, arguments );\n\t\t\t}\n\n\t\t\tfunction _superApply( args ) {\n\t\t\t\treturn base.prototype[ prop ].apply( this, args );\n\t\t\t}\n\n\t\t\treturn function() {\n\t\t\t\tvar __super = this._super;\n\t\t\t\tvar __superApply = this._superApply;\n\t\t\t\tvar returnValue;\n\n\t\t\t\tthis._super = _super;\n\t\t\t\tthis._superApply = _superApply;\n\n\t\t\t\treturnValue = value.apply( this, arguments );\n\n\t\t\t\tthis._super = __super;\n\t\t\t\tthis._superApply = __superApply;\n\n\t\t\t\treturn returnValue;\n\t\t\t};\n\t\t} )();\n\t} );\n\tconstructor.prototype = $.widget.extend( basePrototype, {\n\n\t\t// TODO: remove support for widgetEventPrefix\n\t\t// always use the name + a colon as the prefix, e.g., draggable:start\n\t\t// don't prefix for widgets that aren't DOM-based\n\t\twidgetEventPrefix: existingConstructor ? ( basePrototype.widgetEventPrefix || name ) : name\n\t}, proxiedPrototype, {\n\t\tconstructor: constructor,\n\t\tnamespace: namespace,\n\t\twidgetName: name,\n\t\twidgetFullName: fullName\n\t} );\n\n\t// If this widget is being redefined then we need to find all widgets that\n\t// are inheriting from it and redefine all of them so that they inherit from\n\t// the new version of this widget. We're essentially trying to replace one\n\t// level in the prototype chain.\n\tif ( existingConstructor ) {\n\t\t$.each( existingConstructor._childConstructors, function( i, child ) {\n\t\t\tvar childPrototype = child.prototype;\n\n\t\t\t// Redefine the child widget using the same prototype that was\n\t\t\t// originally used, but inherit from the new version of the base\n\t\t\t$.widget( childPrototype.namespace + \".\" + childPrototype.widgetName, constructor,\n\t\t\t\tchild._proto );\n\t\t} );\n\n\t\t// Remove the list of existing child constructors from the old constructor\n\t\t// so the old child constructors can be garbage collected\n\t\tdelete existingConstructor._childConstructors;\n\t} else {\n\t\tbase._childConstructors.push( constructor );\n\t}\n\n\t$.widget.bridge( name, constructor );\n\n\treturn constructor;\n};\n\n$.widget.extend = function( target ) {\n\tvar input = widgetSlice.call( arguments, 1 );\n\tvar inputIndex = 0;\n\tvar inputLength = input.length;\n\tvar key;\n\tvar value;\n\n\tfor ( ; inputIndex < inputLength; inputIndex++ ) {\n\t\tfor ( key in input[ inputIndex ] ) {\n\t\t\tvalue = input[ inputIndex ][ key ];\n\t\t\tif ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {\n\n\t\t\t\t// Clone objects\n\t\t\t\tif ( $.isPlainObject( value ) ) {\n\t\t\t\t\ttarget[ key ] = $.isPlainObject( target[ key ] ) ?\n\t\t\t\t\t\t$.widget.extend( {}, target[ key ], value ) :\n\n\t\t\t\t\t\t// Don't extend strings, arrays, etc. with objects\n\t\t\t\t\t\t$.widget.extend( {}, value );\n\n\t\t\t\t// Copy everything else by reference\n\t\t\t\t} else {\n\t\t\t\t\ttarget[ key ] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn target;\n};\n\n$.widget.bridge = function( name, object ) {\n\tvar fullName = object.prototype.widgetFullName || name;\n\t$.fn[ name ] = function( options ) {\n\t\tvar isMethodCall = typeof options === \"string\";\n\t\tvar args = widgetSlice.call( arguments, 1 );\n\t\tvar returnValue = this;\n\n\t\tif ( isMethodCall ) {\n\n\t\t\t// If this is an empty collection, we need to have the instance method\n\t\t\t// return undefined instead of the jQuery instance\n\t\t\tif ( !this.length && options === \"instance\" ) {\n\t\t\t\treturnValue = undefined;\n\t\t\t} else {\n\t\t\t\tthis.each( function() {\n\t\t\t\t\tvar methodValue;\n\t\t\t\t\tvar instance = $.data( this, fullName );\n\n\t\t\t\t\tif ( options === \"instance\" ) {\n\t\t\t\t\t\treturnValue = instance;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !instance ) {\n\t\t\t\t\t\treturn $.error( \"cannot call methods on \" + name +\n\t\t\t\t\t\t\t\" prior to initialization; \" +\n\t\t\t\t\t\t\t\"attempted to call method '\" + options + \"'\" );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !$.isFunction( instance[ options ] ) || options.charAt( 0 ) === \"_\" ) {\n\t\t\t\t\t\treturn $.error( \"no such method '\" + options + \"' for \" + name +\n\t\t\t\t\t\t\t\" widget instance\" );\n\t\t\t\t\t}\n\n\t\t\t\t\tmethodValue = instance[ options ].apply( instance, args );\n\n\t\t\t\t\tif ( methodValue !== instance && methodValue !== undefined ) {\n\t\t\t\t\t\treturnValue = methodValue && methodValue.jquery ?\n\t\t\t\t\t\t\treturnValue.pushStack( methodValue.get() ) :\n\t\t\t\t\t\t\tmethodValue;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t} else {\n\n\t\t\t// Allow multiple hashes to be passed on init\n\t\t\tif ( args.length ) {\n\t\t\t\toptions = $.widget.extend.apply( null, [ options ].concat( args ) );\n\t\t\t}\n\n\t\t\tthis.each( function() {\n\t\t\t\tvar instance = $.data( this, fullName );\n\t\t\t\tif ( instance ) {\n\t\t\t\t\tinstance.option( options || {} );\n\t\t\t\t\tif ( instance._init ) {\n\t\t\t\t\t\tinstance._init();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$.data( this, fullName, new object( options, this ) );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\treturn returnValue;\n\t};\n};\n\n$.Widget = function( /* options, element */ ) {};\n$.Widget._childConstructors = [];\n\n$.Widget.prototype = {\n\twidgetName: \"widget\",\n\twidgetEventPrefix: \"\",\n\tdefaultElement: \"<div>\",\n\n\toptions: {\n\t\tclasses: {},\n\t\tdisabled: false,\n\n\t\t// Callbacks\n\t\tcreate: null\n\t},\n\n\t_createWidget: function( options, element ) {\n\t\telement = $( element || this.defaultElement || this )[ 0 ];\n\t\tthis.element = $( element );\n\t\tthis.uuid = widgetUuid++;\n\t\tthis.eventNamespace = \".\" + this.widgetName + this.uuid;\n\n\t\tthis.bindings = $();\n\t\tthis.hoverable = $();\n\t\tthis.focusable = $();\n\t\tthis.classesElementLookup = {};\n\n\t\tif ( element !== this ) {\n\t\t\t$.data( element, this.widgetFullName, this );\n\t\t\tthis._on( true, this.element, {\n\t\t\t\tremove: function( event ) {\n\t\t\t\t\tif ( event.target === element ) {\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t\tthis.document = $( element.style ?\n\n\t\t\t\t// Element within the document\n\t\t\t\telement.ownerDocument :\n\n\t\t\t\t// Element is window or document\n\t\t\t\telement.document || element );\n\t\t\tthis.window = $( this.document[ 0 ].defaultView || this.document[ 0 ].parentWindow );\n\t\t}\n\n\t\tthis.options = $.widget.extend( {},\n\t\t\tthis.options,\n\t\t\tthis._getCreateOptions(),\n\t\t\toptions );\n\n\t\tthis._create();\n\n\t\tif ( this.options.disabled ) {\n\t\t\tthis._setOptionDisabled( this.options.disabled );\n\t\t}\n\n\t\tthis._trigger( \"create\", null, this._getCreateEventData() );\n\t\tthis._init();\n\t},\n\n\t_getCreateOptions: function() {\n\t\treturn {};\n\t},\n\n\t_getCreateEventData: $.noop,\n\n\t_create: $.noop,\n\n\t_init: $.noop,\n\n\tdestroy: function() {\n\t\tvar that = this;\n\n\t\tthis._destroy();\n\t\t$.each( this.classesElementLookup, function( key, value ) {\n\t\t\tthat._removeClass( value, key );\n\t\t} );\n\n\t\t// We can probably remove the unbind calls in 2.0\n\t\t// all event bindings should go through this._on()\n\t\tthis.element\n\t\t\t.off( this.eventNamespace )\n\t\t\t.removeData( this.widgetFullName );\n\t\tthis.widget()\n\t\t\t.off( this.eventNamespace )\n\t\t\t.removeAttr( \"aria-disabled\" );\n\n\t\t// Clean up events and states\n\t\tthis.bindings.off( this.eventNamespace );\n\t},\n\n\t_destroy: $.noop,\n\n\twidget: function() {\n\t\treturn this.element;\n\t},\n\n\toption: function( key, value ) {\n\t\tvar options = key;\n\t\tvar parts;\n\t\tvar curOption;\n\t\tvar i;\n\n\t\tif ( arguments.length === 0 ) {\n\n\t\t\t// Don't return a reference to the internal hash\n\t\t\treturn $.widget.extend( {}, this.options );\n\t\t}\n\n\t\tif ( typeof key === \"string\" ) {\n\n\t\t\t// Handle nested keys, e.g., \"foo.bar\" => { foo: { bar: ___ } }\n\t\t\toptions = {};\n\t\t\tparts = key.split( \".\" );\n\t\t\tkey = parts.shift();\n\t\t\tif ( parts.length ) {\n\t\t\t\tcurOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );\n\t\t\t\tfor ( i = 0; i < parts.length - 1; i++ ) {\n\t\t\t\t\tcurOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};\n\t\t\t\t\tcurOption = curOption[ parts[ i ] ];\n\t\t\t\t}\n\t\t\t\tkey = parts.pop();\n\t\t\t\tif ( arguments.length === 1 ) {\n\t\t\t\t\treturn curOption[ key ] === undefined ? null : curOption[ key ];\n\t\t\t\t}\n\t\t\t\tcurOption[ key ] = value;\n\t\t\t} else {\n\t\t\t\tif ( arguments.length === 1 ) {\n\t\t\t\t\treturn this.options[ key ] === undefined ? null : this.options[ key ];\n\t\t\t\t}\n\t\t\t\toptions[ key ] = value;\n\t\t\t}\n\t\t}\n\n\t\tthis._setOptions( options );\n\n\t\treturn this;\n\t},\n\n\t_setOptions: function( options ) {\n\t\tvar key;\n\n\t\tfor ( key in options ) {\n\t\t\tthis._setOption( key, options[ key ] );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"classes\" ) {\n\t\t\tthis._setOptionClasses( value );\n\t\t}\n\n\t\tthis.options[ key ] = value;\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis._setOptionDisabled( value );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_setOptionClasses: function( value ) {\n\t\tvar classKey, elements, currentElements;\n\n\t\tfor ( classKey in value ) {\n\t\t\tcurrentElements = this.classesElementLookup[ classKey ];\n\t\t\tif ( value[ classKey ] === this.options.classes[ classKey ] ||\n\t\t\t\t\t!currentElements ||\n\t\t\t\t\t!currentElements.length ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// We are doing this to create a new jQuery object because the _removeClass() call\n\t\t\t// on the next line is going to destroy the reference to the current elements being\n\t\t\t// tracked. We need to save a copy of this collection so that we can add the new classes\n\t\t\t// below.\n\t\t\telements = $( currentElements.get() );\n\t\t\tthis._removeClass( currentElements, classKey );\n\n\t\t\t// We don't use _addClass() here, because that uses this.options.classes\n\t\t\t// for generating the string of classes. We want to use the value passed in from\n\t\t\t// _setOption(), this is the new value of the classes option which was passed to\n\t\t\t// _setOption(). We pass this value directly to _classes().\n\t\t\telements.addClass( this._classes( {\n\t\t\t\telement: elements,\n\t\t\t\tkeys: classKey,\n\t\t\t\tclasses: value,\n\t\t\t\tadd: true\n\t\t\t} ) );\n\t\t}\n\t},\n\n\t_setOptionDisabled: function( value ) {\n\t\tthis._toggleClass( this.widget(), this.widgetFullName + \"-disabled\", null, !!value );\n\n\t\t// If the widget is becoming disabled, then nothing is interactive\n\t\tif ( value ) {\n\t\t\tthis._removeClass( this.hoverable, null, \"ui-state-hover\" );\n\t\t\tthis._removeClass( this.focusable, null, \"ui-state-focus\" );\n\t\t}\n\t},\n\n\tenable: function() {\n\t\treturn this._setOptions( { disabled: false } );\n\t},\n\n\tdisable: function() {\n\t\treturn this._setOptions( { disabled: true } );\n\t},\n\n\t_classes: function( options ) {\n\t\tvar full = [];\n\t\tvar that = this;\n\n\t\toptions = $.extend( {\n\t\t\telement: this.element,\n\t\t\tclasses: this.options.classes || {}\n\t\t}, options );\n\n\t\tfunction processClassString( classes, checkOption ) {\n\t\t\tvar current, i;\n\t\t\tfor ( i = 0; i < classes.length; i++ ) {\n\t\t\t\tcurrent = that.classesElementLookup[ classes[ i ] ] || $();\n\t\t\t\tif ( options.add ) {\n\t\t\t\t\tcurrent = $( $.unique( current.get().concat( options.element.get() ) ) );\n\t\t\t\t} else {\n\t\t\t\t\tcurrent = $( current.not( options.element ).get() );\n\t\t\t\t}\n\t\t\t\tthat.classesElementLookup[ classes[ i ] ] = current;\n\t\t\t\tfull.push( classes[ i ] );\n\t\t\t\tif ( checkOption && options.classes[ classes[ i ] ] ) {\n\t\t\t\t\tfull.push( options.classes[ classes[ i ] ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._on( options.element, {\n\t\t\t\"remove\": \"_untrackClassesElement\"\n\t\t} );\n\n\t\tif ( options.keys ) {\n\t\t\tprocessClassString( options.keys.match( /\\S+/g ) || [], true );\n\t\t}\n\t\tif ( options.extra ) {\n\t\t\tprocessClassString( options.extra.match( /\\S+/g ) || [] );\n\t\t}\n\n\t\treturn full.join( \" \" );\n\t},\n\n\t_untrackClassesElement: function( event ) {\n\t\tvar that = this;\n\t\t$.each( that.classesElementLookup, function( key, value ) {\n\t\t\tif ( $.inArray( event.target, value ) !== -1 ) {\n\t\t\t\tthat.classesElementLookup[ key ] = $( value.not( event.target ).get() );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_removeClass: function( element, keys, extra ) {\n\t\treturn this._toggleClass( element, keys, extra, false );\n\t},\n\n\t_addClass: function( element, keys, extra ) {\n\t\treturn this._toggleClass( element, keys, extra, true );\n\t},\n\n\t_toggleClass: function( element, keys, extra, add ) {\n\t\tadd = ( typeof add === \"boolean\" ) ? add : extra;\n\t\tvar shift = ( typeof element === \"string\" || element === null ),\n\t\t\toptions = {\n\t\t\t\textra: shift ? keys : extra,\n\t\t\t\tkeys: shift ? element : keys,\n\t\t\t\telement: shift ? this.element : element,\n\t\t\t\tadd: add\n\t\t\t};\n\t\toptions.element.toggleClass( this._classes( options ), add );\n\t\treturn this;\n\t},\n\n\t_on: function( suppressDisabledCheck, element, handlers ) {\n\t\tvar delegateElement;\n\t\tvar instance = this;\n\n\t\t// No suppressDisabledCheck flag, shuffle arguments\n\t\tif ( typeof suppressDisabledCheck !== \"boolean\" ) {\n\t\t\thandlers = element;\n\t\t\telement = suppressDisabledCheck;\n\t\t\tsuppressDisabledCheck = false;\n\t\t}\n\n\t\t// No element argument, shuffle and use this.element\n\t\tif ( !handlers ) {\n\t\t\thandlers = element;\n\t\t\telement = this.element;\n\t\t\tdelegateElement = this.widget();\n\t\t} else {\n\t\t\telement = delegateElement = $( element );\n\t\t\tthis.bindings = this.bindings.add( element );\n\t\t}\n\n\t\t$.each( handlers, function( event, handler ) {\n\t\t\tfunction handlerProxy() {\n\n\t\t\t\t// Allow widgets to customize the disabled handling\n\t\t\t\t// - disabled as an array instead of boolean\n\t\t\t\t// - disabled class as method for disabling individual parts\n\t\t\t\tif ( !suppressDisabledCheck &&\n\t\t\t\t\t\t( instance.options.disabled === true ||\n\t\t\t\t\t\t$( this ).hasClass( \"ui-state-disabled\" ) ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treturn ( typeof handler === \"string\" ? instance[ handler ] : handler )\n\t\t\t\t\t.apply( instance, arguments );\n\t\t\t}\n\n\t\t\t// Copy the guid so direct unbinding works\n\t\t\tif ( typeof handler !== \"string\" ) {\n\t\t\t\thandlerProxy.guid = handler.guid =\n\t\t\t\t\thandler.guid || handlerProxy.guid || $.guid++;\n\t\t\t}\n\n\t\t\tvar match = event.match( /^([\\w:-]*)\\s*(.*)$/ );\n\t\t\tvar eventName = match[ 1 ] + instance.eventNamespace;\n\t\t\tvar selector = match[ 2 ];\n\n\t\t\tif ( selector ) {\n\t\t\t\tdelegateElement.on( eventName, selector, handlerProxy );\n\t\t\t} else {\n\t\t\t\telement.on( eventName, handlerProxy );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_off: function( element, eventName ) {\n\t\teventName = ( eventName || \"\" ).split( \" \" ).join( this.eventNamespace + \" \" ) +\n\t\t\tthis.eventNamespace;\n\t\telement.off( eventName ).off( eventName );\n\n\t\t// Clear the stack to avoid memory leaks (#10056)\n\t\tthis.bindings = $( this.bindings.not( element ).get() );\n\t\tthis.focusable = $( this.focusable.not( element ).get() );\n\t\tthis.hoverable = $( this.hoverable.not( element ).get() );\n\t},\n\n\t_delay: function( handler, delay ) {\n\t\tfunction handlerProxy() {\n\t\t\treturn ( typeof handler === \"string\" ? instance[ handler ] : handler )\n\t\t\t\t.apply( instance, arguments );\n\t\t}\n\t\tvar instance = this;\n\t\treturn setTimeout( handlerProxy, delay || 0 );\n\t},\n\n\t_hoverable: function( element ) {\n\t\tthis.hoverable = this.hoverable.add( element );\n\t\tthis._on( element, {\n\t\t\tmouseenter: function( event ) {\n\t\t\t\tthis._addClass( $( event.currentTarget ), null, \"ui-state-hover\" );\n\t\t\t},\n\t\t\tmouseleave: function( event ) {\n\t\t\t\tthis._removeClass( $( event.currentTarget ), null, \"ui-state-hover\" );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_focusable: function( element ) {\n\t\tthis.focusable = this.focusable.add( element );\n\t\tthis._on( element, {\n\t\t\tfocusin: function( event ) {\n\t\t\t\tthis._addClass( $( event.currentTarget ), null, \"ui-state-focus\" );\n\t\t\t},\n\t\t\tfocusout: function( event ) {\n\t\t\t\tthis._removeClass( $( event.currentTarget ), null, \"ui-state-focus\" );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_trigger: function( type, event, data ) {\n\t\tvar prop, orig;\n\t\tvar callback = this.options[ type ];\n\n\t\tdata = data || {};\n\t\tevent = $.Event( event );\n\t\tevent.type = ( type === this.widgetEventPrefix ?\n\t\t\ttype :\n\t\t\tthis.widgetEventPrefix + type ).toLowerCase();\n\n\t\t// The original event may come from any element\n\t\t// so we need to reset the target on the new event\n\t\tevent.target = this.element[ 0 ];\n\n\t\t// Copy original event properties over to the new event\n\t\torig = event.originalEvent;\n\t\tif ( orig ) {\n\t\t\tfor ( prop in orig ) {\n\t\t\t\tif ( !( prop in event ) ) {\n\t\t\t\t\tevent[ prop ] = orig[ prop ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.element.trigger( event, data );\n\t\treturn !( $.isFunction( callback ) &&\n\t\t\tcallback.apply( this.element[ 0 ], [ event ].concat( data ) ) === false ||\n\t\t\tevent.isDefaultPrevented() );\n\t}\n};\n\n$.each( { show: \"fadeIn\", hide: \"fadeOut\" }, function( method, defaultEffect ) {\n\t$.Widget.prototype[ \"_\" + method ] = function( element, options, callback ) {\n\t\tif ( typeof options === \"string\" ) {\n\t\t\toptions = { effect: options };\n\t\t}\n\n\t\tvar hasOptions;\n\t\tvar effectName = !options ?\n\t\t\tmethod :\n\t\t\toptions === true || typeof options === \"number\" ?\n\t\t\t\tdefaultEffect :\n\t\t\t\toptions.effect || defaultEffect;\n\n\t\toptions = options || {};\n\t\tif ( typeof options === \"number\" ) {\n\t\t\toptions = { duration: options };\n\t\t}\n\n\t\thasOptions = !$.isEmptyObject( options );\n\t\toptions.complete = callback;\n\n\t\tif ( options.delay ) {\n\t\t\telement.delay( options.delay );\n\t\t}\n\n\t\tif ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {\n\t\t\telement[ method ]( options );\n\t\t} else if ( effectName !== method && element[ effectName ] ) {\n\t\t\telement[ effectName ]( options.duration, options.easing, callback );\n\t\t} else {\n\t\t\telement.queue( function( next ) {\n\t\t\t\t$( this )[ method ]();\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback.call( element[ 0 ] );\n\t\t\t\t}\n\t\t\t\tnext();\n\t\t\t} );\n\t\t}\n\t};\n} );\n\nreturn $.widget;\n\n} ) );\n","( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} ( function( $ ) {\n\n$.ui = $.ui || {};\n\nreturn $.ui.version = \"1.12.1\";\n\n} ) );\n","(function($){\nmutate_event_stack = [\n\t\t\t{\n\t\t\t\tname: 'width',\n\t\t\t\thandler: function (elem){\n\t\t\t\t\tn = {el:elem}\n\t\t\t\t\tif(!$(n.el).data('mutate-width'))$(n.el).data('mutate-width', $(n.el).width());\n\t\t\t\t\tif ($(n.el).data('mutate-width')&&$(n.el).width() != $(n.el).data('mutate-width')  ) {\n\t\t\t\t\t\t$(n.el).data('mutate-width', $(n.el).width());\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname:'height',\n\t\t\t\thandler: function (n){\n\t\t\t\t\telement = n;\n\t\t\t\t\tif(!$(element).data('mutate-height'))$(element).data('mutate-height', $(element).height());\n\t\t\t\t\tif ($(element).data('mutate-height')&&$(element).height() != $(element).data('mutate-height')  ) {\n\t\t\t\t\t\t$(element).data('mutate-height', $(element).height());\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname\t\t: 'top',\n\t\t\t\thandler \t: function (n){\n\t\t\t\t\tif(!$(n).data('mutate-top'))$(n).data('mutate-top', $(n).css('top'));\n\t\t\t\t\t\n\t\t\t\t\tif ($(n).data('mutate-top')&&$(n).css('top') != $(n).data('mutate-top')  ) {\n\t\t\t\t\t\t$(n).data('mutate-top', $(n).css('top'));\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname\t\t: 'bottom',\n\t\t\t\thandler \t: function (n){\n\t\t\t\t\tif(!$(n).data('mutate-bottom'))$(n).data('mutate-bottom', $(n).css('bottom'));\n\t\t\t\t\t\n\t\t\t\t\tif ($(n).data('mutate-bottom')&&$(n).css('bottom') != $(n).data('mutate-bottom')  ) {\n\t\t\t\t\t\t$(n).data('mutate-bottom', $(n).css('bottom'));\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname\t\t: 'right',\n\t\t\t\thandler \t: function (n){\n\t\t\t\t\tif(!$(n).data('mutate-right'))$(n).data('mutate-right', $(n).css('right'));\n\t\t\t\t\t\n\t\t\t\t\tif ($(n).data('mutate-right')&&$(n).css('right') != $(n).data('mutate-right')  ) {\n\t\t\t\t\t\t$(n).data('mutate-right', $(n).css('right'));\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname\t\t: 'left',\n\t\t\t\thandler \t: function (n){\n\t\t\t\t\tif(!$(n).data('mutate-left'))$(n).data('mutate-left', $(n).css('left'));\n\t\t\t\t\t\n\t\t\t\t\tif ($(n).data('mutate-left')&&$(n).css('left') != $(n).data('mutate-left')  ) {\n\t\t\t\t\t\t$(n).data('mutate-left', $(n).css('left'));\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname\t\t: 'hide',\n\t\t\t\thandler \t: function (n){ if ($(n).is(':hidden'))\treturn true; }\n\t\t\t},\n\t\t\t{\n\t\t\t\tname\t\t: 'show',\n\t\t\t\thandler \t: function (n){ if ($(n).is(':visible'))\treturn true; }\n\t\t\t},\n\t\t\t{\n\t\t\t\tname\t\t: 'scrollHeight',\n\t\t\t\thandler \t: function (n){\n\t\t\t\t\tif(!$(n).data('prev-scrollHeight'))$(n).data('prev-scrollHeight', $(n)[0].scrollHeight);\n\t\t\t\t\t\n\t\t\t\t\tif ($(n).data('prev-scrollHeight')&&$(n)[0].scrollHeight != $(n).data('prev-scrollHeight')  ) {\n\t\t\t\t\t\t$(n).data('prev-scrollHeight', $(n)[0].scrollHeight);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname\t\t: 'scrollWidth',\n\t\t\t\thandler \t: function (n){\n\t\t\t\t\tif(!$(n).data('prev-scrollWidth'))$(n).data('prev-scrollWidth', $(n)[0].scrollWidth);\n\t\t\t\t\t\n\t\t\t\t\tif ($(n).data('prev-scrollWidth')&&$(n)[0].scrollWidth != $(n).data('prev-scrollWidth')  ) {\n\t\t\t\t\t\t$(n).data('prev-scrollWidth', $(n)[0].scrollWidth);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname\t\t: 'scrollTop',\n\t\t\t\thandler \t: function (n){\n\t\t\t\t\tif(!$(n).data('prev-scrollTop'))$(n).data('prev-scrollTop', $(n)[0].scrollTop());\n\t\t\t\t\t\n\t\t\t\t\tif ($(n).data('prev-scrollTop')&&$(n)[0].scrollTop() != $(n).data('prev-scrollTop')  ) {\n\t\t\t\t\t\t$(n).data('prev-scrollTop', $(n)[0].scrollTop());\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tname\t\t: 'scrollLeft',\n\t\t\t\thandler \t: function (n){\n\t\t\t\t\tif(!$(n).data('prev-scrollLeft'))$(n).data('prev-scrollLeft', $(n)[0].scrollLeft());\n\t\t\t\t\t\n\t\t\t\t\tif ($(n).data('prev-scrollLeft')&&$(n)[0].scrollLeft() != $(n).data('prev-scrollLeft')  ) {\n\t\t\t\t\t\t$(n).data('prev-scrollLeft', $(n)[0].scrollLeft());\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t];\n})(jQuery);\n","/**\n * @license jQuery-mutate\n * Licensed under the MIT license\n * http://www.opensource.org/licenses/mit-license.php\n * Date: 2014-02-04\n */\n ;(function($){mutate={speed:1,event_stack:mutate_event_stack,stack:[],events:{},add_event:function(evt){mutate.events[evt.name]=evt.handler;},add:function(event_name,selector,callback,false_callback){mutate.stack[mutate.stack.length]={event_name:event_name,selector:selector,callback:callback,false_callback:false_callback}}};function reset(){var parent=mutate;if(parent.event_stack!='undefined'&&parent.event_stack.length){$.each(parent.event_stack,function(j,k){mutate.add_event(k);});}\nparent.event_stack=[];$.each(parent.stack,function(i,n){$(n.selector).each(function(a,b){if(parent.events[n.event_name](b)===true){if(n['callback'])n.callback(b,n);}else{if(n['false_callback'])n.false_callback(b,n)}})})\nsetTimeout(reset,mutate.speed);}\nreset();$.fn.extend({mutate:function(){var event_name=false,callback=arguments[1],selector=this,false_callback=arguments[2]?arguments[2]:function(){};if(arguments[0].toLowerCase()=='extend'){mutate.add_event(callback);return this;}\n$.each($.trim(arguments[0]).split(' '),function(i,n){event_name=n;mutate.add(event_name,selector,callback,false_callback);});return this;}});})(jQuery);\n","\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || (typeof location !== 'undefined' && location);\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' || (typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]');\nvar withNativeFile = typeof File === 'function' || (typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBuf(data)) {\n    var placeholder = { _placeholder: true, num: buffers.length };\n    buffers.push(data);\n    return placeholder;\n  } else if (isArray(data)) {\n    var newData = new Array(data.length);\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n    return newData;\n  } else if (typeof data === 'object' && !(data instanceof Date)) {\n    var newData = {};\n    for (var key in data) {\n      newData[key] = _deconstructPacket(data[key], buffers);\n    }\n    return newData;\n  }\n  return data;\n}\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder) {\n    return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n  } else if (isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === 'object') {\n    for (var key in data) {\n      data[key] = _reconstructPacket(data[key], buffers);\n    }\n  }\n\n  return data;\n}\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n","/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (typeof location !== 'undefined' && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (typeof location !== 'undefined' ? location.hostname : 'localhost');\n  this.port = opts.port || (typeof location !== 'undefined' && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.withCredentials = false !== opts.withCredentials;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.transportOptions = opts.transportOptions || {};\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || null;\n  this.key = opts.key || null;\n  this.passphrase = opts.passphrase || null;\n  this.cert = opts.cert || null;\n  this.ca = opts.ca || null;\n  this.ciphers = opts.ciphers || null;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // detect ReactNative environment\n  this.isReactNative = (typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative');\n\n  // other options for Node.js or ReactNative client\n  if (typeof self === 'undefined' || this.isReactNative) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // per-transport options\n  var options = this.transportOptions[name] || {};\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    query: query,\n    socket: this,\n    agent: options.agent || this.agent,\n    hostname: options.hostname || this.hostname,\n    port: options.port || this.port,\n    secure: options.secure || this.secure,\n    path: options.path || this.path,\n    forceJSONP: options.forceJSONP || this.forceJSONP,\n    jsonp: options.jsonp || this.jsonp,\n    forceBase64: options.forceBase64 || this.forceBase64,\n    enablesXDR: options.enablesXDR || this.enablesXDR,\n    withCredentials: options.withCredentials || this.withCredentials,\n    timestampRequests: options.timestampRequests || this.timestampRequests,\n    timestampParam: options.timestampParam || this.timestampParam,\n    policyPort: options.policyPort || this.policyPort,\n    pfx: options.pfx || this.pfx,\n    key: options.key || this.key,\n    passphrase: options.passphrase || this.passphrase,\n    cert: options.cert || this.cert,\n    ca: options.ca || this.ca,\n    ciphers: options.ciphers || this.ciphers,\n    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n    extraHeaders: options.extraHeaders || this.extraHeaders,\n    forceNode: options.forceNode || this.forceNode,\n    localAddress: options.localAddress || this.localAddress,\n    requestTimeout: options.requestTimeout || this.requestTimeout,\n    protocols: options.protocols || void (0),\n    isReactNative: this.isReactNative\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(JSON.parse(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","/* global attachEvent */\n\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n  this.extraHeaders = opts.extraHeaders;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = (typeof location !== 'undefined' && opts.hostname !== location.hostname) ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n  opts.withCredentials = this.withCredentials;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = this.withCredentials;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 2) {\n          try {\n            var contentType = xhr.getResponseHeader('Content-Type');\n            if (self.supportsBinary && contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n              xhr.responseType = 'arraybuffer';\n            }\n          } catch (e) {}\n        }\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(typeof xhr.status === 'number' ? xhr.status : 0);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (typeof document !== 'undefined') {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (typeof document !== 'undefined') {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type');\n    } catch (e) {}\n    if (contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n      data = this.xhr.response || this.xhr.responseText;\n    } else {\n      data = this.xhr.responseText;\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return typeof XDomainRequest !== 'undefined' && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (typeof document !== 'undefined') {\n  if (typeof attachEvent === 'function') {\n    attachEvent('onunload', unloadHandler);\n  } else if (typeof addEventListener === 'function') {\n    var terminationEvent = 'onpagehide' in globalThis ? 'pagehide' : 'unload';\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n","\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n","module.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n","/*! https://mths.be/utf8js v2.1.2 by @mathias */\n\nvar stringFromCharCode = String.fromCharCode;\n\n// Taken from https://mths.be/punycode\nfunction ucs2decode(string) {\n\tvar output = [];\n\tvar counter = 0;\n\tvar length = string.length;\n\tvar value;\n\tvar extra;\n\twhile (counter < length) {\n\t\tvalue = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// high surrogate, and there is a next character\n\t\t\textra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n// Taken from https://mths.be/punycode\nfunction ucs2encode(array) {\n\tvar length = array.length;\n\tvar index = -1;\n\tvar value;\n\tvar output = '';\n\twhile (++index < length) {\n\t\tvalue = array[index];\n\t\tif (value > 0xFFFF) {\n\t\t\tvalue -= 0x10000;\n\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t}\n\t\toutput += stringFromCharCode(value);\n\t}\n\treturn output;\n}\n\nfunction checkScalarValue(codePoint, strict) {\n\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\tif (strict) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\treturn true;\n}\n/*--------------------------------------------------------------------------*/\n\nfunction createByte(codePoint, shift) {\n\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n}\n\nfunction encodeCodePoint(codePoint, strict) {\n\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\treturn stringFromCharCode(codePoint);\n\t}\n\tvar symbol = '';\n\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t}\n\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\tif (!checkScalarValue(codePoint, strict)) {\n\t\t\tcodePoint = 0xFFFD;\n\t\t}\n\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\tsymbol += createByte(codePoint, 12);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\treturn symbol;\n}\n\nfunction utf8encode(string, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tvar codePoints = ucs2decode(string);\n\tvar length = codePoints.length;\n\tvar index = -1;\n\tvar codePoint;\n\tvar byteString = '';\n\twhile (++index < length) {\n\t\tcodePoint = codePoints[index];\n\t\tbyteString += encodeCodePoint(codePoint, strict);\n\t}\n\treturn byteString;\n}\n\n/*--------------------------------------------------------------------------*/\n\nfunction readContinuationByte() {\n\tif (byteIndex >= byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\tif ((continuationByte & 0xC0) == 0x80) {\n\t\treturn continuationByte & 0x3F;\n\t}\n\n\t// If we end up here, its not a continuation byte\n\tthrow Error('Invalid continuation byte');\n}\n\nfunction decodeSymbol(strict) {\n\tvar byte1;\n\tvar byte2;\n\tvar byte3;\n\tvar byte4;\n\tvar codePoint;\n\n\tif (byteIndex > byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tif (byteIndex == byteCount) {\n\t\treturn false;\n\t}\n\n\t// Read first byte\n\tbyte1 = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\t// 1-byte sequence (no continuation bytes)\n\tif ((byte1 & 0x80) == 0) {\n\t\treturn byte1;\n\t}\n\n\t// 2-byte sequence\n\tif ((byte1 & 0xE0) == 0xC0) {\n\t\tbyte2 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\tif (codePoint >= 0x80) {\n\t\t\treturn codePoint;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 3-byte sequence (may include unpaired surrogates)\n\tif ((byte1 & 0xF0) == 0xE0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\tif (codePoint >= 0x0800) {\n\t\t\treturn checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 4-byte sequence\n\tif ((byte1 & 0xF8) == 0xF0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tbyte4 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t(byte3 << 0x06) | byte4;\n\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\treturn codePoint;\n\t\t}\n\t}\n\n\tthrow Error('Invalid UTF-8 detected');\n}\n\nvar byteArray;\nvar byteCount;\nvar byteIndex;\nfunction utf8decode(byteString, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tbyteArray = ucs2decode(byteString);\n\tbyteCount = byteArray.length;\n\tbyteIndex = 0;\n\tvar codePoints = [];\n\tvar tmp;\n\twhile ((tmp = decodeSymbol(strict)) !== false) {\n\t\tcodePoints.push(tmp);\n\t}\n\treturn ucs2encode(codePoints);\n}\n\nmodule.exports = {\n\tversion: '2.1.2',\n\tencode: utf8encode,\n\tdecode: utf8decode\n};\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(){\n  \"use strict\";\n\n  var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\n  // Use a lookup table to find the index.\n  var lookup = new Uint8Array(256);\n  for (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n  }\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = lookup[base64.charCodeAt(i)];\n      encoded2 = lookup[base64.charCodeAt(i+1)];\n      encoded3 = lookup[base64.charCodeAt(i+2)];\n      encoded4 = lookup[base64.charCodeAt(i+3)];\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})();\n","/**\r\n * Create a blob builder even when vendor prefixes exist\r\n */\r\n\r\nvar BlobBuilder = typeof BlobBuilder !== 'undefined' ? BlobBuilder :\r\n  typeof WebKitBlobBuilder !== 'undefined' ? WebKitBlobBuilder :\r\n  typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder :\r\n  typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : \r\n  false;\r\n\r\n/**\r\n * Check if Blob constructor is supported\r\n */\r\n\r\nvar blobSupported = (function() {\r\n  try {\r\n    var a = new Blob(['hi']);\r\n    return a.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if Blob constructor supports ArrayBufferViews\r\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\r\n */\r\n\r\nvar blobSupportsArrayBufferView = blobSupported && (function() {\r\n  try {\r\n    var b = new Blob([new Uint8Array([1,2])]);\r\n    return b.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if BlobBuilder is supported\r\n */\r\n\r\nvar blobBuilderSupported = BlobBuilder\r\n  && BlobBuilder.prototype.append\r\n  && BlobBuilder.prototype.getBlob;\r\n\r\n/**\r\n * Helper function that maps ArrayBufferViews to ArrayBuffers\r\n * Used by BlobBuilder constructor and old browsers that didn't\r\n * support it in the Blob constructor.\r\n */\r\n\r\nfunction mapArrayBufferViews(ary) {\r\n  return ary.map(function(chunk) {\r\n    if (chunk.buffer instanceof ArrayBuffer) {\r\n      var buf = chunk.buffer;\r\n\r\n      // if this is a subarray, make a copy so we only\r\n      // include the subarray region from the underlying buffer\r\n      if (chunk.byteLength !== buf.byteLength) {\r\n        var copy = new Uint8Array(chunk.byteLength);\r\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\r\n        buf = copy.buffer;\r\n      }\r\n\r\n      return buf;\r\n    }\r\n\r\n    return chunk;\r\n  });\r\n}\r\n\r\nfunction BlobBuilderConstructor(ary, options) {\r\n  options = options || {};\r\n\r\n  var bb = new BlobBuilder();\r\n  mapArrayBufferViews(ary).forEach(function(part) {\r\n    bb.append(part);\r\n  });\r\n\r\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\r\n};\r\n\r\nfunction BlobConstructor(ary, options) {\r\n  return new Blob(mapArrayBufferViews(ary), options || {});\r\n};\r\n\r\nif (typeof Blob !== 'undefined') {\r\n  BlobBuilderConstructor.prototype = Blob.prototype;\r\n  BlobConstructor.prototype = Blob.prototype;\r\n}\r\n\r\nmodule.exports = (function() {\r\n  if (blobSupported) {\r\n    return blobSupportsArrayBufferView ? Blob : BlobConstructor;\r\n  } else if (blobBuilderSupported) {\r\n    return BlobBuilderConstructor;\r\n  } else {\r\n    return undefined;\r\n  }\r\n})();\r\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    callbacks = globalThis.___eio = (globalThis.___eio || []);\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (typeof addEventListener === 'function') {\n    addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\n\nvar BrowserWebSocket, NodeWebSocket;\n\nif (typeof WebSocket !== 'undefined') {\n  BrowserWebSocket = WebSocket;\n} else if (typeof self !== 'undefined') {\n  BrowserWebSocket = self.WebSocket || self.MozWebSocket;\n}\n\nif (typeof window === 'undefined') {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocketImpl = BrowserWebSocket || NodeWebSocket;\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  this.protocols = opts.protocols;\n  if (!this.usingBrowserWebSocket) {\n    WebSocketImpl = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = this.protocols;\n\n  var opts = {};\n\n  if (!this.isReactNative) {\n    opts.agent = this.agent;\n    opts.perMessageDeflate = this.perMessageDeflate;\n\n    // SSL options for Node.js client\n    opts.pfx = this.pfx;\n    opts.key = this.key;\n    opts.passphrase = this.passphrase;\n    opts.cert = this.cert;\n    opts.ca = this.ca;\n    opts.ciphers = this.ciphers;\n    opts.rejectUnauthorized = this.rejectUnauthorized;\n  }\n\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws =\n      this.usingBrowserWebSocket && !this.isReactNative\n        ? protocols\n          ? new WebSocketImpl(uri, protocols)\n          : new WebSocketImpl(uri)\n        : new WebSocketImpl(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocketImpl && !('__initialize' in WebSocketImpl && this.name === WS.prototype.name);\n};\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","module.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","// English\n\ndocument.lang_values = {\n\t// Texts\n\t\"btn-publish\": \"Publish\",\n\t\"btn-revert\": \"Revert\",\n\t\"btn-revisions\": \"Revisions\",\n\t\"btn-preview\": \"Preview\",\n\t\"btn-toggle-boxes\": \"Toggle boxes\",\n\t\"btn-add-container\": \"Add container\",\n\t\"btn-add-box\": \"Add box\",\n\t\"btn-cancle\": \"Cancel\",\n\t\"btn-save\": \"Save\",\n\t\"btn-make-reusable\": \"Make reusable\",\n\t\"btn-wp-media\": \"Mediendatei einfgen\",\n\t\"state-display\": {\n\t\t\"published\": \"Published!\",\n\t\t\"draft\": \"Is draft\"\n\t},\n\t\"default-style\": \"Default style\",\n\t\"rev-by-author\": \"by\",\n\n\t// Placeholder\n\t\"placeholder-search-box\": \"Search boxes\",\n\n\t// Titles\n\t\"title-tab-containers\": \"New container\",\n\t\"title-tab-reuse-container\": \"Reusable container\",\n\t\"title-wp-media\": \"Choose an image\",\n\n\t// Editor labels\n\t\"label-title\": \"Title:\",\n\t\"label-title-url\": \"Title URL (for internals links please use a relative path starting with '/'):\",\n\t\"label-prolog\": \"Prolog:\",\n\t\"label-epilog\": \"Epilog:\",\n\t\"label-readmore\": \"Read more link label:\",\n\t\"label-readmore-url\": \"Read more link URL (for internals links please use a relative path starting with '/'):\",\n\t\"label-style\": \"Style:\",\n\t\"label-b-before\": \"Prolog\",\n\t\"label-b-dynamic\": \"Box specific settings\",\n\t\"label-b-after\": \"Epilog\",\n\n\t// Errors: Something went wrong.\n\t\"err_publish\": \"Could not publish\",\n\t\"err_revert\": \"Could not revert Grid\",\n\t\"err_container_reuse\": \"Error while trying to make container reusable!\",\n\t\"err_container_save\": \"Could not save container.\",\n\t\"err_container_delete\": \"Could not delete container.\",\n\t\"err_slot_style\": \"Could not save slot style.\",\n\t\"err_box_trash\": \"Could not delete box.\",\n\t\"err_move_container\": \"Could not move containers. Site will reload!\",\n\t\"err-move-box\": \"Error while moving box!\",\n\t\"err-box-reuse\": \"Could not make box reusable. Please reload the page and try again.\",\n\t\"err-box-save\": \"Could not save the box. Please reload the page and try again.\",\n\n\t// Warnings: Nothing went wrong, but please do it another way.\n\t\"warn_container_edited\": \"Please finish container editing first.\",\n\t\"warn_container_reuse_need_title\": \"The container needs a title to be reusable. Please try again.\",\n\t\"warn_toggle_boxes_container_edited\": \"Please finish the container editing first.\",\n\n\t// Prompt\n\t\"prom_container_reuse_title\": \"Once a container is reusable you cannot modify it within this grid anymore. \" +\n\t\t\t\t\t\t\t\t\"If you want to proceed choose a Reuse-Title and confirm:\",\n\n\t// Confirm\n\t\"confirm-box-reuse\": \"Once a box is reusable you cannot modify it within this grid anymore.\\nProceed?\",\n\t\"confirm-leave-page\": \"Do you really want to leave Grid?\",\n\t\"confirm-grid-revert\": \"Delete all changes?\",\n\n\t\"info-wp-hide-adminbar\": \"You can expand the admin menu here. Grid needs some more space, so the admin menu is automatically collapsed.\"\n};\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\nimport _ from 'underscore'\nimport ich from 'icanhaz'\n\nwindow.GridView = GridBackbone.View.extend({\n    tagName: 'div',\n    className: 'grid-wrapper',\n    initialize: function() {\n        this._containersView = new ContainersView({collection: this.model.getContainers() });\n    },\n    render: function() {\n        this.$el.empty();\n        this.$el.append(ich.tpl_grid(this.model.toJSON() ));\n        this.renderContainers();\n        return this;\n    },\n    renderContainers: function(){\n        this.$el.find(\".containers-wrapper\").replaceWith(this._containersView.render().el);\n        return this;\n    }\n\n});\n\nwindow.ContainersView = GridBackbone.View.extend({\n\ttagName: 'div',\n\tclassName: 'grid-containers-wrapper containers-wrapper',\n\tinitialize: function(){\n        this.listenTo(this.collection, 'add',this.render);\n        this.listenTo(this.collection, 'remove',this.render);\n\t},\n\trender: function(){\n    \tvar self = this;\n    \tthis.$el.empty();\n    \tthis.collection.each(function(container){\n            var containerview = new ContainerView({model: container});\n    \t\tself.$el.append(containerview.render().el);\n    \t});\n        GRID._initializeBoxSortable();\n    \treturn this;\n\t}\n});\n\nwindow.ContainerView = GridBackbone.View.extend({\n\tclassName: 'grid-container',\n    events:{\n        \"click [role=trash]\": \"selfdestruct\",\n        \"click [role=edit]\": \"onEdit\",\n        \"click [role=reuse]\": \"onReuse\",\n        \"click [role=toggleslotstyles]\": \"onToggleSlotStyles\"\n    },\n\tinitialize: function(){\n        var self = this;\n        var listen_to = [\"title\",\"titleurl\",\"prolog\",\"epilog\", \"readmore\", \"readmoreurl\", \"style\", \"style_label\"];\n        _.each(listen_to, function(value, key, list){\n            self.listenTo(self.model,'change:'+value, self.render);\n        });\n        this._slotsView = new SlotsView({collection: this.model.getSlots() });\n\t},\n\trender: function(){\n        var json = this.model.toJSON();\n\n        this.$el\n            .attr(\"data-id\", json.id)\n            .attr(\"data-type\", json.type)\n            .attr(\"data-style\", json.style)\n            .attr(\"data-reused\", json.reused)\n            .attr(\"data-cid\", this.model.cid)\n            .attr(\"data-space-left\", this.model.getSpace(\"left\"))\n            .attr(\"data-space-right\", this.model.getSpace(\"right\"));\n        this.$el.addClass('grid-container-type-'+this.model.getType());\n        this.$el.addClass('grid-container-'+json.type);\n        this.$el.addClass('grid-container-left-space-'+json.space_to_left);\n        this.$el.addClass('grid-container-right-space-'+json.space_to_right);\n        // shorten title, prolog and epilog\n        var cut = 60;\n        if(json.title){\n            json.title_short = ( json.title.length <= cut ? json.title : json.title.substring(0,cut)+\"&hellip;\" );\n        }\n        if(json.prolog){\n            var prolog = jQuery(\"<div>\"+json.prolog+\"</div>\").text();\n            json.prolog_short = \"<p>\"+( prolog.length <= cut ? prolog : prolog.substring(0,cut)+\"&hellip;\" )+\"</p>\";\n        }\n        if(json.epilog){\n            var epilog = jQuery(\"<div>\"+json.epilog+\"</div>\").text();\n            json.epilog_short = \"<p>\"+( epilog.length <= cut ? epilog : epilog.substring(0,cut)+\"&hellip;\" )+\"</p>\";\n        }\n\n        json.right_edit = GRID.getRights().get(\"edit-container\");\n        json.right_delete = GRID.getRights().get(\"delete-container\");\n\n        json.right_options = true;\n        if(!json.right_delete && (!json.right_edit || json.reused)){\n            json.right_options = false;\n        }\n\n        json.right_move = GRID.getRights().get(\"move-container\");\n\n        json.isSidebar = json.type.startsWith(\"s\");\n\n        this.$el.empty();\n    \tthis.$el.append(ich.tpl_container( json));\n\n        this.$slots_wrapper = this.$el.find(\".grid-slots-wrapper\");\n        this.$slots_wrapper.replaceWith(this._slotsView.render().el);\n        return this;\n\t},\n    onEdit: function(){\n        var editor=new GridContainerEditor({model:this.model});\n        GRID.showEditor(function(){\n            GRID.$root_editor.html(editor.render().el);\n        });\n    },\n    saveEditor: function(){\n        var self = this;\n        console.debug(\"ContainerView saveEditor\", self);\n        jQuery.each(this.$el.find(\".form-val\"), function(index, element) {\n\n            var $this = jQuery(element);\n            var scope = $this.attr(\"scope\");\n            self.model.set(scope, $this.val() );\n        });\n        this.model.save();\n        return this.render();\n    },\n    onReuse: function(){\n        var reusetitle = prompt(\"Bitte gib einen Titel fr den Container ein\");\n        if(reusetitle == \"\" || reusetitle == false || reusetitle == null){\n            return false;\n        }\n        var self = this;\n        this.model.save(null,{\n            reusetitle: reusetitle,\n            action: \"reuse\",\n            success:function(data){\n                self.render();\n            }\n        });\n        return this;\n    },\n    onToggleSlotStyles: function(){\n        this.$el.toggleClass('grid-container-show-slot-styles');\n    },\n    selfdestruct: function(){\n        this.model.destroy({wait:true});\n        this.remove();\n    }\n});\n\nwindow.SlotsView = GridBackbone.View.extend({\n    tagName: 'div',\n    className: 'grid-slots-wrapper slots-wrapper',\n    initialize: function(){\n        this.collection.bind('add',this.render, this);\n        this.collection.bind('remove', this.render, this);\n    },\n    render: function(){\n        var self = this;\n        this.$el.empty();\n        this.collection.each(function(slot){\n            var slotview = new SlotView({model: slot});\n            slotview._parentView = self;\n            self.$el.append(slotview.render().el);\n        });\n        return this;\n    }\n});\n\nwindow.SlotView = GridBackbone.View.extend({\n    tagName: 'div',\n    className: 'grid-slot',\n\tinitialize: function(){\n        this._boxesView = new BoxesView({collection: this.model.getBoxes() });\n        if(GRID.mode != \"box\"){\n            this._slotStyleChangerView = new GridSlotStyleChangerView({model:this.model});\n        }\n        this.listenTo(this.model, 'change', this.render);\n\t},\n\trender: function(){\n        var json = this.model.toJSON();\n        this.$el.attr(\"data-style\", json.style)\n                .attr(\"data-id\",json.id)\n                .attr(\"data-dimension\",json.dimension);\n\n        this.$el.addClass('grid-slot-'+json.dimension);\n\n        this.$el.html(ich.tpl_slot( this.model.toJSON() ));\n        if(GRID.mode != \"box\"){\n            this.$el.find(\".style-changer\").replaceWith(this._slotStyleChangerView.render().el);\n            this._slotStyleChangerView.delegateEvents();\n        }\n        this._boxesView.render();\n        this.$el.find(\".boxes-wrapper\").replaceWith(this._boxesView.$el);\n        return this;\n\t}\n});\n\nwindow.BoxesView = GridBackbone.View.extend({\n    tagName: 'div',\n    className: 'grid-boxes-wrapper boxes-wrapper',\n    initialize: function(){\n        this.collection.bind('add',this.render, this);\n    },\n    render: function(){\n        var self = this;\n        this.$el.empty();\n        this.collection.each(function(box){\n            var boxview = new BoxView({model: box});\n            boxview._parentView = self;\n            self.$el.append(boxview.render().el);\n        });\n        return this;\n    }\n});\n\nwindow.BoxView = GridBackbone.View.extend({\n    className: \"grid-box box\",\n    events: {\n        'click .grid-box-edit' : 'edit',\n        'click .grid-box-delete' : 'deleteBox',\n        'click .grid-box-duplicate' : 'duplicateBox'\n    },\n\tinitialize: function(){\n\t\tthis.listenTo(this.model, 'change', this.render);\n        this.listenTo(this.model, 'destroy', this.selfdestruct);\n\t},\n\trender: function(){\n        var json = this.model.toJSON();\n\n        this.$el\n        .attr(\"data-id\",json.id)\n        .attr(\"data-type\",json.type)\n        .attr(\"data-style\", json.style);\n\n        this.$el.addClass(\"grid-box-\"+json.type);\n\n        if(json.type == \"reference\"){\n            json.reference = true;\n        }\n\n        json.right_move = GRID.getRights().get(\"move-box\");\n        json.right_edit = GRID.getRights().get(\"edit-box\");\n        json.right_create = GRID.getRights().get(\"create-box\");\n        json.right_delete = GRID.getRights().get(\"delete-box\");\n\n        json.right_none = false;\n        if(!(json.right_move || json.right_edit || json.right_delete)){\n            json.right_none = true;\n        }\n        GRID.log([\"render box\", json]);\n\n        var SCRIPT_REGEX = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi;\n\t\twhile (SCRIPT_REGEX.test(json.html)) {\n            json.html = json.html.replace(SCRIPT_REGEX, \"\");\n\t\t}\n\t\twhile(SCRIPT_REGEX.test(json.epilog)){\n\t        json.epilog = json.epilog.replace(SCRIPT_REGEX, \"\");\n\t\t}\n\t\twhile(SCRIPT_REGEX.test(json.prolog)){\n\t\t\tjson.prolog = json.prolog.replace(SCRIPT_REGEX, \"\");\n\t\t}\n\n\t\tif(this.model.isDuplicated()){\n\t\t    this.model.unsetDuplicated();\n\t\t    this.$el.addClass(\"is-duplicated\");\n        }\n\n        this.$el.html(ich.tpl_box( json ));\n        return this;\n\t},\n    edit:function(){\n        var editor=new BoxEditor({model:this.model});\n        GRID.showEditor(function(){\n            GRID.$root_editor.html(editor.render().el);\n        });\n    },\n    deleteBox: function(){\n        this.model.destroy();\n    },\n    duplicateBox: function(){\n        this.model.duplicate();\n    },\n    selfdestruct: function(){\n        this.remove();\n    }\n});\n\nwindow.BoxEditor = GridBackbone.View.extend({\n    events: {\n        'click .btn-cancel' : 'onCancel',\n        'click .grid-editor-legend' : 'onToggle',\n        'click .btn-save' : 'onSave',\n        'click .btn-make-reusable' : 'onMakeReusable'\n    },\n    initialize: function(){\n    },\n    render: function(){\n        GRID.log(this.model.toJSON());\n        var styles=GRID.getBoxStyles().toJSON();\n        var self=this;\n        _.each(styles,function(elem){\n            if(elem.slug==self.model.get(\"style\"))\n                elem.selected=\"selected\";\n            else\n                elem.selected=\"\";\n        });\n        this.$el.html(ich.tpl_boxeditor({\n            'lang_values':document.lang_values,\n            'box':this.model.toJSON(),\n            'b_index':this.model.getIndex(),\n            'c_id':this.model.getContainer().get(\"id\"),\n            's_id':this.model.getSlot().get(\"id\"),\n            'styles':styles\n        }));\n        var contentstructure=this.model.get(\"contentstructure\");\n        var fieldcontainer=jQuery(this.$el).find(\".dynamic-fields .field-wrapper\");\n        var views=[];\n        var self=this;\n        _.each(contentstructure,function(elem){\n            var type=elem.type;\n            var view=new boxEditorControls[type](\n            {\n                model:\n                {\n                    structure:elem,\n                    container:self.model.get(\"content\"),\n                    box:self.model,\n                    parentpath:\"\"\n                }\n            });\n            views.push(view);\n            fieldcontainer.append(view.render().el);\n        });\n        this.views=views;\n        jQuery.each(jQuery(this.$el).find(\".form-html\"), function(index, element) {\n            CKEDITOR.replace(\n                element,{\n                customConfig : document.PathToConfig\n            });\n        });\n\n        if(GRID.getBoxStyles().length<1)\n        {\n                jQuery(this.$el).find(\".box-styles-wrapper\").hide();\n        }\n        return this;\n    },\n    onCancel: function(){\n        GRID.hideBoxEditor(function(){\n            jQuery(\"div#new-grid-boxeditor\").html(\"\");\n        });\n    },\n\n    onToggle:function(e)\n    {\n        jQuery(e.target).siblings(\".field-wrapper\").slideToggle(300);\n    },\n\n    onMakeReusable:function(e)\n    {\n        if(!confirm(document.lang_values[\"confirm-box-reuse\"])) return;\n        this.model.save(null,{action:\"reuse\"});\n        GRID.hideBoxEditor(function(){\n            jQuery(\"div#new-grid-boxeditor\").html(\"\");\n        });\n    },\n\n    onSave:function(e)\n    {\n        var obj={};\n        _.each(this.views,function(view){\n            obj[view.model.structure.key]=view.fetchValue();\n        });\n        this.model.set('content',obj);\n        this.model.set('title',jQuery(this.$el).find(\".f-b-title\").val());\n        this.model.set('titleurl',jQuery(this.$el).find(\".f-b-titleurl\").val());\n        this.model.set('prolog',CKEDITOR.instances[\"f-b-prolog\"].getData());\n        this.model.set('epilog',CKEDITOR.instances['f-b-epilog'].getData());\n        this.model.set('readmore',jQuery(this.$el).find('.f-b-readmore').val());\n        this.model.set('readmoreurl',jQuery(this.$el).find('.f-b-readmoreurl').val());\n        this.model.set('style',jQuery(this.$el).find(\".box-styles-wrapper select\").val());\n        this.model.save();\n        GRID.hideBoxEditor(function(){\n            jQuery(\"div#new-grid-boxeditor\").html(\"\");\n        });\n    }\n});\n\nwindow.boxEditorControls={};\n","export const hasHTMLEditor = (element) =>{\n    return getHTMLEditor(element)\n}\n\nexport const getHTMLEditor = (element) => {\n    return jQuery(element).data(\"ckeditor\");\n}\n\nexport const initHTMLEditor = (element) => {\n    return new Promise((resolve, reject) =>{\n        if(hasHTMLEditor(element)) {\n            resolve(getHTMLEditor(element))\n            return;\n        }\n        // from CDN in /templates/editor/grid.tpl\n        resolve(CKEDITOR.replace(element,{\n            customConfig: document.PathToConfig\n        }))\n    })\n}\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\nimport _ from 'underscore'\nimport ich from 'icanhaz'\nimport {initHTMLEditor} from \"../utils\";\n\nwindow.GridContainerEditor = GridBackbone.View.extend({\n    className: \"grid-container-editor\",\n    events: {\n        'click .grid-editor-controls [role=cancel]' : 'onCancel',\n        'click .grid-editor-controls [role=save]' : 'onSave',\n        'click .grid-editor-legend' : 'onToggle',\n        'click .grid-editor-url-button': 'onUrlToggle'\n    },\n    initialize: function(){\n    },\n    render: function(){\n        GRID.log(this.model.toJSON());\n        var styles=GRID.getContainerStyles().toJSON();\n        var self=this;\n        _.each(styles,function(elem){\n            if(elem.slug==self.model.get(\"style\"))\n                elem.selected=\"selected\";\n            else\n                elem.selected=\"\";\n        });\n        this.$el.html(ich.tpl_containereditor({\n            'lang_values':document.lang_values,\n            'model':this.model.toJSON(),\n            'styles':styles\n        }));\n\n        initHTMLEditor(this.el.querySelector(\".grid-editor-prolog\")).then(editor=>this.prologEditor = editor);\n        initHTMLEditor(this.el.querySelector(\".grid-editor-epilog\")).then(editor=>this.epilogEditor = editor);\n\n        this.$el.find(\".grid-collapsable-shown\").addClass(\"grid-active\");\n\n        jQuery.each(this.$el.find(\".grid-editor-url-input\"), function(index, val) {\n             var $url = jQuery(val);\n             if($url.val() == \"\"){\n                $url.siblings('button').trigger(\"click\");\n             }\n        });\n\n        return this;\n    },\n\n    onToggle:function(e)\n    {\n        jQuery(e.currentTarget).parent().toggleClass('grid-active');\n    },\n\n    onUrlToggle: function(e){\n        var $parent = jQuery(e.target).parent();\n        if($parent.hasClass('grid-editor-url-show')){\n            $parent.find('input').attr(\"disabled\",\"disabled\").val(\"\");\n            $parent.find('button').html(\"Add link\");\n        } else {\n            $parent.find('button').html(\"Delete Link\");\n            $parent.find('input').removeAttr('disabled');\n        }\n        jQuery(e.target).parent().toggleClass('grid-editor-url-show');\n    },\n\n    onCancel: function(){\n        GRID.hideEditor(function(){\n            jQuery(GRID.$root_editor).html(\"\");\n        });\n    },\n\n    onSave:function(e)\n    {\n        var class_prefix = \".grid-editor-\";\n        this.model.set('title',this.$el.find(class_prefix+\"title\").val());\n        this.model.set('titleurl', this.$el.find(class_prefix+\"titleurl\").val());\n\n        this.model.set('prolog',this.prologEditor.getData());\n        this.model.set('epilog',this.epilogEditor.getData());\n\n        this.model.set('readmore', this.$el.find(class_prefix+\"readmore\").val());\n        this.model.set('readmoreurl',this.$el.find(class_prefix+\"readmoreurl\").val());\n        this.model.set('style', this.$el.find(class_prefix+\"style\").val());\n        this.model.set('style_label', jQuery(this.$el).find(class_prefix+\"style option:selected\").text());\n        this.model.save();\n        GRID.hideEditor(function(){\n            GRID.$root_editor.html(\"\");\n        });\n    }\n});\n\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\nimport _ from 'underscore'\nimport ich from 'icanhaz'\nimport {initHTMLEditor} from \"../utils\";\n\nwindow.BoxEditor = GridBackbone.View.extend({\n    className: \"grid-box-editor\",\n    events: {\n        'click .grid-editor-controls [role=cancel]' : 'onCancel',\n        'click .grid-editor-legend' : 'onToggle',\n        'click .grid-editor-controls [role=save]' : 'onSave',\n        'click .grid-editor-controls [role=reuse]' : 'onMakeReusable',\n        'click .grid-editor-url-button': 'onUrlToggle'\n    },\n    initialize: function(){\n    },\n    render: function(){\n        var styles=GRID.getBoxStyles().toJSON();\n        var self=this;\n        _.each(styles,function(elem){\n            if(elem.slug===self.model.get(\"style\"))\n                elem.selected=\"selected\";\n            else\n                elem.selected=\"\";\n        });\n\n        this.$el.html(ich.tpl_boxeditor({\n            'lang_values':document.lang_values,\n            'box':this.model.toJSON(),\n            'b_index':this.model.getIndex(),\n            'c_id':this.model.getContainer().get(\"id\"),\n            's_id':this.model.getSlot().get(\"id\"),\n            'styles':styles,\n        }));\n        var contentstructure=this.model.get(\"contentstructure\");\n        var fieldcontainer=this.$el.find(\".grid-dynamic-fields .grid-editor-field-wrapper\");\n        var views=[];\n        _.each(contentstructure,function(elem){\n            var type=elem.type;\n            var view=new boxEditorControls[type](\n            {\n                model:\n                {\n                    structure:elem,\n                    container:self.model.get(\"content\"),\n                    box:self.model,\n                    parentpath:\"\"\n                }\n            });\n            views.push(view);\n            fieldcontainer.append(view.render().el);\n        });\n        this.views=views;\n\n        initHTMLEditor(this.el.querySelector(\".grid-editor-prolog\")).then(editor=>this.prologEditor = editor);\n        initHTMLEditor(this.el.querySelector(\".grid-editor-epilog\")).then(editor=>this.epilogEditor = editor);\n\n        if(GRID.getBoxStyles().length<1)\n        {\n            this.$el.find(\".grid-editor-box-styles-wrapper\").hide();\n        }\n\n        this.$el.find(\".grid-collapsable-shown\").addClass('grid-active');\n\n\n\n        jQuery.each(this.$el.find(\".grid-editor-url-input\"), function(index, val) {\n             var $url = jQuery(val);\n             if($url.val() == \"\"){\n                $url.siblings('button').trigger(\"click\");\n             }\n        });\n\n        return this;\n    },\n    onCancel: function(){\n        GRID.hideEditor(function(){\n            GRID.$root_editor.html(\"\");\n        });\n    },\n\n    onToggle:function(e)\n    {\n        jQuery(e.currentTarget).parent().toggleClass('grid-active');\n    },\n\n    onUrlToggle: function(e){\n        var $parent = jQuery(e.target).parent();\n        if($parent.hasClass('grid-editor-url-show')){\n            $parent.find('input').attr(\"disabled\",\"disabled\").val(\"\");\n            $parent.find('button').html(\"Add link\");\n        } else {\n            $parent.find('button').html(\"Delete Link\");\n            $parent.find('input').removeAttr('disabled');\n        }\n        jQuery(e.target).parent().toggleClass('grid-editor-url-show');\n    },\n\n    onMakeReusable:function(e)\n    {\n        if(!confirm(document.lang_values[\"confirm-box-reuse\"])) return;\n        this.model.save(null,{action:\"reuse\"});\n        GRID.hideEditor(function(){\n            GRID.$root_editor.html(\"\");\n        });\n    },\n\n    onSave:function(e)\n    {\n        var obj={};\n        _.each(this.views,function(view){\n            obj[view.model.structure.key]=view.fetchValue();\n        });\n        this.model.set('content',obj);\n        this.model.set('title',this.$el.find(\".grid-editor-title\").val());\n        this.model.set('titleurl',this.$el.find(\".grid-editor-titleurl\").val());\n\n        this.model.set('prolog',this.prologEditor.getData());\n        this.model.set('epilog',this.epilogEditor.getData());\n        this.model.set('readmore',this.$el.find('.grid-editor-readmore').val());\n        this.model.set('readmoreurl',this.$el.find('.grid-editor-readmoreurl').val());\n        this.model.set('style',this.$el.find(\".grid-editor-styles-wrapper select\").val());\n        this.model.save();\n        GRID.hideEditor(function(){\n            GRID.$root_editor.html(\"\");\n        });\n    }\n});\n\nboxEditorControls={};\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\nimport _ from 'underscore'\n\nboxEditorControls['autocomplete']=GridBackbone.View.extend({\n    className: \"grid-editor-widget grid-editor-widget-autocomplete\",\n    events:{\n        \"keyup .i-autocomplete\":\"keyup\",\n        \"click .suggestion-list li\":\"listItemSelected\",\n        \"click .cancel\":\"cancelSelection\"\n    },\n    initialize:function(){\n\n    },\n    render:function(){\n        let html=\"<label>\"+this.model.structure.label+\"</label>\";\n        let classes=\"autocomplete-wrapper form-autocomplete dynamic-value\";\n        let readonly=\"\";\n        let fetch=false;\n\t    const key_value = this.model.container[this.model.structure.key];\n\n\t    if(typeof key_value !== typeof undefined && key_value !== '')\n\t    {\n            classes+=\" locked\";\n            readonly=\"readonly=readonly\";\n            fetch=true;\n        }\n        html+=\"<div class='\"+classes+\"'><input type=text class='form-text autocomplete i-autocomplete' \"+readonly+\"/>\";\n        html+=\"<div class='loading'></div>\";\n        html+=\"<div class='cancel icon-cancel'></div>\";\n        html+=\"<ul class='suggestion-list'></ul>\";\n        this.$el.html(html);\n        if(fetch)\n        {\n            this.$el.find(\".loading\").addClass(\"go\");\n            this.$el.find(\"input.i-autocomplete\").data(\"key\",key_value);\n            const box=this.model.box;\n            const self=this;\n            new GridAjax(\"typeAheadGetText\",[box.getGrid().getGridID(),box.getContainer().get(\"id\"),box.getSlot().get(\"id\"),box.getIndex(),this.model.parentpath+this.model.structure.key,key_value],{\n                success_fn:function(data)\n                {\n                    self.$el.find(\".loading\").removeClass(\"go\");\n                    self.$el.find(\"input.i-autocomplete\").val(data.result);\n                }\n            });\n        }\n        return this;\n    },\n    fetchValue:function(){\n        return this.$el.find(\"input.i-autocomplete\").data(\"key\");\n    },\n    keyup:function(e) {\n        if(e.which==13)\n        {\n            this.selectItem(this.$el.find(\".suggestion-list li\").first());\n        }\n        else\n        {\n            const search=this.$el.find(\"input.i-autocomplete\").val();\n            this.$el.find(\".loading\").addClass(\"go\");\n            clearTimeout(this.searching);\n            const self = this;\n            this.searching = setTimeout(function(){\n                self.doSearch(search);\n            }, 1000);\n\n        }\n    },\n    doSearch: function(search){\n        const self = this;\n        const box=this.model.box;\n        new GridAjax(\"typeAheadSearch\",[box.getGrid().getGridID(),box.getContainer().get(\"id\"),box.getSlot().get(\"id\"),box.getIndex(),this.model.parentpath+this.model.structure.key,search],{\n            success_fn:function(data){\n                self.$el.find(\".suggestion-list\").empty();\n                _.each(data.result,function(elem){\n                    self.$el.find(\".suggestion-list\").append(jQuery(\"<li/>\").text(elem.value).attr(\"data-key\",elem.key));\n                });\n                self.$el.find(\".loading\").removeClass(\"go\");\n            }\n        });\n    },\n    selectItem:function($item){\n        const key_value=$item.data(\"key\");\n        const name=$item.text();\n        this.$el.find(\".autocomplete-wrapper\").addClass(\"locked\");\n        this.$el.find(\"input.i-autocomplete\")\n            .val(name)\n            .attr(\"readonly\",\"readonly\")\n            .data(\"key\",key_value);\n        this.$el.find(\".suggestion-list\").empty();\n    },\n    listItemSelected:function(e){\n        this.selectItem(jQuery(e.target));\n    },\n    cancelSelection:function(e){\n        this.$el.find(\".autocomplete-wrapper\").removeClass(\"locked\");\n        this.$el.find(\"input.i-autocomplete\")\n            .data(\"key\",\"\")\n            .removeAttr(\"readonly\")\n            .val(\"\");\n        this.old_search_string=\"\";\n    }\n});\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\nimport _ from 'underscore'\n\nboxEditorControls['autocomplete-with-links']=GridBackbone.View.extend({\n    className: \"grid-editor-widget grid-editor-autocomplete-with-links\",\n    events:{\n        \"keyup .i-autocomplete\":\"keyup\",\n        \"click .suggestion-list li\":\"listItemSelected\",\n        \"click .cancel\":\"cancelSelection\"\n    },\n    initialize:function(){\n\n    },\n    render:function(){\n        let html=\"<label>\"+this.model.structure.label+\"</label>\";\n        let classes=\"autocomplete-wrapper form-autocomplete dynamic-value\";\n        let readonly=\"\";\n        let fetch=false;\n\t    const key_value = this.model.container[this.model.structure.key];\n\t    if(typeof key_value !== typeof undefined && key_value !== '')\n\t    {\n            classes+=\" locked\";\n            readonly=\"readonly\";\n            fetch=true;\n        }\n        html+=\"<div class='\"+classes+\"'>\";\n        html+=\"<input type=text class='form-text autocomplete i-autocomplete' \"+readonly+\"/>\";\n        html+=\"<div class='cancel'><span class='icon-cancel'></span></div>\";\n        html+=\"<ul class='suggestion-list'></ul>\";\n\n\t\thtml+='<p class=\"links\">';\n        html+=  '<a class=\"empty\" data-raw=\"'+this.model.structure.emptyurl+'\" href=\"'+this.model.structure.emptyurl+'\" target=\"_blank\">'+this.model.structure.emptylinktext+'</a>';\n\t\thtml+=\t'<a class=\"full\" data-raw=\"'+this.model.structure.url+'\" href=\"\" target=\"_blank\">'+this.model.structure.linktext+'</a>';\n\t\thtml+='</p>';\n        html+= \"</div>\";\n\n        jQuery(this.$el).html(html);\n        if(fetch) {\n            this.$el.find(\"input.i-autocomplete\").data(\"key\",key_value);\n            const box=this.model.box;\n            const self=this;\n            new GridAjax(\"typeAheadGetText\",[box.getGrid().getGridID(),box.getContainer().get(\"id\"),box.getSlot().get(\"id\"),box.getIndex(),this.model.parentpath+this.model.structure.key,key_value],{\n                success_fn:function(data)\n                {\n                    self.$el.find(\"input.i-autocomplete\").val(data.result);\n                }\n            });\n\t        const $linkUrl=this.$el.find(\"a.full\");\n\t        $linkUrl.attr('href',$linkUrl.data('raw').replace('%',key_value));\n        }\n        return this;\n    },\n    fetchValue:function(){\n        return this.$el.find(\"input.i-autocomplete\").data(\"key\");\n    },\n\n    keyup:function(e) {\n        const $input = this.$el.find(\"input.i-autocomplete\");\n        if(typeof $input.attr('readonly') !== 'undefined' || $input.attr('readonly') === false ) return;\n        if(e.which===13)\n        {\n            this.selectItem(this.$el.find(\".suggestion-list li\").first());\n        }\n        else\n        {\n            const search=this.$el.find(\"input.i-autocomplete\").val();\n            if(search==this.old_search_string)return;\n            const self=this;\n\n            this.$el.find(\".loading\").show();\n\n            clearTimeout(this.searching);\n            this.searching = setTimeout(function(){\n                self.doSearch(search);\n            }, 1000);\n\n\n        }\n    },\n    doSearch: function(search){\n        const self = this;\n        const box=this.model.box;\n        new GridAjax(\"typeAheadSearch\",[box.getGrid().getGridID(),box.getContainer().get(\"id\"),box.getSlot().get(\"id\"),box.getIndex(),this.model.parentpath+this.model.structure.key,search],{\n            success_fn:function(data){\n                self.old_search_string=search;\n                self.$el.find(\".suggestion-list\").empty();\n                _.each(data.result,function(elem){\n                    self.$el.find(\".suggestion-list\").append(jQuery(\"<li/>\").text(elem.value).attr(\"data-key\",elem.key));\n                });\n                self.$el.find(\".loading\").hide();\n            }\n        });\n    },\n    selectItem:function($item){\n        const key_value=$item.data(\"key\");\n        const name=$item.text();\n        this.$el.find(\".autocomplete-wrapper\").addClass(\"locked\");\n        this.$el.find(\"input.i-autocomplete\")\n            .val(name)\n            .attr(\"readonly\",\"readonly\")\n            .data(\"key\",key_value);\n        this.$el.find(\".suggestion-list\").empty();\n        const $linkUrl=this.$el.find(\"a.full\");\n        $linkUrl.attr('href',$linkUrl.data('raw').replace('%',key_value));\n    },\n    listItemSelected:function(e){\n        this.selectItem(jQuery(e.target));\n    },\n    cancelSelection:function(e){\n        this.$el.find(\".autocomplete-wrapper\").removeClass(\"locked\");\n        this.$el.find(\"input.i-autocomplete\")\n            .data(\"key\",\"\")\n            .removeAttr(\"readonly\")\n            .val(\"\");\n        this.old_search_string=\"\";\n    }\n});\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\n\nboxEditorControls['checkbox']=GridBackbone.View.extend({\n    className: \"grid-editor-widget grid-editor-widget-checkbox\",\n    render:function(){\n        const value=this.model.container[this.model.structure.key];\n        let checked= (value) ? 'checked=checked' : '';\n        const html=\"<label><input type='checkbox' \"+checked+\" /> \"+this.model.structure.label+\"</label>\";\n        this.$el.html(html);\n        return this;\n    },\n    fetchValue:function(){\n        return this.$el.find(\"input[type=checkbox]\").is(\":checked\");\n    }\n});","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\nimport GridBackbone from 'backbone'\n\nboxEditorControls['file']=GridBackbone.View.extend({\n\tclassName: \"grid-editor-widget grid-editor-widget-file\",\n    initialize:function(){\n\n    },\n    render:function(){\n    \tvar $ = jQuery;\n    \tvar val = this.model.container[this.model.structure.key];\n    \tvar $upload_form_item = jQuery(\"<div class='form-item file-upload'>\");\n\t\t$upload_form_item.append(\"<label>\"+this.model.structure.label+\"</label>\");\n\n\t\tthis.$preview = jQuery(\"<div></div>\").addClass(\"file-upload-preview\");\n\t\t$upload_form_item.append(this.$preview);\n\n\t\tvar $file_input = jQuery(\"<input type='file' data-path='\"+this.model.parentpath+this.model.structure.key+\"' class='form-file' />\");\n\t\t$upload_form_item.append($file_input);\n\n\t\tvar fid = this.model.container[this.model.structure.key];\n\n\t\tthis.$key_field = jQuery(\"<input type='hidden' data-key='\"+this.model.structure.key+\"' \"+\n\t\t\t\"value='\"+((typeof fid !== typeof undefined)? fid: '')+\"' class='dynamic-value' />\");\n\t\t$upload_form_item.append(this.$key_field);\n\n\n\t\tthis.$progress_display = jQuery(\"<p>\").addClass(\"progress\");\n\t\tthis.$progress_bar_wrapper = jQuery(\"<div class='progress-bar-wrapper'><div class='bar'></div>\");\n\t\tthis.$progress_bar_status = this.$progress_bar_wrapper.children(\".bar\");\n\t\tif(this.model.container[this.model.structure.key] === \"\" || this.model.container[this.model.structure.key] === undefined){\n\t\t\tthis.$progress_display.text(this.getFileChooseHelp());\n\t\t} else {\n\t\t\tthis.$progress_display.text(this.getFileReplaceHelp());\n\t\t\tthis.$progress_bar_status.addClass(\"done\");\n\t\t}\n\t\t$upload_form_item.append(this.$progress_display).append(this.$progress_bar_wrapper);\n\t\tvar self = this;\n\n\t\t$file_input.fileupload({\n\t        url: this.model.structure.uploadpath,\n\t        dataType: 'json',\n\t        paramName: \"file\",\n\t        done: function(e, data){\n\t        \tself.uploadDone(e, data);\n\t        \tself.loadPreview();\n\t        },\n\t        progressall: function(e, data){\n\t        \tself.progressall(e, data);\n\t        },\n\t        always: function(e, data){\n\t        \tGRID.log(e, data);\n\t        }\n\t    }).bind('fileuploadsubmit', { self: self }, this.getFormData);\n\n\t\tthis.$el.append($upload_form_item);\n\n\t\tthis.loadPreview();\n\n\t\treturn this;\n\n    },\n\tloadPreview: function(){\n\n\t\tthis.$preview.empty();\n\n    \tvar fileid = this.$key_field.val();\n    \tvar path = this.model.parentpath+this.model.structure.key;\n\t\tif(typeof fileid === typeof undefined || fileid === \"\") return;\n\n\n\n\t\tvar self = this;\n\t\tvar box=this.model.box;\n\t\tvar params = [box.getGrid().getGridID(),box.getContainer().get(\"id\"),box.getSlot().get(\"id\"),box.getIndex(),path,fileid];\n\t\tnew GridAjax(\"getFileInfo\",params,{\n\t\t\tsuccess_fn:function(data)\n\t\t\t{\n\t\t\t\tself.$preview.append(\n\t\t\t\t\tjQuery(\"<img>\")\n\t\t\t\t\t.css('max-width', '200px')\n\t\t\t\t\t\t.attr(\"src\", data.result.src)\n\t\t\t\t);\n\n\t\t\t}\n\t\t});\n\t},\n    getFormData: function(e, data){\n\t    var self = e.data.self;\n\t    var element_key = self.model.parentpath+self.model.structure.key;\n\t    var box = self.model.box;\n\t    data.formData = {\n\t    \t\tgridid : GRID.ID,\n\t    \t\tcontainer: box.getContainer().get(\"id\"),\n\t    \t\tslot : box.getSlot().get(\"id\"),\n\t    \t\tbox : box.getIndex(),\n\t    \t\tkey: element_key\n\t    \t};\n\t    self.$progress_bar_status.removeClass(\"done\");\n    },\n    progressall: function (e, data) {\n    \tvar percent = (data.loaded/data.total)*100;\n    \tthis.$progress_display.text(Math.round(percent)+\"%\");\n    \tthis.$progress_bar_status.css(\"width\", percent+\"%\");\n    },\n    uploadDone: function(e, data){\n    \tvar result = data.result;\n    \tthis.$key_field.val(result.result);\n        this.$progress_display.text(\"OK!\");\n        this.$progress_bar_status.addClass(\"done\");\n    },\n    fetchValue:function(){\n        return this.$key_field.val();\n    },\n    getFileReplaceHelp(){\n        var text;\n        if (typeof (this.model.structure.fileReplacementHelp) !== 'undefined'){\n            text = this.model.structure.fileReplacementHelp;\n        } else {\n            text = \"Choose another picture to override the old one.\";\n        }\n        return text;\n    },\n    getFileChooseHelp(){\n        var text;\n        if (typeof (this.model.structure.fileChooseHelp) !== 'undefined'){\n            text = this.model.structure.fileChooseHelp;\n        } else {\n            text = \"Please choose a picture...\";\n        }\n        return text;\n    }\n});\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\n\nboxEditorControls['hidden']=GridBackbone.View.extend({\n\tclassName: \"grid-editor-widget grid-editor-widget-hidden\",\n    initialize:function(){\n\n    },\n    render:function(){\n        return this;\n    },\n    fetchValue:function(){\n        return this.model.container[this.model.structure.key];\n    }\n});","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\nimport {initHTMLEditor} from \"../../utils\";\n\nboxEditorControls['html']=GridBackbone.View.extend({\n    className: \"grid-editor-widget grid-editor-widget-html\",\n    render:function(){\n        const text=this.model.container[this.model.structure.key] || \"\";\n        this.$el.html(\n            \"<label>\"+this.model.structure.label+\"</label>\"+\n            \"<textarea name='\"+this.cid+\"' class='dynamic-value form-html'>\"+text.replace(/\\'/g, \"&#39;\")+\"</textarea>\"\n        );\n        initHTMLEditor(this.el.querySelector(\".form-html\")).then(editor=>{\n            this.editor = editor;\n        })\n\n        return this;\n    },\n    fetchValue:function(){\n        return this.editor.getData();\n    }\n});\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\n\nboxEditorControls['info']=GridBackbone.View.extend({\n    className: \"grid-editor-widget grid-editor-widget-info\",\n    initialize:function(){\n\n    },\n    render:function(){\n        if ( null != this.model.structure.label ){\n            jQuery(this.el).html(\"<label>\"+this.model.structure.label+\"</label><p class='info'>\"+this.model.structure.text+\"</p>\");\n        }\n        else{\n            jQuery(this.el).html(\"<p class='info'>\"+this.model.structure.text+\"</p>\");\n        }\n        return this;\n    },\n    fetchValue:function(){\n        return {};\n    }\n});\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\n\nboxEditorControls['input']=GridBackbone.View.extend({\n    className: \"grid-editor-widget grid-editor-widget-input\",\n    initialize:function(){\n\n    },\n    render:function(){\n        this.$el.empty();\n        const val = this.model.container[this.model.structure.key];\n\n        this.$el.append(jQuery(\"<label />\").text(this.model.structure.label));\n        this.$el.append(\n            jQuery(\"<input />\")\n                .addClass(\"dynamic-value\")\n                .attr(\"type\", this.model.structure.inputType)\n                .val((typeof val === typeof undefined)? \"\": val)\n        );\n        this.$el.addClass(\"grid-editor-widget-input__\"+this.model.structure.inputType);\n        return this;\n    },\n    fetchValue:function(){\n        return jQuery(this.$el).find(\"input\").val();\n    }\n});","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\nimport _ from 'underscore'\n\nboxEditorControls['list']=GridBackbone.View.extend({\n    className: \"grid-editor-widget grid-editor-widget-list\",\n    initialize:function(){\n\n    },\n    render:function(){\n        this.$el.empty();\n        jQuery(\"<label></label>\")\n                .text(this.model.structure.label)\n                    .appendTo(this.$el);\n\n        this.$list = jQuery(\"<div></div>\")\n                    .addClass('grid-editor-widget-list-items');\n        this.$el.append(this.$list);\n\n        var list=this.model.container[this.model.structure.key];\n        var self=this;\n        var views=[];\n\n        jQuery(\"<button><span class='icon-plus'></span>Add item</button>\")\n                .addClass('grid-editor-widget-list-add')\n                    .appendTo(this.$el).on('click', function(event) {\n                        event.preventDefault();\n                       self.onAdd();\n                    });\n\n\n        _.each(list,function(elem){\n            var view=new boxEditorControls['listitem']({\n                model:{\n                    structure:self.model.structure.contentstructure,\n                    container:elem,\n                    box:self.model.box,\n                    parentpath:self.model.parentpath+self.model.structure.key+\".\"\n                }\n            });\n            views.push(view);\n            self.$list.append(view.render().$el);\n        });\n        this.views=views;\n\n        this.$list.on(\"click\", \".widget-list-sort-button\", {self: this}, this.sortItem);\n        this.$list.on(\"click\", \".widget-list-remove-item-button\", {self: this}, this.onRemove);\n\n        return this;\n    },\n    sortItem: function(e){\n        var self = e.data.self;\n        var $button= jQuery(e.currentTarget);\n        var $this = $button.closest(\".grid-editor-widget-listitem\");\n        var index = $this.index();\n        var views = self.views;\n        var view = views[index];\n        var newPos = index;\n        switch($button.attr(\"data-dir\")){\n            case \"up\":\n                newPos = index-1;\n                if(newPos < 0)\n                    newPos = 0;\n                $this.insertBefore($this.prev());\n                break;\n            case \"down\":\n                newPos = index+1;\n                $this.insertAfter($this.next());\n                break;\n        }\n        views.splice(index,1);\n        views.splice(newPos,0,view);\n\n    },\n    onRemove: function(e){\n\n        var self = e.data.self;\n        var index = jQuery(e.currentTarget).closest(\".grid-editor-widget-listitem\").index();\n        var list = self.model.container[self.model.structure.key];\n        list.splice(index,1);\n        self.views[index].removed = true;\n        self.views[index].remove();\n        self.views.splice(index,1);\n        console.log([\"remove\",e, self]);\n\n    },\n    onAdd: function(){\n        var view = new boxEditorControls['listitem']({\n            model: {\n                structure: this.model.structure.contentstructure,\n                container:{},\n                box: this.model.box,\n                parentpath: this.model.parentpath+this.model.structure.key+\".\"\n            }\n        });\n        this.views.push(view);\n        this.$list.append(view.render().el);\n\n        // jQuery.each(view.$el.find(\".form-html\"), function(index, element) {\n        //     CKEDITOR.replace(\n        //         element,{\n        //         customConfig : document.PathToConfig\n        //     });\n        // });\n    },\n    fetchValue:function(){\n        var content=[];\n        _.each(this.views,function(view){\n            if(view.removed) return;\n            content.push(view.fetchValue());\n        });\n        return content;\n    }\n});\n\nboxEditorControls['listitem']=GridBackbone.View.extend({\n    className: \"grid-editor-widget-listitem\",\n    removed: false,\n    initialize:function(){\n\n    },\n    render:function(){\n        var views=[];\n        var self = this;\n        _.each(this.model.structure,function(elem){\n            var type=elem.type;\n            var view=new boxEditorControls[type](\n            {\n                model:\n                {\n                    structure:elem,\n                    container:self.model.container,\n                    box:self.model.box,\n                    parentpath:self.model.parentpath\n                }\n            });\n            views.push(view);\n            self.$el.append(view.render().el);\n        });\n        jQuery(\"<button class='widget-list-remove-item-button'><span class='icon-minus'></span>Remove item</button>\")\n        .appendTo(this.$el);\n        jQuery(\"<button class='widget-list-move-up-item-button widget-list-sort-button' data-dir='up'><span class='icon-dir-up'></span></button>\")\n        .appendTo(this.$el);\n        jQuery(\"<button class='widget-list-move-down-item-button widget-list-sort-button' data-dir='down'><span class='icon-dir-down'></span></button>\")\n        .appendTo(this.$el);\n        this.views=views;\n        return this;\n    },\n    fetchValue:function(){\n        var obj={};\n        _.each(this.views,function(view){\n            obj[view.model.structure.key]=view.fetchValue();\n        });\n        return obj;\n    }\n});\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\nimport _ from 'underscore'\n\nboxEditorControls['multi-autocomplete']=GridBackbone.View.extend({\n    className: \"grid-editor-widget grid-editor-widget-multi-autocomplete\",\n    events:{\n        \"keyup .i-autocomplete\":\"keyup\",\n        \"click .suggestion-list li\":\"listItemSelected\"\n    },\n    initialize:function(){\n\n    },\n    render:function(){\n        var html=\"<label>\"+this.model.structure.label+\"</label>\";\n        var classes=\"autocomplete-wrapper form-autocomplete dynamic-value\";\n        var fetch=false;\n        if(this.model.container[this.model.structure.key]!='' ||\n            this.model.container[this.model.structure.key]===0)\n        {\n            fetch=true;\n        }\n        \n        html+=\"<div class='\"+classes+\"'><input type=text class='form-text autocomplete i-autocomplete' />\";\n\t    html+=\"<div class='loading'></div>\";\n        html+=\"<ul class='suggestion-list'></ul>\";\n        \n\n        this.$el.html(html);\n    \n        this.$el.on(\"click\", \".icon-cancel\", function(e){\n            var item = jQuery(this).parent();\n            item.empty();\n            item.remove();\n                            \n        });\n\n        if(fetch)\n        {\n            var self=this;\n            var box=this.model.box;\n            var content = this.model.container[this.model.structure.key];\n            \n            if(typeof content === typeof undefined){\n                content = [];\n            } else if( typeof content !== typeof []){\n                // legacy: before multi autoselect support\n                content = [content];\n            }\n\t        \n            jQuery.each(content, function(index, key){\n\t            self.$el.find(\".loading\").addClass(\"go\");\n                new GridAjax(\n                    \"typeAheadGetText\",\n                    [\n                        box.getGrid().getGridID(),\n                        box.getContainer().get(\"id\"),\n                        box.getSlot().get(\"id\"),\n                        box.getIndex(),\n                        self.model.parentpath+self.model.structure.key,\n                        key\n                    ],\n                    {\n                        success_fn:function(data) {\n\t                        self.$el.find(\".loading\").removeClass(\"go\");\n                            self.$el\n                                .find(\".autocomplete-wrapper\")\n                                .append(\"<div class='autocomplete-multiselect-item' data-key='\"+key+\"'>\"+\n                                    \"<span>\"+data.result+\"</span>\"+\n                                    \"<span class='icon icon-cancel'></span>\"+\n                                    \"</div>\");\n                    }\n                });\n                \n            });\n        }\n        \n        return this;\n    },\n    fetchValue:function(){\n        var result = [];\n        this.$el.find(\".autocomplete-multiselect-item\").each(function(index,element){\n            result.push(jQuery(element).data(\"key\"));\n        });\n        return result;\n    },\n\n    keyup:function(e) {\n        if(e.which==13)\n        {\n            this.selectItem(this.$el.find(\".suggestion-list li\").first());\n        }\n        else\n        {\n            var self=this;\n            var search=this.$el.find(\"input.i-autocomplete\").val();\n            \n            /**\n             * dont execute same query twice\n             */\n            if( this.$el.find(\"input.i-autocomplete\").val() == this.old_search_string ) return;\n            self.old_search_string=search;\n            \n            /**\n             * animate loading\n             */\n            this.$el.find(\".loading\").addClass(\"go\");\n    \n            /**\n             * start search timeout\n             */\n            clearTimeout(this.searching);\n            this.searching = setTimeout(function(){\n                self.doSearch(search);\n            }, 1000);\n            \n        }\n    },\n    doSearch: function(search){\n        var self = this;\n        var box=this.model.box;\n        \n        new GridAjax(\n            \"typeAheadSearch\",\n            [\n                box.getGrid().getGridID(),\n                box.getContainer().get(\"id\"),\n                box.getSlot().get(\"id\"),\n                box.getIndex(),\n                this.model.parentpath+this.model.structure.key,\n                search\n            ],\n            {\n            success_fn:function(data){\n                self.$el.find(\".suggestion-list\").empty();\n                _.each(data.result,function(elem){\n                    self.$el.find(\".suggestion-list\").append(jQuery(\"<li/>\").text(elem.value).attr(\"data-key\",elem.key));\n                });\n                self.$el.find(\".loading\").removeClass(\"go\");\n            }\n        });\n        \n    },\n    selectItem:function($item){\n        var key=$item.data(\"key\");\n        var value=$item.text();\n        if(jQuery(\".autocomplete-multiselect-item[data-key='\"+key+\"']\").length)\n                {\n                    this.$el.find(\".suggestion-list\").empty();\n                    this.$el.find(\"input.i-autocomplete\").removeAttr('value');\n                }\n        else\n        {\n            this.$el.find(\".autocomplete-wrapper\")\n            .append(\n                jQuery(\"<div></div>\")\n                    .addClass(\"autocomplete-multiselect-item\")\n                    .text(value)\n                    .attr({\n                        \"data-key\": key\n                    })\n                    .append(\n                        jQuery(\"<span></span>\")\n                            .addClass(\"icon icon-cancel\")\n                            .click(function()\n                            {\n                                var item = jQuery(this).parent();\n                                item.empty();\n                                item.remove();\n                            })\n                    )\n            )  \n        }\n        \n\n        this.$el.find(\".suggestion-list\").empty();\n        this.$el.find(\"input.i-autocomplete\").val(\"\");\n        \n    },\n    listItemSelected:function(e){\n        this.selectItem(jQuery(e.target));\n    }\n});","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\n\n\nboxEditorControls['number']=GridBackbone.View.extend({\n    className: \"grid-editor-widget grid-editor-widget-number\",\n    initialize:function(){\n\n    },\n    render:function(){\n        var text=this.model.container[this.model.structure.key];\n        if(!text)text=\"\";\n        this.$el.html(\"<label>\"+this.model.structure.label+\"</label><input type=number class='dynamic-value' value='\"+text+\"'/>\");\n        return this;\n    },\n    fetchValue:function(){\n        return jQuery(this.$el).find(\"input\").val();\n    }\n});","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\nimport _ from 'underscore'\n\nboxEditorControls['select']=GridBackbone.View.extend({\n    className: \"grid-editor-widget grid-editor-widget-select\",\n    initialize:function(){\n\n    },\n    render:function(){\n\n        const structure = this.model.structure;\n        const container = this.model.container;\n\n        console.debug(structure, container)\n\n        const isMultiple = (typeof structure.multiple !== typeof undefined && structure.multiple);\n        const values = container[structure.key];\n        const hasMultipleValues = (typeof values === typeof []);\n        const selections = structure.selections;\n\n        const multiple = (isMultiple)? \"multiple='multiple'\": \"\";\n        const size = (!isMultiple || selections.size < 8)? \"\": (selections.length < 12)? \"size='6'\": \"size='8'\";\n\n        let html=\"<label>\"+this.model.structure.label+\"</label><select \"+multiple+\" \"+size+\">\";\n        _.each(selections,function(elem){\n            var selected=\"\";\n            if(\n                (!hasMultipleValues && `${values}` === `${elem.key}`)\n                ||\n                (hasMultipleValues && _.indexOf(values, elem.key) > -1)\n            ) selected=\"selected\";\n\n            html+=\"<option \"+selected+\" value='\"+elem.key+\"'>\"+elem.text+\"</option>\";\n        });\n        html=html+\"</select>\";\n        jQuery(this.el).html(html);\n        return this;\n    },\n    fetchValue:function(){\n        return jQuery(this.$el).find(\"select\").val();\n    }\n});","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\n\nboxEditorControls['text']=GridBackbone.View.extend({\n    className: \"grid-editor-widget grid-editor-widget-text\",\n    initialize:function(){\n\n    },\n    render:function(){\n        this.$el.empty();\n\n        this.$el.append( jQuery(\"<label/>\").text(this.model.structure.label) );\n        this.$el.append(\n            jQuery(\"<input type=text class='dynamic-value'/>\")\n            .val(this.model.container[this.model.structure.key] || \"\")\n        );\n\n        return this;\n    },\n    fetchValue:function(){\n        return jQuery(this.$el).find(\"input\").val();\n    }\n});","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\n\nboxEditorControls['textarea']=GridBackbone.View.extend({\n    className: \"grid-editor-widget grid-editor-widget-textarea\",\n    initialize:function(){\n\n    },\n    render:function(){\n        var text=this.model.container[this.model.structure.key];\n        if(!text)text=\"\";\n        this.$el.html(\"<label>\"+this.model.structure.label+\"</label><textarea class='dynamic-value form-textarea'>\"+text+\"</textarea>\");\n        return this;\n    },\n    fetchValue:function(){\n        return jQuery(this.$el).find(\"textarea\").val();\n    }\n});\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\n\nboxEditorControls['wp-mediaselect']=GridBackbone.View.extend({\n    className: \"grid-editor-widget grid-editor-widget-wp-mediaselect\",\n    events:{\n        \"click .upload_image_button\": \"open_wp_media\"\n    },\n    initialize:function(){\n    },\n    render:function(){\n\n        var element = this.model.structure;\n        var c_val = this.model.container[element.key];\n        this.$el.append(\"<label>\"+element.label+\"</label>\");\n\n\t    /**\n\t     * media type filter\n\t     */\n\t    this.media_type = \"*\";\n\t    if(typeof element.media_type != typeof undefined){\n\t\t    this.media_type = element.media_type;\n\t    }\n\n\t    /**\n\t     * show preview of image\n\t     */\n\t    this.$img_wrapper = jQuery(\"<div></div>\");\n\t    this.$img_wrapper.addClass(\"wp-mediaselect-image-wrapper\");\n\t    this.$el.append(this.$img_wrapper);\n\n\t    /**\n\t     * upload button\n\t     */\n        this.$upload_btn = jQuery(\"<button class='button upload_image_button'>Media</button>\");\n        this.$el.append(this.$upload_btn);\n\n\t    /**\n\t     * hidden input with saved values\n\t     */\n        this.$input = jQuery(\"<input />\")\n                    .attr('value', JSON.stringify(c_val) )\n                    .attr('type', 'hidden')\n                    .addClass('dynamic-value form-json')\n                    .attr(\"data-path\",this.model.parentpath+element.key)\n                    .attr('data-key', element.key);\n        this.$el.append(this.$input);\n\n\t    /**\n\t     * available sizes select\n\t     */\n        this.$select_image_size = jQuery(\"<select class='image-sizes'></select>\");\n        this.$el.append(this.$select_image_size);\n\n        this.$select_image_size.on(\"change\",function(){\n            var $this = jQuery(this);\n            var json = JSON.parse($this.siblings('.dynamic-value').val());\n            json.size = $this.val();\n            $this.siblings('.dynamic-value').val(JSON.stringify(json));\n        });\n\n        this.buildImageSizeSelect();\n\n\t    this.buildImagePreview();\n\n        return this;\n    },\n    open_wp_media: function(){\n        var self = this;\n        var frame = wp.media({\n            //title : lang_values['title-wp-media'],\n            multiple : false,\n            library : { type : this.media_type},\n            button : { text : \"Insert\" }\n        });\n        frame.on('open',function() {\n            var selection = frame.state().get('selection');\n            var val = JSON.parse(self.$input.val());\n            var attachment = wp.media.attachment(val.id);\n            selection.add( attachment ? [ attachment ] : [] );\n        });\n        frame.on('close',function() {\n            var selection = frame.state().get('selection');\n            jQuery.each(frame.state().get('selection')._byId, function(id, val) {\n                var sizes = val.get(\"sizes\");\n                if(typeof sizes === \"undefined\"){\n                    sizes = {\n                        full: {\n                            height: \"\",\n                            width: \"\",\n                            url: val.get(\"url\"),\n                            orientation: \"\"\n                        }\n                    };\n                }\n                var r_json = {\n                    id: val.id,\n                    size: \"full\",\n                    sizes: sizes\n                };\n                self.$input.val(JSON.stringify(r_json));\n                self.buildImageSizeSelect();\n\t            self.buildImagePreview();\n                return false;\n            });\n        });\n        frame.open();\n        return false;\n    },\n\tget_json_from_input: function(){\n\t\tvar json = null;\n\t\tif(this.$input.val() != \"object\"){\n            try{\n                json = JSON.parse(this.$input.val());\n            } catch(e){\n                json = null;\n            }\n\t\t} else {\n\t\t\tjson =this.$input.val();\n\t\t}\n\t\treturn json;\n\t},\n\tbuildImagePreview: function(){\n\n\t\tvar json = this.get_json_from_input();\n\n        if( json == null\n\t        || json == ''\n\t\t\t|| typeof json != typeof {}\n\t\t\t|| typeof json.sizes != typeof {}\n\t\t\t|| typeof json.sizes.thumbnail != typeof {}\n\t\t\t|| typeof json.sizes.thumbnail.url != typeof \"\"\n        ) {\n            return;\n        }\n\n        var $img = jQuery(\"<img/>\");\n        $img\n            .addClass(\"wp-mediaselect-image-preview\")\n            .attr(\"src\", json.sizes.thumbnail.url)\n            .attr(\"width\", json.sizes.thumbnail.width)\n            .attr(\"height\",json.sizes.thumbnail.height);\n        this.$img_wrapper.empty();\n        this.$img_wrapper.append($img);\n\n\n\t},\n    buildImageSizeSelect: function(){\n        var self = this;\n\n        if(this.$input.val() == \"\"){\n            return;\n        }\n        var json = this.get_json_from_input();\n\n        if( json == null\n\t\t\t|| json == ''\n\t\t\t|| typeof json != typeof {}\n\t\t\t|| typeof json.sizes != typeof {} )\n        {\n            this.$select_image_size.hide();\n            return;\n        }\n\n        this.$select_image_size.empty();\n        jQuery.each(json.sizes, function(index, size) {\n             var selected = \"\";\n             if(json.size == index){\n                selected = \"selected='selected'\";\n             }\n             jQuery(\"<option \"+selected+\" >\"+index+\"</option>\").\n             attr('value', index).appendTo(self.$select_image_size);\n        });\n        if(this.$select_image_size.children().length > 0){\n            this.$select_image_size.show();\n        } else {\n            this.$select_image_size.hide();\n        }\n    },\n    fetchValue:function(){\n\t    var value = \"\";\n\t    try{\n\t\t    value = JSON.parse(this.$input.val());\n\t    } catch(e){\n\t\t    GRID.log(\"empty image box\");\n\t    }\n        return value;\n    }\n});\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\nimport _ from 'underscore'\nimport ich from 'icanhaz'\n\nwindow.GridRevisionsView = GridBackbone.View.extend({\n\ttagName: 'div',\n\tclassName: 'grid-revisions',\n\tevents:{\n\t\t'click [role=preview]':'onPreview',\n\t\t'click [role=delete]':'onDelete',\n\t\t'click [role=revert]':'onRevert'\n\t},\n\tinitialize:function(){\n\t\tthis.listenTo(this.collection, 'add',this.render);\n\t\tthis.$list = jQuery(\"<div class='grid-revisions-list'></ul>\");\n\t\tthis.$el.append(this.$list);\n\t\tthis.interval = setInterval(this.onRevisionsScroll.bind(this),1000);\n\t},\n\trender:function(){\n\t\tvar revisions=this.collection.toJSON();\n\t\t_.each(revisions,function(elem){\n\t\t\telem.isDraft=false;\n\t\t\telem.isPublished=false;\n\t\t\telem.isDeprecated=false;\n\t\t\tif(elem.state==\"published\")\n\t\t\t{\n\t\t\t\telem.isPublished=true;\n\t\t\t}\n\t\t\telse if(elem.state==\"draft\")\n\t\t\t{\n\t\t\t\telem.isDraft=true;\n\t\t\t}\n\t\t\telse if(elem.state==\"deprecated\")\n\t\t\t{\n\t\t\t\telem.isDeprecated=true;\n\t\t\t}\n\t\t\telem[\"readable_date\"] = \"--.--.----\";\n\t\t\tif(typeof elem[\"date\"] != \"undefined\" && elem[\"date\"] != \"\" && elem[\"date\"] != null){\n\t\t\t\tvar date = new Date(parseInt(elem[\"date\"])*1000);\n\t\t\t\telem[\"readable_date\"] = date.getDate()+\".\"+(date.getMonth()+1)+\".\"+date.getFullYear()+\" &bull; \"+date.getHours()+\":\"+date.getMinutes()+\":\"+date.getSeconds();\n\t\t\t}\n\t\t\tif(typeof elem[\"editor\"] === \"undefined\" || elem[\"editor\"] == \"\" || elem[\"editor\"] === null){\n\t\t\t\telem[\"editor\"] = \"unknown\";\n\t\t\t}\n\t\t});\n\t\tthis.$list.html(ich.tpl_revisions({revisions:revisions,lang_values:document.lang_values}));\n\t\tvar child_count = this.$list.children().length;\n\t\tvar list_width = child_count * this.$list.children().last().outerWidth(true);\n\t\tthis.$list.css(\"width\", list_width);\n\n\t\treturn this;\n\t},\n\tonRevisionsScroll: function(){\n\t\tif(this.collection.nextpage == -1) return;\n\t\tif(!this.$el.is(\":visible\")) return;\n\t\tvar diff = this.$list.outerWidth(true)-Math.abs(this.$list.position().left);\n\t\tdiff = diff - this.$el.outerWidth(true);\n\t\tif(diff < 300 ){\n\t\t\tthis.collection.fetch({page:this.collection.nextpage});\n\t\t}\n\t},\n\tonPreview:function(e){\n\t\tvar $revision = jQuery(e.target).parents(\".grid-revision\");\n\t\tvar location =  GRID.PREVIEW_PATTERN.replace(\"{REV}\", $revision.data(\"revision\"));\n\t\twindow.open(location,\"_blank\");\n\t\tthis.$el.parents(\".rev-wrapper\").toggle();\n\t},\n\tonDelete:function(e){\n\t\tif(!GRID.getRights().get(\"revert\") || GRID.locked()){\n            alert(\"You have no rights for that...\");\n            return false;\n        }\n\t\tGRID.revert();\n\t},\n\tonRevert:function(e){\n\t\tif(!GRID.getRights().get(\"revert\") || GRID.locked()){\n            alert(\"You have no rights for that...\");\n            return false;\n        }\n\t\tvar revision=jQuery(e.target).parents(\".grid-revision\").data(\"revision\");\n\t\tGRID.setToRevision(revision);\n\t}\n});\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\nimport ich from 'icanhaz'\n\nwindow.GridToolbarView = GridBackbone.View.extend({\n    id:\"grid-toolbar\",\n    _toolContainersView: null,\n    _toolBoxesView: null,\n    _revisionsView: null,\n    events:{\n        \"click .grid-toolbar [role=publish]\": \"publish\",\n        \"click .grid-toolbar [role=preview]\": \"preview\",\n        \"click .grid-toolbar [role=revert]\": \"revert\",\n        \"click .grid-toolbar [role=revisions]\": \"revisions\",\n        \"click .grid-toolbar [role=authors]\": \"onClickAuthors\",\n        \"click .grid-element-type[data-type=box]:not(.active)\": \"showBoxTools\",\n        \"click .grid-element-type[data-type=container]:not(.active)\": \"showContainerTools\"\n    },\n    initialize: function() {\n        this.listenTo(this.model, \"change:isDraft\", this.setState);\n        this.listenTo(GRID.authors, \"add\", this.onUpdateAuthors);\n        this.listenTo(GRID.authors, \"remove\", this.onUpdateAuthors);\n        this.listenTo(GRID.authors, \"reset\", this.onUpdateAuthors);\n        this.setState();\n    },\n    render: function() {\n\n        this.$el.html(ich.tpl_toolbar(this.model.toJSON()));\n\n        this.$toolbar = this.$el.find(\".grid-toolbar\");\n\n        this.$tool_elements = this.$el.find(\".grid-tool-elements\");\n        this.$tool_element_content = this.$el.find(\".grid-element-type-content\");\n        this.$tab_container = this.$el.find(\".grid-element-type[data-type=container]\");\n        this.$tab_box = this.$el.find(\".grid-element-type[data-type=box]\");\n        this.$element_trash = this.$el.find(\".grid-element-trash\");\n        this.$authors_count = this.$el.find(\".indicator-authors-count\");\n\n        if(GRID.mode == \"grid\"){\n           this._revisionsView = new GridRevisionsView({collection:GRID.revisions});\n           this.$el.append(this._revisionsView.$el.hide());\n\n        }\n        var type = \"container\";\n        if(GRID.mode == \"container\" || !GRID.getRights().get(\"create-container\")){\n            this.$tab_container.remove();\n            type = \"box\";\n        }\n        if(!GRID.getRights().get(\"create-box\")){\n            this.$tab_box.remove();\n            type = false;\n        }\n\n        if(type == \"container\" ){\n            this.showContainerTools();\n        } else if(type == \"box\"){\n            this.showBoxTools();\n        }\n        this.onUpdateAuthors();\n\n        return this;\n    },\n    publish: function(){\n        if(!GRID.getRights().get(\"publish\") || GRID.locked()){\n            alert(\"You have no rights for that...\");\n            return false;\n        }\n        this.model.save();\n    },\n    setState: function(){\n        var isDraft = this.model.get(\"isDraft\");\n        this.$el.find(\".grid-toolbar\").attr(\"data-draft\", isDraft);\n        var $button = this.$el.find(\".grid-tool-state span\");\n        if(isDraft){\n            $button.html(\"Draft\");\n        } else {\n            $button.html(\"Published\");\n        }\n    },\n    preview: function(){\n        window.open(this.model.get(\"PREVIEW_URL\"),\"grid_preview\");\n    },\n    revert: function(){\n        if(!GRID.getRights().get(\"revert\") || GRID.locked() ){\n            alert(\"You have no rights for that...\");\n            return false;\n        }\n        GRID.revert();\n    },\n    revisions: function(){\n        this._revisionsView.$el.slideToggle();\n        jQuery(\"html, body\").animate({scrollTop: 0},300);\n    },\n    toggleBoxes: function(){\n        GRID.log(\"BTN toggleBoxes\");\n    },\n    // container tools\n    getToolContainersView: function(){\n        if(!(this._toolContainersView instanceof GridToolContainersView) ){\n            this._toolContainersView = new GridToolContainersView({collection:GRID.getContainerTypes()});\n        }\n        return this._toolContainersView;\n    },\n    containerToolsVisible: function(){\n        return (this.$el.find(this.getToolContainersView().el).length == 1);\n    },\n    toggleContainerTools: function(){\n        this.hideBoxTools();\n        if(!this.containerToolsVisible()){\n            this.showContainerTools();\n        } else {\n            this.hideContainerTools();\n        }\n    },\n    showContainerTools: function(){\n        this.hideBoxTools();\n        if(!this.containerToolsVisible()){\n            this.$el.find(this.getToolContainersView().el).remove();\n            this.$el.find('.grid-element-type-content').append(this.getToolContainersView().render().el);\n            this.$tab_container.addClass('active');\n        }\n    },\n    hideContainerTools: function(){\n        if( this.containerToolsVisible() ){\n            this.$el.find(this.getToolContainersView().el).remove();\n            this.$tab_container.removeClass('active');\n        }\n    },\n    // boxes tools\n    getToolBoxesView: function(){\n        if(!(this._toolBoxesView instanceof GridToolBoxTypesView) ){\n            this._toolBoxesView = new GridToolBoxTypesView({collection:GRID.getBoxTypes()});\n        }\n        return this._toolBoxesView;\n    },\n    boxToolsVisible: function(){\n        return (this.$el.find(this.getToolBoxesView().el).length == 1);\n    },\n    toggleBoxTools: function(){\n        this.hideContainerTools();\n        if(!this.boxToolsVisible()){\n            this.showBoxTools();\n        } else {\n            this.hideBoxTools();\n        }\n    },\n    showBoxTools: function(){\n        this.hideContainerTools();\n        if(!this.boxToolsVisible()){\n            this.$el.find('.grid-element-type-content').append(this.getToolBoxesView().render().el);\n            this.$tab_box.addClass('active');\n        }\n    },\n    hideBoxTools: function(){\n        if(this.boxToolsVisible()) {\n            this.$tab_box.removeClass('active');\n            this.$el.find(this.getToolBoxesView().el).remove();\n        }\n    },\n    // resize Container and Box toolbar\n    onResize: function(){\n        var window_height = jQuery(window).height();\n        var elements_top_offset = this.$el.offset().top;\n        var tab_height = this.$tab_container.outerHeight();\n        var height = window_height-elements_top_offset-tab_height;\n        this.$tool_element_content.css(\"height\", height);\n        this.trigger('toolbar_resize',height);\n    },\n    /**\n     * authors button\n     */\n    onUpdateAuthors: function(){\n        if(GRID.authors.getCount() < 2){\n            this.$authors_count.parents(\"li\").hide();\n        } else {\n            this.$authors_count.parents(\"li\").show();\n            this.$authors_count.text(GRID.authors.getCount());\n        }\n        this.$toolbar.removeClass(\"async-request-lock\");\n        var self = this;\n        GRID.authors.each(function(author){\n            if(author.get(\"request_lock\")){\n                self.$toolbar.addClass(\"async-request-lock\");\n            }\n        });\n    },\n    onClickAuthors: function(e){\n        GRID.toggleAuthors();\n        this.$toolbar.removeClass(\"async-request-lock\");\n    },\n    /**\n     * when user requests lock event\n     */\n    async_request_lock: function(){\n        this.$toolbar.addClass(\"async-request-lock\");\n    }\n});\n\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\nimport GridBackbone from 'backbone'\nimport _ from 'underscore'\nimport ich from 'icanhaz'\n\nwindow.GridToolContainersView = GridBackbone.View.extend({\n    className: \"grid-tool grid-element-container\",\n    events:{\n        \"click .grid-container-type\": \"renderContainerType\"\n    },\n    render: function(){\n        this.$el.empty();\n        this.$el.append(ich.tpl_toolContainers({}));\n        this.delegateEvents();\n        // if you want to show containers on default uncomment next line\n        //this.$el.find(\".grid-container-type\").first().trigger(\"click\");\n        return this;\n    },\n    renderContainerType: function(event){\n        var $type = jQuery(event.currentTarget);\n        $type.toggleClass('active');\n        var role = $type.attr(\"role\");\n        var list = \"\";\n        if(role === \"reusable\"){\n            // reusables\n            var reusables = this.getReusable();\n            list = this.getRenderedContainerList(reusables);\n        } else {\n            // containers\n            var containers = this.getContainers(role);\n            list = this.getRenderedContainerList(containers);\n        }\n        // DOM manipulation\n        if($type.hasClass('active')){\n            // add elements\n            $type.next(\"dd\").append(list);\n        } else {\n            // remove elements\n            $type.next(\"dd\").empty();\n        }\n        this.initializesDraggable();\n        return this;\n    },\n    getRenderedContainerList: function(json){\n        return ich.tpl_toolContainersContainer(json);\n    },\n    getContainers: function(type){\n        var scope_type = \"c-\";\n        var collection = this.collection;\n        var containers = { containers: this.collection.toJSON() };\n        _.each(containers.containers, function(value, key, list){\n\n            if( value.type.indexOf(scope_type) !== 0 ){\n                delete containers.containers[key];\n            } else {\n                value.slots = [];\n                var slots_dimension = collection.at(key).getDimension().split(\"-\");\n                for( var i = 0 ;i < value.numslots; i++){\n                    value.slots.push({dimension: slots_dimension[i]});\n                }\n            }\n        });\n        return containers;\n    },\n    getReusable: function(){\n        return { containers: GRID.getReusableContainers().toJSON() };\n    },\n    initializesDraggable: function(){\n        jQuery(this.el).find(\".grid-new-element\").draggable({\n            helper: function(event, element){\n                return jQuery(\"<div class='dragger-helper'></div>\");\n            },\n            cursorAt: { left: 30, top:30 },\n            zIndex: 99,\n            appendTo: GRID.getView().$el,\n            scroll: true,\n            start: function(event, ui){\n                GRID.log(\"Start dragging\");\n                var $ = jQuery;\n                var $grid = GRID.getView().$el;\n\n                var $containers = $grid.find('.grid-container');\n\n                var $dropArea = jQuery(document.createElement(\"div\"))\n                                .addClass(\"container-drop-area-wrapper\")\n                                .attr(\"data-type\",\"container-drop-area-wrapper\");\n                $grid.find(\".containers-wrapper\").prepend($dropArea.clone());\n                $containers.after( $dropArea.clone() );\n                $grid.find(\".container-drop-area-wrapper\").append(jQuery(document.createElement(\"div\")).addClass(\"container-drop-area\"));\n                $grid.find(\".container-drop-area\").droppable({\n                    accept: \".grid-new-element\",\n                    hoverClass: \"hover\",\n                    drop: function( event, ui ) {\n\n                        var $draggable = jQuery(ui.draggable);\n                        var containerReusable = $draggable.data(\"reusable\");\n                        var containerType =  $draggable.data(\"type\");\n                        var $dropwrapper = jQuery(this).parent();\n\n                        $dropwrapper.removeClass('container-drop-area-wrapper').addClass('new-container-target');\n                        GRID.getView().$el.find('.container-drop-area-wrapper').remove();\n                        var new_index = $dropwrapper.index();\n\n                        if(containerReusable == true || containerReusable == \"true\"){\n                            var container = GRID.getReusableContainers().at($draggable.index());\n                            GRID.getModel().addReuseContainer(container, new_index);\n                            GRID.log([\"REUSED\", container]);\n                            return;\n                        }\n\n                        GRID.getModel().createContainer(containerType, new_index);\n                    }\n                });\n            },\n            stop: function( event, ui ){\n                GRID.getView().$el.find('.container-drop-area-wrapper').remove();\n            }\n        });\n        return this;\n    }\n});\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\nimport ich from 'icanhaz'\n\nwindow.GridToolBoxTypesView = GridBackbone.View.extend({\n    className: \"grid-tool grid-element-box\",\n    events:{\n    \t\"click .grid-box-type\": \"toggleBoxType\"\n    },\n    render: function(){\n    \tvar self = this;\n        this.$el.empty();\n        var json = {boxtypes:[]};\n        this.collection.each(function(boxtype, index){\n            var boxtype_json = boxtype.toJSON();\n            boxtype_json.index = index;\n            json.boxtypes.push(boxtype_json);\n        });\n        this.$el.append(ich.tpl_toolBoxes(json));\n        this.delegateEvents();\n        return this;\n    },\n    toggleBoxType: function(event){\n        var $this = jQuery(event.currentTarget);\n        $this.toggleClass('active');\n        if($this.hasClass('active')){\n            var blueprints_view = new GridToolBoxBlueprintsView({model:this.collection.at($this.data(\"index\"))});\n            $this.next(\"dd\").append(blueprints_view.render().el);\n        } else {\n            $this.next(\"dd\").empty();\n        }\n    }\n});\n\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\nimport ich from 'icanhaz'\n\nwindow.GridToolBoxBlueprintsView = GridBackbone.View.extend({\n    className: \"grid-box-blueprints\",\n    timer:null,\n    blueprints: null,\n    events:{\n        \"keyup .grid-box-blueprints-search input\": \"searchString\"\n    },\n    render: function(){\n        this.blueprints = this.model.getBlueprints();\n        this.box_type = this.model.get(\"type\");\n        this.listenTo(this.blueprints,\"add\", this.addBlueprintBox);\n        this.model.searchBoxes();\n        this.delegateEvents();\n        if(this.model.get(\"criteria\").length > 0){\n            var $_search = jQuery('<div class=\"grid-box-blueprints-search\"><input placeholder=\"Which do you need?\" type=\"text\" value=\"\" /></div>');\n            this.$el.append($_search);\n            this.searchString({target:$_search.find(\"input\")});\n        }\n        this.$blueprintslist = jQuery(\"<div class='grid-box-blueprints-list'></div>\");\n        this.$el.append(this.$blueprintslist);\n        return this;\n    },\n    addBlueprintBox: function(blueprint,collection,event){\n        var json = blueprint.toJSON();\n        json.cid = blueprint.cid;\n        json.reusable = this.box_type == \"reference\";\n        this.$blueprintslist.append(ich.tpl_toolBoxesBlueprint(json));\n        this.initializesDraggable();\n        return this;\n    },\n    searchString:function(event){\n\n        var input=jQuery(event.target).val();\n        var self=this;\n        if(this.timer)\n            clearTimeout(this.timer);\n        this.timer=setTimeout(function(){\n            self.stopListening(self.blueprints);\n            self.blueprints=self.model.search(input,self.model.criteria);\n            self.$blueprintslist.empty();\n            self.listenTo(self.blueprints, \"add\", self.addBlueprintBox);\n        },300);\n    },\n    initializesDraggable: function(){\n        var self = this;\n        jQuery(this.el).find(\".grid-box-dragger\").draggable({\n            helper: function(event, element){\n                return jQuery(\"<div class='dragger-helper'></div>\");\n            },\n            cursorAt: { left: 30, top:30 },\n            zIndex: 199,\n            appendTo: GRID.getView().$el,\n            addClass: true,\n            //connectToSortable: GRID_SORTABLE,\n            start: function(event, ui){\n\n                var $ = jQuery;\n                var $slots = jQuery(GRID.getView().el).find(\".grid-container-type-c[data-reused=false] .grid-slot .grid-boxes-wrapper\"+\n                                                        \", .grid-container-type-sc .grid-slot .grid-boxes-wrapper\");\n                GRID.log($slots);\n                // drop place template\n                // TODO: if boxes toggled hidden\n                // var $toggle_btn = $toolbar.find(\"[role=hide_boxes]\");\n\n                $slots.children(\".grid-box\").before(jQuery( document.createElement('div'))\n                                .addClass(\"grid-box-drop-area-wrapper\"));\n                $slots.append(jQuery( document.createElement('div'))\n                                .addClass(\"grid-box-drop-area-wrapper\"));\n                $slots.find(\".grid-box-drop-area-wrapper\").append(jQuery( document.createElement('div'))\n                                .addClass(\"grid-box-drop-area\"));\n\n                $slots.find(\".grid-box-drop-area\").droppable({\n                    accept: \".grid-box-dragger\",\n                    hoverClass: \"hover\",\n                    drop: function( event, ui ) {\n                        var $this_box = jQuery(ui.draggable);\n                        var $this_drop = jQuery(this);\n                        var $this_slot = $this_drop.parents(\".grid-slot\");\n                        var $this_container = $this_slot.parents(\".grid-container\");\n                        var slot = GRID.getModel().getContainers().get($this_container.data(\"id\")).getSlots().get($this_slot.data(\"id\"));\n                        var blueprint = self.blueprints.get($this_box.data(\"cid\"));\n\n                        var $new_box = $this_drop.parent().addClass('grid-new-box-place').removeClass('grid-box-drop-area-wrapper');\n                        GRID.getView().$el.find(\".grid-box-drop-area-wrapper\").remove();\n\n                        var box = slot.createBox(blueprint, $new_box.index() );\n                    }\n                });\n\n            },\n            stop: function( event, ui ){\n                GRID.getView().$el.find(\".grid-box-drop-area-wrapper\").remove();\n            }\n        });\n        return this;\n    }\n});\n\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\nimport ich from 'icanhaz'\n\nwindow.GridSlotStyleChangerView = GridBackbone.View.extend({\n    className:\"grid-slot-style-changer style-changer\",\n    tagName: \"div\",\n    events:{\n        \"click li\": \"changeStyle\"\n    },\n    initialize: function() {\n        this.listenTo(GRID.getSlotStyles(),\"add\",this.render);\n    },\n    render: function() {\n        var styles = [];\n        var activestyle = \"Default Style\";\n        var self = this;\n        GRID.getSlotStyles().each( function(style){\n            if(style.get(\"slug\") == self.model.get(\"style\")) activestyle = style.get(\"title\");\n            styles.push(style.toJSON());\n        });\n        var container=this.model.getContainer();\n        this.$el.html(ich.tpl_slotstylechanger({styles: styles, activestyle: activestyle,reused:container.get(\"reused\")}));\n        return this;\n    },\n    changeStyle: function(event){\n        this.model.set(\"style\",jQuery(event.target).attr(\"data-style\"));\n        this.model.save();\n    }\n});\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\nimport GridBackbone from 'backbone'\nimport ich from 'icanhaz'\n\nwindow.Authors = GridBackbone.View.extend({\n    className: \"grid-authors\",\n    initialize: function(){\n        this.listenTo(GRID.authors, \"add\", this.onAddAuthor);\n        this.listenTo(GRID.authors, \"remove\", this.render);\n        this.listenTo(GRID.authors, \"reset\", this.render);\n        this.listenTo(GRID.authors, \"change\", this.render);\n    },\n    render: function(){\n        this.$el.empty();\n        this.$el.append(ich.tpl_authors());\n        this.$list = this.$el.find(\".authors-list\");\n        var self = this;\n        GRID.authors.each(function(author){\n            self.onAddAuthor(author);\n        });\n        return this;\n    },\n    onResize: function(height){\n        this.$list.css(\"height\", height+\"px\");\n\n    },\n    onAddAuthor: function(author){\n        var author = new Author({model: author});\n        this.$list.append(author.render().$el);\n    }\n});\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\nimport ich from 'icanhaz'\n\nwindow.Author = GridBackbone.View.extend({\n    tagName: \"li\",\n    className: \"grid-author\",\n    events: {\n        \"click .author-lock-sender\": \"onClickSendLock\",\n        \"click .author-lock-requester\": \"onClickRequestLock\"\n    },\n    initialize: function(){\n        this.listenTo(this.model, \"change:request_lock\", this.onRequestLock);\n    },\n    render: function(){\n        var json = this.model.toJSON();\n        json.have_lock = GRID.authors.haveLock();\n        this.$el.empty();\n        this.$el.append(ich.tpl_author(json));\n\t    this.onRequestLock();\n        return this;\n    },\n    onClickSendLock: function(){\n        GRID.async.locking_handover(this.model.get(\"id\"));\n    },\n    onClickRequestLock: function(){\n        GRID.async.locking_request_lock();\n    },\n\tonRequestLock: function(){\n\t\tif(this.model.get(\"request_lock\")){\n\t\t\tthis.$el.addClass('async-request-lock');\n\t\t} else {\n\t\t\tthis.$el.removeClass('async-request-lock');\n\t\t}\n    }\n\n});\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\nimport _ from 'underscore'\n\n// ----------------------\n// type models\n// ---------------------\nwindow.ContainerType = GridBackbone.Model.extend({\n    getDimension:function(){\n        var dimension = \"\";\n        var i = 0;\n        _.each( this.get(\"type\").split(\"-\"), function(value, key, list){\n            if(value == 0 || i++ == 0) return;\n            dimension+= \"-\"+value;\n        });\n        return dimension.substring(1);\n    },\n    getType: function(){\n        return this.get(\"type\").split(\"-\")[0];\n    }\n});\nwindow.BoxType = GridBackbone.Model.extend({\n    defaults: function(){\n        return {\n            type: null,\n            criteria: null,\n            blueprints: null\n        }\n    },\n    getBlueprints: function(){\n        if(!(this.blueprints instanceof GridBoxBlueprints)){\n            this.blueprints = new GridBoxBlueprints();\n        }\n        return this.blueprints;\n    },\n    searchBoxes: function(){\n        GRID.log([\"BoxType->searchBoxes\", this]);\n        var blueprints = this.getBlueprints();\n        blueprints.fetch({\n            type:this.get(\"type\"),\n            criteria: this.get(\"criteria\"),\n            searchString: \"\"\n        });\n        this.set(\"blueprints\", blueprints);\n        return blueprints;\n    },\n    search:function(query,criteria){\n        var blueprints = new GridBoxBlueprints();\n        blueprints.fetch({\n            type:this.get(\"type\"),\n            criteria: criteria,\n            searchString:query\n        });\n        return blueprints;\n    }\n});\nwindow.StyleType = GridBackbone.Model.extend({});\n\n// --------------------------\n// Revisions model\n//  -----------------------\n\nwindow.Revision = GridBackbone.Model.extend({\n    initialize: function(spec){\n        this.set(\"id\",spec.revision);\n    }\n});\n\n// ----------------------------------------\n// Main model.\n// this is the wrapper of the grid elements\n//\n// -----------------------------------------\nwindow.Grid = GridBackbone.Model.extend({\n\tdefaults: function(){\n        return {\n            id: -1,\n            // enable or disable debugging output\n            DEBUGGING: false,\n            // the server URL\n            SERVER: \"/grid_ajax_endpoint\",\n            // Pattern for preview URL\n            PREVIEW_URL: window.location.pathname+'/preview',\n            // 0 == false == unknown, 1 published, 2 draft\n            isDraft: true,\n        }\n    },\n\tgetGridID: function(){\n\t\treturn GRID.ID;\n\t},\n\t// invokes when the model is created\n    initialize: function (spec) {\n    \t// Grid object needs an ID\n        if (!spec || !spec.id ) {\n            throw \"InvalidConstructArgs\";\n        }\n        var self = this;\n       \tthis.fetch({\n            success: spec.fn_success\n        });\n    },\n    createContainer: function(type, index, reused){\n        var self = this;\n        var container = new Container({type:type, parent:this});\n        if(typeof reused === \"undefined\"){\n            container.set(\"reused\", false);\n        } else {\n            container.set(\"reused\", reused);\n        }\n        container.save(null,{\n            index:index,\n            action: \"create\",\n            // resoinse is always undefined, because we are not using backbones ajax call\n            success: function(container, response, options){\n                GRID.log(\"CreateContainerSuccess::\");\n                GRID.log([container, response, options]);\n                self.addContainer(container, index);\n            },\n            error: function(container, response, options){\n                GRID.log(\"CreateContainerror::\");\n                GRID.log([container, response, options]);\n            }\n        });\n    },\n    addContainer: function(element, index){\n    \tif(!(element instanceof Container)) throw \"Try to add an not Container Object: Grid.addContainer\";\n    \tvar args = {};\n    \tif( typeof index === \"number\" ) args.at = index;\n    \telement.set(\"parent\", this);\n    \tthis.getContainers().add(element, args);\n    },\n    addReuseContainer: function(containertype, index){\n        var self = this;\n        GridRequest.grid.addReuseContainer(containertype, index, function(data){\n            self.addContainer(new Container(data.result), index);\n        });\n        return this;\n    },\n    getContainers: function(){\n    \tif(!this.get(\"collection_containers\") ){\n    \t\tthis.set(\"collection_containers\", new Containers());\n    \t}\n    \treturn this.get(\"collection_containers\");\n    },\n    getContainer: function(index){\n        return this.getContainers().at(index);\n    },\n    moveBox: function(box, new_slot, new_box_index){\n        GridRequest.grid.moveBox(box, new_slot, new_box_index, function(data){\n            var clone = box.clone();\n            box.getSlot().getBoxes().remove(box);\n            new_slot.addBox(clone, new_box_index);\n        });\n    },\n\tduplicateBox: function(box, toIndex){\n\t\tconst clone = box.clone();\n\t\tGridRequest.box.create(clone, {\n\t\t\tindex: toIndex,\n\t\t\tsuccess: function(){\n\t\t\t\tclone.setDuplicated();\n\t\t\t\tbox.getSlot().addBox(clone, toIndex);\n\t\t\t}\n\t\t});\n\t},\n    checkIsDraft: function(){\n        GridRequest.grid.read(this, {action: \"checkdraft\"});\n    },\n    // handles all Server communication\n    sync: function(method, model, options){\n        if(typeof GridRequest.grid[method] == \"function\"){\n            GridRequest.grid[method](model, options);\n        } else {\n            GRID.log(\"grid sync metod not defined \"+method);\n        }\n\n    }\n});\n\n//---------------------\n// element models\n// -------------------\nwindow.Container =  ContainerType.extend({\n    getGrid: function(){\n        return this.get(\"parent\");\n    },\n\tgetGridID: function(){\n\t\treturn this.get(\"parent\").getGridID();\n\t},\n\tinitialize: function(spec){\n\t\tvar self = this;\n        this.setSlots(spec.slots);\n        this.set(\"left_space\", this.getSpace(\"left\"));\n        this.set(\"right_space\", this.getSpace(\"right\"));\n\t},\n    getSpace: function(side){\n        if(typeof side === \"undefined\") side = \"left\";\n        var space = this.get(\"space_to_\"+side);\n        if(space == \"\" || typeof space === \"undefined\" || space === null) return 0;\n        var space_arr =  space.split(\"d\");\n        return (space_arr[0]/space_arr[1]);\n    },\n    getIndex: function(){\n        return this.get(\"parent\").getContainers().indexOf(this);\n    },\n    setSlots: function(slots_array){\n        this.getSlots().reset();\n        var self = this;\n        var slots_dimension = this.getDimension().split(\"-\");\n        var i=0;\n        _.each(slots_array, function(slot) {\n            slot.dimension = slots_dimension[i++];\n            self.addSlot(new Slot(slot));\n        });\n    },\n\taddSlot: function(element, index){\n    \tif(!(element instanceof Slot)) throw \"Try to add an not Slot Object: Container.addSlot\";\n    \tvar args = {};\n    \tif( typeof index === \"number\" ) args.at = index;\n    \telement.set(\"parent\", this);\n    \tthis.getSlots().add(element, args);\n    },\n    getSlots: function(){\n    \tif(!this.get(\"collection_slots\") ){\n    \t\tthis.set(\"collection_slots\", new Slots());\n    \t}\n    \treturn this.get(\"collection_slots\");\n    },\n    getSlot: function(index){\n        return this.getSlots().at(index);\n    },\n    // handles all Server communication\n    sync: function(method, model, options){\n    \tGridRequest.container[method](model, options);\n    }\n});\nwindow.Slot = GridBackbone.Model.extend({\n    getGrid: function(){\n        return this.get(\"parent\").getGrid();\n    },\n\tgetGridID: function(){\n\t\treturn this.get(\"parent\").getGridID();\n\t},\n    getContainer: function(){\n        return this.get(\"parent\");\n    },\n\tinitialize: function(spec){\n\t\tvar self = this;\n\t\tGRID.log(\"init Slot\");\n\t\tGRID.log(spec);\n\t\t_.each(spec.boxes, function(box){\n\t\t\tGRID.log(\"add Box\");\n\t\t\tself.addBox(new Box(box));\n\t\t});\n\t},\n    createBox: function(blueprint, index){\n        var self = this;\n        var json = blueprint.toJSON();\n        json.parent = this;\n        var box = new Box(json);\n        box.save(null,{\n            index:index,\n            // response is always undefined, because we are not using backbones ajax call\n            success: function(box, response, options){\n                GRID.log(\"CreateboxSuccess::\");\n                GRID.log([box, response, options]);\n                self.addBox(box, index);\n            },\n            error: function(box, response, options){\n                GRID.log(\"Createboxrror::\");\n                GRID.log([box, response, options]);\n            }\n        });\n    },\n\taddBox: function(element, index){\n\t\tif(!(element instanceof Box)) throw \"Try to add an not Box Object: Slot.addBox\";\n    \tvar args = {};\n    \tif( typeof index === \"number\" ) args.at = index;\n    \telement.set(\"parent\", this);\n    \tthis.getBoxes().add(element, args);\n    },\n    getBoxes: function(){\n    \tif(!this.get(\"collection_boxes\") ){\n    \t\tthis.set(\"collection_boxes\", new Boxes());\n    \t}\n    \treturn this.get(\"collection_boxes\");\n    },\n    getBox: function(index){\n        return this.getBoxes().at(index);\n    },\n    sync: function(method, model, options){\n    \tGridRequest.slot[method](model, options);\n    }\n});\nwindow.Box = GridBackbone.Model.extend({\n\tunsetDuplicated: function(){\n\t\tthis.unset(\"isDuplicated\");\n\t},\n\tsetDuplicated: function(){\n\t\tthis.set(\"isDuplicated\", true);\n\t},\n\tisDuplicated: function(){\n\t\treturn this.get(\"isDuplicated\") === true;\n\t},\n    getGrid: function(){\n        return this.get(\"parent\").getGrid();\n    },\n\tgetGridID: function(){\n\t\treturn this.get(\"parent\").getGridID();\n\t},\n    getSlot: function(){\n        return this.get(\"parent\");\n    },\n    getContainer: function(){\n        return this.getSlot().getContainer();\n    },\n\tinitialize: function(spec){\n\n\t},\n    getIndex: function(){\n        return this.get(\"parent\").getBoxes().indexOf(this);\n    },\n\tduplicate: function(){\n    \tthis.getGrid().duplicateBox(this, this.getIndex()+1);\n\t},\n    // handles all Server communication\n    sync: function(method, model, options){\n    \tGridRequest.box[method](model, options);\n    }\n});\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\n\nwindow.GridBoxBlueprint = GridBackbone.Model.extend({\n    initialize: function(spec){\n    \tif(!spec || !spec.type || spec.type == \"\") throw \"InvalidConstructArgs GridBoxBlueprint: needs type\";\n    \tif(!spec.content || typeof spec.content != \"object\" ) throw \"InvalidConstructArgs GridBoxBlueprint: needs content\";\n    }\n});","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\nimport _ from 'underscore'\n\nwindow.GridRights = GridBackbone.Model.extend({\n    initialize: function(spec){\n\n    },\n    setNoRights: function(){\n    \tvar self = this;\n    \t_.each(this.attributes, function(value, key, list){\n    \t\tself.set(key, false);\n    \t});\n    },\n    logRights: function(){\n    \t_.each(this.attributes, function(value, key, list){\n    \t\tGRID.log(key+\" \"+value);    \t\n    \t});\n    },\n\tsync: function(method, model, options){\n\t\tGridRequest.rights(model, options);\n\t}\n});","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\n\nwindow.GridAuthor = GridBackbone.Model.extend({\n\tdefaults: function(){\n\t\treturn {\n\t\t\thas_lock: false,\n\t\t\trequest_lock: false\n\t\t}\n\t},\n    initialize: function(spec){\n    \tif( !spec ) throw \"No parameters in constructor of author\";\n    \tif( !spec.id ) throw \"InvalidConstructArgs GridAuthor needs id\";\n    \tif(!spec.name ) throw \"InvalidConstructArgs GridAuthor needs name\";\n    }\n});\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\n\nwindow.Revisions = GridBackbone.Collection.extend({\n\tmodel: Revision,\n\tinitialize: function(spec){\n\t\tif(!spec || !spec.grid ||!(spec.grid instanceof Grid )){\n\t\t\tthrow \"InvalidConstructArgs Revisions need a Grid\"\n\t\t}\n\t\tthis.grid = spec.grid;\n\t},\n\tgetGridID: function(){\n\t\tGRID.log(this);\n\t\treturn this.grid.getGridID();\n\t},\n\tsync: function(method, collection, options){\n\t\tGridRequest.revisions(collection, options);\n\t}\n});\n\n// type collections\nwindow.ContainerTypes = GridBackbone.Collection.extend({\n\tmodel: ContainerType,\n\tsync: function(method, collection, options){\n\t\tGridRequest.containertypes(collection, options);\n\t}\n});\nwindow.ReusableContainers = GridBackbone.Collection.extend({\n\tmodel: ContainerType,\n\tsync: function(method, collection, options){\n\t\tGridRequest.reusablecontainers(collection, options);\n\t}\n});\nwindow.BoxTypes = GridBackbone.Collection.extend({\n\tmodel: BoxType,\n\tsync: function(method, collection, options){\n\t\tGridRequest.boxtypes(collection, options);\n\t}\n});\nwindow.Styles = GridBackbone.Collection.extend({\n\tmodel: StyleType,\n\tinitialize: function(spec){\n\t\tif (!spec || !spec.type ) {\n            throw \"InvalidConstructArgs Styles\";\n        }\n        this.type = spec.type;\n\t},\n\tsync: function(method, collection, options){\n\t\tGridRequest.styles(collection, options);\n\t}\n});\n\n// element collections\nwindow.Containers = GridBackbone.Collection.extend({\n\tmodel: Container,\n\tmove: function(container, to_index){\n\t\tvar self = this;\n\t\tGridRequest.container.update(container,{\n\t\t\taction: \"move\",\n\t\t\tindex: to_index,\n\t\t\tsuccess: function(data){\n\t\t\t\tself.remove(container);\n\t\t\t\tself.add(container, {at:to_index});\n\t\t\t}\n\t\t});\n\t\treturn this;\n\t}\n});\nwindow.Slots = GridBackbone.Collection.extend({\n\tmodel: Slot\n});\nwindow.Boxes = GridBackbone.Collection.extend({\n\tmodel: Box\n});\n\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\n\nwindow.GridBoxBlueprints = GridBackbone.Collection.extend({\n\tmodel: GridBoxBlueprint,\n\tinitialize: function(spec){\n\t},\n\tsync: function(method, collection, options){\n\t\tGridRequest.boxblueprints(collection, options);\n\t}\n});","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport GridBackbone from 'backbone'\nimport _ from 'underscore'\n\nwindow.GridAuthors = GridBackbone.Collection.extend({\n    model: GridAuthor,\n    async_authors_list: function(data){\n    \tvar self = this;\n    \t_.each(data, function(item){\n    \t\tself.add({id: item.identifier, name: item.author});\n    \t});\n    },\n    resetLock: function(){\n        this.each(function(author){\n            author.set(\"has_lock\", false);\n        });\n    },\n    setLock: function(id){\n        this.get(id).set(\"has_lock\", true);\n    },\n    haveLock: function(){\n        return (typeof this.findWhere({has_lock:true}) === \"undefined\");\n    },\n    getCount: function(){\n        // +1 is us self\n        return this.length+1;\n    },\n    async_authors_joined: function(data){\n        this.add({id:data.identifier, name: data.author});\n    },\n    async_authors_left: function(data){\n        this.remove(this.get(data));\n    },\n    async_disconnect: function(){\n        this.reset();\n        this.resetLock();\n    }\n});\n","/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport _ from 'underscore'\n\n// ------------------------------------\n// ajax Object\n// -----------------------------------\nwindow.GridAjax = function GridAjax(method, params_array, settings){\n\t// two required variables\n\tvar json={};\n\tjson[\"method\"] = method;\n\tjson[\"params\"] = params_array;\n\tif(typeof settings != \"object\"){ settings = {}; }\n\tif(typeof settings.checkIsDraft === \"undefined\"){ settings.checkIsDraft = true; }\n\t// default settings\n\tthis.settings = {\n\t\turl: GRID.SERVER,\n\t\tasync: true,\n\t\ttype: 'POST',\n\t\tdataType: 'json',\n\t\tcontentType: \"application/json; charset=utf-8\",\n\t\terror: function(jqXHR, textStatus, error){\n\t\t\tGRID.finishLoading();\n   // \t\t\tGRID.log(\"!--- error Method: \"+method);\n\t\t\t// GRID.log(jqXHR);\n\t\t\t// GRID.log(textStatus);\n\t\t\t// GRID.log(error);\n\t\t\t// GRID.log(json);\n\t\t\t// GRID.log(\"--------!\");\n\t\t\tif(GRID.DEBUGGING)\n\t\t\t{\n\t\t\t\tGRID.log(jqXHR.responseText);\n\t\t\t\tjQuery(\".error-messages\").html(\"Method: \"+method+\"<br>\"+\n\t\t\t\t\t\t\"Status: (\"+jqXHR.status+\") -> \"+textStatus+\"<br>\"+\n\t\t\t\t\t\t\"ResponseText: <br><pre>\"+jqXHR.responseText+\"</pre>\").show();\n\t\t\t}\n\t\t\tif(typeof settings.error_fn == 'function' ){\n\t\t\t\tsettings.error_fn(jqXHR, textStatus, error);\n\t\t\t}\n   \t\t},\n   \t\tbeforeSend: function(jqXHR, settings){\n   \t\t\tGRID.startLoading();\n   \t\t},\n   \t\tsuccess: function(data, textStatus, jqXHR){\n   \t\t\tGRID.finishLoading();\n   // \t\t\tGRID.log(\"!--- success Method: \"+method);\n\t\t\t// GRID.log(data);\n\t\t\t// GRID.log(textStatus);\n\t\t\t// GRID.log(jqXHR);\n\t\t\t// GRID.log(json);\n\t\t\t// GRID.log(\"---------!\");\n\t\t\tGRID.log([\"AJAX Success\",settings]);\n\t\t\tif(typeof settings.success_fn == 'function' ){\n\t\t\t\tsettings.success_fn(data, textStatus, jqXHR);\n\t\t\t}\n\t\t\tif(settings.checkIsDraft == true){\n\t\t\t\tGRID.getModel().checkIsDraft();\n\t\t\t\tGRID.revisions.fetch();\n\t\t\t}\n   \t\t},\n   \t\tdata: JSON.stringify(json),\n   \t\twait: false\n\t};\n\t// overwrite settings\n\tjQuery.extend(true,this.settings, settings);\n\t// sends the request to the server\n\tthis.send = function(){\n\t\tjQuery.ajax(this.settings);\n\t};\n\tif(!this.settings.wait){ this.send(); }\n};\n\n// -------------------\n// Method-map that uses the GridAjax object for server communication\n// ------------------\nwindow.GridRequest = {\n\tgrid: {\n\t\tcreate: function(grid, options){\n\t\t\tGRID.log(\"Request grid create\");\n\t\t},\n\t\tread: function(grid, options){\n\t\t\tGRID.log(\"Grid->update \"+options.action);\n\t\t\tswitch(options.action){\n\t\t\t\tcase \"checkdraft\":\n\t\t\t\t\t// get status draft oder published\n\t\t\t   \t\tnew GridAjax(\"checkDraftStatus\",[grid.getGridID()],{\n\t\t\t   \t\t\tsuccess_fn: function(data){\n\t\t\t   \t\t\t\tgrid.set(\"isDraft\",data.result);\n\t\t\t   \t\t\t},\n\t\t\t   \t\t\tcheckIsDraft: false\n\t\t\t   \t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t// load whole grid\n\t\t\t\t\tnew GridAjax(\n\t\t\t\t\t\t\"loadGrid\",\n\t\t\t\t\t\t[grid.getGridID()],\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsuccess_fn: function(data){\n\t\t\t\t\t\t\t\tgrid.attributes = _.extend(grid.attributes, data.result);\n\t\t\t\t\t\t\t\tgrid.getContainers().reset();\n\t\t\t\t\t\t\t\t_.each(data.result.container, function(container) {\n\t\t\t\t\t\t\t\t\tGRID.log(\"Add new Container\");\n\t\t\t\t\t\t\t\t\t grid.addContainer(new Container(container));\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\toptions.success();\n\t\t\t\t\t\t\t\tif(options.reverted){\n\t\t\t\t\t\t\t\t\tGRID.flash();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t}\n\n\t\t},\n\t\tupdate: function(grid, options){\n\t\t\tGRID.log(\"Grid->update\");\n\t\t\tswitch(options.action){\n\t\t\t\tcase \"revertDraft\":\n\t\t\t\t\tnew GridAjax(\"revertDraft\", [grid.getGridID()],{\n\t\t\t\t\t\tsuccess_fn: function(data){\n\t\t\t\t\t\t\tGRID.log([\"revertDraft success\",data]);\n\t\t\t\t\t\t\tgrid.fetch();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"setToRevision\":\n\t\t\t\t\tvar params = [grid.getGridID(), options.revision];\n\t\t\t\t\tnew GridAjax(\"setToRevision\",params,{\n\t\t\t\t\t\tsuccess_fn: function(data){\n\t\t\t\t\t\t\tGRID.log(\"setToRevision success\");\n\t\t\t\t\t\t\tGRID.log(data);\n\t\t\t\t\t\t\tgrid.fetch({reverted: true});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t// publish\n\t\t\t\t\tnew GridAjax(\"publishDraft\",[ grid.getGridID()], {\n\t\t\t\t\t\tsuccess_fn: function(data){\n\t\t\t\t\t\t\tGRID.log(\"publishDraft success\");\n\t\t\t\t\t\t\tGRID.log(data);\n\t\t\t\t\t\t\tgrid.set(\"isDraft\", false);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tmoveBox: function(box, new_slot, new_box_index, success){\n\t\t\tvar params = [\n\t\t\t\t\t\tbox.getGridID(),\n\t\t\t\t\t\tbox.getContainer().get(\"id\"),box.getSlot().get(\"id\"),box.getIndex(),\n\t\t\t\t\t\tnew_slot.getContainer().get(\"id\"),new_slot.get(\"id\"),new_box_index\n\t\t\t\t\t];\n\t\t\tnew GridAjax(\"moveBox\", params,{\n\t\t\t\tsuccess_fn: success\n\t\t\t})\n\t\t},\n\t\taddReuseContainer: function(containertype, index, success){\n\t\t\tvar params = [GRID.ID, index, containertype.get(\"id\")];\n\t\t\tnew GridAjax( \"addReuseContainer\", params,{\n\t\t\t\tsuccess_fn: success\n\t\t\t});\n\t\t},\n\t\tdestroy: function(grid, options){\n\t\t\tGRID.log(\"Grid->destroy\");\n\t\t\t// no need to. CMS creates and deletes grids\n\t\t}\n\t},\n\trevisions: function(revisions, options){\n\t\tGRID.log(\"revisions->read\");\n\t\tvar page = (typeof options.page != typeof undefined)? options.page: 0;\n\t\trevisions.nextpage = -1;\n\t\tnew GridAjax(\n\t\t\t\"getGridRevisions\",\n\t\t\t[revisions.getGridID(), page],\n\t\t\t{\n\t\t\t\tsuccess_fn: function(data){\n\t\t\t\t\tGRID.log(\"getGridRevisions succes\");\n\t\t\t\t\tif(data.result.length > 0){\n\t\t\t\t\t\trevisions.nextpage = page+1;\n\t\t\t\t\t}\n\t\t\t\t\tif(page == 0){\n\t\t\t\t\t\trevisions.reset();\n\t\t\t\t\t}\n\t\t\t\t\t_.each(data.result, function(revision){\n\t\t\t\t\t\trevisions.add( new Revision(revision) );\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t   \tcheckIsDraft: false\n\t\t\t}\n\t\t);\n\t},\n\t// type model calls\n\tcontainertypes: function(containertypes, options){\n\t\tGRID.log(\"Containertypes->read\");\n\t\tnew GridAjax(\n\t\t\t\"getContainerTypes\",\n\t\t\t[GRID.ID],\n\t\t\t{\n\t\t\t\tsuccess_fn: function(data){\n\t\t\t\t\tGRID.log(\"getContainerTypes succes\");\n\t\t\t\t\tGRID.log(data);\n\t\t\t\t\tcontainertypes.reset();\n\t\t\t\t\t_.each(data.result, function(containertype){\n\t\t\t\t\t\tcontainertypes.add( new ContainerType(containertype) );\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t   \tcheckIsDraft: false\n\t\t\t}\n\t\t);\n\t},\n\treusablecontainers: function(collection, options){\n\t\tnew GridAjax(\n\t\t\t\"getReusableContainers\", [GRID.ID],\n\t\t\t{\n\t\t\t\tsuccess_fn: function(data){\n\t\t\t\t\tGRID.log([\"reusablecontainers data\", data]);\n\t\t\t\t\t_.each(data.result, function(container) {\n\t\t\t\t\t\tcollection.add(new ContainerType(container) );\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t   \tcheckIsDraft: false\n\t\t\t}\n\t\t);\n\t},\n\tboxtypes: function(boxtypes, options){\n\t\tGRID.log(\"Boxtypes->read\");\n\t\tnew GridAjax(\n\t\t\t\"getMetaTypesAndSearchCriteria\",\n\t\t\t[GRID.ID],\n\t\t\t{\n\t\t\t\tsuccess_fn: function(data){\n\t\t\t\t\tGRID.log(\"getMetaTypesAndSearchCriteria succes\");\n\t\t\t\t\tGRID.log(data);\n\t\t\t\t\t_.each(data.result, function(boxtype){\n\t\t\t\t\t\tboxtypes.add( new BoxType(boxtype) );\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t   \tcheckIsDraft: false\n\t\t\t}\n\t\t);\n\t},\n\tboxblueprints: function(boxblueprints,options){\n\t\tvar params = [GRID.ID,options.type, options.searchString, options.criteria];\n\t\tGRID.log([\"blueprints\", boxblueprints, options, params]);\n\t\tnew GridAjax(\"Search\",params,{\n\t\t\t\tsuccess_fn: function(data){\n\t\t\t\t\tGRID.log([\"blueprints search\",data]);\n\t\t\t\t\t_.each(data.result, function(value, key, list){\n\t\t\t\t\t\tvar blueprint = new GridBoxBlueprint(value);\n\t\t\t\t\t\tboxblueprints.add(blueprint);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t   \tcheckIsDraft: false\n\t\t});\n\t},\n\tstyles: function(styles, options){\n\t\tGRID.log(styles.type+\"Styles->read\");\n\t\tnew GridAjax(\n\t\t\t\"get\"+styles.type+\"Styles\",\n\t\t\t[],\n\t\t\t{\n\t\t\t\tsuccess_fn: function(data){\n\t\t\t\t\tGRID.log(\"get\"+styles.type+\"Styles succes\");\n\t\t\t\t\tGRID.log(data);\n\t\t\t\t\tstyles.reset();\n\t\t\t\t\t_.each(data.result, function(style){\n\t\t\t\t\t\tstyles.add( new StyleType(style) );\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t   \tcheckIsDraft: false\n\t\t\t}\n\t\t);\n\t},\n\trights: function(rights, options){\n\t\tGRID.log(\"Rights->read\");\n\t\tnew GridAjax(\n\t\t\t\"Rights\",\n\t\t\t[],\n\t\t\t{\n\t\t\t\tsuccess_fn: function(data){\n\t\t\t\t\tGRID.log([\"rights\",data]);\n\t\t\t\t\t_.each(data.result, function(value, key, list){\n\t\t\t\t\t\trights.set(value,true);\n\t\t\t\t\t});\n\t\t\t\t\t//rights.setNoRights();\n\t\t\t\t\tif(typeof options == typeof {} && typeof options.success == \"function\"){\n\t\t\t\t\t\toptions.success(data);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t   \tcheckIsDraft: false\n\t\t\t}\n\t\t);\n\t},\n\t// element model calls\n\tcontainer: {\n\t\tcreate: function(container, options){\n\t\t\tGRID.log(\"Container->create\");\n\t\t\tvar params = [container.getGridID(), container.get(\"type\"), options.index];\n\t\t\tGRID.log(params);\n\t\t\tnew GridAjax( \"addContainer\", params,\n\t\t\t\t{\n\t\t\t\t\tsuccess_fn: function(data){\n\t\t\t\t\t\tGRID.log(\"addContainer success\");\n\t\t\t\t\t\tGRID.log(data);\n\t\t\t\t\t\tcontainer.set(\"id\", data.result.id);\n\t\t\t\t\t\tcontainer.set(\"slots\", data.result.slots);\n\t\t\t\t\t\tcontainer.set(\"style\",data.result.style);\n\t\t\t\t\t\tcontainer.set(\"space_to_right\",data.result.space_to_right);\n\t\t\t\t\t\tcontainer.set(\"space_to_left\",data.result.space_to_left);\n\t\t\t\t\t\tcontainer.setSlots(data.result.slots);\n\t\t\t\t\t\toptions.success();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\tread: function(container, options){\n\t\t\tGRID.log(\"Container->read\");\n\t\t\t// no need to at the moment\n\t\t},\n\t\tupdate: function(container, options){\n\t\t\tGRID.log(\"Container->update\");\n\t\t\tswitch(options.action){\n\t\t\t\tcase \"reuse\":\n\t\t\t\t\tvar params =[container.getGridID(),container.get(\"id\"),options.reusetitle];\n\t\t\t\t\tnew GridAjax(\"reuseContainer\", params,{\n\t\t\t\t\t\tsuccess_fn: function(data){\n\t\t\t\t\t\t\tcontainer.set(\"reused\", true);\n\t\t\t\t\t\t\toptions.success(data);\n\t\t\t\t\t\t},\n\t\t\t   \t\t\tcheckIsDraft: false\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"move\":\n\t\t\t\t\tvar params = [container.getGridID(), container.get(\"id\"), options.index];\n\t\t\t\t\tnew GridAjax(\"moveContainer\", params,{\n\t\t\t\t\t\tsuccess_fn: options.success\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tvar attributes = _.clone(container.attributes);\n\t\t\t\t\tdelete(attributes.slots);\n\t\t\t\t\tdelete(attributes.collection_slots);\n\t\t\t\t\tdelete(attributes.classes);\n\t\t\t\t\tdelete(attributes.parent);\n\t\t\t\t\tvar params =[container.getGridID(), container.get(\"id\"),attributes];\n\t\t\t\t\tGRID.log(params);\n\t\t\t\t\tnew GridAjax(\"updateContainer\", params,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsuccess_fn: function(data){\n\t\t\t\t\t\t\t\toptions.success();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terror_fn: options.error\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t},\n\t\tdelete: function(container, options){\n\t\t\tvar params = [container.getGridID(), container.get(\"id\")];\n\t\t\tGRID.log(params);\n\t\t\tnew GridAjax(\"deleteContainer\", params,\n\t\t\t\t{\n\t\t\t\tsuccess_fn: function(data){\n\t\t\t\t\tGRID.getModel().getContainers().remove(container);\n\t\t\t\t\toptions.success();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\tslot: {\n\t\tcreate: function(slot, options){\n\t\t\tGRID.log(\"slot->create\");\n\t\t\t// no need to, because they are hard connected to their container\n\t\t},\n\t\tread: function(slot, option){\n\t\t\tGRID.log(\"slot->read\");\n\t\t\t// no need to at the moment\n\t\t},\n\t\tupdate: function(slot, options){\n\t\t\tGRID.log(\"slot->update\");\n\t\t\tvar params = [slot.getGridID(), slot.get(\"parent\").get(\"id\"),slot.get(\"id\"),slot.get(\"style\")];\n\t\t\tGRID.log(params);\n\t\t\tnew GridAjax(\"updateSlotStyle\",params,\n\t\t\t\t{\n\t\t\t\t\tsuccess_fn: function(data){\n\t\t\t\t\t\tGRID.log(\"updateSlotStyle success\");\n\t\t\t\t\t\toptions.success();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\tdelete: function(slot, options){\n\t\t\tGRID.log(\"slot->destroy\");\n\t\t\t// not possible\n\t\t}\n\t},\n\tbox: {\n\t\tcreate: function(box, options){\n\t\t\tGRID.log(\"box->create\");\n\t\t\t// create a new box\n\t\t\tvar params = [\n\t\t\t\t\t\tbox.getGridID(),\n\t\t\t\t\t\tbox.getContainer().get(\"id\"),\n\t\t\t\t\t\tbox.getSlot().get(\"id\"),\n\t\t\t\t\t\t// index position in slot\n\t\t\t\t\t\toptions.index,\n\t\t\t\t\t\tbox.get(\"type\"),\n\t\t\t\t\t\tbox.get(\"content\")];\n\t\t\tnew GridAjax(\"createBox\",params,\n\t\t\t\t{\n\t\t\t\t\tsuccess_fn: function(data){\n\t\t\t\t\t\tGRID.log(\"createBox success\");\n\t\t\t\t\t\tGRID.log(data);\n\t\t\t\t\t\tbox.set(\"id\", data.result.id);\n\t\t\t\t\t\toptions.success();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\tread: function(box, option){\n\t\t\tGRID.log(\"box->read\");\n\t\t\tvar params = [box.getGridID(), box.getContainer().get(\"id\"), box.getSlot().get(\"id\"), box.getIndex()];\n\t\t\tGRID.log(params);\n\t\t\tnew GridAjax(\"fetchBox\",params,{\n\t\t\t\tsuccess_fn: function(data){\n\t\t\t\t\tGRID.log(\"fetchBox success\");\n\t\t\t\t\tGRID.log(data);\n\t\t\t\t\tbox.attributes = _.extend(box.attributes, data.result);\n\t\t\t\t\tbox.trigger('change');\n\t\t\t\t},\n\t\t\t   \tcheckIsDraft: false\n\t\t\t});\n\n\t\t},\n\t\tupdate: function(box, options){\n\t\t\tGRID.log(\"box->update \"+options.action);\n\t\t\t// needs a switch for different actions\n\t\t\tswitch(options.action){\n\t\t\t\tcase \"reuse\":\n\t\t\t\t\tvar params = [\n\t\t\t\t\t\tbox.getGridID(),\n\t\t\t\t\t\tbox.getSlot().getContainer().get(\"id\"),\n\t\t\t\t\t\tbox.getSlot().get(\"id\"),\n\t\t\t\t\t\tbox.getIndex()];\n\t\t\t\t\t\tGRID.log(params);\n\t\t\t\t\t\tnew GridAjax(\"reuseBox\",params,{\n\t\t\t\t\t\t\tsuccess_fn: function(data){\n\t\t\t\t\t\t\t\tbox.attributes=data.result;\n\t\t\t\t\t\t\t\tbox.trigger('change');\n\t\t\t\t\t\t\t},\n\t\t\t   \t\t\t\tcheckIsDraft: false\n\t\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"move\":\n\t\t\t\t\t// for moving the box from one to another position\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t//update attributes\n\t\t\t\t\tvar attributes = _.clone(box.attributes);\n\t\t\t\t\tGRID.log(\"attributes\");\n\t\t\t\t\tGRID.log(attributes);\n\t\t\t\t\tdelete(attributes.classes);\n\t\t\t\t\tdelete(attributes.contentstructure);\n\t\t\t\t\tdelete(attributes.parent);\n\t\t\t\t\tvar params = [\n\t\t\t\t\t\tbox.getGridID(),\n\t\t\t\t\t\tbox.getSlot().getContainer().get(\"id\"),\n\t\t\t\t\t\tbox.getSlot().get(\"id\"),\n\t\t\t\t\t\tbox.getIndex(),\n\t\t\t\t\t\tattributes\n\t\t\t\t\t];\n\t\t\t\t\tGRID.log(params);\n\t\t\t\t\tnew GridAjax(\"UpdateBox\",params,{\n\t\t\t\t\t\tsuccess_fn: function(data){\n\t\t\t\t\t\t\tGRID.log(\"UpdateBox success\");\n\t\t\t\t\t\t\tGRID.log(data);\n\t\t\t\t\t\t\toptions.success();\n\t\t\t\t\t\t\tbox.fetch();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tdelete: function(box, options){\n\t\t\tGRID.log(\"box->destroy\");\n\t\t\tvar params = [ box.getGridID(), box.getContainer().get(\"id\"), box.getSlot().get(\"id\"), box.getIndex() ];\n\t\t\tGRID.log(params);\n\t\t\tnew GridAjax(\"removeBox\", params,\n\t\t\t\t{\n\t\t\t\t\tsuccess_fn: function(data){\n\t\t\t\t\t\tGRID.log(\"removeBox success\");\n\t\t\t\t\t\tGRID.log(data);\n\t\t\t\t\t\toptions.success();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n};\n\n","import _ from 'underscore'\nimport io from 'socket.io-client';\n\nexport function GridAsync(){\n\n\tvar self = this;\n\n\tthis.domain = document.grid.async.domain;\n\tthis.path = document.grid.async.path;\n\tthis.author = document.grid.async.author;\n\tthis.timeout = document.grid.async.timeout;\n\tthis.observers = [];\n\n\tthis.browser_identifier=window.localStorage.getItem(\"grid_browser_identifier\");\n\n\tif(this.browser_identifier==null) {\n\t\tthis.browser_identifier=Math.random().toString(36).substring(7);\n\t\twindow.localStorage.setItem(\"grid_browser_identifier\",this.browser_identifier);\n\t}\n\n\tthis.last_time = new Date().getTime();\n\n\tthis._onIdleInterval = function() {\n\t\tvar time = new Date().getTime();\n\t\tvar diff = (time - self.last_time);\n\t\tif(diff>= this.timeout*1000 && GRID.authors.length>0 && GRID.authors.haveLock()) {\n\t\t\twindow.location.reload(true);\n\t\t}\n\t};\n\n\tvar idle_interval=setInterval(function(){\n\t\tself._onIdleInterval();\n\t},1000);\n\n\tthis._onActivity = function() {\n\t\tself.last_time = new Date().getTime();\n\t};\n\n\tjQuery('body')\n\t\t.on('mousemove',function(){\n\t\t\tself._onActivity();\n\t\t})\n\t\t.on('keypress',function(){\n\t\t\tself._onActivity();\n\t\t});\n\n\t/**\n\t * init function\n\t */\n\tthis.init = function(){\n\t\tif(document.grid.async.service != ''){\n\t\t\tthis.socket = io(document.grid.async.service);\n\t\t\tthis.initEvents();\n\t\t}\n\t};\n\tthis.addObserver = function(observer){\n\t\tthis.observers.push(observer);\n\t};\n\tthis.removeObserver = function(observer){\n\t\tthis.observers = _.without(this.observers,observer);\n\t};\n\tthis.notifyAll = function(_event, data){\n\t\t_.each(this.observers, function(_observer, index, list){\n\t\t\tif(typeof _observer[\"async_\"+_event] == \"function\")\n\t\t\t{\n\t\t\t\t_observer[\"async_\"+_event](data);\n\t\t\t}\n\t\t});\n\t};\n\n\t/**\n\t * Grid Async server events\n\t */\n\tthis.initEvents = function(){\n\t\tthis.on(\"connect\", \"connect\");\n\t\tthis.on(\"disconnect\", \"disconnect\");\n\t\t// authors\n\t\tthis.on(\"authors.list\", \"authors_list\");\n\t\tthis.on(\"authors.joined\", \"authors_joined\");\n\t\tthis.on(\"authors.left\", \"authors_left\");\n\t\tthis.on(\"authors.multiplehits\",\"authors_multihit\");\n\t\t// locking\n\t\tthis.on(\"locking.isLocked\", \"locking_is_locked\");\n\t\tthis.on(\"locking.lockRequested\", \"locking_lock_requested\");\n\t\t// ping\n\t\tthis.on('ping.send',\"ping_send\");\n\t};\n\tthis.on = function(e, f){\n\t\tvar self = this;\n\t\tthis.socket.on(e, function(data){\n\t\t\tself[f](data);\n\t\t});\n\t};\n\tthis.connect = function(data){\n\t\tthis.authors_join();\n\t};\n\tthis.disconnect = function(data){\n\t\tthis.notifyAll(\"disconnect\");\n\t\tthis.notifyAll(\"locking_is_locked\");\n\t};\n\t/**\n\t * authors\n\t */\n\tthis.authors_join = function(){\n\t\tthis.socket.emit(\"authors.join\", {domain: this.domain, path: this.path, author: this.author, identity:this.browser_identifier});\n\t};\n\t/**\n\t * locking\n\t */\n\tthis.locking_request_lock = function(){\n\t\tthis.socket.emit(\"locking.requestLock\");\n\t};\n\tthis.locking_handover = function(identifier){\n\t\tGRID.authors.each(function(author){\n\t\t\tauthor.set(\"request_lock\", false);\n\t\t});\n\t\tthis.socket.emit(\"locking.handover\", identifier);\n\t};\n\tthis.locking_deny_handover = function(identifier){\n\t\tthis.socket.emit(\"locking.denyHandover\", identifier);\n\t};\n\t/**\n\t * authors events\n\t */\n\tthis.authors_list = function(data){\n\t\tthis.notifyAll(\"authors_list\",data);\n\t};\n\tthis.authors_joined = function(data){\n\t\tthis.notifyAll(\"authors_joined\",data);\n\t};\n\tthis.authors_left = function(id){\n\t\tthis.notifyAll(\"authors_left\",id);\n\t};\n\tthis.authors_multihit = function(count) {\n\t\talert(\"You have opened this grid on \"+count+\" browser windows. As parallel editing is not allowed you're locked out here.\");\n\t};\n\t/**\n\t * locking events\n\t */\n\tthis.locking_is_locked = function(data){\n\t\tGRID.authors.resetLock();\n\t\tif(data.isLocked){\n\t\t\tGRID.authors.setLock(data.identifier);\n\t\t}\n\t\tthis.notifyAll(\"locking_is_locked\");\n\t};\n\tthis.locking_lock_requested = function(data){\n\t\tvar author = GRID.authors.get(data.identifier);\n\t\tif( author instanceof GridAuthor){\n\t\t\tauthor.set(\"request_lock\",true);\n\t\t}\n\t\tthis.notifyAll(\"request_lock\");\n\t};\n\t/**\n\t * ping events\n\t */\n\tvar _ping_timeout = null;\n\tthis.ping_send = function(){\n\t\tself.socket.emit('ping.received');\n\t};\n\n}\n\n\n\n\n\n\n","\n/**\n* @author Palasthotel <rezeption@palasthotel.de>\n* @copyright Copyright (c) 2014, Palasthotel\n* @license http://www.gnu.org/licenses/gpl-2.0.html GPLv2\n* @package Palasthotel\\Grid\n*/\n\nimport ich from 'icanhaz'\nimport {GridAsync} from \"./GridAsync\";\n\n/**\n*\tIE JS console fix\n*/\n(function() {\n    var method;\n    var noop = function () {};\n    var methods = [\n        'assert', 'clear', 'count', 'debug', 'dir', 'dirxml', 'error',\n        'exception', 'group', 'groupCollapsed', 'groupEnd', 'info', 'log',\n        'markTimeline', 'profile', 'profileEnd', 'table', 'time', 'timeEnd',\n        'timeStamp', 'trace', 'warn'\n    ];\n    var length = methods.length;\n    var console = (window.console = window.console || {});\n\n    while (length--) {\n        method = methods[length];\n\n        // Only stub undefined methods.\n        if (!console[method]) {\n            console[method] = noop;\n        }\n    }\n}());\n\n/** public object */\nwindow.GRID = {};\nconst GRID = window.GRID = {\n\t$body: null,\n\tdom_root: \"#new-grid-wrapper\",\n\t$root: null,\n\tdom_root_editor: \"#new-grid-editor-wrapper\",\n\t$root_editor: null,\n\tdom_root_authors: \"#grid-authors-wrapper\",\n\t$root_authors: null,\n\tID: null,\n\t// enable or disable debugging output\n\tDEBUGGING: false,\n\t// the server URL\n\tSERVER: \"/grid_ajax_endpoint\",\n\t// Pattern for preview URL\n\tPREVIEW_URL: window.location.pathname+'/preview',\n\tPREVIEW_PATTERN: window.location.pathname+'/{REV}/preview',\n\t// initializes the grid\n\tgrid: null,\n\tgridView: null,\n\ttypes_box: null,\n    types_container: null,\n    reusable_containers: null,\n    styles_container: null,\n    styles_slot: null,\n    styles_box: null,\n    revisions: null,\n    async: null,\n    authors: null,\n\tinit: function(){\n\n\t\t// initialize constants\n\t\tthis._initConstants();\n\t\tif(typeof GRID.ID === \"undefined\" || GRID.ID === null) return false;\n\t\t/**\n\t\t * loading indicator before grid is ready\n\t\t *\n\t\t */\n\t\tGRID.$loading = ich.tpl_loading();\n\t\tthis.$root.append(GRID.$loading);\n\t\tGRID.$loading.addClass(\"grid-init-loading\");\n\n\t\t// load all model classes for grid works\n\t\tthis.getBoxTypes().fetch();\n\t\tthis.getContainerTypes().fetch();\n\t\tthis.getReusableContainers().fetch();\n\t\tthis.getContainerStyles().fetch();\n\t\tthis.getSlotStyles().fetch();\n\t\tthis.getBoxStyles().fetch();\n\n\t\t/**\n\t\t * init async websocket magic\n\t\t * @type {GridAsync}\n\t\t */\n\t\tthis.async = new GridAsync();\n\t\tthis.authors = new GridAuthors();\n\t\tthis.async.addObserver(this);\n\t\tthis.async.addObserver(this.authors);\n\n\t\tthis.getRights().fetch({\n\t\t\tsuccess:function(){\n\n\t\t\t\t// load the grid + view\n\t\t\t\tGRID.grid = new Grid({\n\t\t\t\t\tid:GRID.ID,\n\t\t\t\t\tSERVER: GRID.SERVER,\n\t\t\t\t\tPREVIEW_URL: GRID.PREVIEW_URL,\n\t\t\t\t\tDEBUGGING: GRID.DEBUGGING,\n\t\t\t\t\tfn_success: GRID.new_grid_success\n\t\t\t\t});\n\n\t\t\t}\n\t\t});\n\n\t\tconst $body = this.$body;\n\t\t$body.on(\"keydown\", function(e){\n\t\t\taltModificationClass(e.altKey);\n\t\t}).on(\"keyup\", function(e){\n\t\t\taltModificationClass(e.altKey);\n\t\t});\n\n\t\tfunction altModificationClass(isPressed) {\n\t\t\tif(isPressed){\n\t\t\t\t$body.addClass(\"is-alt-pressed\");\n\t\t\t} else {\n\t\t\t\t$body.removeClass(\"is-alt-pressed\");\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\treload: function(){\n\t\tthis.grid.destroy();\n\t\tthis.grid = null;\n\t\tthis.$root_authors.empty();\n\t\tif(this.gridView != null){\n\t\t\tthis.gridView.remove();\n\t\t}\n\t\tthis.newGrid();\n\t},\n\tnewGrid: function(){\n\t\t// load the grid + view\n\t\tthis.grid = new Grid({\n        \tid:GRID.ID,\n\t\t\tSERVER: this.SERVER,\n\t\t\tPREVIEW_URL: this.PREVIEW_URL,\n\t\t\tDEBUGGING: this.DEBUGGING,\n\t\t\tfn_success: GRID.new_grid_success\n        });\n\t\treturn this;\n\t},\n\n\tnew_grid_success: function(data){\n\t\tGRID.$root.empty();\n\t\tGRID.$root.append(GRID.$loading);\n\n\t\tGRID.gridview = new GridView({model: GRID.getModel() });\n\n\t\t// handle rights\n\t\tGRID.gridview.listenTo(GRID.getRights(),\"change\",GRID.onRights);\n\n\t\tGRID.$root.append( GRID.getView().render().el );\n\n\t\tGRID._initializeContainerSortable();\n\t\tGRID._initializeBoxSortable();\n\t\t// load the revisions\n\t\tGRID.revisions = new Revisions({grid: GRID.getModel() });\n\t\tGRID.revisions.fetch();\n\t\t// init toolbar\n\t\tGRID.toolbar  = new GridToolbarView({\n\t\t\tmodel: GRID.getModel()\n\t\t});\n\t\tGRID.async.addObserver(GRID.toolbar);\n\t\tGRID.$root.prepend(GRID.toolbar.render().el);\n\n\t\tGRID.$loading.removeClass(\"grid-init-loading\");\n\n\t\t/**\n\t\t * init async connection on grid loading done\n\t\t */\n\t\tGRID.async.init();\n\n\t\t/**\n\t\t * listen to changes of window size\n\t\t */\n\t\tjQuery(window).resize(function(){ GRID.toolbar.onResize() }).trigger(\"resize\");\n\t},\n\n\tgetModel: function(){\n\t\treturn this.grid;\n\t},\n\tgetView: function(){\n\t\treturn this.gridview;\n\t},\n\t// type collections\n\tgetContainerTypes: function(){\n        if(!(this.types_container instanceof ContainerTypes) ){\n            this.types_container = new ContainerTypes();\n        }\n        return this.types_container;\n    },\n    getReusableContainers: function(){\n    \tif(!(this.reusable_containers instanceof ReusableContainers)){\n    \t\tthis.reusable_containers = new ReusableContainers();\n    \t}\n    \treturn this.reusable_containers;\n    },\n    getBoxTypes: function(){\n        if(!(this.types_box instanceof BoxTypes) ){\n            this.types_box = new BoxTypes();\n        }\n        return this.types_box;\n    },\n    // style collections\n    getContainerStyles: function(){\n        if(!(this.styles_container instanceof Styles) ){\n            this.styles_container = new Styles({type:\"container\"});\n        }\n        return this.styles_container;\n    },\n    getSlotStyles: function(){\n        if(!(this.styles_slot instanceof Styles) ){\n            this.styles_slot = new Styles({type:\"slot\"});\n        }\n        return this.styles_slot;\n    },\n    getBoxStyles: function(){\n        if(!(this.styles_box instanceof Styles) ){\n            this.styles_box = new Styles({type:\"box\"});\n        }\n        return this.styles_box;\n    },\n    getRights: function(){\n    \tif(!(this.rights instanceof GridRights)){\n    \t\tthis.rights = new GridRights();\n    \t}\n    \treturn this.rights;\n    },\n    // revisions\n    setToRevision: function(revision){\n    \tif(GRID.locked()) return;\n        GridRequest.grid.update(GRID.grid, {action: \"setToRevision\", revision: revision});\n    },\n    // onRightsChange\n    onRights: function(rights){\n    \tGRID.log([\"onrights\",rights]);\n    \tGRID.getView().render();\n    \tGRID.toolbar.render();\n    },\n\t// initializes the constatns\n\t_initConstants: function(){\n\t\t// root elements\n\t\tthis.$body = jQuery(\"body\");\n\t\tthis.$root = jQuery(this.dom_root);\n\t\tthis.$root_editor = jQuery(this.dom_root_editor);\n\t\tthis.$root_authors = jQuery(this.dom_root_authors);\n\t\t// constants from CMS\n\t\tthis.mode = document.gridmode;\n\t\tthis.$root.addClass('gridmode-'+this.mode);\n\n\t\tthis.DEBUGGING = document.grid_debug_mode;\n\t\tthis.ID = document.ID;\n\t\tthis.SERVER = \"/grid_ajax_endpoint\";\n\t\tif( typeof document.gridajax != \"undefined\" &&\n\t\t\tdocument.gridajax != null &&\n\t\t\tdocument.gridajax != \"\"){\n\t\t\tthis.SERVER = document.gridajax;\n\t\t}\n\t\tthis.PREVIEW_URL = this.PREVIEW_URL.replace(\"//\",\"/\");\n\t\tif( typeof document.previewurl != typeof undefined &&\n\t\t\tdocument.previewurl != null &&\n\t\t\tdocument.previewurl != \"\"){\n\t\t\tthis.PREVIEW_URL = document.previewurl;\n\t\t}\n\t\tvar PREVIEW_PATTERN = window.location.pathname+'/{REV}/preview';\n\t\tif( typeof document.previewpattern != typeof undefined &&\n\t\t\tdocument.previewpattern != null &&\n\t\t\tdocument.previewpattern != \"\"){\n\t\t\tPREVIEW_PATTERN = document.previewpattern;\n\t\t}\n\t\tthis.PREVIEW_PATTERN=PREVIEW_PATTERN;\n\t},\n\t// publishes the grid\n\tpublish: function(){\n\t\tif( !GRID.getRights().get(\"publish\") || GRID.locked() ){\n\t\t\talert(\"Sorry you have no rights for that...\");\n\t\t\treturn false;\n\t\t}\n\t\tnew GridAjax(\"publishDraft\",[GRID.ID]);\n\t},\n\t// revert to old revision\n\trevert: function(){\n\t\tif(GRID.locked()) return;\n        GridRequest.grid.update(GRID.grid, {action: \"revertDraft\"});\n\t},\n\t// console logging just with DEBUGGING enabled\n\tlog: function(string){ if(this.DEBUGGING){ console.log(string); } },\n\t/**\n\t * change to box and container editor\n\t */\n\tshowEditor: function(callback) {\n\t\tGRID.$root.animate(\n\t\t\t{\n\t\t\t\twidth:0\n\t\t\t},\n\t\t\t220,\n\t\t\tfunction(){\n\t\t\t\tGRID.$root.hide();\n\t\t\t}\n\t\t);\n\t\tsetTimeout(function(){\n\t\t\tGRID.$root_editor.show();\n\t\t\tGRID.$root_editor.animate({width:\"100%\"},250,function(){\n\t\t\t\tcallback();\n\t\t\t});\n\t\t\twindow.scrollTo(0,0);\n\t\t},50);\n\t},\n\thideEditor: function(callback) {\n\t\tGRID.$root_editor.animate({width:\"0%\"},220, function(){GRID.$root_editor.hide();});\n\t\tsetTimeout(function(){\n\t\t\tGRID.$root.show();\n\t\t\tGRID.$root.animate({width:\"100%\"},220,function(){\n\t\t\t\tcallback();\n\t\t\t});\n\t\t\twindow.scrollTo(0,0);\n\t\t},50);\n\t},\n\t/**\n\t * change to authors\n\t */\n\ttoggleAuthors: function(){\n\t\tif(GRID.$root_authors.html()==\"\"){\n\t\t\tGRID.$root_authors.empty();\n\t\t\tvar authors = new Authors();\n\t\t\tGRID.$root_authors.append(authors.render().$el);\n\t\t\tauthors.listenTo( GRID.toolbar,'toolbar_resize', authors.onResize);\n\t\t}\n\n\t\tGRID.$root.toggleClass(\"is-active-authors\");\n\t\tGRID.$root_authors.toggleClass(\"is-active\");\n\t\tGRID.toolbar.onResize();\n\t},\n\tshowAuthors: function(){\n\t\tthis.hideAuthors();\n\t\tthis.toggleAuthors();\n\t},\n\thideAuthors: function(){\n\t\tGRID.$root.removeClass(\"is-active-authors\");\n\t\tGRID.$root_authors.removeClass(\"is-active\");\n\t},\n\tlocked: function(){\n\t\treturn !GRID.authors.haveLock();\n\t},\n\tasync_locking_is_locked: function(){\n\t\tif(GRID.locked()){\n\t\t\tGRID.$root.addClass(\"grid-is-locked\");\n\t\t\tGRID.showAuthors();\n\t\t} else if(GRID.$root.hasClass(\"grid-is-locked\")){\n\t\t\tGRID.reload();\n\t\t\tGRID.$root.removeClass(\"grid-is-locked\");\n\t\t\tthis.hideAuthors();\n\t\t}\n\t},\n\tasync_disconnect: function(){\n\t\tthis.async_locking_is_locked();\n\t},\n\t// initializes function to sort the containers\n\t_initializeContainerSortable: function(){\n\t\tif(!GRID.getRights().get(\"move-container\") || GRID.locked()) return false;\n\t\tvar container_deleted;\n\t\tcontainer_deleted=false;\n\t\tvar container;\n\t\tvar self=this;\n\t\tjQuery(this.getView().el).sortable({\n            handle: \".grid-container-sorthandle, .grid-container-reused-layer\",\n            items:\".grid-container:not(.grid-container-type-sc)\",\n            placeholder: \"grid-container-sort-placeholder\",\n            pullPlaceholder: true,\n            appendTo: this.getView().$el ,\n            refreshPositions: true,\n            helper: function(event, element){\n                return jQuery(\"<div class='dragger-helper'></div>\");\n            },\n            cursorAt: { left: 30, bottom: 30 },\n            start: function( event, ui ){\n                GRID.log([\"container sort START\"], event, ui);\n                var old_container_id=ui.item.data(\"id\");\n                jQuery(\".grid-element-trash\").addClass(\"grid-active\").droppable({\n\t                accept: '.grid-container',\n\t                hoverClass: 'grid-hover',\n\t                drop:function(e,ui) {\n\t                \tcontainer=GRID.getModel().getContainers().get(old_container_id);\n\t                \tcontainer_deleted=true;\n\t                }\n                });\n            },\n            stop: function(event, ui){\n            \tjQuery(\".grid-element-trash\").removeClass('grid-active');\n            \tif(container_deleted)\n            \t{\n            \t\tcontainer.destroy();\n            \t}\n            },\n            update: function( event, ui ){\n            \tif(container_deleted)return;\n            \tvar containerview = ui.item.attr(\"data-cid\");\n\n                var newIndex = ui.item.index();\n                var containermodel = GRID.getModel().getContainers().get(containerview);\n                var oldIndex = GRID.getModel().getContainers().indexOf(containermodel);\n\n \t\t\t\tGRID.getModel().getContainers().move(containermodel, newIndex);\n            }\n        });\n\t},\n\t// initializes function to sort the containers\n\t_initializeBoxSortable: function(){\n\t\tif(!GRID.getRights().get(\"move-box\") || GRID.locked() ) return false;\n\t\tvar old_box_index,\n\t\told_slot_id,\n\t\told_container_id,\n\t\tnew_box_index,\n\t\tnew_slot_id,\n\t\tnew_container_id,\n\t\tbox_deleted,\n\t\tbox_duplicated;\n\t\tbox_deleted=false;\n\t\tbox_duplicated=false;\n\t\tjQuery(this.getView().el).find(\".grid-container-type-c[data-reused=false] .grid-boxes-wrapper, .grid-container-type-sc .grid-boxes-wrapper\").sortable({\n\t\t\titems: \".grid-box\",\n\t\t\thandle: \".grid-box-controls\",\n\t\t\t//cancel: \".grid-box-edit, .grid-box-delete\",\n\t\t\tconnectWith: \".grid-container-type-c[data-reused=false] .grid-boxes-wrapper, .grid-element-trash\",\n\t\t\tplaceholder: \"grid-box-sort-placeholder\",\n\t\t\tforcePlaceholderSize: true,\n\t\t\tdistance: 10,\n\t\t\trefreshPositions: true,\n\t\t\thelper: function(event, element){\n\t\t\t\treturn jQuery(\"<div class='dragger-helper'></div>\");\n\t\t\t},\n\t\t\tcursorAt: { left: 30, top:30 },\n\t\t\tstart: function(e, ui){\n\t\t\t\tbox_duplicated = false;\n\t\t\t\tbox_deleted = false;\n\n\t\t\t\told_box_index = ui.item.index();\n\t\t\t\told_slot_id = ui.item.parents(\".grid-slot\").data(\"id\");\n\t\t\t\told_container_id = ui.item.parents(\".grid-container\").data(\"id\");\n\n\t\t\t\tGRID.log([\"START BOX SORT\", old_box_index, old_slot_id, old_container_id]);\n\t\t\t\tjQuery(\".grid-element-trash\").addClass(\"grid-active\").droppable({\n\t\t\t\t\taccept: '.grid-slot .grid-box',\n\t\t\t\t\thoverClass: 'grid-hover',\n\t\t\t\t\tover: function(){\n\t\t\t\t\t\tbox_deleted = true;\n\t\t\t\t\t},\n\t\t\t\t\tout: function(){\n\t\t\t\t\t\tbox_deleted = false;\n\t\t\t\t\t},\n\t\t\t\t\tdrop:function(e,ui) {\n\t\t\t\t\t\tvar box = GRID.getModel().getContainers()\n\t\t\t\t\t\t\t\t\t\t\t     .get(old_container_id)\n\t\t\t\t\t\t\t\t\t\t\t     .getSlots().get(old_slot_id)\n\t\t\t\t\t\t\t\t\t\t\t     .getBox(old_box_index);\n\t\t\t\t\t\tbox.destroy();\n\t\t\t\t\t\tbox_deleted=true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tjQuery(\".grid-element-duplicate\").addClass(\"grid-active\").droppable({\n\t\t\t\t\taccept: '.grid-slot .grid-box',\n\t\t\t\t\thoverClass: 'grid-hover',\n\t\t\t\t\tover: function(){\n\t\t\t\t\t\tbox_duplicated = true;\n\t\t\t\t\t},\n\t\t\t\t\tout: function(){\n\t\t\t\t\t\tbox_duplicated = false;\n\t\t\t\t\t},\n\t\t\t\t\tdrop:function(e,ui) {\n\t\t\t\t\t\tbox_duplicated = true;\n\t\t\t\t\t\tconst box = GRID.getModel().getContainers()\n\t\t\t\t\t\t\t.get(old_container_id)\n\t\t\t\t\t\t\t.getSlots()\n\t\t\t\t\t\t\t.get(old_slot_id).getBox(old_box_index);\n\t\t\t\t\t\tGRID.getModel().duplicateBox(box,old_box_index+1);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tbeforeStop: function(e, ui){\n\t\t\t\tjQuery(\".grid-element-trash\").removeClass(\"grid-active\");\n\t\t\t\tjQuery(\".grid-element-duplicate\").removeClass(\"grid-active\");\n\t\t\t\tif(box_deleted || box_duplicated){\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t},\n\t\t\tstop: function(e, ui){\n\t\t\t\tnew_container_id = ui.item.parents(\".grid-container\").data(\"id\");\n\t\t\t\tnew_slot_id = ui.item.parents(\".grid-slot\").data(\"id\");\n\t\t\t\tnew_box_index = ui.item.index();\n\n\t\t\t\tGRID.log([\"STOP BOX SORT\", old_box_index, old_slot_id, old_container_id, new_box_index, new_slot_id, new_container_id]);\n\n\n\t\t\t\tif(old_container_id == new_container_id &&\n\t\t\t\t\told_slot_id == new_slot_id &&\n\t\t\t\t\told_box_index == new_box_index){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar box = GRID.getModel()\n\t\t\t\t\t\t\t\t.getContainers().get(old_container_id)\n\t\t\t\t\t\t\t\t.getSlots().get(old_slot_id)\n\t\t\t\t\t\t\t\t.getBox(old_box_index);\n\t\t\t\tvar new_slot = GRID.getModel()\n\t\t\t\t\t\t\t\t.getContainers().get(new_container_id)\n\t\t\t\t\t\t\t\t.getSlots().get(new_slot_id);\n\n\t\t\t\tGRID.getModel().moveBox(box, new_slot, new_box_index);\n\t\t\t}\n\t\t});\n\t},\n\tflash: function(){\n\t\tGRID.gridview.$el.fadeIn(100).fadeOut(100).fadeIn(100);\n\t},\n\tstartLoading: function(){\n\t\tclearTimeout(GRID.loading_hide_timeout);\n\t\tGRID.$loading.show();\n\t\tGRID.$loading.addClass(\"loading\");\n\n\t},\n\tfinishLoading: function(){\n\t\tGRID.$loading.removeClass(\"loading\");\n\t\tclearTimeout(GRID.loading_hide_timeout);\n\t\tGRID.loading_hide_timeout = setTimeout(function(){\n\t\t\tGRID.$loading.hide();\n\t\t},1200);\n\t}\n\n};\n\njQuery(function(){GRID.init();});\n\n\n"],"sourceRoot":""}