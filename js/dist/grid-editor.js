/*! For license information please see grid-editor.js.LICENSE.txt */
(()=>{var e={7758:()=>{function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}!function(){if(!window.CKEDITOR||!window.CKEDITOR.dom){window.CKEDITOR||(window.CKEDITOR=function(){var e=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,t={timestamp:"K87C",version:"4.15.0 (Standard)",revision:"a786d6f43",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:e},status:"unloaded",basePath:function(){var t=window.CKEDITOR_BASEPATH||"";if(!t)for(var n=document.getElementsByTagName("script"),i=0;i<n.length;i++){var o=n[i].src.match(e);if(o){t=o[1];break}}if(-1==t.indexOf(":/")&&"//"!=t.slice(0,2)&&(t=0===t.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+t:location.href.match(/^[^\?]*\/(?:)/)[0]+t),!t)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return t}(),getUrl:function(e){return-1==e.indexOf(":/")&&0!==e.indexOf("/")&&(e=this.basePath+e),this.timestamp&&"/"!=e.charAt(e.length-1)&&!/[&?]t=/.test(e)&&(e+=(0<=e.indexOf("?")?"&":"?")+"t="+this.timestamp),e},domReady:function(){function e(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",e,!1),t()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",e),t())}catch(e){}}function t(){for(var e;e=n.shift();)e()}var n=[];return function(t){if(n.push(t),"complete"===document.readyState&&setTimeout(e,1),1==n.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",e),window.attachEvent("onload",e),t=!1;try{t=!window.frameElement}catch(e){}document.documentElement.doScroll&&t&&function t(){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(t,1)}e()}()}}}()},n=window.CKEDITOR_GETURL;if(n){var i=t.getUrl;t.getUrl=function(e){return n.call(t,e)||i.call(t,e)}}return t}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(e){var t,n=CKEDITOR.event.prototype;for(t in n)null==e[t]&&(e[t]=n[t])},CKEDITOR.event.prototype=function(){function e(e){var i=t(this);return i[e]||(i[e]=new n(e))}var t=function(e){return(e=e.getPrivate&&e.getPrivate()||e._||(e._={})).events||(e.events={})},n=function(e){this.name=e,this.listeners=[]};return n.prototype={getListenerIndex:function(e){for(var t=0,n=this.listeners;t<n.length;t++)if(n[t].fn==e)return t;return-1}},{define:function(t,n){var i=e.call(this,t);CKEDITOR.tools.extend(i,n,!0)},on:function(t,n,i,o,r){function s(e,r,s,l){return e={name:t,sender:this,editor:e,data:r,listenerData:o,stop:s,cancel:l,removeListener:a},!1!==n.call(i,e)&&e.data}function a(){c.removeListener(t,n)}var l=e.call(this,t);if(0>l.getListenerIndex(n)){l=l.listeners,i||(i=this),isNaN(r)&&(r=10);var c=this;s.fn=n,s.priority=r;for(var u=l.length-1;0<=u;u--)if(l[u].priority<=r)return l.splice(u+1,0,s),{removeListener:a};l.unshift(s)}return{removeListener:a}},once:function(){var e=Array.prototype.slice.call(arguments),t=e[1];return e[1]=function(e){return e.removeListener(),t.apply(this,arguments)},this.on.apply(this,e)},capture:function(){CKEDITOR.event.useCapture=1;var e=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,e},fire:function(){var e=0,n=function(){e=1},i=0,o=function(){i=1};return function(r,s,a){var l=t(this)[r];r=e;var c=i;if(e=i=0,l&&(d=l.listeners).length)for(var u,d=d.slice(0),h=0;h<d.length;h++){if(l.errorProof)try{u=d[h].call(this,a,s,n,o)}catch(e){}else u=d[h].call(this,a,s,n,o);if(!1===u?i=1:void 0!==u&&(s=u),e||i)break}return s=!i&&(void 0===s||s),e=r,i=c,s}}(),fireOnce:function(e,n,i){return n=this.fire(e,n,i),delete t(this)[e],n},removeListener:function(e,n){var i=t(this)[e];if(i){var o=i.getListenerIndex(n);0<=o&&i.listeners.splice(o,1)}},removeAllListeners:function(){var e,n=t(this);for(e in n)delete n[e]},hasListeners:function(e){return(e=t(this)[e])&&0<e.listeners.length}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(e,t){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fire.call(this,e,t,this)},CKEDITOR.editor.prototype.fireOnce=function(e,t){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fireOnce.call(this,e,t,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var e=navigator.userAgent.toLowerCase(),t=e.match(/edge[ \/](\d+.?\d*)/),n=-1<e.indexOf("trident/");(n={ie:n=!(!t&&!n),edge:!!t,webkit:!n&&-1<e.indexOf(" applewebkit/"),air:-1<e.indexOf(" adobeair/"),mac:-1<e.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<e.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(e),isCustomDomain:function(){if(!this.ie)return!1;var e=document.domain,t=window.location.hostname;return e!=t&&e!="["+t+"]"},secure:"https:"==location.protocol}).gecko="Gecko"==navigator.product&&!n.webkit&&!n.ie,n.webkit&&(-1<e.indexOf("chrome")?n.chrome=!0:n.safari=!0);var i=0;return n.ie&&(i=t?parseFloat(t[1]):n.quirks||!document.documentMode?parseFloat(e.match(/msie (\d+)/)[1]):document.documentMode,n.ie9Compat=9==i,n.ie8Compat=8==i,n.ie7Compat=7==i,n.ie6Compat=7>i||n.quirks),n.gecko&&(t=e.match(/rv:([\d\.]+)/))&&(i=1e4*(t=t[1].split("."))[0]+100*(t[1]||0)+1*(t[2]||0)),n.air&&(i=parseFloat(e.match(/ adobeair\/(\d+)/)[1])),n.webkit&&(i=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),n.version=i,n.isCompatible=!(n.ie&&7>i||n.gecko&&4e4>i||n.webkit&&534>i),n.hidpi=2<=window.devicePixelRatio,n.needsBrFiller=n.gecko||n.webkit||n.ie&&10<i,n.needsNbspFiller=n.ie&&11>i,n.cssClass="cke_browser_"+(n.ie?"ie":n.gecko?"gecko":n.webkit?"webkit":"unknown"),n.quirks&&(n.cssClass+=" cke_browser_quirks"),n.ie&&(n.cssClass+=" cke_browser_ie"+(n.quirks?"6 cke_browser_iequirks":n.version)),n.air&&(n.cssClass+=" cke_browser_air"),n.iOS&&(n.cssClass+=" cke_browser_ios"),n.hidpi&&(n.cssClass+=" cke_hidpi"),n}()),"unloaded"==CKEDITOR.status&&(CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var e=document.createElement("script");e.type="text/javascript",e.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(e)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(e){(this._.pending||(this._.pending=[])).push(e)},CKEDITOR.domReady((function(){var e=CKEDITOR.loadFullCore,t=CKEDITOR.loadFullCoreTimeout;e&&(CKEDITOR.status="basic_ready",e&&e._load?e():t&&setTimeout((function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()}),1e3*t))})),CKEDITOR.status="basic_loaded"),CKEDITOR.VERBOSITY_WARN=1,CKEDITOR.VERBOSITY_ERROR=2,CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR,CKEDITOR.warn=function(e,t){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:e,additionalData:t})},CKEDITOR.error=function(e,t){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:e,additionalData:t})},CKEDITOR.on("log",(function(e){if(window.console&&window.console.log){var t=console[e.data.type]?e.data.type:"log",n=e.data.errorCode;(e=e.data.additionalData)?console[t]("[CKEDITOR] Error code: "+n+".",e):console[t]("[CKEDITOR] Error code: "+n+"."),console[t]("[CKEDITOR] For more information about this error go to https://ckeditor.com/docs/ckeditor4/latest/guide/dev_errors.html#"+n)}}),null,null,999),CKEDITOR.dom={},function(){function t(e,t,n){this._minInterval=e,this._context=n,this._lastOutput=this._scheduledTimer=0,this._output=CKEDITOR.tools.bind(t,n||{});var i=this;this.input=function(){function e(){i._lastOutput=(new Date).getTime(),i._scheduledTimer=0,i._call()}if(!i._scheduledTimer||!1!==i._reschedule()){var t=(new Date).getTime()-i._lastOutput;t<i._minInterval?i._scheduledTimer=setTimeout(e,i._minInterval-t):e()}}}function n(e,n,i){t.call(this,e,n,i),this._args=[];var o=this;this.input=CKEDITOR.tools.override(this.input,(function(e){return function(){o._args=Array.prototype.slice.call(arguments),e.call(this)}}))}var i=[],o=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",r=/&/g,s=/>/g,a=/</g,l=/"/g,c=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,u={lt:"<",gt:">",amp:"&",quot:'"',nbsp:" ",shy:"­"},d=function(e,t){return"#"==t[0]?String.fromCharCode(parseInt(t.slice(1),10)):u[t]};CKEDITOR.on("reset",(function(){i=[]})),CKEDITOR.tools={arrayCompare:function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0},getIndex:function(e,t){for(var n=0;n<e.length;++n)if(t(e[n]))return n;return-1},clone:function(t){var n;if(t&&t instanceof Array){n=[];for(var i=0;i<t.length;i++)n[i]=CKEDITOR.tools.clone(t[i]);return n}if(null===t||"object"!=e(t)||t instanceof String||t instanceof Number||t instanceof Boolean||t instanceof Date||t instanceof RegExp||t.nodeType||t.window===t)return t;for(i in n=new t.constructor,t)n[i]=CKEDITOR.tools.clone(t[i]);return n},capitalize:function(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())},extend:function(e){var t,n,i=arguments.length;"boolean"==typeof(t=arguments[i-1])?i--:"boolean"==typeof(t=arguments[i-2])&&(n=arguments[i-1],i-=2);for(var o=1;o<i;o++){var r=arguments[o]||{};CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(r),(function(i){!0!==t&&null!=e[i]||n&&!(i in n)||(e[i]=r[i])}))}return e},prototypedCopy:function(e){var t=function(){};return t.prototype=e,new t},copy:function(e){var t,n={};for(t in e)n[t]=e[t];return n},isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},cssVendorPrefix:function(e,t,n){return n?o+e+":"+t+";"+e+":"+t:((n={})[e]=t,n[o+e]=t,n)},cssStyleToDomStyle:function(){var e=document.createElement("div").style,t=void 0!==e.cssFloat?"cssFloat":void 0!==e.styleFloat?"styleFloat":"float";return function(e){return"float"==e?t:e.replace(/-./g,(function(e){return e.substr(1).toUpperCase()}))}}(),buildStyleHtml:function(e){e=[].concat(e);for(var t,n=[],i=0;i<e.length;i++)(t=e[i])&&(/@import|[{}]/.test(t)?n.push("<style>"+t+"</style>"):n.push('<link type="text/css" rel=stylesheet href="'+t+'">'));return n.join("")},htmlEncode:function(e){return null==e?"":String(e).replace(r,"&amp;").replace(s,"&gt;").replace(a,"&lt;")},htmlDecode:function(e){return e.replace(c,d)},htmlEncodeAttr:function(e){return CKEDITOR.tools.htmlEncode(e).replace(l,"&quot;")},htmlDecodeAttr:function(e){return CKEDITOR.tools.htmlDecode(e)},transformPlainTextToHtml:function(e,t){var n=t==CKEDITOR.ENTER_BR,i=(i=this.htmlEncode(e.replace(/\r\n/g,"\n"))).replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),o=t==CKEDITOR.ENTER_P?"p":"div";if(!n){var r=/\n{2}/g;if(r.test(i)){var s="<"+o+">",a="</"+o+">";i=s+i.replace(r,(function(){return a+s}))+a}}return i=i.replace(/\n/g,"<br>"),n||(i=i.replace(new RegExp("<br>(?=</"+o+">)"),(function(e){return CKEDITOR.tools.repeat(e,2)}))),(i=i.replace(/^ | $/g,"&nbsp;")).replace(/(>|\s) /g,(function(e,t){return t+"&nbsp;"})).replace(/ (?=<)/g,"&nbsp;")},getNextNumber:function(){var e=0;return function(){return++e}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var e="e",t=0;8>t;t++)e+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e},override:function(e,t){var n=t(e);return n.prototype=e.prototype,n},setTimeout:function(e,t,n,i,o){return o||(o=window),n||(n=o),o.setTimeout((function(){i?e.apply(n,[].concat(i)):e.apply(n)}),t||0)},throttle:function(e,t,n){return new this.buffers.throttle(e,t,n)},trim:function(){var e=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(t){return t.replace(e,"")}}(),ltrim:function(){var e=/^[ \t\n\r]+/g;return function(t){return t.replace(e,"")}}(),rtrim:function(){var e=/[ \t\n\r]+$/g;return function(t){return t.replace(e,"")}}(),indexOf:function(e,t){if("function"==typeof t){for(var n=0,i=e.length;n<i;n++)if(t(e[n]))return n}else{if(e.indexOf)return e.indexOf(t);for(n=0,i=e.length;n<i;n++)if(e[n]===t)return n}return-1},search:function(e,t){var n=CKEDITOR.tools.indexOf(e,t);return 0<=n?e[n]:null},bind:function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,n.concat(Array.prototype.slice.call(arguments)))}},createClass:function(e){var t=e.$,n=e.base,i=e.privates||e._,o=e.proto;if(e=e.statics,!t&&(t=function(){n&&this.base.apply(this,arguments)}),i){var r=t;t=function(){var e,t=this._||(this._={});for(e in i){var n=i[e];t[e]="function"==typeof n?CKEDITOR.tools.bind(n,this):n}r.apply(this,arguments)}}return n&&(t.prototype=this.prototypedCopy(n.prototype),t.prototype.constructor=t,t.base=n,t.baseProto=n.prototype,t.prototype.base=function e(){this.base=n.prototype.base,n.apply(this,arguments),this.base=e}),o&&this.extend(t.prototype,o,!0),e&&this.extend(t,e,!0),t},addFunction:function(e,t){return i.push((function(){return e.apply(t||this,arguments)}))-1},removeFunction:function(e){i[e]=null},callFunction:function(e){var t=i[e];return t&&t.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var e,t=/^-?\d+\.?\d*px$/;return function(n){return e=CKEDITOR.tools.trim(n+"")+"px",t.test(e)?e:n||""}}(),convertToPx:function(){var e;return function(t){if(e||(e=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(e)),!/%$/.test(t)){var n=0>parseFloat(t);return n&&(t=t.replace("-","")),e.setStyle("width",t),t=e.$.clientWidth,n?-t:t}return t}}(),repeat:function(e,t){return Array(t+1).join(e)},tryThese:function(){for(var e,t=0,n=arguments.length;t<n;t++){var i=arguments[t];try{e=i();break}catch(e){}}return e},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(e){return function(){var t=arguments,n=this;window.setTimeout((function(){e.apply(n,t)}),0)}},normalizeCssText:function(e,t){var n,i=[],o=CKEDITOR.tools.parseCssText(e,!0,t);for(n in o)i.push(n+":"+o[n]);return i.sort(),i.length?i.join(";")+";":""},convertRgbToHex:function(e){return e.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,(function(e,t,n,i){for(e=[t,n,i],t=0;3>t;t++)e[t]=("0"+parseInt(e[t],10).toString(16)).slice(-2);return"#"+e.join("")}))},normalizeHex:function(e){return e.replace(/#(([0-9a-f]{3}){1,2})($|;|\s+)/gi,(function(e,t,n,i){return 3==(e=t.toLowerCase()).length&&(e=[(e=e.split(""))[0],e[0],e[1],e[1],e[2],e[2]].join("")),"#"+e+i}))},parseCssText:function(e,t,n){var i={};return n&&(e=new CKEDITOR.dom.element("span").setAttribute("style",e).getAttribute("style")||""),e&&(e=CKEDITOR.tools.normalizeHex(CKEDITOR.tools.convertRgbToHex(e))),e&&";"!=e?(e.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,(function(e,n,o){t&&("font-family"==(n=n.toLowerCase())&&(o=o.replace(/\s*,\s*/g,",")),o=CKEDITOR.tools.trim(o)),i[n]=o})),i):i},writeCssText:function(e,t){var n,i=[];for(n in e)i.push(n+":"+e[n]);return t&&i.sort(),i.join("; ")},objectCompare:function(e,t,n){var i;if(!e&&!t)return!0;if(!e||!t)return!1;for(i in e)if(e[i]!=t[i])return!1;if(!n)for(i in t)if(e[i]!=t[i])return!1;return!0},objectKeys:function(e){return CKEDITOR.tools.object.keys(e)},convertArrayToObject:function(e,t){var n={};1==arguments.length&&(t=!0);for(var i=0,o=e.length;i<o;++i)n[e[i]]=t;return n},getStyledSpans:function(e,t){var n=CKEDITOR.env.ie&&8==CKEDITOR.env.version?e.toUpperCase():e;return n=t.find("span[style*="+n+"]").toArray(),CKEDITOR.tools.array.filter(n,(function(t){return!!t.getStyle(e)}))},fixDomain:function(){for(var e;;)try{e=window.parent.document.domain;break}catch(t){if(!(e=e?e.replace(/.+?(?:\.|$)/,""):document.domain))break;document.domain=e}return!!e},eventsBuffer:function(e,t,n){return new this.buffers.event(e,t,n)},enableHtml5Elements:function(e,t){for(var n,i="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),o=i.length;o--;)n=e.createElement(i[o]),t&&e.appendChild(n)},checkIfAnyArrayItemMatches:function(e,t){for(var n=0,i=e.length;n<i;++n)if(e[n].match(t))return!0;return!1},checkIfAnyObjectPropertyMatches:function(e,t){for(var n in e)if(n.match(t))return!0;return!1},keystrokeToString:function(e,t){var n=this.keystrokeToArray(e,t);return n.display=n.display.join("+"),n.aria=n.aria.join("+"),n},keystrokeToArray:function(e,t){var n=16711680&t,i=65535&t,o=CKEDITOR.env.mac,r=[],s=[];return n&CKEDITOR.CTRL&&(r.push(o?"⌘":e[17]),s.push(o?e[224]:e[17])),n&CKEDITOR.ALT&&(r.push(o?"⌥":e[18]),s.push(e[18])),n&CKEDITOR.SHIFT&&(r.push(o?"⇧":e[16]),s.push(e[16])),i&&(e[i]?(r.push(e[i]),s.push(e[i])):(r.push(String.fromCharCode(i)),s.push(String.fromCharCode(i)))),{display:r,aria:s}},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==",getCookie:function(e){e=e.toLowerCase();for(var t,n=document.cookie.split(";"),i=0;i<n.length;i++)if(t=n[i].split("="),decodeURIComponent(CKEDITOR.tools.trim(t[0]).toLowerCase())===e)return decodeURIComponent(1<t.length?t[1]:"");return null},setCookie:function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path=/"},getCsrfToken:function(){if(!(e=CKEDITOR.tools.getCookie("ckCsrfToken"))||40!=e.length){var e=[],t="";if(window.crypto&&window.crypto.getRandomValues)e=new Uint8Array(40),window.crypto.getRandomValues(e);else for(var n=0;40>n;n++)e.push(Math.floor(256*Math.random()));for(n=0;n<e.length;n++){var i="abcdefghijklmnopqrstuvwxyz0123456789".charAt(e[n]%36);t+=.5<Math.random()?i.toUpperCase():i}e=t,CKEDITOR.tools.setCookie("ckCsrfToken",e)}return e},escapeCss:function(e){return e?window.CSS&&CSS.escape?CSS.escape(e):isNaN(parseInt(e.charAt(0),10))?e:"\\3"+e.charAt(0)+" "+e.substring(1,e.length):""},getMouseButton:function(e){return!!(e=e&&e.data?e.data.$:e)&&CKEDITOR.tools.normalizeMouseButton(e.button)},normalizeMouseButton:function(e,t){if(!CKEDITOR.env.ie||9<=CKEDITOR.env.version&&!CKEDITOR.env.ie6Compat)return e;for(var n=[[CKEDITOR.MOUSE_BUTTON_LEFT,1],[CKEDITOR.MOUSE_BUTTON_MIDDLE,4],[CKEDITOR.MOUSE_BUTTON_RIGHT,2]],i=0;i<n.length;i++){var o=n[i];if(o[0]===e&&t)return o[1];if(!t&&o[1]===e)return o[0]}},convertHexStringToBytes:function(e){var t,n=[],i=e.length/2;for(t=0;t<i;t++)n.push(parseInt(e.substr(2*t,2),16));return n},convertBytesToBase64:function(e){var t,n="",i=e.length;for(t=0;t<i;t+=3){var o,r=e.slice(t,t+3),s=r.length,a=[];if(3>s)for(o=s;3>o;o++)r[o]=0;for(a[0]=(252&r[0])>>2,a[1]=(3&r[0])<<4|r[1]>>4,a[2]=(15&r[1])<<2|(192&r[2])>>6,a[3]=63&r[2],o=0;4>o;o++)n=o<=s?n+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a[o]):n+"="}return n},style:{parse:{_colors:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",windowtext:"windowtext",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},_borderStyle:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),_widthRegExp:/^(thin|medium|thick|[\+-]?\d+(\.\d+)?[a-z%]+|[\+-]?0+(\.0+)?|\.\d+[a-z%]+)$/,_rgbaRegExp:/rgba?\(\s*\d+%?\s*,\s*\d+%?\s*,\s*\d+%?\s*(?:,\s*[0-9.]+\s*)?\)/gi,_hslaRegExp:/hsla?\(\s*[0-9.]+\s*,\s*\d+%\s*,\s*\d+%\s*(?:,\s*[0-9.]+\s*)?\)/gi,background:function(e){var t={},n=this._findColor(e);return n.length&&(t.color=n[0],CKEDITOR.tools.array.forEach(n,(function(t){e=e.replace(t,"")}))),(e=CKEDITOR.tools.trim(e))&&(t.unprocessed=e),t},margin:function(e){return CKEDITOR.tools.style.parse.sideShorthand(e,(function(e){return e.match(/(?:\-?[\.\d]+(?:%|\w*)|auto|inherit|initial|unset|revert)/g)||["0px"]}))},sideShorthand:function(e,t){function n(e){i.top=o[e[0]],i.right=o[e[1]],i.bottom=o[e[2]],i.left=o[e[3]]}var i={},o=t?t(e):e.split(/\s+/);switch(o.length){case 1:n([0,0,0,0]);break;case 2:n([0,1,0,1]);break;case 3:n([0,1,2,1]);break;case 4:n([0,1,2,3])}return i},border:function(e){return CKEDITOR.tools.style.border.fromCssRule(e)},_findColor:function(e){var t=[],n=CKEDITOR.tools.array;return(t=(t=t.concat(e.match(this._rgbaRegExp)||[])).concat(e.match(this._hslaRegExp)||[])).concat(n.filter(e.split(/\s+/),(function(e){return!!e.match(/^\#[a-f0-9]{3}(?:[a-f0-9]{3})?$/gi)||e.toLowerCase()in CKEDITOR.tools.style.parse._colors})))}}},array:{filter:function(e,t,n){var i=[];return this.forEach(e,(function(o,r){t.call(n,o,r,e)&&i.push(o)})),i},find:function(e,t,n){for(var i=e.length,o=0;o<i;){if(t.call(n,e[o],o,e))return e[o];o++}},forEach:function(e,t,n){var i,o=e.length;for(i=0;i<o;i++)t.call(n,e[i],i,e)},map:function(e,t,n){for(var i=[],o=0;o<e.length;o++)i.push(t.call(n,e[o],o,e));return i},reduce:function(e,t,n,i){for(var o=0;o<e.length;o++)n=t.call(i,n,e[o],o,e);return n},every:function(e,t,n){return!e.length||(t=this.filter(e,t,n),e.length===t.length)},some:function(e,t,n){for(var i=0;i<e.length;i++)if(t.call(n,e[i],i,e))return!0;return!1}},object:{DONT_ENUMS:"toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),entries:function(e){return CKEDITOR.tools.array.map(CKEDITOR.tools.object.keys(e),(function(t){return[t,e[t]]}))},values:function(e){return CKEDITOR.tools.array.map(CKEDITOR.tools.object.keys(e),(function(t){return e[t]}))},keys:function(t){var n=Object.prototype.hasOwnProperty,i=[],o=CKEDITOR.tools.object.DONT_ENUMS;if(CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(!t||"object"!==e(t))){if(n=[],"string"==typeof t)for(i=0;i<t.length;i++)n.push(String(i));return n}for(var r in t)i.push(r);if(CKEDITOR.env.ie&&9>CKEDITOR.env.version)for(r=0;r<o.length;r++)n.call(t,o[r])&&i.push(o[r]);return i},findKey:function(t,n){if("object"!==e(t))return null;for(var i in t)if(t[i]===n)return i;return null},merge:function(t,n){var i=CKEDITOR.tools,o=i.clone(t),r=i.clone(n);return i.array.forEach(i.object.keys(r),(function(t){o[t]="object"===e(r[t])&&"object"===e(o[t])?i.object.merge(o[t],r[t]):r[t]})),o}},getAbsoluteRectPosition:function(e,t){var n=CKEDITOR.tools.copy(t);!function e(t){if(t){var i=t.getClientRect();n.top+=i.top,n.left+=i.left,"x"in n&&"y"in n&&(n.x+=i.x,n.y+=i.y),e(t.getWindow().getFrame())}}(e.getFrame());var i=CKEDITOR.document.getWindow().getScrollPosition();return n.top+=i.y,n.left+=i.x,"x"in n&&"y"in n&&(n.y+=i.y,n.x+=i.x),n.right=n.left+n.width,n.bottom=n.top+n.height,n}},t.prototype={reset:function(){this._lastOutput=0,this._clearTimer()},_reschedule:function(){return!1},_call:function(){this._output()},_clearTimer:function(){this._scheduledTimer&&clearTimeout(this._scheduledTimer),this._scheduledTimer=0}},n.prototype=CKEDITOR.tools.prototypedCopy(t.prototype),n.prototype._reschedule=function(){this._scheduledTimer&&this._clearTimer()},n.prototype._call=function(){this._output.apply(this._context,this._args)},CKEDITOR.tools.buffers={},CKEDITOR.tools.buffers.event=t,CKEDITOR.tools.buffers.throttle=n,CKEDITOR.tools.style.border=CKEDITOR.tools.createClass({$:function(e){e=e||{},this.width=e.width,this.style=e.style,this.color=e.color,this._.normalize()},_:{normalizeMap:{color:[[/windowtext/g,"black"]]},normalize:function(){for(var e in this._.normalizeMap){var t=this[e];t&&(this[e]=CKEDITOR.tools.array.reduce(this._.normalizeMap[e],(function(e,t){return e.replace(t[0],t[1])}),t))}}},proto:{toString:function(){return CKEDITOR.tools.array.filter([this.width,this.style,this.color],(function(e){return!!e})).join(" ")}},statics:{fromCssRule:function(e){var t={},n=e.split(/\s+/g);return(e=CKEDITOR.tools.style.parse._findColor(e)).length&&(t.color=e[0]),CKEDITOR.tools.array.forEach(n,(function(e){t.style||-1===CKEDITOR.tools.indexOf(CKEDITOR.tools.style.parse._borderStyle,e)?!t.width&&CKEDITOR.tools.style.parse._widthRegExp.test(e)&&(t.width=e):t.style=e})),new CKEDITOR.tools.style.border(t)},splitCssValues:function(e,t){t=t||{};var n=CKEDITOR.tools.array.reduce(["width","style","color"],(function(n,i){var o=e["border-"+i]||t[i];return n[i]=o?CKEDITOR.tools.style.parse.sideShorthand(o):null,n}),{});return CKEDITOR.tools.array.reduce(["top","right","bottom","left"],(function(t,i){var o,r={};for(o in n){var s=e["border-"+i+"-"+o];r[o]=s||n[o]&&n[o][i]}return t["border-"+i]=new CKEDITOR.tools.style.border(r),t}),{})}}}),CKEDITOR.tools.array.indexOf=CKEDITOR.tools.indexOf,CKEDITOR.tools.array.isArray=CKEDITOR.tools.isArray,CKEDITOR.MOUSE_BUTTON_LEFT=0,CKEDITOR.MOUSE_BUTTON_MIDDLE=1,CKEDITOR.MOUSE_BUTTON_RIGHT=2}(),CKEDITOR.dtd=(i=function(e,t){for(var n=CKEDITOR.tools.clone(e),i=1;i<arguments.length;i++)for(var o in t=arguments[i])delete n[o];return n},r={},s={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},a={command:1,link:1,meta:1,noscript:1,script:1,style:1},l={},u={center:1,dir:1,noframes:1},(n=CKEDITOR.tools.extend)(o={},{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,var:1,video:1,wbr:1},c={"#":1},{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),n(r,s,o,u),i={a:i(o,{a:1,button:1}),abbr:o,address:r,area:l,article:r,aside:r,audio:n({source:1,track:1},r),b:o,base:l,bdi:o,bdo:o,blockquote:r,body:r,br:l,button:i(o,{a:1,button:1}),canvas:o,caption:r,cite:o,code:o,col:l,colgroup:{col:1},command:l,datalist:n({option:1},o),dd:r,del:o,details:n({summary:1},r),dfn:o,div:r,dl:{dt:1,dd:1},dt:r,em:o,embed:l,fieldset:n({legend:1},r),figcaption:r,figure:n({figcaption:1},r),footer:r,form:r,h1:o,h2:o,h3:o,h4:o,h5:o,h6:o,head:n({title:1,base:1},a),header:r,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:l,html:n({head:1,body:1},r,a),i:o,iframe:c,img:l,input:l,ins:o,kbd:o,keygen:l,label:o,legend:o,li:r,link:l,main:r,map:r,mark:o,menu:n({li:1},r),meta:l,meter:i(o,{meter:1}),nav:r,noscript:n({link:1,meta:1,style:1},o),object:n({param:1},o),ol:{li:1},optgroup:{option:1},option:c,output:o,p:o,param:l,pre:o,progress:i(o,{progress:1}),q:o,rp:o,rt:o,ruby:n({rp:1,rt:1},o),s:o,samp:o,script:c,section:r,select:{optgroup:1,option:1},small:o,source:l,span:o,strong:o,style:c,sub:o,summary:n({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},o),sup:o,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:r,textarea:c,tfoot:{tr:1},th:r,thead:{tr:1},time:i(o,{time:1}),title:c,tr:{th:1,td:1},track:l,u:o,ul:{li:1},var:o,video:n({source:1,track:1},r),wbr:l,acronym:o,applet:n({param:1},r),basefont:l,big:o,center:r,dialog:l,dir:{li:1},font:o,isindex:l,noframes:r,strike:o,tt:o},n(i,{$block:n({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},s,u),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:o,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:n({body:1,head:1,html:1},i.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,var:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),i),CKEDITOR.dom.event=function(e){this.$=e},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var e=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&(e+=CKEDITOR.CTRL),this.$.shiftKey&&(e+=CKEDITOR.SHIFT),this.$.altKey&&(e+=CKEDITOR.ALT),e},preventDefault:function(e){var t=this.$;t.preventDefault?t.preventDefault():t.returnValue=!1,e&&this.stopPropagation()},stopPropagation:function(){var e=this.$;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},getTarget:function(){var e=this.$.target||this.$.srcElement;return e?new CKEDITOR.dom.node(e):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var e=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(e.documentElement.scrollLeft||e.body.scrollLeft),y:this.$.pageY||this.$.clientY+(e.documentElement.scrollTop||e.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(e){e&&(this.$=e)},CKEDITOR.dom.domObject.prototype=function(){var e=function(e,t){return function(n){"undefined"!=typeof CKEDITOR&&e.fire(t,new CKEDITOR.dom.event(n))}};return{getPrivate:function(){var e;return(e=this.getCustomData("_"))||this.setCustomData("_",e={}),e},on:function(t){var n=this.getCustomData("_cke_nativeListeners");return n||(n={},this.setCustomData("_cke_nativeListeners",n)),n[t]||(n=n[t]=e(this,t),this.$.addEventListener?this.$.addEventListener(t,n,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+t,n)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(e){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(e)){var t=this.getCustomData("_cke_nativeListeners"),n=t&&t[e];n&&(this.$.removeEventListener?this.$.removeEventListener(e,n,!1):this.$.detachEvent&&this.$.detachEvent("on"+e,n),delete t[e])}},removeAllListeners:function(){try{var e,t=this.getCustomData("_cke_nativeListeners");for(e in t){var n=t[e];this.$.detachEvent?this.$.detachEvent("on"+e,n):this.$.removeEventListener&&this.$.removeEventListener(e,n,!1),delete t[e]}}catch(e){if(!CKEDITOR.env.edge||-2146828218!==e.number)throw e}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}(),function(e){var t={};CKEDITOR.on("reset",(function(){t={}})),e.equals=function(e){try{return e&&e.$===this.$}catch(e){return!1}},e.setCustomData=function(e,n){var i=this.getUniqueId();return(t[i]||(t[i]={}))[e]=n,this},e.getCustomData=function(e){var n=this.$["data-cke-expando"];return(n=n&&t[n])&&e in n?n[e]:null},e.removeCustomData=function(e){var n,i,o;return(n=(n=this.$["data-cke-expando"])&&t[n])&&(i=n[e],o=e in n,delete n[e]),o?i:null},e.clearCustomData=function(){this.removeAllListeners();var e=this.getUniqueId();e&&delete t[e]},e.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(e)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(e){return e?new CKEDITOR.dom[e.nodeType==CKEDITOR.NODE_DOCUMENT?"document":e.nodeType==CKEDITOR.NODE_ELEMENT?"element":e.nodeType==CKEDITOR.NODE_TEXT?"text":e.nodeType==CKEDITOR.NODE_COMMENT?"comment":e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](e):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(e,t){return e.append(this,t),e},clone:function(e,t){var n=this.$.cloneNode(e);return function n(i){if(i["data-cke-expando"]&&(i["data-cke-expando"]=!1),(i.nodeType==CKEDITOR.NODE_ELEMENT||i.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(t||i.nodeType!=CKEDITOR.NODE_ELEMENT||i.removeAttribute("id",!1),e)){i=i.childNodes;for(var o=0;o<i.length;o++)n(i[o])}}(n),n=new CKEDITOR.dom.node(n),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&function t(n){if(n.type==CKEDITOR.NODE_ELEMENT||n.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(n.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var i=n.getName();":"==i[0]&&n.renameNode(i.substring(1))}if(e)for(i=0;i<n.getChildCount();i++)t(n.getChild(i))}}(n),n},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(e){return e.$.parentNode.insertBefore(this.$,e.$.nextSibling),e},insertBefore:function(e){return e.$.parentNode.insertBefore(this.$,e.$),e},insertBeforeMe:function(e){return this.$.parentNode.insertBefore(e.$,this.$),e},getAddress:function(e){for(var t=[],n=this.getDocument().$.documentElement,i=this;i&&i!=n;){var o=i.getParent();o&&t.unshift(this.getIndex.call(i,e)),i=o}return t},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(e){function t(e,n){var i=n?e.getNext():e.getPrevious();return i&&i.type==CKEDITOR.NODE_TEXT?i.isEmpty()?t(i,n):i:null}var n,i=this,o=-1;if(!this.getParent()||e&&i.type==CKEDITOR.NODE_TEXT&&i.isEmpty()&&!t(i)&&!t(i,!0))return-1;do{e&&!i.equals(this)&&i.type==CKEDITOR.NODE_TEXT&&(n||i.isEmpty())||(o++,n=i.type==CKEDITOR.NODE_TEXT)}while(i=i.getPrevious());return o},getNextSourceNode:function(e,t,n){if(n&&!n.call){var i=n;n=function(e){return!e.equals(i)}}var o;if(!(e=!e&&this.getFirst&&this.getFirst())){if(this.type==CKEDITOR.NODE_ELEMENT&&n&&!1===n(this,!0))return null;e=this.getNext()}for(;!e&&(o=(o||this).getParent());){if(n&&!1===n(o,!0))return null;e=o.getNext()}return!e||n&&!1===n(e)?null:t&&t!=e.type?e.getNextSourceNode(!1,t,n):e},getPreviousSourceNode:function(e,t,n){if(n&&!n.call){var i=n;n=function(e){return!e.equals(i)}}var o;if(!(e=!e&&this.getLast&&this.getLast())){if(this.type==CKEDITOR.NODE_ELEMENT&&n&&!1===n(this,!0))return null;e=this.getPrevious()}for(;!e&&(o=(o||this).getParent());){if(n&&!1===n(o,!0))return null;e=o.getPrevious()}return!e||n&&!1===n(e)?null:t&&e.type!=t?e.getPreviousSourceNode(!1,t,n):e},getPrevious:function(e){var t,n=this.$;do{t=(n=n.previousSibling)&&10!=n.nodeType&&new CKEDITOR.dom.node(n)}while(t&&e&&!e(t));return t},getNext:function(e){var t,n=this.$;do{t=(n=n.nextSibling)&&new CKEDITOR.dom.node(n)}while(t&&e&&!e(t));return t},getParent:function(e){var t=this.$.parentNode;return t&&(t.nodeType==CKEDITOR.NODE_ELEMENT||e&&t.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(t):null},getParents:function(e){var t=this,n=[];do{n[e?"push":"unshift"](t)}while(t=t.getParent());return n},getCommonAncestor:function(e){if(e.equals(this))return this;if(e.contains&&e.contains(this))return e;var t=this.contains?this:this.getParent();do{if(t.contains(e))return t}while(t=t.getParent());return null},getPosition:function(e){var t=this.$,n=e.$;if(t.compareDocumentPosition)return t.compareDocumentPosition(n);if(t==n)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&e.type==CKEDITOR.NODE_ELEMENT){if(t.contains){if(t.contains(n))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(n.contains(t))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in t)return 0>t.sourceIndex||0>n.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:t.sourceIndex<n.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}t=this.getAddress(),e=e.getAddress(),n=Math.min(t.length,e.length);for(var i=0;i<n;i++)if(t[i]!=e[i])return t[i]<e[i]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return t.length<e.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(e,t){var n,i,o=this.$;for(t||(o=o.parentNode),"function"==typeof e?(i=!0,n=e):(i=!1,n=function(t){return t="string"==typeof t.nodeName?t.nodeName.toLowerCase():"","string"==typeof e?t==e:t in e});o;){if(n(i?new CKEDITOR.dom.node(o):o))return new CKEDITOR.dom.node(o);try{o=o.parentNode}catch(e){o=null}}return null},hasAscendant:function(e,t){var n=this.$;for(t||(n=n.parentNode);n;){if(n.nodeName&&n.nodeName.toLowerCase()==e)return!0;n=n.parentNode}return!1},move:function(e,t){e.append(this.remove(),t)},remove:function(e){var t=this.$,n=t.parentNode;if(n){if(e)for(;e=t.firstChild;)n.insertBefore(t.removeChild(e),t);n.removeChild(t)}return this},replace:function(e){this.insertBefore(e),e.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var e;this.getFirst&&(e=this.getFirst());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.ltrim(e.getText()),n=e.getLength();if(!t){e.remove();continue}t.length<n&&(e.split(n-t.length),this.$.removeChild(this.$.firstChild))}break}},rtrim:function(){for(var e;this.getLast&&(e=this.getLast());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.rtrim(e.getText()),n=e.getLength();if(!t){e.remove();continue}t.length<n&&(e.split(t.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(e=this.$.lastChild)&&1==e.type&&"br"==e.nodeName.toLowerCase()&&e.parentNode.removeChild(e)},isReadOnly:function(e){var t=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(t=this.getParent()),CKEDITOR.env.edge&&t&&t.is("textarea","input")&&(e=!0),!e&&t&&void 0!==t.$.isContentEditable)return!(t.$.isContentEditable||t.data("cke-editable"));for(;t;){if(t.data("cke-editable"))return!1;if(t.hasAttribute("contenteditable"))return"false"==t.getAttribute("contenteditable");t=t.getParent()}return!0}}),CKEDITOR.dom.window=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var e=this.$.document,t="CSS1Compat"==e.compatMode;return{width:(t?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(t?e.documentElement.clientHeight:e.body.clientHeight)||0}},getScrollPosition:function(){var e=this.$;return"pageXOffset"in e?{x:e.pageXOffset||0,y:e.pageYOffset||0}:{x:(e=e.document).documentElement.scrollLeft||e.body.scrollLeft||0,y:e.documentElement.scrollTop||e.body.scrollTop||0}},getFrame:function(){var e=this.$.frameElement;return e?new CKEDITOR.dom.element.get(e):null}}),CKEDITOR.dom.document=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(e){if(this.$.createStyleSheet)this.$.createStyleSheet(e);else{var t=new CKEDITOR.dom.element("link");t.setAttributes({rel:"stylesheet",type:"text/css",href:e}),this.getHead().append(t)}},appendStyleText:function(e){if(this.$.createStyleSheet){var t=this.$.createStyleSheet("");t.cssText=e}else{var n=new CKEDITOR.dom.element("style",this);n.append(new CKEDITOR.dom.text(e,this)),this.getHead().append(n)}return t||n.$.sheet},createElement:function(e,t){var n=new CKEDITOR.dom.element(e,this);return t&&(t.attributes&&n.setAttributes(t.attributes),t.styles&&n.setStyles(t.styles)),n},createText:function(e){return new CKEDITOR.dom.text(e,this)},focus:function(){this.getWindow().focus()},getActive:function(){var e;try{e=this.$.activeElement}catch(e){return null}return new CKEDITOR.dom.element(e)},getById:function(e){return(e=this.$.getElementById(e))?new CKEDITOR.dom.element(e):null},getByAddress:function(e,t){for(var n=this.$.documentElement,i=0;n&&i<e.length;i++){var o=e[i];if(t)for(var r=-1,s=0;s<n.childNodes.length;s++){var a=n.childNodes[s];if((!0!==t||3!=a.nodeType||!a.previousSibling||3!=a.previousSibling.nodeType)&&++r==o){n=a;break}}else n=n.childNodes[o]}return n?new CKEDITOR.dom.node(n):null},getElementsByTag:function(e,t){return CKEDITOR.env.ie&&8>=document.documentMode||!t||(e=t+":"+e),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(e))},getHead:function(){var e=this.$.getElementsByTagName("head")[0];return e?new CKEDITOR.dom.element(e):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(e){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(e=e.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();<\/script>")),this.$.write(e),this.$.close()},find:function(e){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(e))},findOne:function(e){return(e=this.$.querySelector(e))?new CKEDITOR.dom.element(e):null},_getHtml5ShivFrag:function(){var e=this.getCustomData("html5ShivFrag");return e||(e=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(e,!0),this.setCustomData("html5ShivFrag",e)),e}}),CKEDITOR.dom.nodeList=function(e){this.$=e},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(e){return 0>e||e>=this.$.length?null:(e=this.$[e])?new CKEDITOR.dom.node(e):null},toArray:function(){return CKEDITOR.tools.array.map(this.$,(function(e){return new CKEDITOR.dom.node(e)}))}},CKEDITOR.dom.element=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createElement(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.element.get=function(e){return(e="string"==typeof e?document.getElementById(e)||document.getElementsByName(e)[0]:e)&&(e.$?e:new CKEDITOR.dom.element(e))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(e,t){var n=new CKEDITOR.dom.element("div",t);return n.setHtml(e),n.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(e,t,n,i){var o=t.getCustomData("list_marker_id")||t.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),r=t.getCustomData("list_marker_names")||t.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return e[o]=t,r[n]=1,t.setCustomData(n,i)},CKEDITOR.dom.element.clearAllMarkers=function(e){for(var t in e)CKEDITOR.dom.element.clearMarkers(e,e[t],1)},CKEDITOR.dom.element.clearMarkers=function(e,t,n){var i,o=t.getCustomData("list_marker_names"),r=t.getCustomData("list_marker_id");for(i in o)t.removeCustomData(i);t.removeCustomData("list_marker_names"),n&&(t.removeCustomData("list_marker_id"),delete e[r])},function(){function t(e,t){return-1<(" "+e+" ").replace(s," ").indexOf(" "+t+" ")}function n(e){var t=!0;return e.$.id||(e.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),t=!1),function(){t||e.removeAttribute("id")}}function i(e,t){var n=CKEDITOR.tools.escapeCss(e.$.id);return"#"+n+" "+t.split(/,\s*/).join(", #"+n+" ")}function o(e){for(var t=0,n=0,i=a[e].length;n<i;n++)t+=parseFloat(this.getComputedStyle(a[e][n])||0,10)||0;return t}var r=void 0!==(r=document.createElement("_").classList)&&null!==String(r.add).match(/\[Native code\]/gi),s=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:r?function(e){return this.$.classList.add(e),this}:function(e){var n=this.$.className;return n&&(t(n,e)||(n+=" "+e)),this.$.className=n||e,this},removeClass:r?function(e){var t=this.$;return t.classList.remove(e),t.className||t.removeAttribute("class"),this}:function(e){var n=this.getAttribute("class");return n&&t(n,e)&&((n=n.replace(new RegExp("(?:^|\\s+)"+e+"(?=\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",n):this.removeAttribute("class")),this},hasClass:function(e){return t(this.$.className,e)},append:function(e,t){return"string"==typeof e&&(e=this.getDocument().createElement(e)),t?this.$.insertBefore(e.$,this.$.firstChild):this.$.appendChild(e.$),e},appendHtml:function(e){if(this.$.childNodes.length){var t=new CKEDITOR.dom.element("div",this.getDocument());t.setHtml(e),t.moveChildren(this)}else this.setHtml(e)},appendText:function(e){null!=this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=e:this.append(new CKEDITOR.dom.text(e))},appendBogus:function(e){if(e||CKEDITOR.env.needsBrFiller){for(e=this.getLast();e&&e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(e.getText());)e=e.getPrevious();e&&e.is&&e.is("br")||(e=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&e.setAttribute("type","_moz"),this.append(e))}},breakParent:function(e,t){var n=new CKEDITOR.dom.range(this.getDocument());n.setStartAfter(this),n.setEndAfter(e);var i,o=n.extractContents(!1,t||!1);if(n.insertNode(this.remove()),CKEDITOR.env.ie&&!CKEDITOR.env.edge){for(n=new CKEDITOR.dom.element("div");i=o.getFirst();)i.$.style.backgroundColor&&(i.$.style.backgroundColor=i.$.style.backgroundColor),n.append(i);n.insertAfter(this),n.remove(!0)}else o.insertAfterNode(this)},contains:document.compareDocumentPosition?function(e){return!!(16&this.$.compareDocumentPosition(e.$))}:function(e){var t=this.$;return e.type!=CKEDITOR.NODE_ELEMENT?t.contains(e.getParent().$):t!=e.$&&t.contains(e.$)},focus:function(){function e(){try{this.$.focus()}catch(e){}}return function(t){t?CKEDITOR.tools.setTimeout(e,100,this):e.call(this)}}(),getHtml:function(){var e=this.$.innerHTML;return CKEDITOR.env.ie?e.replace(/<\?[^>]*>/g,""):e},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var e=this.$.ownerDocument.createElement("div");return e.appendChild(this.$.cloneNode(!0)),e.innerHTML},getClientRect:function(e){var t=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!t.width&&(t.width=t.right-t.left),!t.height&&(t.height=t.bottom-t.top),e?CKEDITOR.tools.getAbsoluteRectPosition(this.getWindow(),t):t},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(e){try{var t=this.$;if(this.getParent())return t.innerHTML=e;var n=this.getDocument()._getHtml5ShivFrag();return n.appendChild(t),t.innerHTML=e,n.removeChild(t),e}catch(n){for(this.$.innerHTML="",(t=new CKEDITOR.dom.element("body",this.getDocument())).$.innerHTML=e,t=t.getChildren();t.count();)this.append(t.getItem(0));return e}}:function(e){return this.$.innerHTML=e},setText:function(){var e=document.createElement("p");return e.innerHTML="x",e=e.textContent,function(t){this.$[e?"textContent":"innerText"]=t}}(),getAttribute:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(e){switch(e){case"class":e="className";break;case"http-equiv":e="httpEquiv";break;case"name":return this.$.name;case"tabindex":return 0!==(e=this.$.getAttribute(e,2))&&0===this.$.tabIndex&&(e=null),e;case"checked":return((e=this.$.attributes.getNamedItem(e)).specified?e.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[e];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(e,2)}:function(e){return this.$.getAttribute(e,2)},getAttributes:function(e){var t,n={},i=this.$.attributes;for(e=CKEDITOR.tools.isArray(e)?e:[],t=0;t<i.length;t++)-1===CKEDITOR.tools.indexOf(e,i[t].name)&&(n[i[t].name]=i[t].value);return n},getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getClientSize:function(){return{width:this.$.clientWidth,height:this.$.clientHeight}},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(e){var t=this.getWindow().$.getComputedStyle(this.$,null);return t?t.getPropertyValue(e):""}:function(e){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(e)]},getDtd:function(){var e=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return e},e},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var e=this.$.tabIndex;return 0!==e||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?e:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var e=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var t=this.$.scopeName;"HTML"!=t&&(e=t.toLowerCase()+":"+e)}return this.getName=function(){return e},this.getName()},getValue:function(){return this.$.value},getFirst:function(e){var t=this.$.firstChild;return(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getNext(e)),t},getLast:function(e){var t=this.$.lastChild;return(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getPrevious(e)),t},getStyle:function(e){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]},is:function(){var t=this.getName();if("object"==e(arguments[0]))return!!arguments[0][t];for(var n=0;n<arguments.length;n++)if(arguments[n]==t)return!0;return!1},isEditable:function(e){var t=this.getName();return!(this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[t]||CKEDITOR.dtd.$empty[t]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()||!1!==e&&(!(e=CKEDITOR.dtd[t]||CKEDITOR.dtd.span)||!e["#"]))},isIdentical:function(e){var t=this.clone(0,1);if(e=e.clone(0,1),t.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),e.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),t.$.isEqualNode)return t.$.style.cssText=CKEDITOR.tools.normalizeCssText(t.$.style.cssText),e.$.style.cssText=CKEDITOR.tools.normalizeCssText(e.$.style.cssText),t.$.isEqualNode(e.$);if(t=t.getOuterHtml(),e=e.getOuterHtml(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var n=this.getParent();n.type==CKEDITOR.NODE_ELEMENT&&((n=n.clone()).setHtml(t),t=n.getHtml(),n.setHtml(e),e=n.getHtml())}return t==e},isVisible:function(){var e,t,n=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility");return n&&CKEDITOR.env.webkit&&!(e=this.getWindow()).equals(CKEDITOR.document.getWindow())&&(t=e.$.frameElement)&&(n=new CKEDITOR.dom.element(t).isVisible()),!!n},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var e=this.getChildren(),t=0,n=e.count();t<n;t++){var i=e.getItem(t);if((i.type!=CKEDITOR.NODE_ELEMENT||!i.data("cke-bookmark"))&&(i.type==CKEDITOR.NODE_ELEMENT&&!i.isEmptyInlineRemoveable()||i.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(i.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var e=this.$.attributes,t=0;t<e.length;t++){var n=e[t];switch(n.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(n.specified)return!0}}return!1}:function(){var e=this.$.attributes,t=e.length,n={"data-cke-expando":1,_moz_dirty:1};return 0<t&&(2<t||!n[e[0].nodeName]||2==t&&!n[e[1].nodeName])},hasAttribute:function(){function e(e){var t=this.$.attributes.getNamedItem(e);if("input"==this.getName())switch(e){case"class":return 0<this.$.className.length;case"checked":return!!this.$.checked;case"value":return"checkbox"==(e=this.getAttribute("type"))||"radio"==e?"on"!=this.$.value:!!this.$.value}return!!t&&t.specified}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(t){return"name"==t?!!this.$.name:e.call(this,t)}:e:function(e){return!!this.$.attributes.getNamedItem(e)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(e,t){var n,i=this.$;if(i!=(e=e.$))if(t)for(;n=i.lastChild;)e.insertBefore(i.removeChild(n),e.firstChild);else for(;n=i.firstChild;)e.appendChild(i.removeChild(n))},mergeSiblings:function(){function e(e,t,n){if(t&&t.type==CKEDITOR.NODE_ELEMENT){for(var i=[];t.data("cke-bookmark")||t.isEmptyInlineRemoveable();)if(i.push(t),!(t=n?t.getNext():t.getPrevious())||t.type!=CKEDITOR.NODE_ELEMENT)return;if(e.isIdentical(t)){for(var o=n?e.getLast():e.getFirst();i.length;)i.shift().move(e,!n);t.moveChildren(e,!n),t.remove(),o&&o.type==CKEDITOR.NODE_ELEMENT&&o.mergeSiblings()}}}return function(t){(!1===t||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(e(this,this.getNext(),!0),e(this,this.getPrevious()))}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var e=function(e,t){return this.$.setAttribute(e,t),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(t,n){return"class"==t?this.$.className=n:"style"==t?this.$.style.cssText=n:"tabindex"==t?this.$.tabIndex=n:"checked"==t?this.$.checked=n:"contenteditable"==t?e.call(this,"contentEditable",n):e.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(t,n){if("src"==t&&n.match(/^http:\/\//))try{e.apply(this,arguments)}catch(e){}else e.apply(this,arguments);return this}:e}(),setAttributes:function(e){for(var t in e)this.setAttribute(t,e[t]);return this},setValue:function(e){return this.$.value=e,this},removeAttribute:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(e){"class"==e?e="className":"tabindex"==e?e="tabIndex":"contenteditable"==e&&(e="contentEditable"),this.$.removeAttribute(e)}:function(e){this.$.removeAttribute(e)},removeAttributes:function(e){if(CKEDITOR.tools.isArray(e))for(var t=0;t<e.length;t++)this.removeAttribute(e[t]);else for(t in e=e||this.getAttributes())e.hasOwnProperty(t)&&this.removeAttribute(t)},removeStyle:function(e){if((i=this.$.style).removeProperty||"border"!=e&&"margin"!=e&&"padding"!=e)i.removeProperty?i.removeProperty(e):i.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(e)),this.$.style.cssText||this.removeAttribute("style");else{var t,n=["top","left","right","bottom"];"border"==e&&(t=["color","style","width"]);for(var i=[],o=0;o<n.length;o++)if(t)for(var r=0;r<t.length;r++)i.push([e,n[o],t[r]].join("-"));else i.push([e,n[o]].join("-"));for(e=0;e<i.length;e++)this.removeStyle(i[e])}},setStyle:function(e,t){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]=t,this},setStyles:function(e){for(var t in e)this.setStyle(t,e[t]);return this},setOpacity:function(e){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(e=Math.round(100*e),this.setStyle("filter",100<=e?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+e+")")):this.setStyle("opacity",e)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var e=this.getElementsByTag("*"),t=0,n=e.count();t<n;t++)e.getItem(t).setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var e=this;"html"!=e.getName();){if("static"!=e.getComputedStyle("position"))return e;e=e.getParent()}return null},getDocumentPosition:function(e){var t=0,n=0,i=this.getDocument(),o=i.getBody(),r="BackCompat"==i.$.compatMode;if(!document.documentElement.getBoundingClientRect||CKEDITOR.env.ie&&8===CKEDITOR.env.version)for(l=this,c=null;l&&"body"!=l.getName()&&"html"!=l.getName();){for(t+=l.$.offsetLeft-l.$.scrollLeft,n+=l.$.offsetTop-l.$.scrollTop,l.equals(this)||(t+=l.$.clientLeft||0,n+=l.$.clientTop||0);c&&!c.equals(l);)t-=c.$.scrollLeft,n-=c.$.scrollTop,c=c.getParent();c=l,l=(s=l.$.offsetParent)?new CKEDITOR.dom.element(s):null}else{var s=this.$.getBoundingClientRect(),a=i.$.documentElement,l=a.clientTop||o.$.clientTop||0,c=a.clientLeft||o.$.clientLeft||0,u=!0;CKEDITOR.env.ie&&(u=i.getDocumentElement().contains(this),i=i.getBody().contains(this),u=r&&i||!r&&u),u&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(t=o.$.scrollLeft||a.scrollLeft,n=o.$.scrollTop||a.scrollTop):(t=(n=r?o.$:a).scrollLeft,n=n.scrollTop),t=s.left+t-c,n=s.top+n-l)}return e&&(s=this.getWindow(),l=e.getWindow(),!s.equals(l)&&s.$.frameElement&&(t+=(e=new CKEDITOR.dom.element(s.$.frameElement).getDocumentPosition(e)).x,n+=e.y)),document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||r||(t+=this.$.clientLeft?1:0,n+=this.$.clientTop?1:0),{x:t,y:n}},scrollIntoView:function(e){var t=this.getParent();if(t)do{if((t.$.clientWidth&&t.$.clientWidth<t.$.scrollWidth||t.$.clientHeight&&t.$.clientHeight<t.$.scrollHeight)&&!t.is("body")&&this.scrollIntoParent(t,e,1),t.is("html")){var n=t.getWindow();try{var i=n.$.frameElement;i&&(t=new CKEDITOR.dom.element(i))}catch(e){}}}while(t=t.getParent())},scrollIntoParent:function(e,t,n){var i,o,r,s;function a(t,n){/body|html/.test(e.getName())?e.getWindow().$.scrollBy(t,n):(e.$.scrollLeft+=t,e.$.scrollTop+=n)}function l(e,t){var n={x:0,y:0};if(!e.is(u?"body":"html")){var i=e.$.getBoundingClientRect();n.x=i.left,n.y=i.top}return(i=e.getWindow()).equals(t)||(i=l(CKEDITOR.dom.element.get(i.$.frameElement),t),n.x+=i.x,n.y+=i.y),n}function c(e,t){return parseInt(e.getComputedStyle("margin-"+t)||0,10)||0}!e&&(e=this.getWindow());var u="BackCompat"==(r=e.getDocument()).$.compatMode;e instanceof CKEDITOR.dom.window&&(e=u?r.getBody():r.getDocumentElement()),CKEDITOR.env.webkit&&(r=this.getEditor(!1))&&(r._.previousScrollTop=null),o=l(this,r=e.getWindow());var d=l(e,r),h=this.$.offsetHeight;i=this.$.offsetWidth;var f=e.$.clientHeight,p=e.$.clientWidth;r=o.x-c(this,"left")-d.x||0,s=o.y-c(this,"top")-d.y||0,i=o.x+i+c(this,"right")-(d.x+p)||0,o=o.y+h+c(this,"bottom")-(d.y+f)||0,(0>s||0<o)&&a(0,!0===t?s:!1===t?o:0>s?s:o),n&&(0>r||0<i)&&a(0>r?r:i,0)},setState:function(e,t,n){switch(t=t||"cke",e){case CKEDITOR.TRISTATE_ON:this.addClass(t+"_on"),this.removeClass(t+"_off"),this.removeClass(t+"_disabled"),n&&this.setAttribute("aria-pressed",!0),n&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(t+"_disabled"),this.removeClass(t+"_off"),this.removeClass(t+"_on"),n&&this.setAttribute("aria-disabled",!0),n&&this.removeAttribute("aria-pressed");break;default:this.addClass(t+"_off"),this.removeClass(t+"_on"),this.removeClass(t+"_disabled"),n&&this.removeAttribute("aria-pressed"),n&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var e=this.$;try{e.contentWindow.document}catch(t){e.src=e.src}return e&&new CKEDITOR.dom.document(e.contentWindow.document)},copyAttributes:function(e,t){var n=this.$.attributes;t=t||{};for(var i=0;i<n.length;i++){var o,r=n[i],s=r.nodeName.toLowerCase();s in t||("checked"==s&&(o=this.getAttribute(s))?e.setAttribute(s,o):CKEDITOR.env.ie&&!this.hasAttribute(s)||(null===(o=this.getAttribute(s))&&(o=r.nodeValue),e.setAttribute(s,o)))}""!==this.$.style.cssText&&(e.$.style.cssText=this.$.style.cssText)},renameNode:function(e){if(this.getName()!=e){var t=this.getDocument();e=new CKEDITOR.dom.element(e,t),this.copyAttributes(e),this.moveChildren(e),this.getParent(!0)&&this.$.parentNode.replaceChild(e.$,this.$),e.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=e.$,delete this.getName}},getChild:function(){function e(e,t){var n=e.childNodes;if(0<=t&&t<n.length)return n[t]}return function(t){var n=this.$;if(t.slice)for(t=t.slice();0<t.length&&n;)n=e(n,t.shift());else n=e(n,t);return n?new CKEDITOR.dom.node(n):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function e(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_enable_context_menu")}this.on("contextmenu",(function(t){t.data.getTarget().getAscendant(e,!0)||t.data.preventDefault()}))},getDirection:function(e){return e?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(e,t){return e="data-"+e,void 0===t?this.getAttribute(e):(!1===t?this.removeAttribute(e):this.setAttribute(e,t),null)},getEditor:function(e){var t,n,i,o=CKEDITOR.instances;for(t in e=e||void 0===e,o)if((n=o[t]).element.equals(this)&&n.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||!e&&(i=n.editable())&&(i.equals(this)||i.contains(this)))return n;return null},find:function(e){var t=n(this);return e=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(i(this,e))),t(),e},findOne:function(e){var t=n(this);return e=this.$.querySelector(i(this,e)),t(),e?new CKEDITOR.dom.element(e):null},forEach:function(e,t,n){if(!(n||t&&this.type!=t))var i=e(this);if(!1!==i){n=this.getChildren();for(var o=0;o<n.count();o++)(i=n.getItem(o)).type==CKEDITOR.NODE_ELEMENT?i.forEach(e,t):t&&i.type!=t||e(i)}},fireEventHandler:function(e,t){var n="on"+e,i=this.$;if(CKEDITOR.env.ie&&9>CKEDITOR.env.version){var o,r=i.ownerDocument.createEventObject();for(o in t)r[o]=t[o];i.fireEvent(n,r)}else i[i[e]?e:n](t)},isDetached:function(){var e=this.getDocument(),t=e.getDocumentElement();return!t.equals(this)&&!t.contains(this)||(!CKEDITOR.env.ie||8<CKEDITOR.env.version&&!CKEDITOR.env.quirks)&&!e.$.defaultView}});var a={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(e,t,n){"number"==typeof t&&(!n||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(t-=o.call(this,e)),this.setStyle(e,t+"px"))},CKEDITOR.dom.element.prototype.getSize=function(e,t){var n=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(e)],this.$["client"+CKEDITOR.tools.capitalize(e)])||0;return t&&(n-=o.call(this,e)),n}}(),CKEDITOR.dom.documentFragment=function(e){e=e||CKEDITOR.document,this.$=e.type==CKEDITOR.NODE_DOCUMENT?e.$.createDocumentFragment():e},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(e){(e=e.$).parentNode.insertBefore(this.$,e.nextSibling)},getHtml:function(){var e=new CKEDITOR.dom.element("div");return this.clone(1,1).appendTo(e),e.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.document.prototype,!0,{find:1,findOne:1}),function(){function e(e,t){var n=this.range;if(this._.end)return null;if(!this._.start){if(this._.start=1,n.collapsed)return this.end(),null;n.optimize()}var i,o=n.startContainer;i=n.endContainer;var r,s=n.startOffset,a=n.endOffset,l=this.guard,c=this.type,u=e?"getPreviousSourceNode":"getNextSourceNode";if(!e&&!this._.guardLTR){var d=i.type==CKEDITOR.NODE_ELEMENT?i:i.getParent(),h=i.type==CKEDITOR.NODE_ELEMENT?i.getChild(a):i.getNext();this._.guardLTR=function(e,t){return!(t&&d.equals(e)||h&&e.equals(h)||e.type==CKEDITOR.NODE_ELEMENT&&t&&e.equals(n.root))}}if(e&&!this._.guardRTL){var f=o.type==CKEDITOR.NODE_ELEMENT?o:o.getParent(),p=o.type==CKEDITOR.NODE_ELEMENT?s?o.getChild(s-1):null:o.getPrevious();this._.guardRTL=function(e,t){return!(t&&f.equals(e)||p&&e.equals(p)||e.type==CKEDITOR.NODE_ELEMENT&&t&&e.equals(n.root))}}var g=e?this._.guardRTL:this._.guardLTR;for(r=l?function(e,t){return!1!==g(e,t)&&l(e,t)}:g,this.current?i=this.current[u](!1,c,r):(e?i.type==CKEDITOR.NODE_ELEMENT&&(i=0<a?i.getChild(a-1):!1===r(i,!0)?null:i.getPreviousSourceNode(!0,c,r)):(i=o).type==CKEDITOR.NODE_ELEMENT&&((i=i.getChild(s))||(i=!1===r(o,!0)?null:o.getNextSourceNode(!0,c,r))),i&&!1===r(i)&&(i=null));i&&!this._.end;){if(this.current=i,this.evaluator&&!1===this.evaluator(i)){if(t&&this.evaluator)return!1}else if(!t)return i;i=i[u](!1,c,r)}return this.end(),this.current=null}function t(t){for(var n,i=null;n=e.call(this,t);)i=n;return i}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(e){this.range=e,this._={}},proto:{end:function(){this._.end=1},next:function(){return e.call(this)},previous:function(){return e.call(this,1)},checkForward:function(){return!1!==e.call(this,0,1)},checkBackward:function(){return!1!==e.call(this,1,1)},lastForward:function(){return t.call(this)},lastBackward:function(){return t.call(this,1)},reset:function(){delete this.current,this._={}}}});var n={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},i={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(e){return!("none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in i||!n[this.getComputedStyle("display")])||!!(this.is(CKEDITOR.dtd.$block)||e&&this.is(e))},CKEDITOR.dom.walker.blockBoundary=function(e){return function(t){return!(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary(e))}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(e,t){function n(e){return e&&e.getName&&"span"==e.getName()&&e.data("cke-bookmark")}return function(i){var o,r;return o=i&&i.type!=CKEDITOR.NODE_ELEMENT&&(r=i.getParent())&&n(r),o=e?o:o||n(i),!!(t^o)}},CKEDITOR.dom.walker.whitespaces=function(e){return function(t){var n;return t&&t.type==CKEDITOR.NODE_TEXT&&(n=!CKEDITOR.tools.trim(t.getText())||CKEDITOR.env.webkit&&t.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE),!!(e^n)}},CKEDITOR.dom.walker.invisible=function(e){var t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.env.webkit?1:0;return function(i){return t(i)?i=1:(i.type==CKEDITOR.NODE_TEXT&&(i=i.getParent()),i=i.$.offsetWidth<=n),!!(e^i)}},CKEDITOR.dom.walker.nodeType=function(e,t){return function(n){return!!(t^n.type==e)}},CKEDITOR.dom.walker.bogus=function(e){function t(e){return!r(e)&&!s(e)}return function(n){var i=CKEDITOR.env.needsBrFiller?n.is&&n.is("br"):n.getText&&o.test(n.getText());return i&&(i=n.getParent(),n=n.getNext(t),i=i.isBlockBoundary()&&(!n||n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary())),!!(e^i)}},CKEDITOR.dom.walker.temp=function(e){return function(t){return t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent()),t=t&&t.hasAttribute("data-cke-temp"),!!(e^t)}};var o=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,r=CKEDITOR.dom.walker.whitespaces(),s=CKEDITOR.dom.walker.bookmark(),a=CKEDITOR.dom.walker.temp(),l=function(e){return s(e)||r(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.is(CKEDITOR.dtd.$inline)&&!e.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=function(e){return function(t){return t=r(t)||s(t)||a(t),!!(e^t)}};var c=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(e){return function(t){for(var n=0,i=t.getChildCount();n<i;++n)if(!c(t.getChild(n)))return!!e;return!e}};var u=CKEDITOR.dom.walker.empty(),d=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(e){var t,n={};for(t in e)CKEDITOR.dtd[t]["#"]&&(n[t]=1);return n}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(e){return function(t){return t=!c(t)&&!!(t.type==CKEDITOR.NODE_TEXT||t.type==CKEDITOR.NODE_ELEMENT&&(t.is(CKEDITOR.dtd.$inline)||t.is("hr")||"false"==t.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&t.is(d)&&u(t))),!!(e^t)}},CKEDITOR.dom.element.prototype.getBogus=function(){var e=this;do{e=e.getPreviousSourceNode()}while(l(e));return!(!e||!(CKEDITOR.env.needsBrFiller?e.is&&e.is("br"):e.getText&&o.test(e.getText())))&&e}}(),CKEDITOR.dom.range=function(e){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var t=e instanceof CKEDITOR.dom.document;this.document=t?e:e.getDocument(),this.root=t?e.getBody():e},function(){function e(e){e.collapsed=e.startContainer&&e.endContainer&&e.startContainer.equals(e.endContainer)&&e.startOffset==e.endOffset}function t(e,t,n,i,o){function r(e,t,n,i){var r=n?e.getPrevious():e.getNext();return i&&s||(l||i?t.append(e.clone(!0,o),n):(e.remove(),a&&t.append(e,n))),r}e.optimizeBookmark();var s=0===t,a=1==t,l=2==t;t=l||a;var c,u,d,h,f,p,g=e.startContainer,m=e.endContainer,E=e.startOffset,T=e.endOffset;if(l&&m.type==CKEDITOR.NODE_TEXT&&(g.equals(m)||g.type===CKEDITOR.NODE_ELEMENT&&g.getFirst().equals(m)))n.append(e.document.createText(m.substring(E,T)));else{m.type==CKEDITOR.NODE_TEXT?l?p=!0:m=m.split(T):0<m.getChildCount()?T>=m.getChildCount()?(m=m.getChild(T-1),u=!0):m=m.getChild(T):h=u=!0,g.type==CKEDITOR.NODE_TEXT?l?f=!0:g.split(E):0<g.getChildCount()?0===E?(g=g.getChild(E),c=!0):g=g.getChild(E-1):d=c=!0;for(var C,v,I,D=g.getParents(),O=m.getParents(),b=function(){var e,t,n,i=Math.min(D.length,O.length);for(e=0;e<i;e++)if(t=D[e],n=O[e],!t.equals(n))return e;return e-1}(),y=D.length-1,R=O.length-1,_=n,K=-1,k=b;k<=y;k++){for(I=(v=D[k]).getNext(),k!=y||v.equals(O[k])&&y<R?t&&(C=_.append(v.clone(0,o))):c?r(v,_,!1,d):f&&_.append(e.document.createText(v.substring(E)));I;){if(I.equals(O[k])){K=k;break}I=r(I,_)}_=C}for(_=n,k=b;k<=R;k++)if(I=(n=O[k]).getPrevious(),n.equals(D[k]))t&&(_=_.getChild(0));else{if(k!=R||n.equals(D[k])&&R<y?t&&(C=_.append(n.clone(0,o))):u?r(n,_,!1,h):p&&_.append(e.document.createText(n.substring(0,T))),k>K)for(;I;)I=r(I,_,!0);_=C}l||function(){var t=b-1,n=d&&h&&!g.equals(m);t<y-1||t<R-1||n?(n?e.moveToPosition(m,CKEDITOR.POSITION_BEFORE_START):R==t+1&&u?e.moveToPosition(O[t],CKEDITOR.POSITION_BEFORE_END):e.moveToPosition(O[t+1],CKEDITOR.POSITION_BEFORE_START),i&&(t=D[t+1])&&t.type==CKEDITOR.NODE_ELEMENT&&((n=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',e.document)).insertAfter(t),t.mergeSiblings(!1),e.moveToBookmark({startNode:n}))):e.collapse(!0)}()}}function n(){var e=!1,t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(!0),i=CKEDITOR.dom.walker.bogus();return function(r){return!(!n(r)&&!t(r))||(i(r)&&!e?e=!0:!(r.type==CKEDITOR.NODE_TEXT&&(r.hasAscendant("pre")||CKEDITOR.tools.trim(r.getText()).length)||r.type==CKEDITOR.NODE_ELEMENT&&!r.is(o)))}}function i(e){return function(){var t;return this[e?"getPreviousNode":"getNextNode"]((function(e){return!t&&l(e)&&(t=e),a(e)&&!(r(e)&&e.equals(t))}))}}var o={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1},r=CKEDITOR.dom.walker.bogus(),s=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,a=CKEDITOR.dom.walker.editable(),l=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var e=new CKEDITOR.dom.range(this.root);return e._setStartContainer(this.startContainer),e.startOffset=this.startOffset,e._setEndContainer(this.endContainer),e.endOffset=this.endOffset,e.collapsed=this.collapsed,e},collapse:function(e){e?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(e){var n=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||t(this,2,n,!1,void 0===e||e),n},deleteContents:function(e){this.collapsed||t(this,0,null,e)},extractContents:function(e,n){var i=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||t(this,1,i,e,void 0===n||n),i},equals:function(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset&&this.startContainer.equals(e.startContainer)&&this.endContainer.equals(e.endContainer)},createBookmark:function(e){function t(e){return e.getAscendant((function(e){var t;return(t=e.data&&e.data("cke-temp"))&&(t=-1===CKEDITOR.tools.array.indexOf(["cke_copybin","cke_pastebin"],e.getAttribute("id"))),t}),!0)}var n,i,o,r,s=this.startContainer,a=this.endContainer,l=this.collapsed;return(n=this.document.createElement("span")).data("cke-bookmark",1),n.setStyle("display","none"),n.setHtml("&nbsp;"),e&&(o="cke_bm_"+CKEDITOR.tools.getNextNumber(),n.setAttribute("id",o+(l?"C":"S"))),l||((i=n.clone()).setHtml("&nbsp;"),e&&i.setAttribute("id",o+"E"),r=this.clone(),t(a)&&(a=t(a),r.moveToPosition(a,CKEDITOR.POSITION_AFTER_END)),r.collapse(),r.insertNode(i)),r=this.clone(),t(s)&&(a=t(s),r.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START)),r.collapse(!0),r.insertNode(n),i?(this.setStartAfter(n),this.setEndBefore(i)):this.moveToPosition(n,CKEDITOR.POSITION_AFTER_END),{startNode:e?o+(l?"C":"S"):n,endNode:e?o+"E":i,serializable:e,collapsed:l}},createBookmark2:function(){function e(e){var t,i=e.container,o=e.offset,r=o;if((t=(t=i).type!=CKEDITOR.NODE_ELEMENT||0===r||r==t.getChildCount()?0:t.getChild(r-1).type==CKEDITOR.NODE_TEXT&&t.getChild(r).type==CKEDITOR.NODE_TEXT)&&(o=(i=i.getChild(o-1)).getLength()),i.type==CKEDITOR.NODE_ELEMENT&&0<o){e:{for(t=i;o--;)if(0<=(r=t.getChild(o).getIndex(!0))){o=r;break e}o=-1}o+=1}if(i.type==CKEDITOR.NODE_TEXT){for(t=i,r=0;(t=t.getPrevious())&&t.type==CKEDITOR.NODE_TEXT;)r+=t.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length;t=r,i.isEmpty()?(r=i.getPrevious(n),t?(o=t,i=r?r.getNext():i.getParent().getFirst()):(i=i.getParent(),o=r?r.getIndex(!0)+1:0)):o+=t}e.container=i,e.offset=o}function t(e,t){var n=t.getCustomData("cke-fillingChar");if(n){var i=e.container;n.equals(i)&&(e.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=e.offset&&(e.offset=i.getIndex(),e.container=i.getParent()))}}var n=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(n){var i=this.collapsed,o={container:this.startContainer,offset:this.startOffset},r={container:this.endContainer,offset:this.endOffset};return n&&(e(o),t(o,this.root),i||(e(r),t(r,this.root))),{start:o.container.getAddress(n),end:i?null:r.container.getAddress(n),startOffset:o.offset,endOffset:r.offset,normalized:n,collapsed:i,is2:!0}}}(),moveToBookmark:function(e){if(e.is2){var t=this.document.getByAddress(e.start,e.normalized),n=e.startOffset,i=e.end&&this.document.getByAddress(e.end,e.normalized);e=e.endOffset,this.setStart(t,n),i?this.setEnd(i,e):this.collapse(!0)}else t=(n=e.serializable)?this.document.getById(e.startNode):e.startNode,e=n?this.document.getById(e.endNode):e.endNode,this.setStartBefore(t),t.remove(),e?(this.setEndBefore(e),e.remove()):this.collapse(!0)},getBoundaryNodes:function(){var e,t=this.startContainer,n=this.endContainer,i=this.startOffset,o=this.endOffset;if(t.type==CKEDITOR.NODE_ELEMENT)if((e=t.getChildCount())>i)t=t.getChild(i);else if(1>e)t=t.getPreviousSourceNode();else{for(t=t.$;t.lastChild;)t=t.lastChild;t=(t=new CKEDITOR.dom.node(t)).getNextSourceNode()||t}if(n.type==CKEDITOR.NODE_ELEMENT)if((e=n.getChildCount())>o)n=n.getChild(o).getPreviousSourceNode(!0);else if(1>e)n=n.getPreviousSourceNode();else{for(n=n.$;n.lastChild;)n=n.lastChild;n=new CKEDITOR.dom.node(n)}return t.getPosition(n)&CKEDITOR.POSITION_FOLLOWING&&(t=n),{startNode:t,endNode:n}},getCommonAncestor:function(e,t){var n=this.startContainer,i=this.endContainer;return n=n.equals(i)?e&&n.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?n.getChild(this.startOffset):n:n.getCommonAncestor(i),t&&!n.is?n.getParent():n},optimize:function(){var e=this.startContainer,t=this.startOffset;e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setStartAfter(e):this.setStartBefore(e)),e=this.endContainer,t=this.endOffset,e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setEndAfter(e):this.setEndBefore(e))},optimizeBookmark:function(){var e=this.startContainer,t=this.endContainer;e.is&&e.is("span")&&e.data("cke-bookmark")&&this.setStartAt(e,CKEDITOR.POSITION_BEFORE_START),t&&t.is&&t.is("span")&&t.data("cke-bookmark")&&this.setEndAt(t,CKEDITOR.POSITION_AFTER_END)},trim:function(e,t){var n=this.startContainer,i=this.startOffset,o=this.collapsed;if((!e||o)&&n&&n.type==CKEDITOR.NODE_TEXT){if(i)if(i>=n.getLength())i=n.getIndex()+1,n=n.getParent();else{var r=n.split(i);i=n.getIndex()+1,n=n.getParent(),this.startContainer.equals(this.endContainer)?this.setEnd(r,this.endOffset-this.startOffset):n.equals(this.endContainer)&&(this.endOffset+=1)}else i=n.getIndex(),n=n.getParent();if(this.setStart(n,i),o)return void this.collapse(!0)}n=this.endContainer,i=this.endOffset,t||o||!n||n.type!=CKEDITOR.NODE_TEXT||(i?(i>=n.getLength()||n.split(i),i=n.getIndex()+1):i=n.getIndex(),n=n.getParent(),this.setEnd(n,i))},enlarge:function(e,t){function n(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("contenteditable")?null:e}var i=new RegExp(/[^\s\ufeff]/);switch(e){case CKEDITOR.ENLARGE_INLINE:var o=1;case CKEDITOR.ENLARGE_ELEMENT:var r=function(e,t){var n,o;for((n=new CKEDITOR.dom.range(p)).setStart(e,t),n.setEndAt(p,CKEDITOR.POSITION_BEFORE_END),(n=new CKEDITOR.dom.walker(n)).guard=function(e){return!(e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary())};o=n.next();){if(o.type!=CKEDITOR.NODE_TEXT)return!1;if(h=o!=e?o.getText():o.substring(t),i.test(h))return!1}return!0};if(this.collapsed)break;var s,a,l,c,u,d,h,f=this.getCommonAncestor(),p=this.root,g=!1;d=this.startContainer;var m=this.startOffset;for(d.type==CKEDITOR.NODE_TEXT?(m&&(g=!!(d=!CKEDITOR.tools.trim(d.substring(0,m)).length&&d)),d&&((c=d.getPrevious())||(l=d.getParent()))):(m&&(c=d.getChild(m-1)||d.getLast()),c||(l=d)),l=n(l);l||c;){if(l&&!c){if(!u&&l.equals(f)&&(u=!0),o?l.isBlockBoundary():!p.contains(l))break;g&&"inline"==l.getComputedStyle("display")||(g=!1,u?s=l:this.setStartBefore(l)),c=l.getPrevious()}for(;c;)if(d=!1,c.type==CKEDITOR.NODE_COMMENT)c=c.getPrevious();else{if(c.type==CKEDITOR.NODE_TEXT)h=c.getText(),i.test(h)&&(c=null),d=/[\s\ufeff]$/.test(h);else if((c.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||t&&c.is("br"))&&!c.data("cke-bookmark"))if(g&&CKEDITOR.dtd.$removeEmpty[c.getName()]){if(h=c.getText(),i.test(h))c=null;else{m=c.$.getElementsByTagName("*");for(var E,T=0;E=m[T++];)if(!CKEDITOR.dtd.$removeEmpty[E.nodeName.toLowerCase()]){c=null;break}}c&&(d=!!h.length)}else c=null;if(d&&(g?u?s=l:l&&this.setStartBefore(l):g=!0),c){if(d=c.getPrevious(),!l&&!d){l=c,c=null;break}c=d}else l=null}l&&(l=n(l.getParent()))}for(d=this.endContainer,m=this.endOffset,l=c=null,u=g=!1,d.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(d.substring(m)).length?g=!0:(g=!d.getLength(),m==d.getLength()?(c=d.getNext())||(l=d.getParent()):r(d,m)&&(l=d.getParent())):(c=d.getChild(m))||(l=d);l||c;){if(l&&!c){if(!u&&l.equals(f)&&(u=!0),o?l.isBlockBoundary():!p.contains(l))break;g&&"inline"==l.getComputedStyle("display")||(g=!1,u?a=l:l&&this.setEndAfter(l)),c=l.getNext()}for(;c;){if(d=!1,c.type==CKEDITOR.NODE_TEXT)h=c.getText(),r(c,0)||(c=null),d=/^[\s\ufeff]/.test(h);else if(c.type==CKEDITOR.NODE_ELEMENT){if((0<c.$.offsetWidth||t&&c.is("br"))&&!c.data("cke-bookmark"))if(g&&CKEDITOR.dtd.$removeEmpty[c.getName()]){if(h=c.getText(),i.test(h))c=null;else for(m=c.$.getElementsByTagName("*"),T=0;E=m[T++];)if(!CKEDITOR.dtd.$removeEmpty[E.nodeName.toLowerCase()]){c=null;break}c&&(d=!!h.length)}else c=null}else d=1;if(d&&g&&(u?a=l:this.setEndAfter(l)),c){if(d=c.getNext(),!l&&!d){l=c,c=null;break}c=d}else l=null}l&&(l=n(l.getParent()))}s&&a&&(f=s.contains(a)?a:s,this.setStartBefore(f),this.setEndAfter(f));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:l=new CKEDITOR.dom.range(this.root),p=this.root,l.setStartAt(p,CKEDITOR.POSITION_AFTER_START),l.setEnd(this.startContainer,this.startOffset),l=new CKEDITOR.dom.walker(l);var C,v,I=CKEDITOR.dom.walker.blockBoundary(e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),D=null,O=function(e){if(e.type==CKEDITOR.NODE_ELEMENT&&"false"==e.getAttribute("contenteditable"))if(D){if(D.equals(e))return void(D=null)}else D=e;else if(D)return;var t=I(e);return t||(C=e),t};if(o=function(e){var t=O(e);return!t&&e.is&&e.is("br")&&(v=e),t},l.guard=O,l=l.lastBackward(),C=C||p,this.setStartAt(C,!C.is("br")&&(!l&&this.checkStartOfBlock()||l&&C.contains(l))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){l=this.clone(),l=new CKEDITOR.dom.walker(l);var b=CKEDITOR.dom.walker.whitespaces(),y=CKEDITOR.dom.walker.bookmark();if(l.evaluator=function(e){return!b(e)&&!y(e)},(l=l.previous())&&l.type==CKEDITOR.NODE_ELEMENT&&l.is("br"))break}(l=this.clone()).collapse(),l.setEndAt(p,CKEDITOR.POSITION_BEFORE_END),(l=new CKEDITOR.dom.walker(l)).guard=e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?o:O,C=D=v=null,l=l.lastForward(),C=C||p,this.setEndAt(C,!l&&this.checkEndOfBlock()||l&&C.contains(l)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),v&&this.setEndAfter(v)}},shrink:function(e,t,n){var i="boolean"==typeof n?n:!n||"boolean"!=typeof n.shrinkOnBlockBoundary||n.shrinkOnBlockBoundary,o=n&&n.skipBogus;if(!this.collapsed){e=e||CKEDITOR.SHRINK_TEXT;var r=this.clone(),s=this.startContainer,a=this.endContainer,l=this.startOffset,c=this.endOffset,u=n=1;s&&s.type==CKEDITOR.NODE_TEXT&&(l?l>=s.getLength()?r.setStartAfter(s):(r.setStartBefore(s),n=0):r.setStartBefore(s)),a&&a.type==CKEDITOR.NODE_TEXT&&(c?c>=a.getLength()?r.setEndAfter(a):(r.setEndAfter(a),u=0):r.setEndBefore(a)),r=new CKEDITOR.dom.walker(r);var d,h=CKEDITOR.dom.walker.bookmark(),f=CKEDITOR.dom.walker.bogus();return r.evaluator=function(t){return t.type==(e==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)},r.guard=function(t,n){return!!(o&&f(t)||h(t))||!(e==CKEDITOR.SHRINK_ELEMENT&&t.type==CKEDITOR.NODE_TEXT||n&&t.equals(d)||!1===i&&t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()||t.type==CKEDITOR.NODE_ELEMENT&&t.hasAttribute("contenteditable"))&&(n||t.type!=CKEDITOR.NODE_ELEMENT||(d=t),!0)},n&&(s=r[e==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(s,t?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),u&&(r.reset(),(r=r[e==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(r,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!(!n&&!u)}},insertNode:function(e){this.optimizeBookmark(),this.trim(!1,!0);var t=this.startContainer,n=t.getChild(this.startOffset);n?e.insertBefore(n):t.append(e),e.getParent()&&e.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(e)},moveToPosition:function(e,t){this.setStartAt(e,t),this.collapse(!0)},moveToRange:function(e){this.setStart(e.startContainer,e.startOffset),this.setEnd(e.endContainer,e.endOffset)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e.type==CKEDITOR.NODE_TEXT?e.getLength():e.getChildCount())},setStart:function(t,n){t.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[t.getName()]&&(n=t.getIndex(),t=t.getParent()),this._setStartContainer(t),this.startOffset=n,this.endContainer||(this._setEndContainer(t),this.endOffset=n),e(this)},setEnd:function(t,n){t.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[t.getName()]&&(n=t.getIndex()+1,t=t.getParent()),this._setEndContainer(t),this.endOffset=n,this.startContainer||(this._setStartContainer(t),this.startOffset=n),e(this)},setStartAfter:function(e){this.setStart(e.getParent(),e.getIndex()+1)},setStartBefore:function(e){this.setStart(e.getParent(),e.getIndex())},setEndAfter:function(e){this.setEnd(e.getParent(),e.getIndex()+1)},setEndBefore:function(e){this.setEnd(e.getParent(),e.getIndex())},setStartAt:function(t,n){switch(n){case CKEDITOR.POSITION_AFTER_START:this.setStart(t,0);break;case CKEDITOR.POSITION_BEFORE_END:t.type==CKEDITOR.NODE_TEXT?this.setStart(t,t.getLength()):this.setStart(t,t.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(t);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(t)}e(this)},setEndAt:function(t,n){switch(n){case CKEDITOR.POSITION_AFTER_START:this.setEnd(t,0);break;case CKEDITOR.POSITION_BEFORE_END:t.type==CKEDITOR.NODE_TEXT?this.setEnd(t,t.getLength()):this.setEnd(t,t.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(t);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(t)}e(this)},fixBlock:function(e,t){var n=this.createBookmark(),i=this.document.createElement(t);this.collapse(e),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(i),i.trim(),this.insertNode(i);var o=i.getBogus();return o&&o.remove(),i.appendBogus(),this.moveToBookmark(n),i},splitBlock:function(e,t){var n=new CKEDITOR.dom.elementPath(this.startContainer,this.root),i=new CKEDITOR.dom.elementPath(this.endContainer,this.root),o=n.block,r=i.block,s=null;return n.blockLimit.equals(i.blockLimit)?("br"!=e&&(o||(o=this.fixBlock(!0,e),r=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),r||(r=this.fixBlock(!1,e))),n=o&&this.checkStartOfBlock(),i=r&&this.checkEndOfBlock(),this.deleteContents(),o&&o.equals(r)&&(i?(s=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(r,CKEDITOR.POSITION_AFTER_END),r=null):n?(s=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(o,CKEDITOR.POSITION_BEFORE_START),o=null):(r=this.splitElement(o,t||!1),o.is("ul","ol")||o.appendBogus())),{previousBlock:o,nextBlock:r,wasStartOfBlock:n,wasEndOfBlock:i,elementPath:s}):null},splitElement:function(e,t){if(!this.collapsed)return null;this.setEndAt(e,CKEDITOR.POSITION_BEFORE_END);var n=this.extractContents(!1,t||!1),i=e.clone(!1,t||!1);return n.appendTo(i),i.insertAfter(e),this.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),i},removeEmptyBlocksAtEnd:function(){function e(e){return function(i){return!(t(i)||n(i)||i.type==CKEDITOR.NODE_ELEMENT&&i.isEmptyInlineRemoveable()||e.is("table")&&i.is("caption"))}}var t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(!1);return function(t){for(var n,i=this.createBookmark(),o=this[t?"endPath":"startPath"](),r=o.block||o.blockLimit;r&&!r.equals(o.root)&&!r.getFirst(e(r));)n=r.getParent(),this[t?"setEndAt":"setStartAt"](r,CKEDITOR.POSITION_AFTER_END),r.remove(1),r=n;this.moveToBookmark(i)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(e,t){var n=t==CKEDITOR.START,i=this.clone();return i.collapse(n),i[n?"setStartAt":"setEndAt"](e,n?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),(i=new CKEDITOR.dom.walker(i)).evaluator=function(e){var t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(1);return function(i){return!(!n(i)&&!t(i))||!e&&r(i)||i.type==CKEDITOR.NODE_ELEMENT&&i.is(CKEDITOR.dtd.$removeEmpty)}}(n),i[n?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var e=this.startContainer,t=this.startOffset;return CKEDITOR.env.ie&&t&&e.type==CKEDITOR.NODE_TEXT&&(e=CKEDITOR.tools.ltrim(e.substring(0,t)),s.test(e)&&this.trim(0,1)),this.trim(),e=new CKEDITOR.dom.elementPath(this.startContainer,this.root),(t=this.clone()).collapse(!0),t.setStartAt(e.block||e.blockLimit,CKEDITOR.POSITION_AFTER_START),(e=new CKEDITOR.dom.walker(t)).evaluator=n(),e.checkBackward()},checkEndOfBlock:function(){var e=this.endContainer,t=this.endOffset;return CKEDITOR.env.ie&&e.type==CKEDITOR.NODE_TEXT&&(e=CKEDITOR.tools.rtrim(e.substring(t)),s.test(e)&&this.trim(1,0)),this.trim(),e=new CKEDITOR.dom.elementPath(this.endContainer,this.root),(t=this.clone()).collapse(!1),t.setEndAt(e.block||e.blockLimit,CKEDITOR.POSITION_BEFORE_END),(e=new CKEDITOR.dom.walker(t)).evaluator=n(),e.checkForward()},getPreviousNode:function(e,t,n){var i=this.clone();return i.collapse(1),i.setStartAt(n||this.root,CKEDITOR.POSITION_AFTER_START),(n=new CKEDITOR.dom.walker(i)).evaluator=e,n.guard=t,n.previous()},getNextNode:function(e,t,n){var i=this.clone();return i.collapse(),i.setEndAt(n||this.root,CKEDITOR.POSITION_BEFORE_END),(n=new CKEDITOR.dom.walker(i)).evaluator=e,n.guard=t,n.next()},checkReadOnly:function(){function e(e,t){for(;e;){if(e.type==CKEDITOR.NODE_ELEMENT){if("false"==e.getAttribute("contentEditable")&&!e.data("cke-editable"))return 0;if(e.is("html")||"true"==e.getAttribute("contentEditable")&&(e.contains(t)||e.equals(t)))break}e=e.getParent()}return 1}return function(){var t=this.startContainer,n=this.endContainer;return!(e(t,n)&&e(n,t))}}(),moveToElementEditablePosition:function(e,t){if(e.type==CKEDITOR.NODE_ELEMENT&&!e.isEditable(!1))return this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var n=0;e;){if(e.type==CKEDITOR.NODE_TEXT){t&&this.endContainer&&this.checkEndOfBlock()&&s.test(e.getText())?this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),n=1;break}if(e.type==CKEDITOR.NODE_ELEMENT)if(e.isEditable())this.moveToPosition(e,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),n=1;else if(t&&e.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START);else if("false"==e.getAttribute("contenteditable")&&e.is(CKEDITOR.dtd.$block))return this.setStartBefore(e),this.setEndAfter(e),!0;var i=e,o=n,r=void 0;i.type==CKEDITOR.NODE_ELEMENT&&i.isEditable(!1)&&(r=i[t?"getLast":"getFirst"](l)),o||r||(r=i[t?"getPrevious":"getNext"](l)),e=r}return!!n},moveToClosestEditablePosition:function(e,t){var n,i,o,r=0,s=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];return e?(n=new CKEDITOR.dom.range(this.root)).moveToPosition(e,s[t?0:1]):n=this.clone(),e&&!e.is(CKEDITOR.dtd.$block)?r=1:(i=n[t?"getNextEditableNode":"getPreviousEditableNode"]())&&(r=1,(o=i.type==CKEDITOR.NODE_ELEMENT)&&i.is(CKEDITOR.dtd.$block)&&"false"==i.getAttribute("contenteditable")?(n.setStartAt(i,CKEDITOR.POSITION_BEFORE_START),n.setEndAt(i,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&o&&i.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(n.setEnd(i,0),n.collapse()):n.moveToPosition(i,s[t?1:0])),r&&this.moveToRange(n),!!r},moveToElementEditStart:function(e){return this.moveToElementEditablePosition(e)},moveToElementEditEnd:function(e){return this.moveToElementEditablePosition(e,!0)},getEnclosedNode:function(){if((e=this.clone()).optimize(),e.startContainer.type!=CKEDITOR.NODE_ELEMENT||e.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var e=new CKEDITOR.dom.walker(e),t=CKEDITOR.dom.walker.bookmark(!1,!0),n=CKEDITOR.dom.walker.whitespaces(!0);e.evaluator=function(e){return n(e)&&t(e)};var i=e.next();return e.reset(),i&&i.equals(e.previous())?i:null},getTouchedStartNode:function(){var e=this.startContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.startOffset)||e},getTouchedEndNode:function(){var e=this.endContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.endOffset-1)||e},getNextEditableNode:i(),getPreviousEditableNode:i(1),_getTableElement:function(e){e=e||{td:1,th:1,tr:1,tbody:1,thead:1,tfoot:1,table:1};var t=this.getTouchedStartNode(),n=this.getTouchedEndNode(),i=t.getAscendant("table",!0);return n=n.getAscendant("table",!0),i&&!this.root.contains(i)?null:this.getEnclosedNode()?this.getEnclosedNode().getAscendant(e,!0):i&&n&&(i.equals(n)||i.contains(n)||n.contains(i))?t.getAscendant(e,!0):null},scrollIntoView:function(){var e,t,n,i=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),o=this.clone();o.optimize(),(n=o.startContainer.type==CKEDITOR.NODE_TEXT)?(t=o.startContainer.getText(),e=o.startContainer.split(o.startOffset),i.insertAfter(o.startContainer)):o.insertNode(i),i.scrollIntoView(),n&&(o.startContainer.setText(t),e.remove()),i.remove()},getClientRects:function(){function e(e,t,i){var o;return t.collapsed?i.startContainer instanceof CKEDITOR.dom.element?(e=i.checkStartOfBlock(),o=new CKEDITOR.dom.text("​"),e?i.startContainer.append(o,!0):0===i.startOffset?o.insertBefore(i.startContainer.getFirst()):(i=i.startContainer.getChildren().getItem(i.startOffset-1),o.insertAfter(i)),t.setStart(o.$,0),t.setEnd(o.$,0),e=t.getClientRects(),o.remove()):i.startContainer instanceof CKEDITOR.dom.text&&(""===i.startContainer.getText()?(i.startContainer.setText("​"),e=t.getClientRects(),i.startContainer.setText("")):e=[n(i.createBookmark())]):e=[n(i.createBookmark())],e}function t(e,t,n){return e=CKEDITOR.tools.extend({},e),t&&(e=CKEDITOR.tools.getAbsoluteRectPosition(n.document.getWindow(),e)),!e.width&&(e.width=e.right-e.left),!e.height&&(e.height=e.bottom-e.top),e}function n(e){var t,n=e.startNode;return e=e.endNode,n.setText("​"),n.removeStyle("display"),e?(e.setText("​"),e.removeStyle("display"),t=[n.getClientRect(),e.getClientRect()],e.remove()):t=[n.getClientRect(),n.getClientRect()],n.remove(),{right:Math.max(t[0].right,t[1].right),bottom:Math.max(t[0].bottom,t[1].bottom),left:Math.min(t[0].left,t[1].left),top:Math.min(t[0].top,t[1].top),width:Math.abs(t[0].left-t[1].left),height:Math.max(t[0].bottom,t[1].bottom)-Math.min(t[0].top,t[1].top)}}return void 0!==this.document.getSelection?function(n){var i,o=this.root.getDocument().$.createRange();return o.setStart(this.startContainer.$,this.startOffset),o.setEnd(this.endContainer.$,this.endOffset),(i=function(e,t){var n,i,o,r=CKEDITOR.tools.array.map(e,(function(e){return e})),s=new CKEDITOR.dom.range(t.root);if(t.startContainer instanceof CKEDITOR.dom.element&&(i=0===t.startOffset&&t.startContainer.hasAttribute("data-widget")),t.endContainer instanceof CKEDITOR.dom.element&&(o=(o=t.endOffset===(t.endContainer.getChildCount?t.endContainer.getChildCount():t.endContainer.length))&&t.endContainer.hasAttribute("data-widget")),i&&s.setStart(t.startContainer.getParent(),t.startContainer.getIndex()),o&&s.setEnd(t.endContainer.getParent(),t.endContainer.getIndex()+1),(i||o)&&(t=s),s=t.cloneContents().find("[data-cke-widget-id]").toArray(),s=CKEDITOR.tools.array.map(s,(function(e){var n=t.root.editor;return e=e.getAttribute("data-cke-widget-id"),n.widgets.instances[e].element})))return s=CKEDITOR.tools.array.map(s,(function(e){var t;return t=e.getParent().hasClass("cke_widget_wrapper")?e.getParent():e,(n=this.root.getDocument().$.createRange()).setStart(t.getParent().$,t.getIndex()),n.setEnd(t.getParent().$,t.getIndex()+1),(t=n.getClientRects()).widgetRect=e.getClientRect(),t}),t),CKEDITOR.tools.array.forEach(s,(function(e){var t;!function n(i){CKEDITOR.tools.array.forEach(r,(function(n,o){var s=CKEDITOR.tools.objectCompare(e[i],n);s||(s=CKEDITOR.tools.objectCompare(e.widgetRect,n)),s&&(Array.prototype.splice.call(r,o,e.length-i,e.widgetRect),t=!0)})),t||(i<r.length-1?n(i+1):r.push(e.widgetRect))}(0)})),r}(i=o.getClientRects(),this)).length||(i=e(i,o,this)),CKEDITOR.tools.array.map(i,(function(e){return t(e,n,this)}),this)}:function(e){return[t(n(this.createBookmark()),e,this)]}}(),_setStartContainer:function(e){this.startContainer=e},_setEndContainer:function(e){this.endContainer=e},_find:function(e,t){var n,i,o,r,s=this.getCommonAncestor(),a=this.getBoundaryNodes(),l=[];if(s&&s.find)for(i=s.find(e),n=0;n<i.count();n++)s=i.getItem(n),(t||!s.isReadOnly())&&(o=s.getPosition(a.startNode)&CKEDITOR.POSITION_FOLLOWING||a.startNode.equals(s),r=s.getPosition(a.endNode)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IS_CONTAINED||a.endNode.equals(s),o&&r&&l.push(s));return l}},CKEDITOR.dom.range.mergeRanges=function(e){return CKEDITOR.tools.array.reduce(e,(function(e,t){var n=e[e.length-1],i=!1;if((t=t.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),n){var o=new CKEDITOR.dom.range(t.root),r=(i=new CKEDITOR.dom.walker(o),CKEDITOR.dom.walker.whitespaces());for(o.setStart(n.endContainer,n.endOffset),o.setEnd(t.startContainer,t.startOffset),o=i.next();r(o)||t.endContainer.equals(o);)o=i.next();i=!o}return i?n.setEnd(t.endContainer,t.endOffset):e.push(t),e}),[])}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,function(){function e(e){1>arguments.length||(this.range=e,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function t(e,n,i,o){e:{null==o&&(o=function(e){var t=[];return e.forEach((function(e){if("true"==e.getAttribute("contenteditable"))return t.push(e),!1}),CKEDITOR.NODE_ELEMENT,!0),t}(i));for(var r;r=o.shift();)if(r.getDtd().p){o={element:r,remaining:o};break e}o=null}return o?(r=CKEDITOR.filter.instances[o.element.data("cke-filter")])&&!r.check(n)?t(e,n,i,o.remaining):((n=new CKEDITOR.dom.range(o.element)).selectNodeContents(o.element),(n=n.createIterator()).enlargeBr=e.enlargeBr,n.enforceRealBlocks=e.enforceRealBlocks,n.activeFilter=n.filter=r,e._.nestedEditable={element:o.element,container:i,remaining:o.remaining,iterator:n},1):0}function n(e,t,n){return!!t&&((e=e.clone()).collapse(!n),e.checkBoundaryOfElement(t,n?CKEDITOR.START:CKEDITOR.END))}var i=/^[\r\n\t ]+$/,o=CKEDITOR.dom.walker.bookmark(!1,!0),r=CKEDITOR.dom.walker.whitespaces(!0),s=function(e){return o(e)&&r(e)},a={dd:1,dt:1,li:1};e.prototype={getNextParagraph:function(e){var r,l,c,u,d;if(e=e||"p",this._.nestedEditable){if(r=this._.nestedEditable.iterator.getNextParagraph(e))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,r;if(this.activeFilter=this.filter,t(this,e,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(e);this._.nestedEditable=null}if(!this.range.root.getDtd()[e])return null;if(!this._.started){var h=this.range.clone();l=h.startPath();var f=h.endPath(),p=!h.collapsed&&n(h,l.block),g=!h.collapsed&&n(h,f.block,1);h.shrink(CKEDITOR.SHRINK_ELEMENT,!0),p&&h.setStartAt(l.block,CKEDITOR.POSITION_BEFORE_END),g&&h.setEndAt(f.block,CKEDITOR.POSITION_AFTER_START),l=h.endContainer.hasAscendant("pre",!0)||h.startContainer.hasAscendant("pre",!0),h.enlarge(this.forceBrBreak&&!l||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),h.collapsed||(l=new CKEDITOR.dom.walker(h.clone()),f=CKEDITOR.dom.walker.bookmark(!0,!0),l.evaluator=f,this._.nextNode=l.next(),(l=new CKEDITOR.dom.walker(h.clone())).evaluator=f,l=l.previous(),this._.lastNode=l.getNextSourceNode(!0,null,h.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&((f=this.range.clone()).moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),f.checkEndOfBlock()&&(f=new CKEDITOR.dom.elementPath(f.endContainer,f.root),this._.lastNode=(f.block||f.blockLimit).getNextSourceNode(!0))),this._.lastNode&&h.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=h.document.createText(""),this._.lastNode.insertAfter(l)),h=null),this._.started=1,l=h}for(f=this._.nextNode,h=this._.lastNode,this._.nextNode=null;f;){p=0,g=f.hasAscendant("pre");var m=f.type!=CKEDITOR.NODE_ELEMENT,E=0;if(m)f.type==CKEDITOR.NODE_TEXT&&i.test(f.getText())&&(m=0);else{var T=f.getName();if(CKEDITOR.dtd.$block[T]&&"false"==f.getAttribute("contenteditable")){t(this,e,r=f);break}if(f.isBlockBoundary(this.forceBrBreak&&!g&&{br:1})){if("br"==T)m=1;else if(!l&&!f.getChildCount()&&"hr"!=T){r=f,c=f.equals(h);break}l&&(l.setEndAt(f,CKEDITOR.POSITION_BEFORE_START),"br"!=T&&(this._.nextNode=f)),p=1}else{if(f.getFirst()){l||(l=this.range.clone()).setStartAt(f,CKEDITOR.POSITION_BEFORE_START),f=f.getFirst();continue}m=1}}if(m&&!l&&(l=this.range.clone()).setStartAt(f,CKEDITOR.POSITION_BEFORE_START),c=(!p||m)&&f.equals(h),l&&!p)for(;!f.getNext(s)&&!c;){if((T=f.getParent()).isBlockBoundary(this.forceBrBreak&&!g&&{br:1})){p=1,m=0,c||T.equals(h),l.setEndAt(T,CKEDITOR.POSITION_BEFORE_END);break}m=1,c=(f=T).equals(h),E=1}if(m&&l.setEndAt(f,CKEDITOR.POSITION_AFTER_END),(c=!(f=this._getNextSourceNode(f,E,h)))||p&&l)break}if(!r){if(!l)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;f=(r=new CKEDITOR.dom.elementPath(l.startContainer,l.root)).blockLimit,p={div:1,th:1,td:1},!(r=r.block)&&f&&!this.enforceRealBlocks&&p[f.getName()]&&l.checkStartOfBlock()&&l.checkEndOfBlock()&&!f.equals(l.root)?r=f:!r||this.enforceRealBlocks&&r.is(a)?(r=this.range.document.createElement(e),l.extractContents().appendTo(r),r.trim(),l.insertNode(r),u=d=!0):"li"!=r.getName()?l.checkStartOfBlock()&&l.checkEndOfBlock()||(r=r.clone(!1),l.extractContents().appendTo(r),r.trim(),u=!(d=l.splitBlock()).wasStartOfBlock,d=!d.wasEndOfBlock,l.insertNode(r)):c||(this._.nextNode=r.equals(h)?null:this._getNextSourceNode(l.getBoundaryNodes().endNode,1,h))}return u&&(u=r.getPrevious())&&u.type==CKEDITOR.NODE_ELEMENT&&("br"==u.getName()?u.remove():u.getLast()&&"br"==u.getLast().$.nodeName.toLowerCase()&&u.getLast().remove()),d&&(u=r.getLast())&&u.type==CKEDITOR.NODE_ELEMENT&&"br"==u.getName()&&(!CKEDITOR.env.needsBrFiller||u.getPrevious(o)||u.getNext(o))&&u.remove(),this._.nextNode||(this._.nextNode=c||r.equals(h)||!h?null:this._getNextSourceNode(r,1,h)),r},_getNextSourceNode:function(e,t,n){function i(e){return!(e.equals(n)||e.equals(r))}var r=this.range.root;for(e=e.getNextSourceNode(t,null,i);!o(e);)e=e.getNextSourceNode(t,null,i);return e}},CKEDITOR.dom.range.prototype.createIterator=function(){return new e(this)}}(),CKEDITOR.command=function(e,t){var n;this.uiItems=[],this.exec=function(n){return!(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())&&(this.editorFocus&&e.focus(),!1===this.fire("exec")||!1!==t.exec.call(this,e,n))},this.refresh=function(e,n){return!(this.readOnly||!e.readOnly)||(this.context&&!n.isContextFor(this.context)||!this.checkAllowed(!0)?(this.disable(),!0):(this.startDisabled||this.enable(),this.modes&&!this.modes[e.mode]&&this.disable(),!1===this.fire("refresh",{editor:e,path:n})||t.refresh&&!1!==t.refresh.apply(this,arguments)))},this.checkAllowed=function(t){return t||"boolean"!=typeof n?n=e.activeFilter.checkFeature(this):n},CKEDITOR.tools.extend(this,t,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!t.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&void 0!==this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(e){return!(this.state==e||e!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed()||(this.previousState=this.state,this.state=e,this.fire("state"),0))},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function e(e,t,n,i,o){var r,a,l;for(r in e=[],t){a="boolean"==typeof(a=t[r])?{}:"function"==typeof a?{match:a}:R(a),"$"!=r.charAt(0)&&(a.elements=r),n&&(a.featureName=n.toLowerCase());var c=a;c.elements=s(c.elements,/\s+/)||null,c.propertiesOnly=c.propertiesOnly||!0===c.elements;var u=/\s*,\s*/,d=void 0;for(d in w){c[d]=s(c[d],u)||null;var h=c,f=S[d],p=s(c[S[d]],u),g=c[d],E=[],T=!0,C=void 0;for(C in p?T=!1:p={},g)"!"==C.charAt(0)&&(C=C.slice(1),E.push(C),p[C]=!0,T=!1);for(;C=E.pop();)g[C]=g["!"+C],delete g["!"+C];h[f]=!T&&p||null}c.match=c.match||null,i.push(a),e.push(a)}for(t=o.elements,o=o.generic,n=0,i=e.length;n<i;++n){for(u in a=!0===(r=R(e[n])).classes||!0===r.styles||!0===r.attributes,c=r,d=f=u=void 0,w)c[u]=m(c[u]);for(d in h=!0,S){for(g in p=[],g=void 0,f=c[u=S[d]])-1<g.indexOf("*")?p.push(new RegExp("^"+g.replace(/\*/g,".*")+"$")):p.push(g);(f=p).length&&(c[u]=f,h=!1)}if(c.nothingRequired=h,c.noProperties=!(c.attributes||c.classes||c.styles),!0===r.elements||null===r.elements)o[a?"unshift":"push"](r);else for(l in c=r.elements,delete r.elements,c)t[l]?t[l][a?"unshift":"push"](r):t[l]=[r]}}function t(e,t,i,o){if((!e.match||e.match(t))&&(o||a(e,t))&&(e.propertiesOnly||(i.valid=!0),i.allAttributes||(i.allAttributes=n(e.attributes,t.attributes,i.validAttributes)),i.allStyles||(i.allStyles=n(e.styles,t.styles,i.validStyles)),!i.allClasses)){if(e=e.classes,t=t.classes,o=i.validClasses,e)if(!0===e)e=!0;else{for(var r,s=0,l=t.length;s<l;++s)o[r=t[s]]||(o[r]=e(r));e=!1}else e=!1;i.allClasses=e}}function n(e,t,n){if(!e)return!1;if(!0===e)return!0;for(var i in t)n[i]||(n[i]=e(i));return!1}function i(e,t,n){if(!e.match||e.match(t)){if(e.noProperties)return!1;if(n.hadInvalidAttribute=o(e.attributes,t.attributes)||n.hadInvalidAttribute,n.hadInvalidStyle=o(e.styles,t.styles)||n.hadInvalidStyle,e=e.classes,t=t.classes,e){for(var i=!1,r=!0===e,s=t.length;s--;)(r||e(t[s]))&&(t.splice(s,1),i=!0);e=i}else e=!1;n.hadInvalidClass=e||n.hadInvalidClass}}function o(e,t){if(!e)return!1;var n,i=!1,o=!0===e;for(n in t)(o||e(n))&&(delete t[n],i=!0);return i}function r(e,t,n){return!(e.disabled||e.customConfig&&!n||!t||(e._.cachedChecks={},0))}function s(e,t){if(!e)return!1;if(!0===e)return e;if("string"==typeof e)return"*"==(e=_(e))||CKEDITOR.tools.convertArrayToObject(e.split(t));if(CKEDITOR.tools.isArray(e))return!!e.length&&CKEDITOR.tools.convertArrayToObject(e);var n,i={},o=0;for(n in e)i[n]=e[n],o++;return!!o&&i}function a(e,t){if(e.nothingRequired)return!0;var n,i,o,r;if(o=e.requiredClasses)for(r=t.classes,n=0;n<o.length;++n)if("string"==typeof(i=o[n])){if(-1==CKEDITOR.tools.indexOf(r,i))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(r,i))return!1;return l(t.styles,e.requiredStyles)&&l(t.attributes,e.requiredAttributes)}function l(e,t){if(!t)return!0;for(var n,i=0;i<t.length;++i)if("string"==typeof(n=t[i])){if(!(n in e))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(e,n))return!1;return!0}function c(e){if(!e)return{};e=e.split(/\s*,\s*/).sort();for(var t={};e.length;)t[e.shift()]="cke-test";return t}function u(e){var t,n,i,o,r={},s=1;for(e=_(e);t=e.match(x);)(n=t[2])?(i=d(n,"styles"),o=d(n,"attrs"),n=d(n,"classes")):i=o=n=null,r["$"+s++]={elements:t[1],classes:n,styles:i,attributes:o},e=e.slice(t[0].length);return r}function d(e,t){var n=e.match(N[t]);return n?_(n[1]):null}function h(e){var t=e.styleBackup=e.attributes.style,n=e.classBackup=e.attributes.class;e.styles||(e.styles=CKEDITOR.tools.parseCssText(t||"",1)),e.classes||(e.classes=n?n.split(/\s+/):[])}function f(e,n,o,r){var s,a=0;if(r.toHtml&&(n.name=n.name.replace(A,"$1")),r.doCallbacks&&e.elementCallbacks){e:{for(var l,c=0,u=(s=e.elementCallbacks).length;c<u;++c)if(l=s[c](n)){s=l;break e}s=void 0}if(s)return s}if(r.doTransform&&(s=e._.transformations[n.name])){for(h(n),c=0;c<s.length;++c)v(e,n,s[c]);p(n)}if(r.doFilter){e:{c=n.name,e=(u=e._).allowedRules.elements[c],s=u.allowedRules.generic,c=u.disallowedRules.elements[c],u=u.disallowedRules.generic,l=r.skipRequired;var d,f,m={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1};if(e||s){if(h(n),c)for(d=0,f=c.length;d<f;++d)if(!1===i(c[d],n,m)){e=null;break e}if(u)for(d=0,f=u.length;d<f;++d)i(u[d],n,m);if(e)for(d=0,f=e.length;d<f;++d)t(e[d],n,m,l);if(s)for(d=0,f=s.length;d<f;++d)t(s[d],n,m,l);e=m}else e=null}if(!e||!e.valid)return o.push(n),1;f=e.validAttributes;var E=e.validStyles;s=e.validClasses,c=n.attributes;var T=n.styles;u=n.classes,l=n.classBackup;var C,I,D=n.styleBackup,O=[],b=(m=[],/^data-cke-/);if(d=!1,delete c.style,delete c.class,delete n.classBackup,delete n.styleBackup,!e.allAttributes)for(C in c)f[C]||b.test(C)&&(C==(I=C.replace(/^data-cke-saved-/,""))||f[I])||(delete c[C],d=!0);if(!e.allStyles||e.hadInvalidStyle){for(C in T)e.allStyles||E[C]?O.push(C+":"+T[C]):d=!0;O.length&&(c.style=O.sort().join("; "))}else D&&(c.style=D);if(!e.allClasses||e.hadInvalidClass){for(C=0;C<u.length;++C)(e.allClasses||s[u[C]])&&m.push(u[C]);m.length&&(c.class=m.sort().join(" ")),l&&m.length<l.split(/\s+/).length&&(d=!0)}else l&&(c.class=l);if(d&&(a=1),!r.skipFinalValidation&&!g(n))return o.push(n),1}return r.toHtml&&(n.name=n.name.replace(L,"cke:$1")),a}function p(e){var t,n=e.attributes;delete n.style,delete n.class,(t=CKEDITOR.tools.writeCssText(e.styles,!0))&&(n.style=t),e.classes.length&&(n.class=e.classes.sort().join(" "))}function g(e){switch(e.name){case"a":if(!(e.children.length||e.attributes.name||e.attributes.id))return!1;break;case"img":if(!e.attributes.src)return!1}return!0}function m(e){if(!e)return!1;if(!0===e)return!0;var t=function(e){var t,n=[];for(t in e)-1<t.indexOf("*")&&n.push(t.replace(/\*/g,".*"));return n.length?new RegExp("^(?:"+n.join("|")+")$"):null}(e);return function(n){return n in e||t&&n.match(t)}}function E(){return new CKEDITOR.htmlParser.element("br")}function T(e){return e.type==CKEDITOR.NODE_ELEMENT&&("br"==e.name||y.$block[e.name])}function C(e,t,n){var i=e.name;if(y.$empty[i]||!e.children.length)"hr"==i&&"br"==t?e.replaceWith(E()):(e.parent&&n.push({check:"it",el:e.parent}),e.remove());else if(y.$block[i]||"tr"==i)if("br"==t)e.previous&&!T(e.previous)&&(t=E()).insertBefore(e),e.next&&!T(e.next)&&(t=E()).insertAfter(e),e.replaceWithChildren();else{var o;i=e.children;e:{o=y[t];for(var r,s=0,a=i.length;s<a;++s)if((r=i[s]).type==CKEDITOR.NODE_ELEMENT&&!o[r.name]){o=!1;break e}o=!0}if(o)e.name=t,e.attributes={},n.push({check:"parent-down",el:e});else{var l,c;for(s=(o=e.parent).type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==o.name,a=i.length;0<a;)r=i[--a],s&&(r.type==CKEDITOR.NODE_TEXT||r.type==CKEDITOR.NODE_ELEMENT&&y.$inline[r.name])?(l||((l=new CKEDITOR.htmlParser.element(t)).insertAfter(e),n.push({check:"parent-down",el:l})),l.add(r,0)):(l=null,c=y[o.name]||y.span,r.insertAfter(e),o.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||r.type!=CKEDITOR.NODE_ELEMENT||c[r.name]||n.push({check:"el-up",el:r}));e.remove()}}else i in{style:1,script:1}?e.remove():(e.parent&&n.push({check:"it",el:e.parent}),e.replaceWithChildren())}function v(e,t,n){var i,o;for(i=0;i<n.length;++i)if(!((o=n[i]).check&&!e.check(o.check,!1)||o.left&&!o.left(t))){o.right(t,k);break}}function I(e,t){var n,i,o,r,s=t.getDefinition(),a=s.attributes,l=s.styles;if(e.name!=s.element)return!1;for(n in a)if("class"==n){for(s=a[n].split(/\s+/),o=e.classes.join("|");r=s.pop();)if(-1==o.indexOf(r))return!1}else if(e.attributes[n]!=a[n])return!1;for(i in l)if(e.styles[i]!=l[i])return!1;return!0}function D(e,t){var n,i;return"string"==typeof e?n=e:e instanceof CKEDITOR.style?i=e:(n=e[0],i=e[1]),[{element:n,left:i,right:function(e,n){n.transform(e,t)}}]}function O(e){return function(t){return I(t,e)}}function b(e){return function(t,n){n[e](t)}}var y=CKEDITOR.dtd,R=CKEDITOR.tools.copy,_=CKEDITOR.tools.trim,K=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2,CKEDITOR.filter=function(e,t){this.allowedContent=[],this.disallowedContent=[],this.elementCallbacks=null,this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{},cachedChecks:{}},CKEDITOR.filter.instances[this.id]=this;var n=this.editor=e instanceof CKEDITOR.editor?e:null;if(n&&!t){this.customConfig=!0;var i=n.config.allowedContent;!0===i?this.disabled=!0:(i||(this.customConfig=!1),this.allow(i,"config",1),this.allow(n.config.extraAllowedContent,"extra",1),this.allow(K[n.enterMode]+" "+K[n.shiftEnterMode],"default",1),this.disallow(n.config.disallowedContent))}else this.customConfig=!1,this.allow(t||e,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(t,n,i){if(!r(this,t,i))return!1;var o,s;if("string"==typeof t)t=u(t);else if(t instanceof CKEDITOR.style){if(t.toAllowedContentRules)return this.allow(t.toAllowedContentRules(this.editor),n,i);o=t.getDefinition(),t={},i=o.attributes,t[o.element]=o={styles:o.styles,requiredStyles:o.styles&&CKEDITOR.tools.object.keys(o.styles)},i&&(i=R(i),o.classes=i.class?i.class.split(/\s+/):null,o.requiredClasses=o.classes,delete i.class,o.attributes=i,o.requiredAttributes=i&&CKEDITOR.tools.object.keys(i))}else if(CKEDITOR.tools.isArray(t)){for(o=0;o<t.length;++o)s=this.allow(t[o],n,i);return s}return e(this,t,n,this.allowedContent,this._.allowedRules),!0},applyTo:function(e,t,n,i){if(this.disabled)return!1;var o,r,s,a=this,l=[],c=this.editor&&this.editor.config.protectedSource,u=!1,d={doFilter:!n,doTransform:!0,doCallbacks:!0,toHtml:t};for(e.forEach((function(e){if(e.type==CKEDITOR.NODE_ELEMENT){if("off"==e.attributes["data-cke-filter"])return!1;if(!t||"span"!=e.name||!~CKEDITOR.tools.object.keys(e.attributes).join("|").indexOf("data-cke-"))if(1&(o=f(a,e,l,d)))u=!0;else if(2&o)return!1}else if(e.type==CKEDITOR.NODE_COMMENT&&e.value.match(/^\{cke_protected\}(?!\{C\})/)){var n;e:{var i,r,s,h=decodeURIComponent(e.value.replace(/^\{cke_protected\}/,""));if(n=[],c)for(r=0;r<c.length;++r)if((s=h.match(c[r]))&&s[0].length==h.length){n=!0;break e}1==(h=CKEDITOR.htmlParser.fragment.fromHtml(h)).children.length&&(i=h.children[0]).type==CKEDITOR.NODE_ELEMENT&&f(a,i,n,d),n=!n.length}n||l.push(e)}}),null,!0),l.length&&(u=!0),e=[],i=K[i||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];n=l.pop();)n.type==CKEDITOR.NODE_ELEMENT?C(n,i,e):n.remove();for(;r=e.pop();)if((n=r.el).parent)switch(s=y[n.parent.name]||y.span,r.check){case"it":y.$removeEmpty[n.name]&&!n.children.length?C(n,i,e):g(n)||C(n,i,e);break;case"el-up":n.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||s[n.name]||C(n,i,e);break;case"parent-down":n.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||s[n.name]||C(n.parent,i,e)}return u},checkFeature:function(e){return!(!this.disabled&&e)||(e.toFeature&&(e=e.toFeature(this.editor)),!e.requiredContent||this.check(e.requiredContent))},disable:function(){this.disabled=!0},disallow:function(t){return!!r(this,t,!0)&&("string"==typeof t&&(t=u(t)),e(this,t,null,this.disallowedContent,this._.disallowedRules),!0)},addContentForms:function(e){if(!this.disabled&&e){var t,n,i,o=[];for(t=0;t<e.length&&!i;++t)("string"==typeof(n=e[t])||n instanceof CKEDITOR.style)&&this.check(n)&&(i=n);if(i){for(t=0;t<e.length;++t)o.push(D(e[t],i));this.addTransformations(o)}}},addElementCallback:function(e){this.elementCallbacks||(this.elementCallbacks=[]),this.elementCallbacks.push(e)},addFeature:function(e){return!(!this.disabled&&e)||(e.toFeature&&(e=e.toFeature(this.editor)),this.allow(e.allowedContent,e.name),this.addTransformations(e.contentTransformations),this.addContentForms(e.contentForms),!e.requiredContent||!this.customConfig&&!this.disallowedContent.length||this.check(e.requiredContent))},addTransformations:function(e){var t,n;if(!this.disabled&&e){var i,o=this._.transformations;for(i=0;i<e.length;++i){t=e[i];var r=void 0,s=void 0,a=void 0,l=void 0,c=void 0,u=void 0;for(n=[],s=0;s<t.length;++s)"string"==typeof(a=t[s])?(l=(a=a.split(/\s*:\s*/))[0],c=null,u=a[1]):(l=a.check,c=a.left,u=a.right),r||(r=(r=a).element?r.element:l?l.match(/^([a-z0-9]+)/i)[0]:r.left.getDefinition().element),c instanceof CKEDITOR.style&&(c=O(c)),n.push({check:l==r?null:l,left:c,right:"string"==typeof u?b(u):u});o[t=r]||(o[t]=[]),o[t].push(n)}}},check:function(e,t,n){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(e)){for(var i=e.length;i--;)if(this.check(e[i],t,n))return!0;return!1}var o,r;if("string"==typeof e){if((r=e+"<"+(!1===t?"0":"1")+(n?"1":"0")+">")in this._.cachedChecks)return this._.cachedChecks[r];var s=(o=u(e).$1).styles;i=o.classes,o.name=o.elements,o.classes=i=i?i.split(/\s*,\s*/):[],o.styles=c(s),o.attributes=c(o.attributes),o.children=[],i.length&&(o.attributes.class=i.join(" ")),s&&(o.attributes.style=CKEDITOR.tools.writeCssText(o.styles))}else s=(o=e.getDefinition()).styles,i=o.attributes||{},s&&!CKEDITOR.tools.isEmpty(s)?(s=R(s),i.style=CKEDITOR.tools.writeCssText(s,!0)):s={},o={name:o.element,attributes:i,classes:i.class?i.class.split(/\s+/):[],styles:s,children:[]};s=CKEDITOR.tools.clone(o);var a,l=[];if(!1!==t&&(a=this._.transformations[o.name])){for(i=0;i<a.length;++i)v(this,o,a[i]);p(o)}return f(this,s,l,{doFilter:!0,doTransform:!1!==t,skipRequired:!n,skipFinalValidation:!n}),0<l.length?n=!1:((t=o.attributes.class)&&(o.attributes.class=o.attributes.class.split(" ").sort().join(" ")),n=CKEDITOR.tools.objectCompare(o.attributes,s.attributes,!0),t&&(o.attributes.class=t)),"string"==typeof e&&(this._.cachedChecks[r]=n),n},getAllowedEnterMode:function(){var e=["p","div","br"],t={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(n,i){var o,r=e.slice();if(this.check(K[n]))return n;for(i||(r=r.reverse());o=r.pop();)if(this.check(o))return t[o];return CKEDITOR.ENTER_BR}}(),clone:function(){var e=new CKEDITOR.filter,t=CKEDITOR.tools.clone;return e.allowedContent=t(this.allowedContent),e._.allowedRules=t(this._.allowedRules),e.disallowedContent=t(this.disallowedContent),e._.disallowedRules=t(this._.disallowedRules),e._.transformations=t(this._.transformations),e.disabled=this.disabled,e.editor=this.editor,e},destroy:function(){delete CKEDITOR.filter.instances[this.id],delete this._,delete this.allowedContent,delete this.disallowedContent}};var k,w={styles:1,attributes:1,classes:1},S={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},x=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,N={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},A=/^cke:(object|embed|param)$/,L=/^(object|embed|param)$/;k=CKEDITOR.filter.transformationsTools={sizeToStyle:function(e){this.lengthToStyle(e,"width"),this.lengthToStyle(e,"height")},sizeToAttribute:function(e){this.lengthToAttribute(e,"width"),this.lengthToAttribute(e,"height")},lengthToStyle:function(e,t,n){if(!((n=n||t)in e.styles)){var i=e.attributes[t];i&&(/^\d+$/.test(i)&&(i+="px"),e.styles[n]=i)}delete e.attributes[t]},lengthToAttribute:function(e,t,n){if(!((n=n||t)in e.attributes)){var i=e.styles[t],o=i&&i.match(/^(\d+)(?:\.\d*)?px$/);o?e.attributes[n]=o[1]:"cke-test"==i&&(e.attributes[n]="cke-test")}delete e.styles[t]},alignmentToStyle:function(e){if(!("float"in e.styles)){var t=e.attributes.align;"left"!=t&&"right"!=t||(e.styles.float=t)}delete e.attributes.align},alignmentToAttribute:function(e){if(!("align"in e.attributes)){var t=e.styles.float;"left"!=t&&"right"!=t||(e.attributes.align=t)}delete e.styles.float},splitBorderShorthand:function(e){if(e.styles.border){var t=CKEDITOR.tools.style.parse.border(e.styles.border);t.color&&(e.styles["border-color"]=t.color),t.style&&(e.styles["border-style"]=t.style),t.width&&(e.styles["border-width"]=t.width),delete e.styles.border}},listTypeToStyle:function(e){if(e.attributes.type)switch(e.attributes.type){case"a":e.styles["list-style-type"]="lower-alpha";break;case"A":e.styles["list-style-type"]="upper-alpha";break;case"i":e.styles["list-style-type"]="lower-roman";break;case"I":e.styles["list-style-type"]="upper-roman";break;case"1":e.styles["list-style-type"]="decimal";break;default:e.styles["list-style-type"]=e.attributes.type}},splitMarginShorthand:function(e){function t(t){e.styles["margin-top"]=n[t[0]],e.styles["margin-right"]=n[t[1]],e.styles["margin-bottom"]=n[t[2]],e.styles["margin-left"]=n[t[3]]}if(e.styles.margin){var n=e.styles.margin.match(/(\-?[\.\d]+\w+)/g)||["0px"];switch(n.length){case 1:t([0,0,0,0]);break;case 2:t([0,1,0,1]);break;case 3:t([0,1,2,1]);break;case 4:t([0,1,2,3])}delete e.styles.margin}},matchesStyle:I,transform:function(e,t){if("string"==typeof t)e.name=t;else{var n,i,o,r,s=t.getDefinition(),a=s.styles,l=s.attributes;for(n in e.name=s.element,l)if("class"==n)for(s=e.classes.join("|"),o=l[n].split(/\s+/);r=o.pop();)-1==s.indexOf(r)&&e.classes.push(r);else e.attributes[n]=l[n];for(i in a)e.styles[i]=a[i]}}}}(),CKEDITOR.focusManager=function(e){return e.focusManager?e.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:e},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(e){this._.timer&&clearTimeout(this._.timer),e&&(this.currentActive=e),this.hasFocus||this._.locked||((e=CKEDITOR.currentInstance)&&e.focusManager.blur(1),this.hasFocus=!0,(e=this._.editor.container)&&e.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(e){function t(){if(this.hasFocus){this.hasFocus=!1;var e=this._.editor.container;e&&e.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var n=CKEDITOR.focusManager._.blurDelay;e||!n?t.call(this):this._.timer=CKEDITOR.tools.setTimeout((function(){delete this._.timer,t.call(this)}),n,this)}},add:function(e,t){if(!(n=e.getCustomData("focusmanager"))||n!=this){n&&n.remove(e);var n="focus",i="blur";t&&(CKEDITOR.env.ie?(n="focusin",i="focusout"):CKEDITOR.event.useCapture=1);var o={blur:function(){e.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(e)}};e.on(n,o.focus,this),e.on(i,o.blur,this),t&&(CKEDITOR.event.useCapture=0),e.setCustomData("focusmanager",this),e.setCustomData("focusmanager_handlers",o)}},remove:function(e){e.removeCustomData("focusmanager");var t=e.removeCustomData("focusmanager_handlers");e.removeListener("blur",t.blur),e.removeListener("focus",t.focus)}},CKEDITOR.keystrokeHandler=function(e){return e.keystrokeHandler?e.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:e},this)},function(){var e,t=function(t){var n=(t=t.data).getKeystroke(),i=this.keystrokes[n],o=this._.editor;return(e=!1===o.fire("key",{keyCode:n,domEvent:t}))||(i&&(e=!1!==o.execCommand(i,{from:"keystrokeHandler"})),e||(e=!!this.blockedKeystrokes[n])),e&&t.preventDefault(!0),!e},n=function(t){e&&(e=!1,t.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(e){e.on("keydown",t,this),CKEDITOR.env.gecko&&CKEDITOR.env.mac&&e.on("keypress",n,this)}}}(),CKEDITOR.lang={languages:{af:1,ar:1,az:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,oc:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(e,t,n){e&&CKEDITOR.lang.languages[e]||(e=this.detect(t,e));var i=this;t=function(){i[e].dir=i.rtl[e]?"rtl":"ltr",n(e,i[e])},this[e]?t():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+e+".js"),t,this)},detect:function(e,t){var n=this.languages,i=(o=(t=t||navigator.userLanguage||navigator.language||e).toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/))[1],o=o[2];return n[i+"-"+o]?i=i+"-"+o:n[i]||(i=null),CKEDITOR.lang.detect=i?function(){return i}:function(e){return e},i||e}},CKEDITOR.scriptLoader=function(){var e={},t={};return{load:function(n,i,o,r){var s="string"==typeof n;s&&(n=[n]),o||(o=CKEDITOR);var a=n.length,l=[],c=[],u=function(e){i&&(s?i.call(o,e):i.call(o,l,c))};if(0===a)u(!0);else{var d=function(e,t){(t?l:c).push(e),0>=--a&&(r&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),u(t))},h=function(n,i){e[n]=1;var o=t[n];delete t[n];for(var r=0;r<o.length;r++)o[r](n,i)},f=function(n){if(e[n])d(n,!0);else{var o=t[n]||(t[n]=[]);if(o.push(d),!(1<o.length)){var r=new CKEDITOR.dom.element("script");r.setAttributes({type:"text/javascript",src:n}),i&&(CKEDITOR.env.ie&&(8>=CKEDITOR.env.version||CKEDITOR.env.ie9Compat)?r.$.onreadystatechange=function(){"loaded"!=r.$.readyState&&"complete"!=r.$.readyState||(r.$.onreadystatechange=null,h(n,!0))}:(r.$.onload=function(){setTimeout((function(){r.$.onload=null,r.$.onerror=null,h(n,!0)}),0)},r.$.onerror=function(){r.$.onload=null,r.$.onerror=null,h(n,!1)})),r.appendTo(CKEDITOR.document.getHead())}}};r&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var p=0;p<a;p++)f(n[p])}},queue:function(){function e(){var e;(e=t[0])&&this.load(e.scriptUrl,e.callback,CKEDITOR,0)}var t=[];return function(n,i){var o=this;t.push({scriptUrl:n,callback:function(){i&&i.apply(this,arguments),t.shift(),e.call(o)}}),1==t.length&&e.call(this)}}()}}(),CKEDITOR.resourceManager=function(e,t){this.basePath=e,this.fileName=t,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(e,t){if(this.registered[e])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+e+'" is already registered.');var n=this.registered[e]=t||{};return n.name=e,n.path=this.getPath(e),CKEDITOR.fire(e+CKEDITOR.tools.capitalize(this.fileName)+"Ready",n),this.get(e)},get:function(e){return this.registered[e]||null},getPath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(t&&t.dir||this.basePath+e+"/")},getFilePath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(this.getPath(e)+(t?t.file:this.fileName+".js"))},addExternal:function(e,t,n){n||(t=t.replace(/[^\/]+$/,(function(e){return n=e,""}))),n=n||this.fileName+".js",e=e.split(",");for(var i=0;i<e.length;i++)this.externals[e[i]]={dir:t,file:n}},load:function(e,t,n){CKEDITOR.tools.isArray(e)||(e=e?[e]:[]);for(var i=this.loaded,o=this.registered,r=[],s={},a={},l=0;l<e.length;l++){var c=e[l];if(c)if(i[c]||o[c])a[c]=this.get(c);else{var u=this.getFilePath(c);r.push(u),u in s||(s[u]=[]),s[u].push(c)}}CKEDITOR.scriptLoader.load(r,(function(e,o){if(o.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+s[o[0]].join(",")+'" was not found at "'+o[0]+'".');for(var r=0;r<e.length;r++)for(var l=s[e[r]],c=0;c<l.length;c++){var u=l[c];a[u]=this.get(u),i[u]=1}t.call(n,a)}),this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,(function(e){var t={};return function(n,i,o){var r={};(function n(s){e.call(this,s,(function(e){CKEDITOR.tools.extend(r,e);var s,a=[];for(s in e){var l=e[s],c=l&&l.requires;if(!t[s]){if(l.icons)for(var u=l.icons.split(","),d=u.length;d--;)CKEDITOR.skin.addIcon(u[d],l.path+"icons/"+(CKEDITOR.env.hidpi&&l.hidpi?"hidpi/":"")+u[d]+".png");l.isSupportedEnvironment=l.isSupportedEnvironment||function(){return!0},t[s]=1}if(c)for(c.split&&(c=c.split(",")),l=0;l<c.length;l++)r[c[l]]||a.push(c[l])}if(a.length)n.call(this,a);else{for(s in r)(l=r[s]).onLoad&&!l.onLoad._called&&(!1===l.onLoad()&&delete r[s],l.onLoad._called=1);i&&i.call(o||window,r)}}),this)}).call(this,n)}})),CKEDITOR.plugins.setLang=function(e,t,n){var i=this.get(e);e=i.langEntries||(i.langEntries={}),(i=i.lang||(i.lang=[])).split&&(i=i.split(",")),-1==CKEDITOR.tools.indexOf(i,t)&&i.push(t),e[t]=n},CKEDITOR.ui=function(e){return e.ui?e.ui:(this.items={},this.instances={},this.editor=e,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(e,t,n){n.name=e.toLowerCase();var i=this.items[e]={type:t,command:n.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(i,n)},get:function(e){return this.instances[e]},create:function(e){var t=this.items[e],n=t&&this._.handlers[t.type],i=t&&t.command&&this.editor.getCommand(t.command);return n=n&&n.create.apply(this,t.args),this.instances[e]=n,i&&i.uiItems.push(n),n&&!n.type&&(n.type=t.type),n},addHandler:function(e,t){this._.handlers[e]=t},space:function(e){return CKEDITOR.document.getById(this.spaceId(e))},spaceId:function(e){return this.editor.id+"_"+e}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function t(e,t,i){if(CKEDITOR.event.call(this),e=e&&CKEDITOR.tools.clone(e),void 0!==t){if(!(t instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!i)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&i==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!function(e,t){return t==CKEDITOR.ELEMENT_MODE_INLINE?e.is(CKEDITOR.dtd.$editable)||e.is("textarea"):t==CKEDITOR.ELEMENT_MODE_REPLACE?!e.is(CKEDITOR.dtd.$nonBodyContent):1}(t,i))throw Error('The specified element mode is not supported on element: "'+t.getName()+'".');this.element=t,this.elementMode=i,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(t.getId()||t.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||function(){do{var e="editor"+ ++a}while(CKEDITOR.instances[e]);return e}(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",n),this.on("selectionChange",(function(e){o(this,e.data.path)})),this.on("activeFilterChange",(function(){o(this,this.elementPath(),!0)})),this.on("mode",n),CKEDITOR.dom.selection.setupEditorOptimization(this),this.on("instanceReady",(function(){if(this.config.startupFocus){if("end"===this.config.startupFocus){var e=this.createRange();e.selectNodeContents(this.editable()),e.shrink(CKEDITOR.SHRINK_ELEMENT,!0),e.collapse(),this.getSelection().selectRanges([e])}this.focus()}})),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout((function(){this.isDestroyed()||this.isDetached()||function(e,t){e.on("customConfigLoaded",(function(){if(t){if(t.on)for(var n in t.on)e.on(n,t.on[n]);CKEDITOR.tools.extend(e.config,t,!0),delete e.config.on}n=e.config,e.readOnly=!!n.readOnly||(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.element.is("textarea")?e.element.hasAttribute("disabled")||e.element.hasAttribute("readonly"):e.element.isReadOnly():e.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.element.hasAttribute("disabled")||e.element.hasAttribute("readonly"))),e.blockless=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!(e.element.is("textarea")||CKEDITOR.dtd[e.element.getName()].p),e.tabIndex=n.tabIndex||e.element&&e.element.getAttribute("tabindex")||0,e.activeEnterMode=e.enterMode=e.blockless?CKEDITOR.ENTER_BR:n.enterMode,e.activeShiftEnterMode=e.shiftEnterMode=e.blockless?CKEDITOR.ENTER_BR:n.shiftEnterMode,n.skin&&(CKEDITOR.skinName=n.skin),e.fireOnce("configLoaded"),e.dataProcessor=new CKEDITOR.htmlDataProcessor(e),e.filter=e.activeFilter=new CKEDITOR.filter(e),function(e){CKEDITOR.skin.loadPart("editor",(function(){!function(e){CKEDITOR.lang.load(e.config.language,e.config.defaultLanguage,(function(t,n){var i=e.config.title;e.langCode=t,e.lang=CKEDITOR.tools.prototypedCopy(n),e.title="string"==typeof i||!1===i?i:[e.lang.editor,e.name].join(", "),e.config.contentsLangDirection||(e.config.contentsLangDirection=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.element.getDirection(1):e.lang.dir),e.fire("langLoaded"),function(e){e.getStylesSet((function(t){e.once("loaded",(function(){e.fire("stylesSet",{styles:t})}),null,null,1),function(e){function t(e){return e?(CKEDITOR.tools.isArray(e)&&(e=e.join(",")),e.replace(/\s/g,"")):""}var n=e.config,i=t(n.plugins),o=t(n.extraPlugins),r=t(n.removePlugins);if(o){var s=new RegExp("(?:^|,)(?:"+o.replace(/,/g,"|")+")(?=,|$)","g");i=(i=i.replace(s,""))+","+o}if(r){var a=new RegExp("(?:^|,)(?:"+r.replace(/,/g,"|")+")(?=,|$)","g");i=i.replace(a,"")}CKEDITOR.env.air&&(i+=",adobeair"),CKEDITOR.plugins.load(i.split(","),(function(t){var i=[],o=[],r=[];for(var s in e.plugins=CKEDITOR.tools.extend({},e.plugins,t),t){var l,c=t[s],u=c.lang,d=null,h=c.requires;if(CKEDITOR.tools.isArray(h)&&(h=h.join(",")),h&&(l=h.match(a)))for(;h=l.pop();)CKEDITOR.error("editor-plugin-required",{plugin:h.replace(",",""),requiredBy:s});u&&!e.lang[s]&&(u.split&&(u=u.split(",")),d=0<=CKEDITOR.tools.indexOf(u,e.langCode)?e.langCode:(d=e.langCode.replace(/-.*/,""))!=e.langCode&&0<=CKEDITOR.tools.indexOf(u,d)?d:0<=CKEDITOR.tools.indexOf(u,"en")?"en":u[0],c.langEntries&&c.langEntries[d]?(e.lang[s]=c.langEntries[d],d=null):r.push(CKEDITOR.getUrl(c.path+"lang/"+d+".js"))),o.push(d),i.push(c)}CKEDITOR.scriptLoader.load(r,(function(){if(!e.isDestroyed()&&!e.isDetached()){for(var t=["beforeInit","init","afterInit"],r=0;r<t.length;r++)for(var s=0;s<i.length;s++){var a=i[s];0===r&&o[s]&&a.lang&&a.langEntries&&(e.lang[a.name]=a.langEntries[o[s]]),a[t[r]]&&a[t[r]](e)}for(e.fireOnce("pluginsLoaded"),n.keystrokes&&e.setKeystroke(e.config.keystrokes),s=0;s<e.config.blockedKeystrokes.length;s++)e.keystrokeHandler.blockedKeystrokes[e.config.blockedKeystrokes[s]]=1;e.status="loaded",e.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,e)}}))}))}(e)}))}(e)}))}(e)}))}(e)})),t&&null!=t.customConfig&&(e.config.customConfig=t.customConfig),r(e)||e.fireOnce("customConfigLoaded")}(this,e)}),0,this)}function n(){var e,t=this.commands;for(e in t)i(this,t[e])}function i(e,t){t[t.startDisabled||e.readOnly&&!t.readOnly?"disable":t.modes[e.mode]?"enable":"disable"]()}function o(e,t,n){if(t){var i,o,r=e.commands;for(o in r)i=r[o],(n||i.contextSensitive)&&i.refresh(e,t)}}function r(e){if(!(t=e.config.customConfig))return!1;var t=CKEDITOR.getUrl(t),n=l[t]||(l[t]={});return n.fn?(n.fn.call(e,e.config),CKEDITOR.getUrl(e.config.customConfig)!=t&&r(e)||e.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(t,(function(){n.fn=n.fn||CKEDITOR.editorConfig||function(){},r(e)})),!0}function s(){var e=this.element;if(e&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var t=this.getData();return this.config.htmlEncodeOutput&&(t=CKEDITOR.tools.htmlEncode(t)),e.is("textarea")?e.setValue(t):e.setHtml(t),!0}return!1}t.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=t;var a=0,l={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{plugins:{detectConflict:function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(this[i])return CKEDITOR.warn("editor-plugin-conflict",{plugin:e,replacedWith:i}),!0}return!1}},addCommand:function(e,t){t.name=e.toLowerCase();var n=t instanceof CKEDITOR.command?t:new CKEDITOR.command(this,t);return this.mode&&i(this,n),this.commands[e]=n},_attachToForm:function(){function e(e){t.updateElement(),t._.required&&!n.getValue()&&!1===t.fire("required")&&e.data.preventDefault()}var t=this,n=t.element,i=new CKEDITOR.dom.element(n.$.form);n.is("textarea")&&i&&(i.on("submit",e),function(e){return!!(e&&e.call&&e.apply)}(i.$.submit)&&(i.$.submit=CKEDITOR.tools.override(i.$.submit,(function(t){return function(){e(),t.apply?t.apply(this):t()}}))),t.on("destroy",(function(){i.removeListener("submit",e)})))},destroy:function(e){var t=CKEDITOR.filter.instances,n=this;this.fire("beforeDestroy"),!e&&s.call(this),this.editable(null),this.filter&&delete this.filter,CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(t),(function(e){e=t[e],n===e.editor&&e.destroy()})),delete this.activeFilter,this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(e){if(!e){if(!(e=this.getSelection()))return null;e=e.getStartElement()}return e?new CKEDITOR.dom.elementPath(e,this.editable()):null},createRange:function(){var e=this.editable();return e?new CKEDITOR.dom.range(e):null},execCommand:function(e,t){var n=this.getCommand(e),i={name:e,commandData:t||{},command:n};return!(!n||n.state==CKEDITOR.TRISTATE_DISABLED||!1===this.fire("beforeCommandExec",i)||(i.returnValue=n.exec(i.commandData),n.async||!1===this.fire("afterCommandExec",i)))&&i.returnValue},getCommand:function(e){return this.commands[e]},getData:function(e){!e&&this.fire("beforeGetData");var t=this._.data;return"string"!=typeof t&&(t=(t=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?t.is("textarea")?t.getValue():t.getHtml():""),t={dataValue:t},!e&&this.fire("getData",t),t.dataValue},getSnapshot:function(){var e=this.fire("getSnapshot");return"string"!=typeof e&&(e=(e=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?e.is("textarea")?e.getValue():e.getHtml():""),e},loadSnapshot:function(e){this.fire("loadSnapshot",e)},setData:function(t,n,i){var o=!0,r=n;n&&"object"==e(n)&&(i=n.internal,r=n.callback,o=!n.noSnapshot),!i&&o&&this.fire("saveSnapshot"),!r&&i||this.once("dataReady",(function(e){!i&&o&&this.fire("saveSnapshot"),r&&r.call(e.editor)})),t={dataValue:t},!i&&this.fire("setData",t),this._.data=t.dataValue,!i&&this.fire("afterSetData",t)},setReadOnly:function(e){e=null==e||e,this.readOnly!=e&&(this.readOnly=e,this.keystrokeHandler.blockedKeystrokes[8]=+e,this.editable().setReadOnly(e),this.fire("readOnly"))},insertHtml:function(e,t,n){this.fire("insertHtml",{dataValue:e,mode:t,range:n})},insertText:function(e){this.fire("insertText",e)},insertElement:function(e){this.fire("insertElement",e)},getSelectedHtml:function(e){var t=this.editable(),n=(n=this.getSelection())&&n.getRanges();return t&&n&&0!==n.length?(t=function(e,t){function n(e){var t=e.startContainer,n=e.endContainer;return!(!t.is||!(t.is("tr")||t.is("td")&&t.equals(n)&&e.endOffset===t.getChildCount()))}function i(e){var t=e.startContainer;return t.is("tr")?e.cloneContents():t.clone(!0)}for(var o,r,s,a=new CKEDITOR.dom.documentFragment,l=0;l<e.length;l++){var c=e[l],u=c.startContainer.getAscendant("tr",!0);n(c)?(o||((o=u.getAscendant("table").clone()).append(u.getAscendant({thead:1,tbody:1,tfoot:1}).clone()),a.append(o),o=o.findOne("thead, tbody, tfoot")),r&&r.equals(u)||(r=u,s=u.clone(),o.append(s)),s.append(i(c))):a.append(c.cloneContents())}return o?a:t.getHtmlFromRange(e[0])}(n,t),e?t.getHtml():t):null},extractSelectedHtml:function(e,t){var n,i=this.editable(),o=this.getSelection().getRanges(),r=new CKEDITOR.dom.documentFragment;if(!i||0===o.length)return null;for(n=0;n<o.length;n++)r.append(i.extractHtmlFromRange(o[n],t));return t||this.getSelection().selectRanges([o[0]]),e?r.getHtml():r},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return s.call(this)},setKeystroke:function(){for(var e,t,n=this.keystrokeHandler.keystrokes,i=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],o=i.length;o--;)e=i[o],t=0,CKEDITOR.tools.isArray(e)&&(t=e[1],e=e[0]),t?n[e]=t:delete n[e]},getCommandKeystroke:function(e,t){var n="string"==typeof e?this.getCommand(e):e,i=[];if(n){var o=CKEDITOR.tools.object.findKey(this.commands,n),r=this.keystrokeHandler.keystrokes;if(n.fakeKeystroke)i.push(n.fakeKeystroke);else for(var s in r)r[s]===o&&i.push(s)}return t?i:i[0]||null},addFeature:function(e){return this.filter.addFeature(e)},setActiveFilter:function(e){e||(e=this.filter),this.activeFilter!==e&&(this.activeFilter=e,this.fire("activeFilterChange"),e===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(e.getAllowedEnterMode(this.enterMode),e.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(e,t){e=e?this.blockless?CKEDITOR.ENTER_BR:e:this.enterMode,t=t?this.blockless?CKEDITOR.ENTER_BR:t:this.shiftEnterMode,this.activeEnterMode==e&&this.activeShiftEnterMode==t||(this.activeEnterMode=e,this.activeShiftEnterMode=t,this.fire("activeEnterModeChange"))},showNotification:function(e){alert(e)},isDetached:function(){return!!this.container&&this.container.isDetached()},isDestroyed:function(){return"destroyed"===this.status}}),CKEDITOR.editor._getEditorElement=function(e){if(!CKEDITOR.env.isCompatible)return null;var t=CKEDITOR.dom.element.get(e);return t?t.getEditor()?(CKEDITOR.error("editor-element-conflict",{editorName:t.getEditor().name}),null):t:(CKEDITOR.error("editor-incorrect-element",{element:e}),null)}}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}},function(){var e=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,t={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(n){for(var i,o,r,s=0;i=this._.htmlPartsRegex.exec(n);)if((o=i.index)>s&&(s=n.substring(s,o),r?r.push(s):this.onText(s)),s=this._.htmlPartsRegex.lastIndex,!(o=i[1])||(o=o.toLowerCase(),r&&CKEDITOR.dtd.$cdata[o]&&(this.onCDATA(r.join("")),r=null),r))if(r)r.push(i[0]);else if(o=i[3]){if(o=o.toLowerCase(),!/="/.test(o)){var a,l={},c=i[4];if(i=!!i[5],c)for(;a=e.exec(c);){var u=a[1].toLowerCase();a=a[2]||a[3]||a[4]||"",l[u]=!a&&t[u]?u:CKEDITOR.tools.htmlDecodeAttr(a)}this.onTagOpen(o,l,i),!r&&CKEDITOR.dtd.$cdata[o]&&(r=[])}}else(o=i[2])&&this.onComment(o);else this.onTagClose(o);n.length>s&&this.onText(n.substring(s,n.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(e){this._.output.push("<",e)},openTagClose:function(e,t){t?this._.output.push(" />"):this._.output.push(">")},attribute:function(e,t){"string"==typeof t&&(t=CKEDITOR.tools.htmlEncodeAttr(t)),this._.output.push(" ",e,'="',t,'"')},closeTag:function(e){this._.output.push("</",e,">")},text:function(e){this._.output.push(e)},comment:function(e){this._.output.push("\x3c!--",e,"--\x3e")},write:function(e){this._.output.push(e)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(e){var t=this._.output.join("");return e&&this.reset(),t}}}),CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var e=this.parent.children,t=CKEDITOR.tools.indexOf(e,this),n=this.previous,i=this.next;n&&(n.next=i),i&&(i.previous=n),e.splice(t,1),this.parent=null},replaceWith:function(e){var t=this.parent.children,n=CKEDITOR.tools.indexOf(t,this),i=e.previous=this.previous,o=e.next=this.next;i&&(i.next=e),o&&(o.previous=e),t[n]=e,e.parent=this.parent,this.parent=null},insertAfter:function(e){var t=e.parent.children,n=CKEDITOR.tools.indexOf(t,e),i=e.next;t.splice(n+1,0,this),this.next=e.next,this.previous=e,e.next=this,i&&(i.previous=this),this.parent=e.parent},insertBefore:function(e){var t=e.parent.children,n=CKEDITOR.tools.indexOf(t,e);t.splice(n,0,this),this.next=e,(this.previous=e.previous)&&(e.previous.next=this),e.previous=this,this.parent=e.parent},getAscendant:function(e){for(var t="function"==typeof e?e:"string"==typeof e?function(t){return t.name==e}:function(t){return t.name in e},n=this.parent;n&&n.type==CKEDITOR.NODE_ELEMENT;){if(t(n))return n;n=n.parent}return null},wrapWith:function(e){return this.replaceWith(e),e.add(this),e},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(e){return e||{}}},CKEDITOR.htmlParser.comment=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(e,t){var n=this.value;return(n=e.onComment(t,n,this))?"string"!=typeof n?(this.replaceWith(n),!1):(this.value=n,!0):(this.remove(),!1)},writeHtml:function(e,t){t&&this.filter(t),e.comment(this.value)}}),CKEDITOR.htmlParser.text=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(e,t){if(!(this.value=e.onText(t,this.value,this)))return this.remove(),!1},writeHtml:function(e,t){t&&this.filter(t),e.text(this.value)}}),CKEDITOR.htmlParser.cdata=function(e){this.value=e},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(e){e.write(this.value)}}),CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function e(e){return!e.attributes["data-cke-survive"]&&("a"==e.name&&e.attributes.href||CKEDITOR.dtd.$removeEmpty[e.name])}var t=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),n={ol:1,ul:1},i=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),o={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(r,s,a){function l(e){var t;if(0<m.length)for(var n=0;n<m.length;n++){var i=m[n],o=i.name,r=CKEDITOR.dtd[o],s=T.name&&CKEDITOR.dtd[T.name];s&&!s[o]||e&&r&&!r[e]&&CKEDITOR.dtd[e]?o==T.name&&(d(T,T.parent,1),n--):(t||(c(),t=1),(i=i.clone()).parent=T,T=i,m.splice(n,1),n--)}}function c(){for(;E.length;)d(E.shift(),T)}function u(e){if(e._.isBlockLike&&"pre"!=e.name&&"textarea"!=e.name){var t,n=e.children.length,i=e.children[n-1];i&&i.type==CKEDITOR.NODE_TEXT&&((t=CKEDITOR.tools.rtrim(i.value))?i.value=t:e.children.length=n-1)}}function d(t,n,i){n=n||T||g;var o=T;void 0===t.previous&&(h(n,t)&&(T=n,p.onTagOpen(a,{}),t.returnPoint=n=T),u(t),e(t)&&!t.children.length||n.add(t),"pre"==t.name&&(v=!1),"textarea"==t.name&&(C=!1)),t.returnPoint?(T=t.returnPoint,delete t.returnPoint):T=i?n:o}function h(e,t){var n,i;if((e==g||"body"==e.name)&&a&&(!e.name||CKEDITOR.dtd[e.name][a]))return(n=t.attributes&&(i=t.attributes["data-cke-real-element-type"])?i:t.name)&&n in CKEDITOR.dtd.$inline&&!(n in CKEDITOR.dtd.head)&&!t.isOrphan||t.type==CKEDITOR.NODE_TEXT}function f(e,t){return(e in CKEDITOR.dtd.$listItem||e in CKEDITOR.dtd.$tableContent)&&(e==t||"dt"==e&&"dd"==t||"dd"==e&&"dt"==t)}var p=new CKEDITOR.htmlParser,g=s instanceof CKEDITOR.htmlParser.element?s:"string"==typeof s?new CKEDITOR.htmlParser.element(s):new CKEDITOR.htmlParser.fragment,m=[],E=[],T=g,C="textarea"==g.name,v="pre"==g.name;for(p.onTagOpen=function(o,r,s,a){if((r=new CKEDITOR.htmlParser.element(o,r)).isUnknown&&s&&(r.isEmpty=!0),r.isOptionalClose=a,e(r))m.push(r);else{if("pre"==o)v=!0;else{if("br"==o&&v)return void T.add(new CKEDITOR.htmlParser.text("\n"));"textarea"==o&&(C=!0)}if("br"==o)E.push(r);else{for(;a=(s=T.name)?CKEDITOR.dtd[s]||(T._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):i,!(r.isUnknown||T.isUnknown||a[o]);)if(T.isOptionalClose)p.onTagClose(s);else if(o in n&&s in n)(s=(s=T.children)[s.length-1])&&"li"==s.name||d(s=new CKEDITOR.htmlParser.element("li"),T),!r.returnPoint&&(r.returnPoint=T),T=s;else if(o in CKEDITOR.dtd.$listItem&&!f(o,s))p.onTagOpen("li"==o?"ul":"dl",{},0,1);else if(s in t&&!f(o,s))!r.returnPoint&&(r.returnPoint=T),T=T.parent;else{if(s in CKEDITOR.dtd.$inline&&m.unshift(T),!T.parent){r.isOrphan=1;break}d(T,T.parent,1)}l(o),c(),r.parent=T,r.isEmpty?d(r):T=r}}},p.onTagClose=function(e){for(var t=m.length-1;0<=t;t--)if(e==m[t].name)return void m.splice(t,1);for(var n=[],i=[],o=T;o!=g&&o.name!=e;)o._.isBlockLike||i.unshift(o),n.push(o),o=o.returnPoint||o.parent;if(o!=g){for(t=0;t<n.length;t++){var r=n[t];d(r,r.parent)}T=o,o._.isBlockLike&&c(),d(o,o.parent),o==T&&(T=T.parent),m=m.concat(i)}"body"==e&&(a=!1)},p.onText=function(e){if(T._.hasInlineStarted&&!E.length||v||C||0!==(e=CKEDITOR.tools.ltrim(e)).length){var n=T.name,r=n?CKEDITOR.dtd[n]||(T._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):i;C||r["#"]||!(n in t)?(c(),l(),v||C||(e=e.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),e=new CKEDITOR.htmlParser.text(e),h(T,e)&&this.onTagOpen(a,{},0,1),T.add(e)):(p.onTagOpen(o[n]||""),p.onText(e))}},p.onCDATA=function(e){T.add(new CKEDITOR.htmlParser.cdata(e))},p.onComment=function(e){c(),l(),T.add(new CKEDITOR.htmlParser.comment(e))},p.parse(r),c();T!=g;)d(T,T.parent,1);return u(g),g},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(e,t){isNaN(t)&&(t=this.children.length);var n=0<t?this.children[t-1]:null;if(n){if(e._.isBlockLike&&n.type==CKEDITOR.NODE_TEXT&&(n.value=CKEDITOR.tools.rtrim(n.value),0===n.value.length))return this.children.pop(),void this.add(e);n.next=e}e.previous=n,e.parent=this,this.children.splice(t,0,e),this._.hasInlineStarted||(this._.hasInlineStarted=e.type==CKEDITOR.NODE_TEXT||e.type==CKEDITOR.NODE_ELEMENT&&!e._.isBlockLike)},filter:function(e,t){t=this.getFilterContext(t),e.onRoot(t,this),this.filterChildren(e,!1,t)},filterChildren:function(e,t,n){if(this.childrenFilteredBy!=e.id)for(n=this.getFilterContext(n),t&&!this.parent&&e.onRoot(n,this),this.childrenFilteredBy=e.id,t=0;t<this.children.length;t++)!1===this.children[t].filter(e,n)&&t--},writeHtml:function(e,t){t&&this.filter(t),this.writeChildrenHtml(e)},writeChildrenHtml:function(e,t,n){var i=this.getFilterContext();for(n&&!this.parent&&t&&t.onRoot(i,this),t&&this.filterChildren(t,!1,i),t=0,i=(n=this.children).length;t<i;t++)n[t].writeHtml(e)},forEach:function(e,t,n){if(!(n||t&&this.type!=t))var i=e(this);if(!1!==i){n=this.children;for(var o=0;o<n.length;o++)(i=n[o]).type==CKEDITOR.NODE_ELEMENT?i.forEach(e,t):t&&i.type!=t||e(i)}},getFilterContext:function(e){return e||{}}}}(),function(){function t(){this.rules=[]}function n(e,n,i,o){var r,s;for(r in n)(s=e[r])||(s=e[r]=new t),s.add(n[r],i,o)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(e){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new t,this.attributeNameRules=new t,this.elementsRules={},this.attributesRules={},this.textRules=new t,this.commentRules=new t,this.rootRules=new t,e&&this.addRules(e,10)},proto:{addRules:function(t,i){var o;"number"==typeof i?o=i:i&&"priority"in i&&(o=i.priority),"number"!=typeof o&&(o=10),"object"!=e(i)&&(i={}),t.elementNames&&this.elementNameRules.addMany(t.elementNames,o,i),t.attributeNames&&this.attributeNameRules.addMany(t.attributeNames,o,i),t.elements&&n(this.elementsRules,t.elements,o,i),t.attributes&&n(this.attributesRules,t.attributes,o,i),t.text&&this.textRules.add(t.text,o,i),t.comment&&this.commentRules.add(t.comment,o,i),t.root&&this.rootRules.add(t.root,o,i)},applyTo:function(e){e.filter(this)},onElementName:function(e,t){return this.elementNameRules.execOnName(e,t)},onAttributeName:function(e,t){return this.attributeNameRules.execOnName(e,t)},onText:function(e,t,n){return this.textRules.exec(e,t,n)},onComment:function(e,t,n){return this.commentRules.exec(e,t,n)},onRoot:function(e,t){return this.rootRules.exec(e,t)},onElement:function(e,t){for(var n,i=[this.elementsRules["^"],this.elementsRules[t.name],this.elementsRules.$],o=0;3>o;o++)if(n=i[o]){if(!1===(n=n.exec(e,t,this)))return null;if(n&&n!=t)return this.onNode(e,n);if(t.parent&&!t.name)break}return t},onNode:function(e,t){var n=t.type;return n==CKEDITOR.NODE_ELEMENT?this.onElement(e,t):n==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(e,t.value,t)):n==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(e,t.value,t)):null},onAttribute:function(e,t,n,i){return(n=this.attributesRules[n])?n.exec(e,i,t,this):i}}}),CKEDITOR.htmlParser.filterRulesGroup=t,t.prototype={add:function(e,t,n){this.rules.splice(this.findIndex(t),0,{value:e,priority:t,options:n})},addMany:function(e,t,n){for(var i=[this.findIndex(t),0],o=0,r=e.length;o<r;o++)i.push({value:e[o],priority:t,options:n});this.rules.splice.apply(this.rules,i)},findIndex:function(e){for(var t=this.rules,n=t.length-1;0<=n&&e<t[n].priority;)n--;return n+1},exec:function(e,t){var n,i,o,r,s=t instanceof CKEDITOR.htmlParser.node||t instanceof CKEDITOR.htmlParser.fragment,a=Array.prototype.slice.call(arguments,1),l=this.rules,c=l.length;for(r=0;r<c;r++)if(s&&(n=t.type,i=t.name),o=l[r],!(e.nonEditable&&!o.options.applyToAll||e.nestedEditable&&o.options.excludeNestedEditable)){if(!1===(o=o.value.apply(null,a))||s&&o&&(o.name!=i||o.type!=n))return o;null!=o&&(a[0]=t=o)}return t},execOnName:function(e,t){for(var n,i=0,o=this.rules,r=o.length;t&&i<r;i++)n=o[i],e.nonEditable&&!n.options.applyToAll||e.nestedEditable&&n.options.excludeNestedEditable||(t=t.replace(n.value[0],n.value[1]));return t}}}(),function(){function t(e,t){function n(e){return e||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(" "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function l(e,t){return function(r){if(r.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var a,l,u=[],d=i(r);if(d)for(c(d,1)&&u.push(d);d;)s(d)&&(a=o(d))&&c(a)&&((l=o(a))&&!s(l)?u.push(a):(n(h).insertAfter(a),a.remove())),d=d.previous;for(d=0;d<u.length;d++)u[d].remove();(u=!e||!1!==("function"==typeof t?t(r):t))&&(u=!(!h&&!CKEDITOR.env.needsBrFiller&&r.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||!h&&!CKEDITOR.env.needsBrFiller&&(7<document.documentMode||r.name in CKEDITOR.dtd.tr||r.name in CKEDITOR.dtd.$listItem))&&(!(u=i(r))||"form"==r.name&&"input"==u.name)),u&&r.add(n(e))}}}function c(e,t){return!(h&&!CKEDITOR.env.needsBrFiller||e.type!=CKEDITOR.NODE_ELEMENT||"br"!=e.name||e.attributes["data-cke-eol"])||!!(e.type==CKEDITOR.NODE_TEXT&&(n=e.value.match(p))&&(n.index&&(new CKEDITOR.htmlParser.text(e.value.substring(0,n.index)).insertBefore(e),e.value=n[0]),!CKEDITOR.env.needsBrFiller&&h&&(!t||e.parent.name in f)||!h&&((n=e.previous)&&"br"==n.name||!n||s(n))));var n}var u,d={elements:{}},h="html"==t,f=CKEDITOR.tools.extend({},T);for(u in f)"#"in m[u]||delete f[u];for(u in f)d.elements[u]=l(h,e.config.fillEmptyBlocks);return d.root=l(h,!1),d.elements.br=function(e){return function(t){if(t.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var i=t.attributes;if("data-cke-bogus"in i||"data-cke-eol"in i)delete i["data-cke-bogus"];else{for(i=t.next;i&&r(i);)i=i.next;var l=o(t);!i&&s(t.parent)?a(t.parent,n(e)):s(i)&&l&&!s(l)&&n(e).insertBefore(i)}}}}(h),d}function n(e,t){return e!=CKEDITOR.ENTER_BR&&!1!==t&&(e==CKEDITOR.ENTER_DIV?"div":"p")}function i(e){for(e=e.children[e.children.length-1];e&&r(e);)e=e.previous;return e}function o(e){for(e=e.previous;e&&r(e);)e=e.previous;return e}function r(e){return e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(e.value)||e.type==CKEDITOR.NODE_ELEMENT&&e.attributes["data-cke-bookmark"]}function s(e){return e&&(e.type==CKEDITOR.NODE_ELEMENT&&e.name in T||e.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function a(e,t){var n=e.children[e.children.length-1];e.children.push(t),t.parent=e,n&&(n.next=t,t.previous=n)}function l(e){"false"!=(e=e.attributes).contenteditable&&(e["data-cke-editable"]=e.contenteditable?"true":1),e.contenteditable="false"}function c(e){switch((e=e.attributes)["data-cke-editable"]){case"true":e.contenteditable="true";break;case"1":delete e.contenteditable}}function u(e,t){return e.replace(t,(function(e,t,n){return 0===e.indexOf("<textarea")&&(e=t+d(n).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(e)+"</cke:encoded>"}))}function d(e){return e.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,(function(e,t){return decodeURIComponent(t)}))}function h(e,t){var n=t._.dataStore;return e.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,(function(e,t){return decodeURIComponent(t)})).replace(/\{cke_protected_(\d+)\}/g,(function(e,t){return n&&n[t]||""}))}var f;CKEDITOR.htmlDataProcessor=function(e){var i,o,r=this;this.editor=e,this.dataFilter=i=new CKEDITOR.htmlParser.filter,this.htmlFilter=o=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,i.addRules(C),i.addRules(v,{applyToAll:!0}),i.addRules(t(e,"data"),{applyToAll:!0}),o.addRules(I),o.addRules(D,{applyToAll:!0}),o.addRules(t(e,"html"),{applyToAll:!0}),e.on("toHtml",(function(t){var i,o,r=(t=t.data).dataValue;r=function(e,t){var n=[],i=t.config.protectedSource,o=t._.dataStore||(t._.dataStore={id:1}),r=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g;i=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(i),e=e.replace(/\x3c!--[\s\S]*?--\x3e/g,(function(e){return"\x3c!--{cke_tempcomment}"+(n.push(e)-1)+"--\x3e"}));for(var s=0;s<i.length;s++)e=e.replace(i[s],(function(e){return e=e.replace(r,(function(e,t,i){return n[i]})),/cke_temp(comment)?/.test(e)?e:"\x3c!--{cke_temp}"+(n.push(e)-1)+"--\x3e"}));return(e=(e=e.replace(r,(function(e,t,i){return"\x3c!--"+g+(t?"{C}":"")+encodeURIComponent(n[i]).replace(/--/g,"%2D%2D")+"--\x3e"}))).replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,(function(e){return e.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,(function(e,t){return o[o.id]=decodeURIComponent(t),"{cke_protected_"+o.id+++"}"}))}))).replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,(function(e,n,i,o){return"<"+n+i+">"+h(d(o),t)+"</"+n+">"}))}(r=f(r),e),r=u(r,_),r=(r=(r=(r=(r=u(r=function(e){return e.replace(O,(function(e,t,n){return"<"+t+n.replace(b,(function(e,t){return y.test(t)&&-1==n.indexOf("data-cke-saved-"+t)?" data-cke-saved-"+e+" data-cke-"+CKEDITOR.rnd+"-"+e:e}))+">"}))}(r),R)).replace(k,"$1cke:$2")).replace(S,"<cke:$1$2></cke:$1>")).replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2")).replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2"),i=t.context||e.editable().getName(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==i&&(i="div",r="<pre>"+r+"</pre>",o=1),(i=e.document.createElement(i)).setHtml("a"+r),r=(r=i.getHtml().substr(1)).replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),o&&(r=r.replace(/^<pre>|<\/pre>$/gi,"")),r=d(r=function(e){return e.replace(K,(function(e,t){return decodeURIComponent(t)}))}(r=r.replace(w,"$1$2"))),i=!1!==t.fixForBody&&n(t.enterMode,e.config.autoParagraph),r=CKEDITOR.htmlParser.fragment.fromHtml(r,t.context,i),i&&!(o=r).children.length&&CKEDITOR.dtd[o.name][i]&&(i=new CKEDITOR.htmlParser.element(i),o.add(i)),t.dataValue=r}),null,null,5),e.on("toHtml",(function(t){t.data.filter.applyTo(t.data.dataValue,!0,t.data.dontFilter,t.data.enterMode)&&e.fire("dataFiltered")}),null,null,6),e.on("toHtml",(function(e){e.data.dataValue.filterChildren(r.dataFilter,!0)}),null,null,10),e.on("toHtml",(function(e){var t=(e=e.data).dataValue,n=new CKEDITOR.htmlParser.basicWriter;t.writeChildrenHtml(n),t=n.getHtml(!0),e.dataValue=function(e){return e.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,(function(e){return"\x3c!--"+g+"{C}"+encodeURIComponent(e).replace(/--/g,"%2D%2D")+"--\x3e"}))}(t)}),null,null,15),e.on("toDataFormat",(function(t){var i=t.data.dataValue;t.data.enterMode!=CKEDITOR.ENTER_BR&&(i=i.replace(/^<br *\/?>/i,"")),t.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(i,t.data.context,n(t.data.enterMode,e.config.autoParagraph))}),null,null,5),e.on("toDataFormat",(function(e){e.data.dataValue.filterChildren(r.htmlFilter,!0)}),null,null,10),e.on("toDataFormat",(function(e){e.data.filter.applyTo(e.data.dataValue,!1,!0)}),null,null,11),e.on("toDataFormat",(function(t){var n=t.data.dataValue,i=r.writer;i.reset(),n.writeChildrenHtml(i),n=h(n=d(n=i.getHtml(!0)),e),t.data.dataValue=n}),null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(t,n,i,o){var r,s,a,l,c=this.editor;return n&&"object"==e(n)?(r=n.context,i=n.fixForBody,o=n.dontFilter,s=n.filter,a=n.enterMode,l=n.protectedWhitespaces):r=n,r||null===r||(r=c.editable().getName()),c.fire("toHtml",{dataValue:t,context:r,fixForBody:i,dontFilter:o,filter:s||c.filter,enterMode:a||c.enterMode,protectedWhitespaces:l}).dataValue},toDataFormat:function(e,t){var n,i,o;return t&&(n=t.context,i=t.filter,o=t.enterMode),n||null===n||(n=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:e,filter:i||this.editor.filter,context:n,enterMode:o||this.editor.enterMode}).dataValue}};var p=/(?:&nbsp;|\xa0)$/,g="{cke_protected}",m=CKEDITOR.dtd,E="caption colgroup col thead tfoot tbody".split(" "),T=CKEDITOR.tools.extend({},m.$blockLimit,m.$block),C={elements:{input:l,textarea:l}},v={attributeNames:[[/^on/,"data-cke-pa-on"],[/^srcdoc/,"data-cke-pa-srcdoc"],[/^data-cke-expando$/,""]],elements:{iframe:function(e){if(e.attributes&&e.attributes.src){var t=e.attributes.src.toLowerCase().replace(/[^a-z]/gi,"");0!==t.indexOf("javascript")&&0!==t.indexOf("data")||(e.attributes["data-cke-pa-src"]=e.attributes.src,delete e.attributes.src)}}}},I={elements:{embed:function(e){if((n=e.parent)&&"object"==n.name){var t=n.attributes.width,n=n.attributes.height;t&&(e.attributes.width=t),n&&(e.attributes.height=n)}},a:function(e){var t=e.attributes;if(!(e.children.length||t.name||t.id||e.attributes["data-cke-saved-name"]))return!1}}},D={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(e){var t=e.attributes;if(t){if(t["data-cke-temp"])return!1;for(var n=["name","href","src"],i=0;i<n.length;i++)"data-cke-saved-"+n[i]in t&&delete t[n[i]]}return e},table:function(e){e.children.slice(0).sort((function(e,t){var n,i;return e.type==CKEDITOR.NODE_ELEMENT&&t.type==e.type&&(n=CKEDITOR.tools.indexOf(E,e.name),i=CKEDITOR.tools.indexOf(E,t.name)),-1<n&&-1<i&&n!=i||(n=e.parent?e.getIndex():-1,i=t.parent?t.getIndex():-1),n>i?1:-1}))},param:function(e){return e.children=[],e.isEmpty=!0,e},span:function(e){"Apple-style-span"==e.attributes.class&&delete e.name},html:function(e){delete e.attributes.contenteditable,delete e.attributes.class},body:function(e){delete e.attributes.spellcheck,delete e.attributes.contenteditable},style:function(e){var t=e.children[0];t&&t.value&&(t.value=CKEDITOR.tools.trim(t.value)),e.attributes.type||(e.attributes.type="text/css")},title:function(e){var t=e.children[0];!t&&a(e,t=new CKEDITOR.htmlParser.text),t.value=e.attributes["data-cke-title"]||""},input:c,textarea:c},attributes:{class:function(e){return CKEDITOR.tools.ltrim(e.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(D.attributes.style=function(e){return e.replace(/(^|;)([^\:]+)/g,(function(e){return e.toLowerCase()}))});var O=/<(a|area|img|input|source)\b([^>]*)>/gi,b=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,y=/^(href|src|name)$/i,R=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,_=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,K=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,k=/(<\/?)((?:object|embed|param|html|body|head|title)([\s][^>]*)?>)/gi,w=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,S=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi;f=function(){function e(e){return CKEDITOR.tools.array.reduce(e.split(""),(function(e,n){var i=n.toLowerCase(),o=n.toUpperCase(),r=t(i);return i!==o&&(r+="|"+t(o)),e+"("+r+")"}),"")}function t(e){var t,n=(t=e.charCodeAt(0)).toString(16);for(var i in t={htmlCode:"&#"+t+";?",hex:"&#x0*"+n+";?",entity:{"<":"&lt;",">":"&gt;",":":"&colon;"}[e]})t[i]&&(e+="|"+t[i]);return e}var n=new RegExp("("+e("<cke:encoded>")+"(.*?)"+e("</cke:encoded>")+")|("+e("<")+e("/")+"?"+e("cke:encoded>")+")","gi"),i=new RegExp("(("+e("{cke_protected")+")(_[0-9]*)?"+e("}")+")","gi");return function(e){return e.replace(n,"").replace(i,"")}}()}(),CKEDITOR.htmlParser.element=function(e,t){this.name=e,this.attributes=t||{},this.children=[];var n=e||"",i=n.match(/^cke:(.*)/);i&&(n=i[1]),n=!!(CKEDITOR.dtd.$nonBodyContent[n]||CKEDITOR.dtd.$block[n]||CKEDITOR.dtd.$listItem[n]||CKEDITOR.dtd.$tableContent[n]||CKEDITOR.dtd.$nonEditable[n]||"br"==n),this.isEmpty=!!CKEDITOR.dtd.$empty[e],this.isUnknown=!CKEDITOR.dtd[e],this._={isBlockLike:n,hasInlineStarted:this.isEmpty||!n}},CKEDITOR.htmlParser.cssStyle=function(e){var t={};return((e instanceof CKEDITOR.htmlParser.element?e.attributes.style:e)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,(function(e,n,i){"font-family"==n&&(i=i.replace(/["']/g,"")),t[n.toLowerCase()]=i})),{rules:t,populate:function(e){var t=this.toString();t&&(e instanceof CKEDITOR.dom.element?e.setAttribute("style",t):e instanceof CKEDITOR.htmlParser.element?e.attributes.style=t:e.style=t)},toString:function(){var e,n=[];for(e in t)t[e]&&n.push(e,":",t[e],";");return n.join("")}}},function(){var e=function(e,t){return(e=e[0])<(t=t[0])?-1:e>t?1:0},t=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:t.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(e,t){var n,i,o,r,s=this;for(t=s.getFilterContext(t),s.parent||e.onRoot(t,s);;){if(n=s.name,!(i=e.onElementName(t,n)))return this.remove(),!1;if(s.name=i,!(s=e.onElement(t,s)))return this.remove(),!1;if(s!==this)return this.replaceWith(s),!1;if(s.name==n)break;if(s.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(s),!1;if(!s.name)return this.replaceWithChildren(),!1}for(o in n=s.attributes){for(i=n[o];;){if(!(r=e.onAttributeName(t,o))){delete n[o];break}if(r==o)break;delete n[o],o=r}r&&(!1===(i=e.onAttribute(t,s,r,i))?delete n[r]:n[r]=i)}return s.isEmpty||this.filterChildren(e,!1,t),!0},filterChildren:t.filterChildren,writeHtml:function(t,n){n&&this.filter(n);var i,o,r=this.name,s=[],a=this.attributes;for(i in t.openTag(r,a),a)s.push([i,a[i]]);for(t.sortAttributes&&s.sort(e),i=0,o=s.length;i<o;i++)a=s[i],t.attribute(a[0],a[1]);t.openTagClose(r,this.isEmpty),this.writeChildrenHtml(t),this.isEmpty||t.closeTag(r)},writeChildrenHtml:t.writeChildrenHtml,replaceWithChildren:function(){for(var e=this.children,t=e.length;t;)e[--t].insertAfter(this);this.remove()},forEach:t.forEach,getFirst:function(e){if(!e)return this.children.length?this.children[0]:null;"function"!=typeof e&&(e=function(e){return function(t){return t.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof e?t.name==e:t.name in e)}}(e));for(var t=0,n=this.children.length;t<n;++t)if(e(this.children[t]))return this.children[t];return null},getHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(e),e.getHtml()},setHtml:function(e){for(var t=0,n=(e=this.children=CKEDITOR.htmlParser.fragment.fromHtml(e).children).length;t<n;++t)e[t].parent=this},getOuterHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(e),e.getHtml()},split:function(e){for(var t=this.children.splice(e,this.children.length-e),n=this.clone(),i=0;i<t.length;++i)t[i].parent=n;return n.children=t,t[0]&&(t[0].previous=null),0<e&&(this.children[e-1].next=null),this.parent.add(n,this.getIndex()+1),n},find:function(e,t){void 0===t&&(t=!1);var n,i=[];for(n=0;n<this.children.length;n++){var o=this.children[n];("function"==typeof e&&e(o)||"string"==typeof e&&o.name===e)&&i.push(o),t&&o.find&&(i=i.concat(o.find(e,t)))}return i},findOne:function(e,t){var n=null,i=CKEDITOR.tools.array.find(this.children,(function(i){var o="function"==typeof e?e(i):i.name===e;return o||!t?o:(i.children&&i.findOne&&(n=i.findOne(e,!0)),!!n)}));return n||i||null},addClass:function(e){if(!this.hasClass(e)){var t=this.attributes.class||"";this.attributes.class=t+(t?" ":"")+e}},removeClass:function(e){var t=this.attributes.class;t&&((t=CKEDITOR.tools.trim(t.replace(new RegExp("(?:\\s+|^)"+e+"(?:\\s+|$)")," ")))?this.attributes.class=t:delete this.attributes.class)},hasClass:function(e){var t=this.attributes.class;return!!t&&new RegExp("(?:^|\\s)"+e+"(?=\\s|$)").test(t)},getFilterContext:function(e){var t=[];if(e||(e={nonEditable:!1,nestedEditable:!1}),e.nonEditable||"false"!=this.attributes.contenteditable?e.nonEditable&&!e.nestedEditable&&"true"==this.attributes.contenteditable&&t.push("nestedEditable",!0):t.push("nonEditable",!0),t.length){e=CKEDITOR.tools.copy(e);for(var n=0;n<t.length;n+=2)e[t[n]]=t[n+1]}return e}},!0)}(),function(){var e=/{([^}]+)}/g;CKEDITOR.template=function(e){this.source="function"==typeof e?e:String(e)},CKEDITOR.template.prototype.output=function(t,n){var i=("function"==typeof this.source?this.source(t):this.source).replace(e,(function(e,n){return void 0!==t[n]?t[n]:e}));return n?n.push(i):i}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(e){function t(){CKEDITOR.currentInstance==e&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}CKEDITOR.instances[e.name]=e,e.on("focus",(function(){CKEDITOR.currentInstance!=e&&(CKEDITOR.currentInstance=e,CKEDITOR.fire("currentInstance"))})),e.on("blur",t),e.on("destroy",t),CKEDITOR.fire("instance",null,e)},CKEDITOR.remove=function(e){delete CKEDITOR.instances[e.name]},function(){var e={};CKEDITOR.addTemplate=function(t,n){var i=e[t];return i||(i={name:t,source:n},CKEDITOR.fire("template",i),e[t]=new CKEDITOR.template(i.source))},CKEDITOR.getTemplate=function(t){return e[t]}}(),function(){var e=[];CKEDITOR.addCss=function(t){e.push(t)},CKEDITOR.getCss=function(){return e.join("\n")}}(),CKEDITOR.on("instanceDestroyed",(function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")})),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,CKEDITOR.inline=function(e,t){if(!(e=CKEDITOR.editor._getEditorElement(e)))return null;var n=new CKEDITOR.editor(t,e,CKEDITOR.ELEMENT_MODE_INLINE),i=e.is("textarea")?e:null;return i?(n.setData(i.getValue(),null,!0),(e=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!n.readOnly+'" class="cke_textarea_inline">'+i.getValue()+"</div>",CKEDITOR.document)).insertAfter(i),i.hide(),i.$.form&&n._attachToForm()):(t&&void 0!==t.readOnly&&!t.readOnly&&e.setAttribute("contenteditable","true"),n.setData(e.getHtml(),null,!0)),n.on("loaded",(function(){n.fire("uiReady"),n.editable(e),n.container=e,n.ui.contentsElement=e,n.setData(n.getData(1)),n.resetDirty(),n.fire("contentDom"),n.mode="wysiwyg",n.fire("mode"),n.status="ready",n.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,n)}),null,null,1e4),n.on("destroy",(function(){var e=n.container;i&&e&&(e.clearCustomData(),e.remove()),i&&i.show(),n.element.clearCustomData(),delete n.element})),n},CKEDITOR.inlineAll=function(){var e,t,n;for(n in CKEDITOR.dtd.$editable)for(var i=CKEDITOR.document.getElementsByTag(n),o=0,r=i.count();o<r;o++)"true"==(e=i.getItem(o)).getAttribute("contenteditable")&&(t={element:e,config:{}},!1!==CKEDITOR.fire("inline",t)&&CKEDITOR.inline(e,t.config))},CKEDITOR.domReady((function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})),CKEDITOR.replaceClass="ckeditor",function(){function e(e,n,i,o){if(!(e=CKEDITOR.editor._getEditorElement(e)))return null;var r=new CKEDITOR.editor(n,e,o);return o==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.setStyle("visibility","hidden"),r._.required=e.hasAttribute("required"),e.removeAttribute("required")),i&&r.setData(i,null,!0),r.on("loaded",(function(){r.isDestroyed()||r.isDetached()||(function(e){var t=e.name,n=e.element,i=e.elementMode,o=e.fire("uiSpace",{space:"top",html:""}).html,r=e.fire("uiSpace",{space:"bottom",html:""}).html,s=new CKEDITOR.template('<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application"'+(e.title?' aria-labelledby="cke_{name}_arialbl"':"")+">"+(e.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':"")+'<{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>');t=CKEDITOR.dom.element.createFromHtml(s.output({id:e.id,name:t,langDir:e.lang.dir,langCode:e.langCode,voiceLabel:e.title,topHtml:o?'<span id="'+e.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+o+"</span>":"",contentId:e.ui.spaceId("contents"),bottomHtml:r?'<span id="'+e.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+r+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"})),i==CKEDITOR.ELEMENT_MODE_REPLACE?(n.hide(),t.insertAfter(n)):n.append(t),e.container=t,e.ui.contentsElement=e.ui.space("contents"),o&&e.ui.space("top").unselectable(),r&&e.ui.space("bottom").unselectable(),n=e.config.width,i=e.config.height,n&&t.setStyle("width",CKEDITOR.tools.cssLength(n)),i&&e.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(i)),t.disableContextMenu(),CKEDITOR.env.webkit&&t.on("focus",(function(){e.focus()})),e.fireOnce("uiReady")}(r),o==CKEDITOR.ELEMENT_MODE_REPLACE&&r.config.autoUpdateElement&&e.$.form&&r._attachToForm(),r.setMode(r.config.startupMode,(function(){r.resetDirty(),r.status="ready",r.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,r)})))})),r.on("destroy",t),r}function t(){var e=this.container,t=this.element;e&&(e.clearCustomData(),e.remove()),t&&(t.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(t.show(),this._.required&&t.setAttribute("required","required")),delete this.element)}CKEDITOR.replace=function(t,n){return e(t,n,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(t,n,i){return e(t,n,i,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var e=document.getElementsByTagName("textarea"),t=0;t<e.length;t++){var n=null,i=e[t];if(i.name||i.id){if("string"==typeof arguments[0]){if(!new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(i.className))continue}else if("function"==typeof arguments[0]&&!1===arguments[0](i,n={}))continue;this.replace(i,n)}}},CKEDITOR.editor.prototype.addMode=function(e,t){(this._.modes||(this._.modes={}))[e]=t},CKEDITOR.editor.prototype.setMode=function(e,t){var n=this,i=this._.modes;if(e!=n.mode&&i&&i[e]){if(n.fire("beforeSetMode",e),n.mode){var o,r=n.checkDirty(),s=(i=n._.previousModeData,0);n.fire("beforeModeUnload"),n.editable(0),n._.previousMode=n.mode,n._.previousModeData=o=n.getData(1),"source"==n.mode&&i==o&&(n.fire("lockSnapshot",{forceUpdate:!0}),s=1),n.ui.space("contents").setHtml(""),n.mode=""}else n._.previousModeData=n.getData(1);this._.modes[e]((function(){n.mode=e,void 0!==r&&!r&&n.resetDirty(),s?n.fire("unlockSnapshot"):"wysiwyg"==e&&n.fire("saveSnapshot"),setTimeout((function(){n.isDestroyed()||n.isDetached()||(n.fire("mode"),t&&t.call(n))}),0)}))}},CKEDITOR.editor.prototype.resize=function(e,t,n,i){var o=this.container,r=this.ui.space("contents"),s=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;i=i?this.container.getFirst((function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_inner")})):o,e=CKEDITOR.tools.convertToPx(CKEDITOR.tools.cssLength(e)),i.setSize("width",e,!0),s&&(s.style.width="1%"),t=CKEDITOR.tools.convertToPx(CKEDITOR.tools.cssLength(t));var a=(i.$.offsetHeight||0)-(r.$.clientHeight||0);o=Math.max(t-(n?0:a),0),t=n?t+a:t,r.setStyle("height",CKEDITOR.tools.cssLength(o)),s&&(s.style.width="100%"),this.fire("resize",{outerHeight:t,contentsHeight:o,outerWidth:e||i.getSize("width")})},CKEDITOR.editor.prototype.getResizable=function(e){return e?this.ui.space("contents"):this.container},CKEDITOR.domReady((function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)}))}(),CKEDITOR.config.startupMode="wysiwyg",function(){function e(e){var t,i=e.editor,o=e.data.path,s=o.blockLimit,a=e.data.selection,l=a.getRanges()[0];(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(a=function(e,t){if(e.isFake)return 0;var i=t.block||t.blockLimit,o=i&&i.getLast(n);return!i||!i.isBlockBoundary()||o&&o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary()||i.is("pre")||i.getBogus()?void 0:i}(a,o))&&(a.appendBogus(),t=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.edge&&i._.previousActive),r(i,o.block,s)&&l.collapsed&&!l.getCommonAncestor().isReadOnly()&&((o=l.clone()).enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),(s=new CKEDITOR.dom.walker(o)).guard=function(e){return!n(e)||e.type==CKEDITOR.NODE_COMMENT||e.isReadOnly()},!s.checkForward()||o.checkStartOfBlock()&&o.checkEndOfBlock())&&(i=l.fixBlock(!0,i.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(i=i.getFirst(n))&&i.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(i.getText()).match(/^(?:&nbsp;|\xa0)$/)&&i.remove(),t=1,e.cancel()),t&&l.select()}function t(e){var t=e.data.getTarget();t.is("input")&&("submit"!=(t=t.getAttribute("type"))&&"reset"!=t||e.data.preventDefault())}function n(e){return u(e)&&d(e)}function i(e,t){return function(n){var i=n.data.$.toElement||n.data.$.fromElement||n.data.$.relatedTarget;(i=i&&i.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(i):null)&&(t.equals(i)||t.contains(i))||e.call(this,n)}}function o(e){function t(e){return function(t,o){if(o&&t.type==CKEDITOR.NODE_ELEMENT&&t.is(r)&&(i=t),!(o||!n(t)||e&&f(t)))return!1}}var i,o=e.getRanges()[0];e=e.root;var r={table:1,ul:1,ol:1,dl:1};if(o.startPath().contains(r)){var s=o.clone();if(s.collapse(1),s.setStartAt(e,CKEDITOR.POSITION_AFTER_START),(e=new CKEDITOR.dom.walker(s)).guard=t(),e.checkBackward(),i)return(s=o.clone()).collapse(),s.setEndAt(i,CKEDITOR.POSITION_AFTER_END),(e=new CKEDITOR.dom.walker(s)).guard=t(!0),i=!1,e.checkForward(),i}return null}function r(e,t,n){return!1!==e.config.autoParagraph&&e.activeEnterMode!=CKEDITOR.ENTER_BR&&(e.editable().equals(n)&&!t||t&&"true"==t.getAttribute("contenteditable"))}function s(e){return e.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==e.config.autoParagraph&&(e.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p")}function a(e){e&&e.isEmptyInlineRemoveable()&&e.remove()}function l(e){var t=e.editor;t.getSelection().scrollIntoView(),setTimeout((function(){t.fire("saveSnapshot")}),0)}function c(e,t,n){var i=e.getCommonAncestor(t);for(t=e=n?t:e;(e=e.getParent())&&!i.equals(e)&&1==e.getChildCount();)t=e;t.remove()}var u,d,h,f,p,g,m,E,T,C;CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(e,t){this.base(t.$||t),this.editor=e,this.status="unloaded",this.hasFocus=!1,this.setup()},proto:{focus:function(){var e;if(CKEDITOR.env.webkit&&!this.hasFocus&&(e=this.editor._.previousActive||this.getDocument().getActive(),this.contains(e)))e.focus();else{CKEDITOR.env.edge&&14<CKEDITOR.env.version&&!this.hasFocus&&this.getDocument().equals(CKEDITOR.document)&&(this.editor._.previousScrollTop=this.$.scrollTop);try{if(!CKEDITOR.env.ie||CKEDITOR.env.edge&&14<CKEDITOR.env.version||!this.getDocument().equals(CKEDITOR.document))if(CKEDITOR.env.chrome){var t=this.$.scrollTop;this.$.focus(),this.$.scrollTop=t}else this.$.focus();else this.$.setActive()}catch(e){if(!CKEDITOR.env.ie)throw e}CKEDITOR.env.safari&&!this.isInline()&&((e=CKEDITOR.document.getActive()).equals(this.getWindow().getFrame())||this.getWindow().focus())}},on:function(e,t){var n=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(e)&&(e="focus"==e?"focusin":"focusout",t=i(t,this),n[0]=e,n[1]=t),CKEDITOR.dom.element.prototype.on.apply(this,n)},attachListener:function(e){!this._.listeners&&(this._.listeners=[]);var t=Array.prototype.slice.call(arguments,1);return t=e.on.apply(e,t),this._.listeners.push(t),t},clearListeners:function(){var e=this._.listeners;try{for(;e.length;)e.pop().removeListener()}catch(e){}},restoreAttrs:function(){var e,t,n=this._.attrChanges;for(t in n)n.hasOwnProperty(t)&&(null!==(e=n[t])?this.setAttribute(t,e):this.removeAttribute(t))},attachClass:function(e){var t=this.getCustomData("classes");this.hasClass(e)||(!t&&(t=[]),t.push(e),this.setCustomData("classes",t),this.addClass(e))},changeAttr:function(e,t){var n=this.getAttribute(e);t!==n&&(!this._.attrChanges&&(this._.attrChanges={}),e in this._.attrChanges||(this._.attrChanges[e]=n),this.setAttribute(e,t))},insertText:function(e){this.editor.focus(),this.insertHtml(this.transformPlainTextToHtml(e),"text")},transformPlainTextToHtml:function(e){var t=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(e,t)},insertHtml:function(e,t,n){var i=this.editor;i.focus(),i.fire("saveSnapshot"),n||(n=i.getSelection().getRanges()[0]),g(this,t||"html",e,n),n.select(),l(this),this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(e,t,n){g(this,n||"html",e,t),this.editor.fire("afterInsertHtml",{intoRange:t})},insertElement:function(e,t){(o=this.editor).focus(),o.fire("saveSnapshot");var i=o.activeEnterMode,o=o.getSelection(),r=e.getName();r=CKEDITOR.dtd.$block[r],t||(t=o.getRanges()[0]),this.insertElementIntoRange(e,t)&&(t.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),r&&((r=e.getNext((function(e){return n(e)&&!f(e)})))&&r.type==CKEDITOR.NODE_ELEMENT&&r.is(CKEDITOR.dtd.$block)?r.getDtd()["#"]?t.moveToElementEditStart(r):t.moveToElementEditEnd(e):r||i==CKEDITOR.ENTER_BR||(r=t.fixBlock(!0,i==CKEDITOR.ENTER_DIV?"div":"p"),t.moveToElementEditStart(r)))),o.selectRanges([t]),l(this)},insertElementIntoSelection:function(e){this.insertElement(e)},insertElementIntoRange:function(e,t){var n,i,o=this.editor,r=o.config.enterMode,s=e.getName(),l=CKEDITOR.dtd.$block[s];if(t.checkReadOnly())return!1;if(t.deleteContents(1),t.startContainer.type==CKEDITOR.NODE_ELEMENT&&(t.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})?m(t):t.startContainer.is(CKEDITOR.dtd.$list)&&E(t)),l)for(;(n=t.getCommonAncestor(0,1))&&(i=CKEDITOR.dtd[n.getName()])&&(!i||!i[s]);)if(n.getName()in CKEDITOR.dtd.span){l=t.splitElement(n);var c=t.createBookmark();a(n),a(l),t.moveToBookmark(c)}else t.checkStartOfBlock()&&t.checkEndOfBlock()?(t.setStartBefore(n),t.collapse(!0),n.remove()):t.splitBlock(r==CKEDITOR.ENTER_DIV?"div":"p",o.editable());return t.insertNode(e),!0},setData:function(e,t){t||(e=this.editor.dataProcessor.toHtml(e)),this.setHtml(e),this.fixInitialSelection(),"unloaded"==this.status&&(this.status="ready"),this.editor.fire("dataReady")},getData:function(e){var t=this.getHtml();return e||(t=this.editor.dataProcessor.toDataFormat(t)),t},setReadOnly:function(e){this.setAttribute("contenteditable",!e)},detach:function(){this.status="detached",this.editor.setData(this.editor.getData(),{internal:!0}),this.clearListeners();try{this._.cleanCustomData()}catch(e){if(!CKEDITOR.env.ie||-2146828218!==e.number)throw e}this.editor.fire("contentDomUnload"),delete this.editor.document,delete this.editor.window,delete this.editor},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function e(){var e,n=t.getDocument().$,i=n.getSelection();e:if(i.anchorNode&&i.anchorNode==t.$)e=!0;else{if(CKEDITOR.env.webkit&&(e=t.getDocument().getActive())&&e.equals(t)&&!i.anchorNode){e=!0;break e}e=void 0}e&&((e=new CKEDITOR.dom.range(t)).moveToElementEditStart(t),(n=n.createRange()).setStart(e.startContainer.$,e.startOffset),n.collapse(!0),i.removeAllRanges(),i.addRange(n))}var t=this;CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks)?this.hasFocus&&(this.focus(),function(){var e=t.getDocument().$,n=e.selection,i=t.getDocument().getActive();"None"==n.type&&i.equals(t)&&(n=new CKEDITOR.dom.range(t),e=e.body.createTextRange(),n.moveToElementEditStart(t),(n=n.startContainer).type!=CKEDITOR.NODE_ELEMENT&&(n=n.getParent()),e.moveToElementText(n.$),e.collapse(!0),e.select())}()):this.hasFocus?(this.focus(),e()):this.once("focus",(function(){e()}),null,null,-999)},getHtmlFromRange:function(e){return e.collapsed?new CKEDITOR.dom.documentFragment(e.document):(e={doc:this.getDocument(),range:e.clone()},T.eol.detect(e,this),T.bogus.exclude(e),T.cell.shrink(e),e.fragment=e.range.cloneContents(),T.tree.rebuild(e,this),T.eol.fix(e,this),new CKEDITOR.dom.documentFragment(e.fragment.$))},extractHtmlFromRange:function(e,t){var n=C,i={range:e,doc:e.document},o=this.getHtmlFromRange(e);if(e.collapsed)return e.optimize(),o;if(e.enlarge(CKEDITOR.ENLARGE_INLINE,1),n.table.detectPurge(i),i.bookmark=e.createBookmark(),delete i.range,(s=this.editor.createRange()).moveToPosition(i.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START),i.targetBookmark=s.createBookmark(),n.list.detectMerge(i,this),n.table.detectRanges(i,this),n.block.detectMerge(i,this),i.tableContentsRanges?(n.table.deleteRanges(i),e.moveToBookmark(i.bookmark),i.range=e):(e.moveToBookmark(i.bookmark),i.range=e,e.extractContents(n.detectExtractMerge(i))),e.moveToBookmark(i.targetBookmark),e.optimize(),n.fixUneditableRangePosition(e),n.list.merge(i,this),n.table.purge(i,this),n.block.merge(i,this),t){if(n=e.startPath(),i=e.checkStartOfBlock()&&e.checkEndOfBlock()&&n.block&&!e.root.equals(n.block)){e:{var r,s=0;if(i=n.block.getElementsByTag("span"))for(;r=i.getItem(s++);)if(!d(r)){i=!0;break e}i=!1}i=!i}i&&(e.moveToPosition(n.block,CKEDITOR.POSITION_BEFORE_START),n.block.remove())}else n.autoParagraph(this.editor,e),h(e.startContainer)&&e.startContainer.appendBogus();return e.startContainer.mergeSiblings(),o},setup:function(){var e=this.editor;if(this.attachListener(e,"beforeGetData",(function(){var t=this.getData();this.is("textarea")||!1!==e.config.ignoreEmptyParagraph&&(t=t.replace(p,(function(e,t){return t}))),e.setData(t,null,1)}),this),this.attachListener(e,"getSnapshot",(function(e){e.data=this.getData(1)}),this),this.attachListener(e,"afterSetData",(function(){this.setData(e.getData(1))}),this),this.attachListener(e,"loadSnapshot",(function(e){this.setData(e.data,1)}),this),this.attachListener(e,"beforeFocus",(function(){var t=e.getSelection();(t=t&&t.getNative())&&"Control"==t.type||this.focus()}),this),this.attachListener(e,"insertHtml",(function(e){this.insertHtml(e.data.dataValue,e.data.mode,e.data.range)}),this),this.attachListener(e,"insertElement",(function(e){this.insertElement(e.data)}),this),this.attachListener(e,"insertText",(function(e){this.insertText(e.data)}),this),this.setReadOnly(e.readOnly),this.attachClass("cke_editable"),e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):e.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&e.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed"),this.attachClass("cke_contents_"+e.config.contentsLangDirection),e.keystrokeHandler.blockedKeystrokes[8]=+e.readOnly,e.keystrokeHandler.attach(this),this.on("blur",(function(){this.hasFocus=!1}),null,null,-1),this.on("focus",(function(){this.hasFocus=!0}),null,null,-1),CKEDITOR.env.webkit&&this.on("scroll",(function(){e._.previousScrollTop=e.editable().$.scrollTop}),null,null,-1),CKEDITOR.env.edge&&14<CKEDITOR.env.version&&this.on("scroll",(function t(){var n=e.editable();null!=e._.previousScrollTop&&n.getDocument().equals(CKEDITOR.document)&&(n.$.scrollTop=e._.previousScrollTop,e._.previousScrollTop=null,this.removeListener("scroll",t))})),e.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,e.once("contentDom",(function(){e.focusManager.focus(this)}),this)),this.isInline()&&this.changeAttr("tabindex",e.tabIndex),!this.is("textarea")){e.document=this.getDocument(),e.window=this.getWindow();var i=e.document;this.changeAttr("spellcheck",!e.config.disableNativeSpellChecker);var r=e.config.contentsLangDirection;this.getDirection(1)!=r&&this.changeAttr("dir",r);var s=CKEDITOR.getCss();if(s){var a=(r=i.getHead()).getCustomData("stylesheet");a?s!=a.getText()&&(CKEDITOR.env.ie&&9>CKEDITOR.env.version?a.$.styleSheet.cssText=s:a.setText(s)):(s=i.appendStyleText(s),s=new CKEDITOR.dom.element(s.ownerNode||s.owningElement),r.setCustomData("stylesheet",s),s.data("cke-temp",1))}r=i.getCustomData("stylesheet_ref")||0,i.setCustomData("stylesheet_ref",r+1),this.setCustomData("cke_includeReadonly",!e.config.disableReadonlyStyling),this.attachListener(this,"click",(function(e){e=e.data;var t=new CKEDITOR.dom.elementPath(e.getTarget(),this).contains("a");t&&2!=e.$.button&&t.isReadOnly()&&e.preventDefault()}));var l={8:1,46:1};this.attachListener(e,"key",(function(t){if(e.readOnly)return!0;var n,i=t.data.domEvent.getKey();if(0!==(t=e.getSelection()).getRanges().length){if(i in l){var r,s,a,c,d=t.getRanges()[0],h=d.startPath();i=8==i,CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(r=t.getSelectedElement())||(r=o(t))?(e.fire("saveSnapshot"),d.moveToPosition(r,CKEDITOR.POSITION_BEFORE_START),r.remove(),d.select(),e.fire("saveSnapshot"),n=1):d.collapsed&&((s=h.block)&&(c=s[i?"getPrevious":"getNext"](u))&&c.type==CKEDITOR.NODE_ELEMENT&&c.is("table")&&d[i?"checkStartOfBlock":"checkEndOfBlock"]()?(e.fire("saveSnapshot"),d[i?"checkEndOfBlock":"checkStartOfBlock"]()&&s.remove(),d["moveToElementEdit"+(i?"End":"Start")](c),d.select(),e.fire("saveSnapshot"),n=1):h.blockLimit&&h.blockLimit.is("td")&&(a=h.blockLimit.getAscendant("table"))&&d.checkBoundaryOfElement(a,i?CKEDITOR.START:CKEDITOR.END)&&(c=a[i?"getPrevious":"getNext"](u))?(e.fire("saveSnapshot"),d["moveToElementEdit"+(i?"End":"Start")](c),d.checkStartOfBlock()&&d.checkEndOfBlock()?c.remove():d.select(),e.fire("saveSnapshot"),n=1):(a=h.contains(["td","th","caption"]))&&d.checkBoundaryOfElement(a,i?CKEDITOR.START:CKEDITOR.END)&&(n=1))}return!n}})),e.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",(function(t){t.data.getKeystroke()in l&&!this.getFirst(n)&&(this.appendBogus(),(t=e.createRange()).moveToPosition(this,CKEDITOR.POSITION_AFTER_START),t.select())})),this.attachListener(this,"dblclick",(function(t){if(e.readOnly)return!1;t={element:t.data.getTarget()},e.fire("doubleclick",t)})),CKEDITOR.env.ie&&this.attachListener(this,"click",t),CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",(function(t){var n=t.data.getTarget();n.is("img","hr","input","textarea","select")&&!n.isReadOnly()&&(e.getSelection().selectElement(n),n.is("input","textarea","select")&&t.data.preventDefault())})),CKEDITOR.env.edge&&this.attachListener(this,"mouseup",(function(t){(t=t.data.getTarget())&&t.is("img")&&!t.isReadOnly()&&e.getSelection().selectElement(t)})),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",(function(t){if(2==t.data.$.button&&!(t=t.data.getTarget()).getAscendant("table")&&!t.getOuterHtml().replace(p,"")){var n=e.createRange();n.moveToElementEditStart(t),n.select(!0)}})),CKEDITOR.env.webkit&&(this.attachListener(this,"click",(function(e){e.data.getTarget().is("input","select")&&e.data.preventDefault()})),this.attachListener(this,"mouseup",(function(e){e.data.getTarget().is("input","textarea")&&e.data.preventDefault()}))),CKEDITOR.env.webkit&&this.attachListener(e,"key",(function(t){if(e.readOnly)return!0;if((n=t.data.domEvent.getKey())in l&&0!==(t=e.getSelection()).getRanges().length){var n=8==n,i=t.getRanges()[0];if(t=i.startPath(),i.collapsed)e:{var o=t.block;if(o&&i[n?"checkStartOfBlock":"checkEndOfBlock"]()&&i.moveToClosestEditablePosition(o,!n)&&i.collapsed){if(i.startContainer.type==CKEDITOR.NODE_ELEMENT){var r=i.startContainer.getChild(i.startOffset-(n?1:0));if(r&&r.type==CKEDITOR.NODE_ELEMENT&&r.is("hr")){e.fire("saveSnapshot"),r.remove(),t=!0;break e}}var s;!(i=i.startPath().block)||i&&i.contains(o)?t=void 0:(e.fire("saveSnapshot"),(s=(n?i:o).getBogus())&&s.remove(),r=(s=e.getSelection()).createBookmarks(),(n?o:i).moveChildren(n?i:o,!1),t.lastElement.mergeSiblings(),c(o,i,!n),s.selectBookmarks(r),t=!0)}else t=!1}else n=i,s=t.block,i=n.endPath().block,s&&i&&!s.equals(i)?(e.fire("saveSnapshot"),(o=s.getBogus())&&o.remove(),n.enlarge(CKEDITOR.ENLARGE_INLINE),n.deleteContents(),i.getParent()&&(i.moveChildren(s,!1),t.lastElement.mergeSiblings(),c(s,i,!0)),(n=e.getSelection().getRanges()[0]).collapse(1),n.optimize(),""===n.startContainer.getHtml()&&n.startContainer.appendBogus(),n.select(),t=!0):t=!1;if(!t)return;return e.getSelection().scrollIntoView(),e.fire("saveSnapshot"),!1}}),this,null,100)}},getUniqueId:function(){var e;try{this._.expandoNumber=e=CKEDITOR.dom.domObject.prototype.getUniqueId.call(this)}catch(t){e=this._&&this._.expandoNumber}return e}},_:{cleanCustomData:function(){this.removeClass("cke_editable"),this.restoreAttrs();for(var e=this.removeCustomData("classes");e&&e.length;)this.removeClass(e.pop());if(!this.is("textarea")){var t=(e=this.getDocument()).getHead();if(t.getCustomData("stylesheet")){var n=e.getCustomData("stylesheet_ref");--n?e.setCustomData("stylesheet_ref",n):(e.removeCustomData("stylesheet_ref"),t.removeCustomData("stylesheet").remove())}}}}}),CKEDITOR.editor.prototype.editable=function(e){var t=this._.editable;return t&&e?0:arguments.length?(e?t=e instanceof CKEDITOR.editable?e:new CKEDITOR.editable(this,e):(t&&t.detach(),t=null),this._.editable=t):t},CKEDITOR.on("instanceLoaded",(function(t){var n=t.editor;n.on("insertElement",(function(e){(e=e.data).type==CKEDITOR.NODE_ELEMENT&&(e.is("input")||e.is("textarea"))&&("false"!=e.getAttribute("contentEditable")&&e.data("cke-editable",e.hasAttribute("contenteditable")?"true":"1"),e.setAttribute("contentEditable",!1))})),n.on("selectionChange",(function(t){if(!n.readOnly){var i=n.getSelection();i&&!i.isLocked&&(i=n.checkDirty(),n.fire("lockSnapshot"),e(t),n.fire("unlockSnapshot"),!i&&n.resetDirty())}}))})),CKEDITOR.on("instanceCreated",(function(e){var t=e.editor;t.on("mode",(function(){var e=t.editable();if(e&&e.isInline()){var n=t.title;if(e.changeAttr("role","textbox"),e.changeAttr("aria-multiline","true"),e.changeAttr("aria-label",n),n&&e.changeAttr("title",n),(o=t.fire("ariaEditorHelpLabel",{}).label)&&(n=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var i=CKEDITOR.tools.getNextId(),o=CKEDITOR.dom.element.createFromHtml('<span id="'+i+'" class="cke_voice_label">'+o+"</span>");n.append(o),e.changeAttr("aria-describedby",i)}}}))})),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}"),u=CKEDITOR.dom.walker.whitespaces(!0),d=CKEDITOR.dom.walker.bookmark(!1,!0),h=CKEDITOR.dom.walker.empty(),f=CKEDITOR.dom.walker.bogus(),p=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,g=function(){function e(e){return e.type==CKEDITOR.NODE_ELEMENT}function t(n,i){var o,r,s,a,l=[],c=i.range.startContainer;o=i.range.startPath(),c=u[c.getName()];for(var d=0,h=n.getChildren(),f=h.count(),p=-1,g=-1,m=0,E=o.contains(u.$list);d<f;++d)e(o=h.getItem(d))?(s=o.getName(),E&&s in CKEDITOR.dtd.$list?l=l.concat(t(o,i)):(a=!!c[s],"br"!=s||!o.data("cke-eol")||d&&d!=f-1||(m=(r=d?l[d-1].node:h.getItem(d+1))&&(!e(r)||!r.is("br")),r=r&&e(r)&&u.$block[r.getName()]),-1!=p||a||(p=d),a||(g=d),l.push({isElement:1,isLineBreak:m,isBlock:o.isBlockBoundary(),hasBlockSibling:r,node:o,name:s,allowed:a}),r=m=0)):l.push({isElement:0,node:o,allowed:1});return-1<p&&(l[p].firstNotAllowed=1),-1<g&&(l[g].lastNotAllowed=1),l}function i(t,n){var o,r=[],s=t.getChildren(),a=s.count(),l=0,c=u[n],d=!t.is(u.$inline)||t.is("br");for(d&&r.push(" ");l<a;l++)e(o=s.getItem(l))&&!o.is(c)?r=r.concat(i(o,n)):r.push(o);return d&&r.push(" "),r}function o(t){return e(t.startContainer)&&t.startContainer.getChild(t.startOffset-1)}function l(t){return t&&e(t)&&(t.is(u.$removeEmpty)||t.is("a")&&!t.isBlockBoundary())}function c(t,n,i,o){var r,s,a=t.clone();a.setEndAt(n,CKEDITOR.POSITION_BEFORE_END),(r=new CKEDITOR.dom.walker(a).next())&&e(r)&&d[r.getName()]&&(s=r.getPrevious())&&e(s)&&!s.getParent().equals(t.startContainer)&&i.contains(s)&&o.contains(r)&&r.isIdentical(s)&&(r.moveChildren(s),r.remove(),c(t,n,i,o))}var u=CKEDITOR.dtd,d={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},h={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},f=CKEDITOR.tools.extend({},u.$inline);return delete f.br,function(d,p,g,m){var E=d.editor,T=!1;if("unfiltered_html"==p&&(p="html",T=!0),!m.checkReadOnly()){T=(p={type:p,dontFilter:T,editable:d,editor:E,range:m,blockLimit:R=new CKEDITOR.dom.elementPath(m.startContainer,m.root).blockLimit||m.root,mergeCandidates:[],zombies:[]}).range;var C,v,I,D,O,b,y,R=p.mergeCandidates,_="html"===p.type;if("text"==p.type&&T.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(v=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",T.document),T.insertNode(v),T.setStartAfter(v)),I=new CKEDITOR.dom.elementPath(T.startContainer),p.endPath=D=new CKEDITOR.dom.elementPath(T.endContainer),!T.collapsed){C=D.block||D.blockLimit;var K=T.getCommonAncestor();C&&!C.equals(K)&&!C.contains(K)&&T.checkEndOfBlock()&&p.zombies.push(C),T.deleteContents()}for(;(O=o(T))&&e(O)&&O.isBlockBoundary()&&I.contains(O);)T.moveToPosition(O,CKEDITOR.POSITION_BEFORE_END);for(c(T,p.blockLimit,I,D),v&&(T.setEndBefore(v),T.collapse(),v.remove()),(C=(v=T.startPath()).contains(l,!1,1))&&(b=T.splitElement(C),p.inlineStylesRoot=C,p.inlineStylesPeak=v.lastElement),v=T.createBookmark(),_&&(a(C),a(b)),(C=v.startNode.getPrevious(n))&&e(C)&&l(C)&&R.push(C),(C=v.startNode.getNext(n))&&e(C)&&l(C)&&R.push(C),C=v.startNode;(C=C.getParent())&&l(C);)R.push(C);if(T.moveToBookmark(v),E.enterMode===CKEDITOR.ENTER_DIV&&""===E.getData(!0)&&((E=d.getFirst())&&E.remove(),m.setStartAt(d,CKEDITOR.POSITION_AFTER_START),m.collapse(!0)),d=g){if(d=p.range,"text"==p.type&&p.inlineStylesRoot){for(E=(m=p.inlineStylesPeak).getDocument().createText("{cke-peak}"),b=p.inlineStylesRoot.getParent();!m.equals(b);)E=E.appendTo(m.clone()),m=m.getParent();g=E.getOuterHtml().split("{cke-peak}").join(g)}if(m=p.blockLimit.getName(),/^\s+|\s+$/.test(g)&&"span"in CKEDITOR.dtd[m]&&(g=(L='<span data-cke-marker="1">&nbsp;</span>')+g+L),g=p.editor.dataProcessor.toHtml(g,{context:null,fixForBody:!1,protectedWhitespaces:!!L,dontFilter:p.dontFilter,filter:p.editor.activeFilter,enterMode:p.editor.activeEnterMode}),(m=d.document.createElement("body")).setHtml(g),L&&(m.getFirst().remove(),m.getLast().remove()),(L=d.startPath().block)&&(1!=L.getChildCount()||!L.getBogus()))e:{var k;if(1==m.getChildCount()&&e(k=m.getFirst())&&k.is(h)&&!k.hasAttribute("contenteditable")){for(d=0,b=(L=k.getElementsByTag("*")).count();d<b;d++)if(!(E=L.getItem(d)).is(f))break e;k.moveChildren(k.getParent(1)),k.remove()}}p.dataWrapper=m,d=g}if(d){d=(k=p.range).document,m=p.blockLimit,b=0;var w,S,x,N,A,L=[];for(g=v=0,E=k.startContainer,T=(O=p.endPath.elements[0]).getPosition(E),R=!(!O.getCommonAncestor(E)||T==CKEDITOR.POSITION_IDENTICAL||T&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),function(t,n){function i(t,n){if(n.isBlock&&n.isElement&&!n.node.is("br")&&e(t)&&t.is("br"))return t.remove(),1}var o=n.endContainer.getChild(n.endOffset),r=n.endContainer.getChild(n.endOffset-1);o&&i(o,t[t.length-1]),r&&i(r,t[0])&&(n.setEnd(n.endContainer,n.endOffset-1),n.collapse())}(E=t(p.dataWrapper,p),k);b<E.length;b++)if((_=(T=E[b]).isLineBreak)&&(_=k,C=m,D=I=void 0,T.hasBlockSibling?_=1:(I=_.startContainer.getAscendant(u.$block,1))&&I.is({div:1,p:1})?(D=I.getPosition(C))==CKEDITOR.POSITION_IDENTICAL||D==CKEDITOR.POSITION_CONTAINS?_=0:(C=_.splitElement(I),_.moveToPosition(C,CKEDITOR.POSITION_AFTER_START),_=1):_=0),_)g=0<b;else{if(_=k.startPath(),!T.isBlock&&r(p.editor,_.block,_.blockLimit)&&(x=s(p.editor))&&((x=d.createElement(x)).appendBogus(),k.insertNode(x),CKEDITOR.env.needsBrFiller&&(w=x.getBogus())&&w.remove(),k.moveToPosition(x,CKEDITOR.POSITION_BEFORE_END)),(_=k.startPath().block)&&!_.equals(S)&&((w=_.getBogus())&&(w.remove(),L.push(_)),S=_),T.firstNotAllowed&&(v=1),v&&T.isElement){for(_=k.startContainer,C=null;_&&!u[_.getName()][T.name];){if(_.equals(m)){_=null;break}C=_,_=_.getParent()}if(_)C&&(N=k.splitElement(C),p.zombies.push(N),p.zombies.push(C));else{C=m.getName(),A=!b,_=b==E.length-1,I=[],D=(C=i(T.node,C)).length,K=0;for(var B=void 0,P=0,F=-1;K<D;K++)" "==(B=C[K])?(P||A&&!K||(I.push(new CKEDITOR.dom.text(" ")),F=I.length),P=1):(I.push(B),P=0);_&&F==I.length&&I.pop(),A=I}}if(A){for(;_=A.pop();)k.insertNode(_);A=0}else k.insertNode(T.node);T.lastNotAllowed&&b<E.length-1&&((N=R?O:N)&&k.setEndAt(N,CKEDITOR.POSITION_AFTER_START),v=0),k.collapse()}(w=1==E.length&&((w=E[0]).isElement&&"false"==w.node.getAttribute("contenteditable")))&&(g=!0,_=E[0].node,k.setStartAt(_,CKEDITOR.POSITION_BEFORE_START),k.setEndAt(_,CKEDITOR.POSITION_AFTER_END)),p.dontMoveCaret=g,p.bogusNeededBlocks=L}for(w=p.range,N=p.bogusNeededBlocks,A=w.createBookmark();S=p.zombies.pop();)S.getParent()&&((x=w.clone()).moveToElementEditStart(S),x.removeEmptyBlocksAtEnd());if(N)for(;S=N.pop();)CKEDITOR.env.needsBrFiller?S.appendBogus():S.append(w.document.createText(" "));for(;S=p.mergeCandidates.pop();)S.mergeSiblings();if(w.moveToBookmark(A),!p.dontMoveCaret){for(S=o(w);S&&e(S)&&!S.is(u.$empty);){if(S.isBlockBoundary())w.moveToPosition(S,CKEDITOR.POSITION_BEFORE_END);else{if(l(S)&&S.getHtml().match(/(\s|&nbsp;)$/g)){y=null;break}(y=w.clone()).moveToPosition(S,CKEDITOR.POSITION_BEFORE_END)}S=S.getLast(n)}y&&w.moveToRange(y)}}}}(),m=function(){function e(e){return(e=new CKEDITOR.dom.walker(e)).guard=function(e,t){return!t&&(e.type==CKEDITOR.NODE_ELEMENT?e.is(CKEDITOR.dtd.$tableContent):void 0)},e.evaluator=function(e){return e.type==CKEDITOR.NODE_ELEMENT},e}function t(e,t,n){return t=e.getDocument().createElement(t),e.append(t,n),t}function n(e){for(var t,n=e.count();0<n--;)t=e.getItem(n),CKEDITOR.tools.trim(t.getHtml())||(t.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&t.getChildCount()&&t.getFirst().remove())}return function(i){var o=i.startContainer,r=o.getAscendant("table",1),s=!1;n(r.getElementsByTag("td")),n(r.getElementsByTag("th")),(r=i.clone()).setStart(o,0),(r=e(r).lastBackward())||((r=i.clone()).setEndAt(o,CKEDITOR.POSITION_BEFORE_END),r=e(r).lastForward(),s=!0),r||(r=o),r.is("table")?(i.setStartAt(r,CKEDITOR.POSITION_BEFORE_START),i.collapse(!0),r.remove()):(r.is({tbody:1,thead:1,tfoot:1})&&(r=t(r,"tr",s)),r.is("tr")&&(r=t(r,r.getParent().is("thead")?"th":"td",s)),(o=r.getBogus())&&o.remove(),i.moveToPosition(r,s?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}(),E=function(){function e(e){return(e=new CKEDITOR.dom.walker(e)).guard=function(e,t){return!t&&(e.type==CKEDITOR.NODE_ELEMENT?e.is(CKEDITOR.dtd.$list)||e.is(CKEDITOR.dtd.$listItem):void 0)},e.evaluator=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.is(CKEDITOR.dtd.$listItem)},e}return function(t){var n,i=t.startContainer,o=!1;(n=t.clone()).setStart(i,0),(n=e(n).lastBackward())||((n=t.clone()).setEndAt(i,CKEDITOR.POSITION_BEFORE_END),n=e(n).lastForward(),o=!0),n||(n=i),n.is(CKEDITOR.dtd.$list)?(t.setStartAt(n,CKEDITOR.POSITION_BEFORE_START),t.collapse(!0),n.remove()):((i=n.getBogus())&&i.remove(),t.moveToPosition(n,o?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),t.select())}}(),T={eol:{detect:function(e,t){var n=e.range,i=n.clone(),o=n.clone(),r=new CKEDITOR.dom.elementPath(n.startContainer,t),s=new CKEDITOR.dom.elementPath(n.endContainer,t);i.collapse(1),o.collapse(),r.block&&i.checkBoundaryOfElement(r.block,CKEDITOR.END)&&(n.setStartAfter(r.block),e.prependEolBr=1),s.block&&o.checkBoundaryOfElement(s.block,CKEDITOR.START)&&(n.setEndBefore(s.block),e.appendEolBr=1)},fix:function(e,t){var n,i=t.getDocument();e.appendEolBr&&(n=this.createEolBr(i),e.fragment.append(n)),!e.prependEolBr||n&&!n.getPrevious()||e.fragment.append(this.createEolBr(i),1)},createEolBr:function(e){return e.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(e){var t,n=(t=e.range.getBoundaryNodes()).startNode;!(t=t.endNode)||!f(t)||n&&n.equals(t)||e.range.setEndBefore(t)}},tree:{rebuild:function(e,t){var n,i=(s=e.range).getCommonAncestor(),o=new CKEDITOR.dom.elementPath(i,t),r=new CKEDITOR.dom.elementPath(s.startContainer,t),s=new CKEDITOR.dom.elementPath(s.endContainer,t);if(i.type==CKEDITOR.NODE_TEXT&&(i=i.getParent()),o.blockLimit.is({tr:1,table:1})){var a=o.contains("table").getParent();n=function(e){return!e.equals(a)}}else if(o.block&&o.block.is(CKEDITOR.dtd.$listItem)&&(r=r.contains(CKEDITOR.dtd.$list),s=s.contains(CKEDITOR.dtd.$list),!r.equals(s))){var l=o.contains(CKEDITOR.dtd.$list).getParent();n=function(e){return!e.equals(l)}}n||(n=function(e){return!e.equals(o.block)&&!e.equals(o.blockLimit)}),this.rebuildFragment(e,t,i,n)},rebuildFragment:function(e,t,n,i){for(var o;n&&!n.equals(t)&&i(n);)o=n.clone(0,1),e.fragment.appendTo(o),e.fragment=o,n=n.getParent()}},cell:{shrink:function(e){var t=(e=e.range).startContainer,n=e.endContainer,i=e.startOffset,o=e.endOffset;t.type==CKEDITOR.NODE_ELEMENT&&t.equals(n)&&t.is("tr")&&++i==o&&e.shrink(CKEDITOR.SHRINK_TEXT)}}},C=function(){function e(e,t){var n=e.getParent();n.is(CKEDITOR.dtd.$inline)&&e[t?"insertBefore":"insertAfter"](n)}function t(t,n,i){e(n),e(i,1);for(var o;o=i.getNext();)o.insertAfter(n),n=o;h(t)&&t.remove()}function n(e,t){var n=new CKEDITOR.dom.range(e);return n.setStartAfter(t.startNode),n.setEndBefore(t.endNode),n}return{list:{detectMerge:function(e,t){var i=n(t,e.bookmark),o=i.startPath(),r=i.endPath(),s=o.contains(CKEDITOR.dtd.$list),a=r.contains(CKEDITOR.dtd.$list);e.mergeList=s&&a&&s.getParent().equals(a.getParent())&&!s.equals(a),e.mergeListItems=o.block&&r.block&&o.block.is(CKEDITOR.dtd.$listItem)&&r.block.is(CKEDITOR.dtd.$listItem),(e.mergeList||e.mergeListItems)&&((i=i.clone()).setStartBefore(e.bookmark.startNode),i.setEndAfter(e.bookmark.endNode),e.mergeListBookmark=i.createBookmark())},merge:function(e,n){if(e.mergeListBookmark){var i=e.mergeListBookmark.startNode,o=e.mergeListBookmark.endNode,r=new CKEDITOR.dom.elementPath(i,n),s=new CKEDITOR.dom.elementPath(o,n);if(e.mergeList){var a=r.contains(CKEDITOR.dtd.$list),l=s.contains(CKEDITOR.dtd.$list);a.equals(l)||(l.moveChildren(a),l.remove())}e.mergeListItems&&(r=r.contains(CKEDITOR.dtd.$listItem),s=s.contains(CKEDITOR.dtd.$listItem),r.equals(s)||t(s,i,o)),i.remove(),o.remove()}}},block:{detectMerge:function(e,t){if(!e.tableContentsRanges&&!e.mergeListBookmark){var n=new CKEDITOR.dom.range(t);n.setStartBefore(e.bookmark.startNode),n.setEndAfter(e.bookmark.endNode),e.mergeBlockBookmark=n.createBookmark()}},merge:function(e,n){if(e.mergeBlockBookmark&&!e.purgeTableBookmark){var i=e.mergeBlockBookmark.startNode,o=e.mergeBlockBookmark.endNode,r=new CKEDITOR.dom.elementPath(i,n),s=new CKEDITOR.dom.elementPath(o,n);r=r.block,s=s.block,r&&s&&!r.equals(s)&&t(s,i,o),i.remove(),o.remove()}}},table:function(){function e(e){var n,o=[],r=new CKEDITOR.dom.walker(e),s=e.startPath().contains(i),a=e.endPath().contains(i),l={};return r.guard=function(r,c){if(r.type==CKEDITOR.NODE_ELEMENT){var u="visited_"+(c?"out":"in");if(r.getCustomData(u))return;CKEDITOR.dom.element.setMarker(l,r,u,1)}if(c&&s&&r.equals(s))(n=e.clone()).setEndAt(s,CKEDITOR.POSITION_BEFORE_END),o.push(n);else if(!c&&a&&r.equals(a))(n=e.clone()).setStartAt(a,CKEDITOR.POSITION_AFTER_START),o.push(n);else{if((u=!c)&&(u=r.type==CKEDITOR.NODE_ELEMENT&&r.is(i)&&(!s||t(r,s))&&(!a||t(r,a))),!u&&(u=c))if(r.is(i)){u=s&&s.getAscendant("table",!0);var d=a&&a.getAscendant("table",!0),h=r.getAscendant("table",!0);u=u&&u.contains(h)||d&&d.contains(h)}else u=void 0;u&&((n=e.clone()).selectNodeContents(r),o.push(n))}},r.lastForward(),CKEDITOR.dom.element.clearAllMarkers(l),o}function t(e,t){var n=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,i=e.getPosition(t);return i!==CKEDITOR.POSITION_IDENTICAL&&0==(i&n)}var i={td:1,th:1,caption:1};return{detectPurge:function(e){var t=e.range;(n=t.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT);var n=new CKEDITOR.dom.walker(n),o=0;if(n.evaluator=function(e){e.type==CKEDITOR.NODE_ELEMENT&&e.is(i)&&++o},n.checkForward(),1<o){n=t.startPath().contains("table");var r=t.endPath().contains("table");n&&r&&t.checkBoundaryOfElement(n,CKEDITOR.START)&&t.checkBoundaryOfElement(r,CKEDITOR.END)&&((t=e.range.clone()).setStartBefore(n),t.setEndAfter(r),e.purgeTableBookmark=t.createBookmark())}},detectRanges:function(o,r){var s,a,l=n(r,o.bookmark),c=l.clone(),u=l.getCommonAncestor();u.is(CKEDITOR.dtd.$tableContent)&&!u.is(i)&&(u=u.getAscendant("table",!0)),a=u,u=new CKEDITOR.dom.elementPath(l.startContainer,a),a=new CKEDITOR.dom.elementPath(l.endContainer,a),u=u.contains("table"),a=a.contains("table"),(u||a)&&(u&&a&&t(u,a)?(o.tableSurroundingRange=c,c.setStartAt(u,CKEDITOR.POSITION_AFTER_END),c.setEndAt(a,CKEDITOR.POSITION_BEFORE_START),(c=l.clone()).setEndAt(u,CKEDITOR.POSITION_AFTER_END),(s=l.clone()).setStartAt(a,CKEDITOR.POSITION_BEFORE_START),s=e(c).concat(e(s))):u?a||(o.tableSurroundingRange=c,c.setStartAt(u,CKEDITOR.POSITION_AFTER_END),l.setEndAt(u,CKEDITOR.POSITION_AFTER_END)):(o.tableSurroundingRange=c,c.setEndAt(a,CKEDITOR.POSITION_BEFORE_START),l.setStartAt(a,CKEDITOR.POSITION_AFTER_START)),o.tableContentsRanges=s||e(l))},deleteRanges:function(e){for(var t;t=e.tableContentsRanges.pop();)t.extractContents(),h(t.startContainer)&&t.startContainer.appendBogus();e.tableSurroundingRange&&e.tableSurroundingRange.extractContents()},purge:function(e){if(e.purgeTableBookmark){var t=e.doc,n=e.range.clone();(t=t.createElement("p")).insertBefore(e.purgeTableBookmark.startNode),n.moveToBookmark(e.purgeTableBookmark),n.deleteContents(),e.range.moveToPosition(t,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(e){return!(e.range.startPath().contains(CKEDITOR.dtd.$listItem)&&e.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(e){e.startContainer.getDtd()["#"]||e.moveToClosestEditablePosition(null,!0)},autoParagraph:function(e,t){var n,i=t.startPath();r(e,i.block,i.blockLimit)&&(n=s(e))&&((n=t.document.createElement(n)).appendBogus(),t.insertNode(n),t.moveToPosition(n,CKEDITOR.POSITION_AFTER_START))}}}()}(),function(){function e(e){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(e)}function t(t,n){if(0===t.length||e(t[0].getEnclosedNode()))return!1;var i,o;if((i=!n&&1===t.length)&&!(i=t[0].collapsed)){var r=t[0];i=r.startContainer.getAscendant({td:1,th:1},!0);var s=r.endContainer.getAscendant({td:1,th:1},!0);o=CKEDITOR.tools.trim,i=!(!i||!i.equals(s)||i.findOne("td, th, tr, tbody, table"))&&(!(r=r.cloneContents()).getFirst()||o(r.getFirst().getText())!==o(i.getText()))}if(i)return!1;for(o=0;o<t.length;o++)if(!(i=t[o]._getTableElement()))return!1;return!0}function n(e){var t=this.root.editor,n=t.getSelection(1);this.reset(),d=!0,n.root.once("selectionchange",(function(e){e.cancel()}),null,null,0),n.selectRanges([e[0]]),(n=this._.cache).ranges=new CKEDITOR.dom.rangeList(e),n.type=CKEDITOR.SELECTION_TEXT,n.selectedElement=e[0]._getTableElement(),n.selectedText=function(e){e=function(e){function t(e){e=e.find("td, th");var t,n=[];for(t=0;t<e.count();t++)n.push(e.getItem(t));return n}var n,i,o=[];for(i=0;i<e.length;i++)(n=e[i]._getTableElement()).is&&n.is({td:1,th:1})?o.push(n):o=o.concat(t(n));return o}(e);var t,n,i="",o=[];for(n=0;n<e.length;n++)t&&!t.equals(e[n].getAscendant("tr"))?(i+=o.join("\t")+"\n",t=e[n].getAscendant("tr"),o=[]):0===n&&(t=e[n].getAscendant("tr")),o.push(e[n].getText());return i+o.join("\t")}(e),n.nativeSel=null,this.isFake=1,this.rev=g++,t._.fakeSelection=this,d=!1,this.root.fire("selectionchange")}function i(){var n,i=this._.fakeSelection;if(i){var o;if(!(o=!(n=this.getSelection(1)))&&(o=!n.isHidden())){o=i;var r=n.getRanges(),s=o.getRanges(),a=r.length&&r[0]._getTableElement()&&r[0]._getTableElement().getAscendant("table",!0),l=s.length&&s[0]._getTableElement()&&s[0]._getTableElement().getAscendant("table",!0),c=1===r.length&&r[0]._getTableElement()&&r[0]._getTableElement().is("table"),u=1===s.length&&s[0]._getTableElement()&&s[0]._getTableElement().is("table");if(e(o.getSelectedElement()))o=!1;else{var d=1===r.length&&r[0].collapsed;s=t(r,!!CKEDITOR.env.webkit)&&t(s),(a=!(!a||!l)&&(a.equals(l)||l.contains(a)))&&(d||s)?(c&&!u&&o.selectRanges(r),o=!0):o=!1}o=!o}o&&(i.reset(),i=0)}(i||(i=n||this.getSelection(1))&&i.getType()!=CKEDITOR.SELECTION_NONE)&&(this.fire("selectionCheck",i),(n=this.elementPath()).compare(this._.selectionPreviousPath)||(o=this._.selectionPreviousPath&&this._.selectionPreviousPath.blockLimit.equals(n.blockLimit),!CKEDITOR.env.webkit&&!CKEDITOR.env.gecko||o||(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=n,this.fire("selectionChange",{selection:i,path:n})))}function o(){f=!0,h||(r.call(this),h=CKEDITOR.tools.setTimeout(r,200,this))}function r(){h=null,f&&(CKEDITOR.tools.setTimeout(i,0,this),f=!1)}function s(e){return!(!T(e)&&(e.type!=CKEDITOR.NODE_ELEMENT||e.is(CKEDITOR.dtd.$empty)))}function a(e){function t(t,n){return!(!t||t.type==CKEDITOR.NODE_TEXT)&&e.clone()["moveToElementEdit"+(n?"End":"Start")](t)}if(!(e.root instanceof CKEDITOR.editable))return!1;var n=e.startContainer,i=e.getPreviousNode(s,null,n),o=e.getNextNode(s,null,n);return!(!t(i)&&!t(o,1)&&(i||o||n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary()&&n.getBogus()))}function l(e){c(e,!1);var t=e.getDocument().createText(m);return e.setCustomData("cke-fillingChar",t),t}function c(e,t){var n=e&&e.removeCustomData("cke-fillingChar");if(n){if(!1!==t){var i=e.getDocument().getSelection().getNative(),o=i&&"None"!=i.type&&i.getRangeAt(0),r=m.length;if(n.getLength()>r&&o&&o.intersectsNode(n.$)){var s=[{node:i.anchorNode,offset:i.anchorOffset},{node:i.focusNode,offset:i.focusOffset}];i.anchorNode==n.$&&i.anchorOffset>r&&(s[0].offset-=r),i.focusNode==n.$&&i.focusOffset>r&&(s[1].offset-=r)}}n.setText(u(n.getText(),1)),s&&(i=(n=e.getDocument().$).getSelection(),(n=n.createRange()).setStart(s[0].node,s[0].offset),n.collapse(!0),i.removeAllRanges(),i.addRange(n),i.extend(s[1].node,s[1].offset))}}function u(e,t){return t?e.replace(E,(function(e,t){return t?" ":""})):e.replace(m,"")}var d,h,f,p="function"!=typeof window.getSelection,g=1,m=CKEDITOR.tools.repeat("​",7),E=new RegExp(m+"( )?","g"),T=CKEDITOR.dom.walker.invisible(1),C=function(){function e(e){return function(t){var n=t.editor.createRange();return n.moveToClosestEditablePosition(t.selected,e)&&t.editor.getSelection().selectRanges([n]),!1}}function t(e){return function(t){var n,i=t.editor,o=i.createRange();if(!i.readOnly)return(n=o.moveToClosestEditablePosition(t.selected,e))||(n=o.moveToClosestEditablePosition(t.selected,!e)),n&&i.getSelection().selectRanges([o]),i.fire("saveSnapshot"),t.selected.remove(),n||(o.moveToElementEditablePosition(i.editable()),i.getSelection().selectRanges([o])),i.fire("saveSnapshot"),!1}}var n=e(),i=e(1);return{37:n,38:n,39:i,40:i,8:t(),46:t(1)}}();CKEDITOR.on("instanceCreated",(function(e){function t(){var e=n.getSelection();e&&e.removeAllRanges()}var n=e.editor;n.on("contentDom",(function(){function e(){(s=new CKEDITOR.dom.selection(n.getSelection())).lock()}function t(){f.removeListener("mouseup",t),E.removeListener("mouseup",t);var e=CKEDITOR.document.$.selection,n=e.createRange();"None"!=e.type&&n.parentElement()&&n.parentElement().ownerDocument==h.$&&n.select()}var r,s,a,l,u,d,h=n.document,f=CKEDITOR.document,g=n.editable(),m=h.getBody(),E=h.getDocumentElement(),T=g.isInline();(CKEDITOR.env.gecko&&g.attachListener(g,"focus",(function(e){e.removeListener(),0!==r&&(e=n.getSelection().getNative())&&e.isCollapsed&&e.anchorNode==g.$&&((e=n.createRange()).moveToElementEditStart(g),e.select())}),null,null,-2),g.attachListener(g,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",(function(){if(r&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){r=n._.previousActive&&n._.previousActive.equals(h.getActive());var e=null!=n._.previousScrollTop&&n._.previousScrollTop!=g.$.scrollTop;CKEDITOR.env.webkit&&r&&e&&(g.$.scrollTop=n._.previousScrollTop)}n.unlockSelection(r),r=0}),null,null,-1),g.attachListener(g,"mousedown",(function(){r=0})),(CKEDITOR.env.ie||CKEDITOR.env.gecko||T)&&(p?g.attachListener(g,"beforedeactivate",e,null,null,-1):g.attachListener(n,"selectionCheck",e,null,null,-1),g.attachListener(g,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusout":"blur",(function(){var e=s&&(s.isFake||2>s.getRanges().length);CKEDITOR.env.gecko&&!T&&e||(n.lockSelection(s),r=1)}),null,null,-1),g.attachListener(g,"mousedown",(function(){r=0}))),CKEDITOR.env.ie&&!T&&(g.attachListener(g,"mousedown",(function(e){2==e.data.$.button&&((e=n.document.getSelection())&&e.getType()!=CKEDITOR.SELECTION_NONE||(a=n.window.getScrollPosition()))})),g.attachListener(g,"mouseup",(function(e){2==e.data.$.button&&a&&(n.document.$.documentElement.scrollLeft=a.x,n.document.$.documentElement.scrollTop=a.y),a=null})),"BackCompat"!=h.$.compatMode))&&((CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&E.on("mousedown",(function(e){function t(e){if(e=e.data.$,u){var t=m.$.createTextRange();try{t.moveToPoint(e.clientX,e.clientY)}catch(e){}u.setEndPoint(0>d.compareEndPoints("StartToStart",t)?"EndToEnd":"StartToStart",t),u.select()}}function n(){E.removeListener("mousemove",t),f.removeListener("mouseup",n),E.removeListener("mouseup",n),u.select()}if((e=e.data).getTarget().is("html")&&e.$.y<E.$.clientHeight&&e.$.x<E.$.clientWidth){u=m.$.createTextRange();try{u.moveToPoint(e.$.clientX,e.$.clientY)}catch(e){}d=u.duplicate(),E.on("mousemove",t),f.on("mouseup",n),E.on("mouseup",n)}})),7<CKEDITOR.env.version&&11>CKEDITOR.env.version&&E.on("mousedown",(function(e){e.data.getTarget().is("html")&&(f.on("mouseup",t),E.on("mouseup",t))})));g.attachListener(g,"selectionchange",i,n),g.attachListener(g,"keyup",o,n),g.attachListener(g,"touchstart",o,n),g.attachListener(g,"touchend",o,n),CKEDITOR.env.ie&&g.attachListener(g,"keydown",(function(e){var t,n;(t=!!(t=this.document.getActive())&&("input"===t.getName()||"textarea"===t.getName()))||(n=function(e){return(e=e.getRanges()[0])&&(e=e.startContainer.getAscendant((function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("contenteditable")}),!0))&&"false"===e.getAttribute("contenteditable")?e:null}(t=this.getSelection(1)))&&!n.equals(g)&&(t.selectElement(n),e.data.preventDefault())}),n),g.attachListener(g,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",(function(){n.forceNextSelectionCheck(),n.selectionChange(1)})),T&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)?(g.attachListener(g,"mousedown",(function(){l=1})),g.attachListener(h.getDocumentElement(),"mouseup",(function(){l&&o.call(n),l=0}))):g.attachListener(CKEDITOR.env.ie?g:h.getDocumentElement(),"mouseup",o,n),CKEDITOR.env.webkit&&g.attachListener(h,"keydown",(function(e){switch(e.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:g.hasFocus&&c(g)}}),null,null,-1),g.attachListener(g,"keydown",function(e){var t={37:1,39:1,8:1,46:1};return function(n){var i=n.data.getKeystroke();if(t[i]){var o=e.getSelection().getRanges(),r=o[0];1==o.length&&r.collapsed&&(i=r[38>i?"getPreviousEditableNode":"getNextEditableNode"]())&&i.type==CKEDITOR.NODE_ELEMENT&&"false"==i.getAttribute("contenteditable")&&(e.getSelection().fake(i),n.data.preventDefault(),n.cancel())}}}(n),null,null,-1)})),n.on("setData",(function(){n.unlockSelection(),CKEDITOR.env.webkit&&t()})),n.on("contentDomUnload",(function(){n.unlockSelection()})),CKEDITOR.env.ie9Compat&&n.on("beforeDestroy",t,null,null,9),n.on("dataReady",(function(){delete n._.fakeSelection,delete n._.hiddenSelectionContainer,n.selectionChange(1)})),n.on("loadSnapshot",(function(){var e=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),t=n.editable().getLast(e);t&&t.hasAttribute("data-cke-hidden-sel")&&(t.remove(),CKEDITOR.env.gecko&&(e=n.editable().getFirst(e))&&e.is("br")&&e.getAttribute("_moz_editor_bogus_node")&&e.remove())}),null,null,100),n.on("key",(function(e){if("wysiwyg"==n.mode){var t=n.getSelection();if(t.isFake){var i=C[e.data.keyCode];if(i)return i({editor:n,selected:t.getSelectedElement(),selection:t,keyEvent:e})}}}))})),CKEDITOR.env.webkit&&CKEDITOR.on("instanceReady",(function(e){var t=e.editor;t.on("selectionChange",(function(){var e=t.editable(),n=e.getCustomData("cke-fillingChar");n&&(n.getCustomData("ready")?(c(e),e.editor.fire("selectionCheck")):n.setCustomData("ready",1))}),null,null,-1),t.on("beforeSetMode",(function(){c(t.editable())}),null,null,-1),t.on("getSnapshot",(function(e){e.data&&(e.data=u(e.data))}),t,null,20),t.on("toDataFormat",(function(e){e.data.dataValue=u(e.data.dataValue)}),null,null,0)})),CKEDITOR.editor.prototype.selectionChange=function(e){(e?i:o).call(this)},CKEDITOR.editor.prototype.getSelection=function(e){return!this._.savedSelection&&!this._.fakeSelection||e?(e=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(e):null:this._.savedSelection||this._.fakeSelection},CKEDITOR.editor.prototype.getSelectedRanges=function(e){var t=this.getSelection();return t&&t.getRanges(e)||[]},CKEDITOR.editor.prototype.lockSelection=function(e){return(e=e||this.getSelection(1)).getType()!=CKEDITOR.SELECTION_NONE&&(!e.isLocked&&e.lock(),this._.savedSelection=e,!0)},CKEDITOR.editor.prototype.unlockSelection=function(e){var t=this._.savedSelection;return!!t&&(t.unlock(e),delete this._.savedSelection,!0)},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var e=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return e.selectRanges([this]),e},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3,CKEDITOR.dom.selection=function(e){if(e instanceof CKEDITOR.dom.selection){var t=e;e=e.root}var n,i,o=e instanceof CKEDITOR.dom.element;if(this.rev=t?t.rev:g++,this.document=e instanceof CKEDITOR.dom.document?e:e.getDocument(),this.root=o?e:this.document.getBody(),this.isLocked=0,this._={cache:{}},t)return CKEDITOR.tools.extend(this._.cache,t._.cache),this.isFake=t.isFake,this.isLocked=t.isLocked,this;if(e=this.getNative())if(e.getRangeAt)n=(i=e.rangeCount&&e.getRangeAt(0))&&new CKEDITOR.dom.node(i.commonAncestorContainer);else{try{i=e.createRange()}catch(e){}n=i&&CKEDITOR.dom.element.get(i.item&&i.item(0)||i.parentElement())}return(!n||n.type!=CKEDITOR.NODE_ELEMENT&&n.type!=CKEDITOR.NODE_TEXT||!this.root.equals(n)&&!this.root.contains(n))&&(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this};var v={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:u,_createFillingCharSequenceNode:l,FILLING_CHAR_SEQUENCE:m}),CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=p?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:p?function(){var e=this._.cache;if(e.type)return e.type;var t=CKEDITOR.SELECTION_NONE;try{var n=this.getNative(),i=n.type;"Text"==i&&(t=CKEDITOR.SELECTION_TEXT),"Control"==i&&(t=CKEDITOR.SELECTION_ELEMENT),n.createRange().parentElement()&&(t=CKEDITOR.SELECTION_TEXT)}catch(e){}return e.type=t}:function(){var e=this._.cache;if(e.type)return e.type;var t=CKEDITOR.SELECTION_TEXT;if((n=this.getNative())&&n.rangeCount){if(1==n.rangeCount){var n,i=(n=n.getRangeAt(0)).startContainer;i==n.endContainer&&1==i.nodeType&&1==n.endOffset-n.startOffset&&v[i.childNodes[n.startOffset].nodeName.toLowerCase()]&&(t=CKEDITOR.SELECTION_ELEMENT)}}else t=CKEDITOR.SELECTION_NONE;return e.type=t},getRanges:function(){var e=p?function(){function e(e){return new CKEDITOR.dom.node(e).getIndex()}var t=function(t,n){(t=t.duplicate()).collapse(n);var i=t.parentElement();if(!i.hasChildNodes())return{container:i,offset:0};for(var o,r,s,a,l=i.children,c=t.duplicate(),u=0,d=l.length-1,h=-1;u<=d;)if(o=l[h=Math.floor((u+d)/2)],c.moveToElementText(o),0<(s=c.compareEndPoints("StartToStart",t)))d=h-1;else{if(!(0>s))return{container:i,offset:e(o)};u=h+1}if(-1==h||h==l.length-1&&0>s){if(c.moveToElementText(i),c.setEndPoint("StartToStart",t),c=c.text.replace(/(\r\n|\r)/g,"\n").length,l=i.childNodes,!c)return(o=l[l.length-1]).nodeType!=CKEDITOR.NODE_TEXT?{container:i,offset:l.length}:{container:o,offset:o.nodeValue.length};for(i=l.length;0<c&&0<i;)(r=l[--i]).nodeType==CKEDITOR.NODE_TEXT&&(a=r,c-=r.nodeValue.length);return{container:a,offset:-c}}if(c.collapse(0<s),c.setEndPoint(0<s?"StartToStart":"EndToStart",t),!(c=c.text.replace(/(\r\n|\r)/g,"\n").length))return{container:i,offset:e(o)+(0<s?0:1)};for(;0<c;)try{(r=o[0<s?"previousSibling":"nextSibling"]).nodeType==CKEDITOR.NODE_TEXT&&(c-=r.nodeValue.length,a=r),o=r}catch(t){return{container:i,offset:e(o)}}return{container:a,offset:0<s?-c:a.nodeValue.length+c}};return function(){var e=(a=this.getNative())&&a.createRange(),n=this.getType();if(!a)return[];if(n==CKEDITOR.SELECTION_TEXT)return a=new CKEDITOR.dom.range(this.root),n=t(e,!0),a.setStart(new CKEDITOR.dom.node(n.container),n.offset),n=t(e),a.setEnd(new CKEDITOR.dom.node(n.container),n.offset),a.endContainer.getPosition(a.startContainer)&CKEDITOR.POSITION_PRECEDING&&a.endOffset<=a.startContainer.getIndex()&&a.collapse(),[a];if(n==CKEDITOR.SELECTION_ELEMENT){n=[];for(var i=0;i<e.length;i++){for(var o=e.item(i),r=o.parentNode,s=0,a=new CKEDITOR.dom.range(this.root);s<r.childNodes.length&&r.childNodes[s]!=o;s++);a.setStart(new CKEDITOR.dom.node(r),s),a.setEnd(new CKEDITOR.dom.node(r),s+1),n.push(a)}return n}return[]}}():function(){var e,t=[],n=this.getNative();if(!n)return t;for(var i=0;i<n.rangeCount;i++){var o=n.getRangeAt(i);(e=new CKEDITOR.dom.range(this.root)).setStart(new CKEDITOR.dom.node(o.startContainer),o.startOffset),e.setEnd(new CKEDITOR.dom.node(o.endContainer),o.endOffset),t.push(e)}return t};return function(t){var n=this._.cache,i=n.ranges;return i||(n.ranges=i=new CKEDITOR.dom.rangeList(e.call(this))),t?function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.getCommonAncestor().isReadOnly()&&e.splice(t,1),!n.collapsed){if(n.startContainer.isReadOnly())for(var i,o=n.startContainer;o&&!((i=o.type==CKEDITOR.NODE_ELEMENT)&&o.is("body")||!o.isReadOnly());)i&&"false"==o.getAttribute("contentEditable")&&n.setStartAfter(o),o=o.getParent();o=n.startContainer,i=n.endContainer;var r=n.startOffset,s=n.endOffset,a=n.clone();o&&o.type==CKEDITOR.NODE_TEXT&&(r>=o.getLength()?a.setStartAfter(o):a.setStartBefore(o)),i&&i.type==CKEDITOR.NODE_TEXT&&(s?a.setEndAfter(i):a.setEndBefore(i)),(o=new CKEDITOR.dom.walker(a)).evaluator=function(i){if(i.type==CKEDITOR.NODE_ELEMENT&&i.isReadOnly()){var o=n.clone();return n.setEndBefore(i),n.collapsed&&e.splice(t--,1),i.getPosition(a.endContainer)&CKEDITOR.POSITION_CONTAINS||(o.setStartAfter(i),o.collapsed||e.splice(t+1,0,o)),!0}return!1},o.next()}}return e}(new CKEDITOR.dom.rangeList(i.slice())):i}}(),getStartElement:function(){var e,t=this._.cache;if(void 0!==t.startElement)return t.startElement;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var n=this.getRanges()[0];if(n){if(n.collapsed)(e=n.startContainer).type!=CKEDITOR.NODE_ELEMENT&&(e=e.getParent());else{for(n.optimize();e=n.startContainer,n.startOffset==(e.getChildCount?e.getChildCount():e.getLength())&&!e.isBlockBoundary();)n.setStartAfter(e);if((e=n.startContainer).type!=CKEDITOR.NODE_ELEMENT)return e.getParent();if((e=e.getChild(n.startOffset))&&e.type==CKEDITOR.NODE_ELEMENT)for(n=e.getFirst();n&&n.type==CKEDITOR.NODE_ELEMENT;)e=n,n=n.getFirst();else e=n.startContainer}e=e.$}}return t.startElement=e?new CKEDITOR.dom.element(e):null},getSelectedElement:function(){var e=this._.cache;if(void 0!==e.selectedElement)return e.selectedElement;var t=this,n=CKEDITOR.tools.tryThese((function(){return t.getNative().createRange().item(0)}),(function(){for(var e,n,i=t.getRanges()[0].clone(),o=2;o&&!((e=i.getEnclosedNode())&&e.type==CKEDITOR.NODE_ELEMENT&&v[e.getName()]&&(n=e));o--)i.shrink(CKEDITOR.SHRINK_ELEMENT);return n&&n.$}));return e.selectedElement=n?new CKEDITOR.dom.element(n):null},getSelectedText:function(){var e=this._.cache;if(void 0!==e.selectedText)return e.selectedText;var t=this.getNative();return t=p?"Control"==t.type?"":t.createRange().text:t.toString(),e.selectedText=t},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(e){if(this.isLocked){if(e)var i=this.getSelectedElement(),o=this.getRanges(),r=this.isFake;this.isLocked=0,this.reset(),e&&(e=i||o[0]&&o[0].getCommonAncestor())&&e.getAscendant("body",1)&&((e=this.root.editor)&&e.plugins.tableselection&&e.plugins.tableselection.isSupportedEnvironment(e)&&t(o)?n.call(this,o):r?this.fake(i):i&&2>o.length?this.selectElement(i):this.selectRanges(o))}},reset:function(){this._.cache={},this.isFake=0;var e=this.root.editor;if(e&&e._.fakeSelection)if(this.rev==e._.fakeSelection.rev){delete e._.fakeSelection;var t=e._.hiddenSelectionContainer;if(t){var n=e.checkDirty();e.fire("lockSnapshot"),t.remove(),e.fire("unlockSnapshot"),!n&&e.resetDirty()}delete e._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");this.rev=g++},selectElement:function(e){var t=new CKEDITOR.dom.range(this.root);t.setStartBefore(e),t.setEndAfter(e),this.selectRanges([t])},selectRanges:function(e){var i=this.root.editor,o=i&&i._.hiddenSelectionContainer;if(this.reset(),o){o=this.root;for(var r,s=0;s<e.length;++s)(r=e[s]).endContainer.equals(o)&&(r.endOffset=Math.min(r.endOffset,o.getChildCount()))}if(e.length)if(this.isLocked){var u=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(e),this.lock(),u&&!u.equals(this.root)&&u.focus()}else{var h,f,g;if(1==e.length&&!(g=e[0]).collapsed&&(h=g.getEnclosedNode())&&h.type==CKEDITOR.NODE_ELEMENT&&((g=g.clone()).shrink(CKEDITOR.SHRINK_ELEMENT,!0),(f=g.getEnclosedNode())&&f.type==CKEDITOR.NODE_ELEMENT&&(h=f),"false"==h.getAttribute("contenteditable"))||(h=void 0),h)this.fake(h);else if(i&&i.plugins.tableselection&&i.plugins.tableselection.isSupportedEnvironment(i)&&t(e)&&!d&&!e[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored"))n.call(this,e);else{if(p){var m,E,T;if(f=CKEDITOR.dom.walker.whitespaces(!0),h=/\ufeff|\u00a0/,g={table:1,tbody:1,tr:1},1<e.length&&(i=e[e.length-1],e[0].setEnd(i.endContainer,i.endOffset)),e=(i=e[0]).collapsed,(o=i.getEnclosedNode())&&o.type==CKEDITOR.NODE_ELEMENT&&o.getName()in v&&(!o.is("a")||!o.getText()))try{return(T=o.$.createControlRange()).addElement(o.$),void T.select()}catch(e){}(i.startContainer.type==CKEDITOR.NODE_ELEMENT&&i.startContainer.getName()in g||i.endContainer.type==CKEDITOR.NODE_ELEMENT&&i.endContainer.getName()in g)&&(i.shrink(CKEDITOR.NODE_ELEMENT,!0),e=i.collapsed),g=(T=i.createBookmark()).startNode,e||(u=T.endNode),(T=i.document.$.body.createTextRange()).moveToElementText(g.$),T.moveStart("character",1),u?((h=i.document.$.body.createTextRange()).moveToElementText(u.$),T.setEndPoint("EndToEnd",h),T.moveEnd("character",-1)):(m=g.getNext(f),E=g.hasAscendant("pre"),m=!(m&&m.getText&&m.getText().match(h))&&(E||!g.hasPrevious()||g.getPrevious().is&&g.getPrevious().is("br")),(E=i.document.createElement("span")).setHtml("&#65279;"),E.insertBefore(g),m&&i.document.createText("\ufeff").insertBefore(g)),i.setStartBefore(g),g.remove(),e?(m?(T.moveStart("character",-1),T.select(),i.document.$.selection.clear()):T.select(),i.moveToPosition(E,CKEDITOR.POSITION_BEFORE_START),E.remove()):(i.setEndBefore(u),u.remove(),T.select())}else{if(!(u=this.getNative()))return;for(this.removeAllRanges(),T=0;T<e.length;T++)if(T<e.length-1&&(m=e[T],E=e[T+1],(h=m.clone()).setStart(m.endContainer,m.endOffset),h.setEnd(E.startContainer,E.startOffset),!h.collapsed&&(h.shrink(CKEDITOR.NODE_ELEMENT,!0),i=h.getCommonAncestor(),h=h.getEnclosedNode(),i.isReadOnly()||h&&h.isReadOnly())))E.setStart(m.startContainer,m.startOffset),e.splice(T--,1);else{i=e[T],E=this.document.$.createRange(),i.collapsed&&CKEDITOR.env.webkit&&a(i)&&(h=l(this.root),i.insertNode(h),(m=h.getNext())&&!h.getPrevious()&&m.type==CKEDITOR.NODE_ELEMENT&&"br"==m.getName()?(c(this.root),i.moveToPosition(m,CKEDITOR.POSITION_BEFORE_START)):i.moveToPosition(h,CKEDITOR.POSITION_AFTER_END)),E.setStart(i.startContainer.$,i.startOffset);try{E.setEnd(i.endContainer.$,i.endOffset)}catch(e){if(!(0<=e.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")))throw e;i.collapse(1),E.setEnd(i.endContainer.$,i.endOffset)}u.addRange(E)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(e,t){var n=this.root.editor;void 0===t&&e.hasAttribute("aria-label")&&(t=e.getAttribute("aria-label")),this.reset(),function(e,t){var n=t&&CKEDITOR.tools.htmlEncode(t)||"&nbsp;";n=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie&&14>CKEDITOR.env.version?"display:none":"position:fixed;top:0;left:-1000px;width:0;height:0;overflow:hidden;")+'">'+n+"</div>",e.document),e.fire("lockSnapshot"),e.editable().append(n);var i=e.getSelection(1),o=e.createRange(),r=i.root.on("selectionchange",(function(e){e.cancel()}),null,null,0);o.setStartAt(n,CKEDITOR.POSITION_AFTER_START),o.setEndAt(n,CKEDITOR.POSITION_BEFORE_END),i.selectRanges([o]),r.removeListener(),e.fire("unlockSnapshot"),e._.hiddenSelectionContainer=n}(n,t);var i=this._.cache,o=new CKEDITOR.dom.range(this.root);o.setStartBefore(e),o.setEndAfter(e),i.ranges=new CKEDITOR.dom.rangeList(o),i.selectedElement=i.startElement=e,i.type=CKEDITOR.SELECTION_ELEMENT,i.selectedText=i.nativeSel=null,this.isFake=1,this.rev=g++,n._.fakeSelection=this,this.root.fire("selectionchange")},isHidden:function(){var e=this.getCommonAncestor();return e&&e.type==CKEDITOR.NODE_TEXT&&(e=e.getParent()),!(!e||!e.data("cke-hidden-sel"))},isInTable:function(e){return t(this.getRanges(),e)},isCollapsed:function(){var e=this.getRanges();return 1===e.length&&e[0].collapsed},createBookmarks:function(e){return e=this.getRanges().createBookmarks(e),this.isFake&&(e.isFake=1),e},createBookmarks2:function(e){return e=this.getRanges().createBookmarks2(e),this.isFake&&(e.isFake=1),e},selectBookmarks:function(e){for(var n,i=[],o=0;o<e.length;o++){var r=new CKEDITOR.dom.range(this.root);r.moveToBookmark(e[o]),i.push(r)}return e.isFake&&((n=t(i)?i[0]._getTableElement():i[0].getEnclosedNode())&&n.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),e.isFake=0)),e.isFake&&!t(i)?this.fake(n):this.selectRanges(i),this},getCommonAncestor:function(){var e=this.getRanges();return e.length?e[0].startContainer.getCommonAncestor(e[e.length-1].endContainer):null},scrollIntoView:function(){this.getType()!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var e=this.getNative();try{e&&e[p?"empty":"removeAllRanges"]()}catch(e){}this.reset()}}}}(),CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function t(e,t){for(var n,i;(e=e.getParent())&&!e.equals(t);)if(e.getAttribute("data-nostyle"))n=e;else if(!i){var o=e.getAttribute("contentEditable");"false"==o?n=e:"true"==o&&(i=1)}return n}function n(e,t,n,i){return(e.getPosition(t)|i)==i&&(!n.childRule||n.childRule(e))}function i(e){var o=e.document;if(e.collapsed)o=m(this,o),e.insertNode(o),e.moveToPosition(o,CKEDITOR.POSITION_BEFORE_END);else{var s,a=this.element,l=this._.definition,c=(T=l.ignoreReadonly)||l.includeReadonly;null==c&&(c=e.root.getCustomData("cke_includeReadonly"));var u=CKEDITOR.dtd[a];u||(s=!0,u=CKEDITOR.dtd.span),e.enlarge(CKEDITOR.ENLARGE_INLINE,1),e.trim();var d,h=e.createBookmark(),p=h.startNode,g=h.endNode,E=p;if(!T){var T=t(p,C=e.getCommonAncestor()),C=t(g,C);T&&(E=T.getNextSourceNode(!0)),C&&(g=C)}for(E.getPosition(g)==CKEDITOR.POSITION_FOLLOWING&&(E=0);E;){if(T=!1,E.equals(g))E=null,T=!0;else{C=(R=E.type==CKEDITOR.NODE_ELEMENT?E.getName():null)&&"false"==E.getAttribute("contentEditable");var v=R&&-1!==CKEDITOR.tools.array.indexOf(CKEDITOR.style.unstylableElements,R);if(v=R&&(E.getAttribute("data-nostyle")||v),R&&E.data("cke-bookmark")||E.type===CKEDITOR.NODE_COMMENT){E=E.getNextSourceNode(!0);continue}if(C&&c&&CKEDITOR.dtd.$block[R])for(var I=void 0,D=0,O=(A=(N=r(O=E)).length)&&new CKEDITOR.dom.range(O.getDocument());D<A;++D){I=N[D];var b=CKEDITOR.filter.instances[I.data("cke-filter")];b&&!b.check(this)||(O.selectNodeContents(I),i.call(this,O))}if(N=R?!u[R]||v||C&&!c?0:n(E,g,l,k):1){if(N=l,A=a,D=s,!(I=E.getParent())||!(I.getDtd()||CKEDITOR.dtd.span)[A]&&!D||N.parentRule&&!N.parentRule(I))T=!0;else if(d||R&&CKEDITOR.dtd.$removeEmpty[R]&&(E.getPosition(g)|k)!=k||(d=e.clone()).setStartBefore(E),(R=E.type)==CKEDITOR.NODE_TEXT||C||R==CKEDITOR.NODE_ELEMENT&&!E.getChildCount()){for(var y,R=E;(T=!R.getNext(_))&&u[(y=R.getParent()).getName()]&&n(y,p,l,w);)R=y;d.setEndAfter(R)}}else T=!0;E=E.getNextSourceNode(v||C)}if(T&&d&&!d.collapsed){C=(T=m(this,o)).hasAttributes(),v=d.getCommonAncestor(),R={};for(var K,S,x,N={},A=(I={},{});T&&v;){if(v.getName()==a){for(K in l.attributes)!A[K]&&(x=v.getAttribute(S))&&(T.getAttribute(K)==x?N[K]=1:A[K]=1);for(S in l.styles)!I[S]&&(x=v.getStyle(S))&&(T.getStyle(S)==x?R[S]=1:I[S]=1)}v=v.getParent()}for(K in N)T.removeAttribute(K);for(S in R)T.removeStyle(S);C&&!T.hasAttributes()&&(T=null),T?(d.extractContents().appendTo(T),d.insertNode(T),f.call(this,T),T.mergeSiblings(),CKEDITOR.env.ie||T.$.normalize()):(T=new CKEDITOR.dom.element("span"),d.extractContents().appendTo(T),d.insertNode(T),f.call(this,T),T.remove(!0)),d=null}}e.moveToBookmark(h),e.shrink(CKEDITOR.SHRINK_TEXT),e.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function o(e){function t(){for(var e=new CKEDITOR.dom.elementPath(i.getParent()),t=new CKEDITOR.dom.elementPath(u.getParent()),n=null,o=null,r=0;r<e.elements.length;r++){var s=e.elements[r];if(s==e.block||s==e.blockLimit)break;d.checkElementRemovable(s,!0)&&(n=s)}for(r=0;r<t.elements.length&&(s=t.elements[r])!=t.block&&s!=t.blockLimit;r++)d.checkElementRemovable(s,!0)&&(o=s);o&&u.breakParent(o),n&&i.breakParent(n)}e.enlarge(CKEDITOR.ENLARGE_INLINE,1);var n=e.createBookmark(),i=n.startNode,o=this._.definition.alwaysRemoveElement;if(e.collapsed){for(var r,s,a=new CKEDITOR.dom.elementPath(i.getParent(),e.root),l=0;l<a.elements.length&&(s=a.elements[l])&&s!=a.block&&s!=a.blockLimit;l++){var c;this.checkElementRemovable(s)&&(!o&&e.collapsed&&(e.checkBoundaryOfElement(s,CKEDITOR.END)||(c=e.checkBoundaryOfElement(s,CKEDITOR.START)))?(r=s).match=c?"start":"end":(s.mergeSiblings(),s.is(this.element)?h.call(this,s):p(s,C(this)[s.getName()])))}if(r){for(o=i,l=0;!(s=a.elements[l]).equals(r);l++)s.match||((s=s.clone()).append(o),o=s);o["start"==r.match?"insertBefore":"insertAfter"](r)}}else{var u=n.endNode,d=this;for(t(),a=i;!a.equals(u);)r=a.getNextSourceNode(),a.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(a)&&(a.getName()==this.element?h.call(this,a):p(a,C(this)[a.getName()]),r.type==CKEDITOR.NODE_ELEMENT&&r.contains(i)&&(t(),r=i.getNext())),a=r}e.moveToBookmark(n),e.shrink(CKEDITOR.NODE_ELEMENT,!0)}function r(e){var t=[];return e.forEach((function(e){if("true"==e.getAttribute("contenteditable"))return t.push(e),!1}),CKEDITOR.NODE_ELEMENT,!0),t}function s(e){var t=e.getEnclosedNode()||e.getCommonAncestor(!1,!0);(e=new CKEDITOR.dom.elementPath(t,e.root).contains(this.element,1))&&!e.isReadOnly()&&E(e,this)}function a(e){var t=e.getCommonAncestor(!0,!0);if(e=new CKEDITOR.dom.elementPath(t,e.root).contains(this.element,1)){var n=(t=this._.definition).attributes;if(n)for(var i in n)e.removeAttribute(i,n[i]);if(t.styles)for(var o in t.styles)t.styles.hasOwnProperty(o)&&e.removeStyle(o)}}function l(e){var t=e.createBookmark(!0),n=e.createIterator();n.enforceRealBlocks=!0,this._.enterMode&&(n.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var i,o=e.document;i=n.getNextParagraph();)!i.isReadOnly()&&(!n.activeFilter||n.activeFilter.check(this))&&u(i,m(this,o,i));e.moveToBookmark(t)}function c(e){var t,n,i=e.createBookmark(1),o=e.createIterator();for(o.enforceRealBlocks=!0,o.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;t=o.getNextParagraph();)this.checkElementRemovable(t)&&(t.is("pre")?((n=this._.enterMode==CKEDITOR.ENTER_BR?null:e.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&t.copyAttributes(n),u(t,n)):h.call(this,t));e.moveToBookmark(i)}function u(e,t){(n=!t)&&(t=e.getDocument().createElement("div"),e.copyAttributes(t));var n,i,o=t&&t.is("pre"),r=e.is("pre"),s=!o&&r;if(o&&!r){if(r=t,(s=e.getBogus())&&s.remove(),s=(s=(s=(s=d(s=e.getHtml(),/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"")).replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1")).replace(/([ \t\n\r]+|&nbsp;)/g," ")).replace(/<br\b[^>]*>/gi,"\n"),CKEDITOR.env.ie){var a=e.getDocument().createElement("div");a.append(r),r.$.outerHTML="<pre>"+s+"</pre>",r.copyAttributes(a.getFirst()),r=a.getFirst().remove()}else r.setHtml(s);t=r}else s?t=function(e,t){var n;1<e.length&&(n=new CKEDITOR.dom.documentFragment(t.getDocument()));for(var i=0;i<e.length;i++){var o=d(o=(o=e[i]).replace(/(\r\n|\r)/g,"\n"),/^[ \t]*\n/,"");if(o=d(o,/\n$/,""),o=(o=(o=d(o,/^[ \t]+|[ \t]+$/g,(function(e,t){return 1==e.length?"&nbsp;":t?" "+CKEDITOR.tools.repeat("&nbsp;",e.length-1):CKEDITOR.tools.repeat("&nbsp;",e.length-1)+" "}))).replace(/\n/g,"<br>")).replace(/[ \t]{2,}/g,(function(e){return CKEDITOR.tools.repeat("&nbsp;",e.length-1)+" "})),n){var r=t.clone();r.setHtml(o),n.append(r)}else t.setHtml(o)}return n||t}(n?[e.getHtml()]:function(e){var t=[];return d(e.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,(function(e,t,n){return t+"</pre>"+n+"<pre>"})).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,(function(e,n){t.push(n)})),t}(e),t):e.moveChildren(t);t.replace(e),o?(i=(n=t).getPrevious(K))&&i.type==CKEDITOR.NODE_ELEMENT&&i.is("pre")&&(o=d(i.getHtml(),/\n$/,"")+"\n\n"+d(n.getHtml(),/^\n/,""),CKEDITOR.env.ie?n.$.outerHTML="<pre>"+o+"</pre>":n.setHtml(o),i.remove()):n&&g(t)}function d(e,t,n){var i="",o="";return e=e.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,(function(e,t,n){return t&&(i=t),n&&(o=n),""})),i+e.replace(t,n)+o}function h(e,t){var n,i=(o=this._.definition).attributes,o=o.styles,r=C(this)[e.getName()],s=CKEDITOR.tools.isEmpty(i)&&CKEDITOR.tools.isEmpty(o);for(n in i)("class"!=n&&!this._.definition.fullMatch||e.getAttribute(n)==v(n,i[n]))&&(t&&"data-"==n.slice(0,5)||(s=e.hasAttribute(n),e.removeAttribute(n)));for(var a in o)this._.definition.fullMatch&&e.getStyle(a)!=v(a,o[a],!0)||(s=s||!!e.getStyle(a),e.removeStyle(a));p(e,r,O[e.getName()]),s&&(this._.definition.alwaysRemoveElement?g(e,1):!CKEDITOR.dtd.$block[e.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!e.hasAttributes()?g(e):e.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function f(e){for(var t,n=C(this),i=e.getElementsByTag(this.element),o=i.count();0<=--o;)(t=i.getItem(o)).isReadOnly()||h.call(this,t,!0);for(var r in n)if(r!=this.element)for(o=(i=e.getElementsByTag(r)).count()-1;0<=o;o--)(t=i.getItem(o)).isReadOnly()||p(t,n[r])}function p(e,t,n){if(t=t&&t.attributes)for(var i=0;i<t.length;i++){var o,r=t[i][0];if(o=e.getAttribute(r)){var s=t[i][1];(null===s||s.test&&s.test(o)||"string"==typeof s&&o==s)&&e.removeAttribute(r)}}n||g(e)}function g(e,t){if(!e.hasAttributes()||t)if(CKEDITOR.dtd.$block[e.getName()]){var n=e.getPrevious(K),i=e.getNext(K);!n||n.type!=CKEDITOR.NODE_TEXT&&n.isBlockBoundary({br:1})||e.append("br",1),!i||i.type!=CKEDITOR.NODE_TEXT&&i.isBlockBoundary({br:1})||e.append("br"),e.remove(!0)}else n=e.getFirst(),i=e.getLast(),e.remove(!0),n&&(n.type==CKEDITOR.NODE_ELEMENT&&n.mergeSiblings(),i&&!n.equals(i)&&i.type==CKEDITOR.NODE_ELEMENT&&i.mergeSiblings())}function m(e,t,n){var i;return"*"==(i=e.element)&&(i="span"),i=new CKEDITOR.dom.element(i,t),n&&n.copyAttributes(i),i=E(i,e),t.getCustomData("doc_processing_style")&&i.hasAttribute("id")?i.removeAttribute("id"):t.setCustomData("doc_processing_style",1),i}function E(e,t){var n=(i=t._.definition).attributes,i=CKEDITOR.style.getStyleText(i);if(n)for(var o in n)e.setAttribute(o,n[o]);return i&&e.setAttribute("style",i),e.getDocument().removeCustomData("doc_processing_style"),e}function T(e,t){for(var n in e)e[n]=e[n].replace(R,(function(e,n){return t[n]}))}function C(e){if(e._.overrides)return e._.overrides;var t=e._.overrides={},n=e._.definition.overrides;if(n){CKEDITOR.tools.isArray(n)||(n=[n]);for(var i=0;i<n.length;i++){var o,r;if("string"==typeof(a=n[i])?o=a.toLowerCase():(o=a.element?a.element.toLowerCase():e.element,r=a.attributes),a=t[o]||(t[o]={}),r){var s,a=a.attributes=a.attributes||[];for(s in r)a.push([s.toLowerCase(),r[s]])}}}return t}function v(e,t,n){var i=new CKEDITOR.dom.element("span");return i[n?"setStyle":"setAttribute"](e,t),i[n?"getStyle":"getAttribute"](e)}function I(e,t){function n(e,t){return"font-family"==t.toLowerCase()?e.replace(/["']/g,""):e}for(var i in"string"==typeof e&&(e=CKEDITOR.tools.parseCssText(e)),"string"==typeof t&&(t=CKEDITOR.tools.parseCssText(t,!0)),e)if(!(i in t)||n(t[i],i)!=n(e[i],i)&&"inherit"!=e[i]&&"inherit"!=t[i])return!1;return!0}function D(e,t,n){var i=e.getRanges();t=t?this.removeFromRange:this.applyToRange;for(var o,r=i.createIterator();o=r.getNextRange();)t.call(this,o,n);e.selectRanges(i)}var O={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},b={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},y=/\s*(?:;\s*|$)/,R=/#\((.+?)\)/g,_=CKEDITOR.dom.walker.bookmark(0,1),K=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(t,n){if("string"==typeof t.type)return new CKEDITOR.style.customHandlers[t.type](t);var i=t.attributes;i&&i.style&&(t.styles=CKEDITOR.tools.extend({},t.styles,CKEDITOR.tools.parseCssText(i.style)),delete i.style),n&&(T((t=CKEDITOR.tools.clone(t)).attributes,n),T(t.styles,n)),i=this.element=t.element?"string"==typeof t.element?t.element.toLowerCase():t.element:"*",this.type=t.type||(O[i]?CKEDITOR.STYLE_BLOCK:b[i]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),"object"==e(this.element)&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:t}},CKEDITOR.style.prototype={apply:function(e){if(e instanceof CKEDITOR.dom.document)return D.call(this,e.getSelection());if(this.checkApplicable(e.elementPath(),e)){var t=this._.enterMode;t||(this._.enterMode=e.activeEnterMode),D.call(this,e.getSelection(),0,e),this._.enterMode=t}},remove:function(e){if(e instanceof CKEDITOR.dom.document)return D.call(this,e.getSelection(),1);if(this.checkApplicable(e.elementPath(),e)){var t=this._.enterMode;t||(this._.enterMode=e.activeEnterMode),D.call(this,e.getSelection(),1,e),this._.enterMode=t}},applyToRange:function(e){return this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?i:this.type==CKEDITOR.STYLE_BLOCK?l:this.type==CKEDITOR.STYLE_OBJECT?s:null,this.applyToRange(e)},removeFromRange:function(e){return this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?o:this.type==CKEDITOR.STYLE_BLOCK?c:this.type==CKEDITOR.STYLE_OBJECT?a:null,this.removeFromRange(e)},applyToObject:function(e){E(e,this)},checkActive:function(e,t){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(e.block||e.blockLimit,!0,t);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var n,i=e.elements,o=0;o<i.length;o++)if(n=i[o],this.type!=CKEDITOR.STYLE_INLINE||n!=e.block&&n!=e.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var r=n.getName();if(!("string"==typeof this.element?r==this.element:r in this.element))continue}if(this.checkElementRemovable(n,!0,t))return!0}}return!1},checkApplicable:function(e,t,n){if(t&&t instanceof CKEDITOR.filter&&(n=t),n&&!n.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!e.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!e.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(e,t){var n=this._.definition;if(!e||!n.ignoreReadonly&&e.isReadOnly())return!1;var i=e.getName();if("string"==typeof this.element?i==this.element:i in this.element){if(!t&&!e.hasAttributes())return!0;if(i=n._AC)n=i;else{i={};var o=0,r=n.attributes;if(r)for(var s in r)o++,i[s]=r[s];(s=CKEDITOR.style.getStyleText(n))&&(i.style||o++,i.style=s),i._length=o,n=n._AC=i}if(!n._length)return!0;for(var a in n)if("_length"!=a)if(i=e.getAttribute(a)||"","style"==a?I(n[a],i):n[a]==i){if(!t)return!0}else if(t)return!1;if(t)return!0}return!1},checkElementRemovable:function(e,t,n){if(this.checkElementMatch(e,t,n))return!0;if(t=C(this)[e.getName()]){var i;if(!(t=t.attributes))return!0;for(n=0;n<t.length;n++)if(i=t[n][0],i=e.getAttribute(i)){var o=t[n][1];if(null===o)return!0;if("string"==typeof o){if(i==o)return!0}else if(o.test(i))return!0}}return!1},buildPreview:function(e){var t=this._.definition,n=[],i=t.element;"bdo"==i&&(i="span"),n=["<",i];var o=t.attributes;if(o)for(var r in o)n.push(" ",r,'="',o[r],'"');return(o=CKEDITOR.style.getStyleText(t))&&n.push(' style="',o,'"'),n.push(">",e||t.name,"</",i,">"),n.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(e){if(t=e._ST)return t;var t=e.styles,n=e.attributes&&e.attributes.style||"",i="";for(var o in n.length&&(n=n.replace(y,";")),t){var r=t[o],s=(o+":"+r).replace(y,";");"inherit"==r?i+=s:n+=s}return n.length&&(n=CKEDITOR.tools.normalizeCssText(n,!0)),e._ST=n+i},CKEDITOR.style.customHandlers={},CKEDITOR.style.unstylableElements=[],CKEDITOR.style.addCustomHandler=function(e){var t=function(e){this._={definition:e},this.setup&&this.setup(e)};return t.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},e,!0),this.customHandlers[e.type]=t};var k=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,w=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(e,t){this.requiredContent=this.allowedContent=this.style=e,CKEDITOR.tools.extend(this,t,!0)},CKEDITOR.styleCommand.prototype.exec=function(e){e.focus(),this.state==CKEDITOR.TRISTATE_OFF?e.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&e.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(e,t,n){CKEDITOR.stylesSet.addExternal(e,t,""),CKEDITOR.stylesSet.load(e,n)},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(e,t){var n=this._.styleStateChangeCallbacks;n||(n=this._.styleStateChangeCallbacks=[],this.on("selectionChange",(function(e){for(var t=0;t<n.length;t++){var i=n[t],o=i.style.checkActive(e.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;i.fn.call(this,o)}}))),n.push({style:e,fn:t})},applyStyle:function(e){e.apply(this)},removeStyle:function(e){e.remove(this)},getStylesSet:function(e){if(this._.stylesDefinitions)e(this._.stylesDefinitions);else{var t=this;if(!1===(n=t.config.stylesCombo_stylesSet||t.config.stylesSet))e(null);else if(n instanceof Array)t._.stylesDefinitions=n,e(n);else{n||(n="default");var n,i=(n=n.split(":"))[0];CKEDITOR.stylesSet.addExternal(i,n[1]?n.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(i,(function(n){t._.stylesDefinitions=n[i],e(t._.stylesDefinitions)}))}}}}),function(){if(window.Promise)CKEDITOR.tools.promise=Promise;else{var e=CKEDITOR.getUrl("vendor/promise.js");if("function"==typeof window.define&&window.define.amd&&"function"==typeof window.require)return window.require([e],(function(e){CKEDITOR.tools.promise=e}));CKEDITOR.scriptLoader.load(e,(function(t){return t?void 0!==window.ES6Promise?CKEDITOR.tools.promise=ES6Promise:void 0:CKEDITOR.error("no-vendor-lib",{path:e})}))}}(),function(){function e(e,i,o){e.once("selectionCheck",(function(e){if(!t){var r=e.data.getRanges()[0];o.equals(r)?e.cancel():i.equals(r)&&(n=!0)}}),null,null,-1)}var t=!0,n=!1;CKEDITOR.dom.selection.setupEditorOptimization=function(e){e.on("selectionCheck",(function(e){e.data&&!n&&e.data.optimizeInElementEnds(),n=!1})),e.on("contentDom",(function(){var t=e.editable();t&&(t.attachListener(t,"keydown",(function(e){this._.shiftPressed=e.data.$.shiftKey}),this),t.attachListener(t,"keyup",(function(e){this._.shiftPressed=e.data.$.shiftKey}),this))}))},CKEDITOR.dom.selection.prototype.optimizeInElementEnds=function(){var n,i=this.getRanges()[0],o=this.root.editor;if(this.root.editor._.shiftPressed||this.isFake||i.isCollapsed||i.startContainer.equals(i.endContainer))n=!1;else if(0===i.endOffset)n=!0;else{n=i.startContainer.type===CKEDITOR.NODE_TEXT;var r=i.endContainer.type===CKEDITOR.NODE_TEXT,s=n?i.startContainer.getLength():i.startContainer.getChildCount();n=i.startOffset===s||n^r}n&&(n=i.clone(),i.shrink(CKEDITOR.SHRINK_TEXT,!1,{skipBogus:!CKEDITOR.env.webkit}),t=!1,e(o,i,n),i.select(),t=!0)}}(),CKEDITOR.dom.comment=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createComment(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+this.$.nodeValue+"--\x3e"}}),function(){var e,t={},n={};for(e in CKEDITOR.dtd.$blockLimit)e in CKEDITOR.dtd.$list||(t[e]=1);for(e in CKEDITOR.dtd.$block)e in CKEDITOR.dtd.$blockLimit||e in CKEDITOR.dtd.$empty||(n[e]=1);CKEDITOR.dom.elementPath=function(e,i){var o,r=null,s=null,a=[],l=e;i=i||e.getDocument().getBody(),l||(l=i);do{if(l.type==CKEDITOR.NODE_ELEMENT){if(a.push(l),!this.lastElement&&(this.lastElement=l,l.is(CKEDITOR.dtd.$object)||"false"==l.getAttribute("contenteditable")))continue;if(l.equals(i))break;if(!s&&(o=l.getName(),"true"==l.getAttribute("contenteditable")?s=l:!r&&n[o]&&(r=l),t[o])){if(o=!r&&"div"==o){e:{for(var c=0,u=(o=l.getChildren()).count();c<u;c++){var d=o.getItem(c);if(d.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[d.getName()]){o=!0;break e}}o=!1}o=!o}o?r=l:s=l}}}while(l=l.getParent());s||(s=i),this.block=r,this.blockLimit=s,this.root=i,this.elements=a}}(),CKEDITOR.dom.elementPath.prototype={compare:function(e){var t=this.elements;if(!(e=e&&e.elements)||t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0},contains:function(t,n,i){var o,r=0;"string"==typeof t&&(o=function(e){return e.getName()==t}),t instanceof CKEDITOR.dom.element?o=function(e){return e.equals(t)}:CKEDITOR.tools.isArray(t)?o=function(e){return-1<CKEDITOR.tools.indexOf(t,e.getName())}:"function"==typeof t?o=t:"object"==e(t)&&(o=function(e){return e.getName()in t});var s=this.elements,a=s.length;for(n&&(i?r+=1:--a),i&&(s=Array.prototype.slice.call(s,0)).reverse();r<a;r++)if(o(s[r]))return s[r];return null},isContextFor:function(e){return!(e in CKEDITOR.dtd.$block)||!!(this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit).getDtd()[e]},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createTextNode(e)),this.$=e},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(e){this.$.nodeValue=e},isEmpty:function(e){var t=this.getText();return e&&(t=CKEDITOR.tools.trim(t)),!t||t===CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE},split:function(e){var t=this.$.parentNode,n=t.childNodes.length,i=this.getLength(),o=this.getDocument(),r=new CKEDITOR.dom.text(this.$.splitText(e),o);return t.childNodes.length==n&&(e>=i?(r=o.createText("")).insertAfter(this):((e=o.createText("")).insertAfter(r),e.remove())),r},substring:function(e,t){return"number"!=typeof t?this.$.nodeValue.substr(e):this.$.nodeValue.substring(e,t)}}),function(){function e(e,t,n){var i=e.serializable,o=t[n?"endContainer":"startContainer"],r=n?"endOffset":"startOffset",s=i?t.document.getById(e.startNode):e.startNode;return e=i?t.document.getById(e.endNode):e.endNode,o.equals(s.getPrevious())?(t.startOffset=t.startOffset-o.getLength()-e.getPrevious().getLength(),o=e.getNext()):o.equals(e.getPrevious())&&(t.startOffset-=o.getLength(),o=e.getNext()),o.equals(s.getParent())&&t[r]++,o.equals(e.getParent())&&t[r]++,t[n?"endContainer":"startContainer"]=o,t}CKEDITOR.dom.rangeList=function(e){return e instanceof CKEDITOR.dom.rangeList?e:(e?e instanceof CKEDITOR.dom.range&&(e=[e]):e=[],CKEDITOR.tools.extend(e,t))};var t={createIterator:function(){var e,t=this,n=CKEDITOR.dom.walker.bookmark(),i=[];return{getNextRange:function(o){var r=t[e=void 0===e?0:e+1];if(r&&1<t.length){if(!e)for(var s=t.length-1;0<=s;s--)i.unshift(t[s].createBookmark(!0));if(o)for(var a=0;t[e+a+1];){var l=r.document;for(o=0,s=l.getById(i[a].endNode),l=l.getById(i[a+1].startNode);;){if(s=s.getNextSourceNode(!1),l.equals(s))o=1;else if(n(s)||s.type==CKEDITOR.NODE_ELEMENT&&s.isBlockBoundary())continue;break}if(!o)break;a++}for(r.moveToBookmark(i.shift());a--;)(s=t[++e]).moveToBookmark(i.shift()),r.setEnd(s.endContainer,s.endOffset)}return r}}},createBookmarks:function(t){for(var n,i=[],o=0;o<this.length;o++){i.push(n=this[o].createBookmark(t,!0));for(var r=o+1;r<this.length;r++)this[r]=e(n,this[r]),this[r]=e(n,this[r],!0)}return i},createBookmarks2:function(e){for(var t=[],n=0;n<this.length;n++)t.push(this[n].createBookmark2(e));return t},moveToBookmarks:function(e){for(var t=0;t<this.length;t++)this[t].moveToBookmark(e[t])}}}(),function(){function e(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function t(t){var n=CKEDITOR.skin["ua_"+t],i=CKEDITOR.env;if(n){n=n.split(",").sort((function(e,t){return e>t?-1:1}));for(var o,r=0;r<n.length;r++)if(o=n[r],i.ie&&(o.replace(/^ie/,"")==i.version||i.quirks&&"iequirks"==o)&&(o="ie"),i[o]){t+="_"+n[r];break}}return CKEDITOR.getUrl(e()+t+".css")}function n(e,n){r[e]||(CKEDITOR.document.appendStyleSheet(t(e)),r[e]=1),n&&n()}function i(e){var t=e.getById(s);return t||((t=e.getHead().append("style")).setAttribute("id",s),t.setAttribute("type","text/css")),t}function o(e,t,n){var i,o,r;if(CKEDITOR.env.webkit)for(t=t.split("}").slice(0,-1),o=0;o<t.length;o++)t[o]=t[o].split("{");for(var s=0;s<e.length;s++)if(CKEDITOR.env.webkit)for(o=0;o<t.length;o++){for(r=t[o][1],i=0;i<n.length;i++)r=r.replace(n[i][0],n[i][1]);e[s].$.sheet.addRule(t[o][0],r)}else{for(r=t,i=0;i<n.length;i++)r=r.replace(n[i][0],n[i][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?e[s].$.styleSheet.cssText+=r:e[s].$.innerHTML+=r}}var r={};CKEDITOR.skin={path:e,loadPart:function(t,i){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e()+"skin.js"),(function(){n(t,i)})):n(t,i)},getPath:function(e){return CKEDITOR.getUrl(t(e))},icons:{},addIcon:function(e,t,n,i){e=e.toLowerCase(),this.icons[e]||(this.icons[e]={path:t,offset:n||0,bgsize:i||"16px"})},getIconStyle:function(e,t,n,i,o){var r;return e&&(e=e.toLowerCase(),t&&(r=this.icons[e+"-rtl"]),r||(r=this.icons[e])),e=n||r&&r.path||"",i=i||r&&r.offset,o=o||r&&r.bgsize||"16px",e&&(e=e.replace(/'/g,"\\'")),e&&"background-image:url('"+CKEDITOR.getUrl(e)+"');background-position:0 "+i+"px;background-size:"+o+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(e){var t=i(CKEDITOR.document);return(this.setUiColor=function(e){this.uiColor=e;var n=CKEDITOR.skin.chameleon,i="",r="";"function"==typeof n&&(i=n(this,"editor"),r=n(this,"panel")),o([t],i,e=[[l,e]]),o(a,r,e)}).call(this,e)}});var s="cke_ui_color",a=[],l=/\$color/g;CKEDITOR.on("instanceLoaded",(function(e){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var t=e.editor;e=function(e){if(!(e=(e.data[0]||e.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument()).getById("cke_ui_color")){var n=i(e);a.push(n),t.on("destroy",(function(){a=CKEDITOR.tools.array.filter(a,(function(e){return n!==e}))})),(e=t.getUiColor())&&o([n],CKEDITOR.skin.chameleon(t,"panel"),[[l,e]])}},t.on("panelShow",e),t.on("menuShow",e),t.config.uiColor&&t.setUiColor(t.config.uiColor)}}))}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var e=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);e.appendTo(CKEDITOR.document.getHead());try{var t=e.getComputedStyle("border-top-color"),n=e.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!t||t!=n)}catch(e){CKEDITOR.env.hc=!1}e.remove()}if(CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),e=CKEDITOR._.pending)for(delete CKEDITOR._.pending,t=0;t<e.length;t++)CKEDITOR.editor.prototype.constructor.apply(e[t][0],e[t][1]),CKEDITOR.add(e[t][0])}(),CKEDITOR.skin.name="moono-lisa",CKEDITOR.skin.ua_editor="ie,iequirks,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie8",CKEDITOR.skin.chameleon=function(){var e=function(e,t){for(var n=e.match(/[^#]./g),i=0;3>i;i++){var o,r=i;o=parseInt(n[i],16),o=("0"+(0>t?0|o*(1+t):0|o+(255-o)*t).toString(16)).slice(-2),n[r]=o}return"#"+n.join("")},t={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_bottom [background-color:{defaultBackground};border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [background-color:{defaultBackground};outline-color:{defaultBorder};] {id} .cke_dialog_tab [background-color:{dialogTab};border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [background-color:{lightBackground};] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} a.cke_button_off:hover,{id} a.cke_button_off:focus,{id} a.cke_button_off:active [background-color:{darkBackground};border-color:{toolbarElementsBorder};] {id} .cke_button_on [background-color:{ckeButtonOn};border-color:{toolbarElementsBorder};] {id} .cke_toolbar_separator,{id} .cke_toolgroup a.cke_button:last-child:after,{id} .cke_toolgroup a.cke_button.cke_button_disabled:hover:last-child:after [background-color: {toolbarElementsBorder};border-color: {toolbarElementsBorder};] {id} a.cke_combo_button:hover,{id} a.cke_combo_button:focus,{id} .cke_combo_on a.cke_combo_button [border-color:{toolbarElementsBorder};background-color:{darkBackground};] {id} .cke_combo:after [border-color:{toolbarElementsBorder};] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover,{id} a.cke_path_item:focus,{id} a.cke_path_item:active [background-color:{darkBackground};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [background-color:{lightBackground};border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover,.cke_menubutton:focus,.cke_menubutton:active [background-color:{menubuttonHover};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menubutton_disabled:hover .cke_menubutton_icon,.cke_menubutton_disabled:focus .cke_menubutton_icon,.cke_menubutton_disabled:active .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(n,i){var o=e(n.uiColor,.4);return o={id:"."+n.id,defaultBorder:e(o,-.2),toolbarElementsBorder:e(o,-.25),defaultBackground:o,lightBackground:e(o,.8),darkBackground:e(o,-.15),ckeButtonOn:e(o,.4),ckeResizer:e(o,-.4),ckeColorauto:e(o,.8),dialogBody:e(o,.7),dialogTab:e(o,.65),dialogTabSelected:"#FFF",dialogTabSelectedBorder:"#FFF",elementsPathColor:e(o,-.6),menubuttonHover:e(o,.1),menubuttonIcon:e(o,.5),menubuttonIconHover:e(o,.3)},t[i].output(o).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var e=function(e){this._||(this._={}),this._.default=this._.initValue=e.default||"",this._.required=e.required||!1;for(var t=[this._],n=1;n<arguments.length;n++)t.push(arguments[n]);return t.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,t),this._},t={build:function(e,t,n){return new CKEDITOR.ui.dialog.textInput(e,t,n)}},n={build:function(e,t,n){return new CKEDITOR.ui.dialog[t.type](e,t,n)}},i={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(e){this.setValue(this.getInitValue(),e)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._.default},getInitValue:function(){return this._.initValue}},o=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(e,t){this._.domOnChangeRegistered||(e.on("load",(function(){this.getInputElement().on("change",(function(){e.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})}),this)}),this),this._.domOnChangeRegistered=!0),this.on("change",t)}},!0),r=/^on([A-Z]\w+)/,s=function(e){for(var t in e)(r.test(t)||"title"==t||"type"==t)&&delete e[t];return e},a=function(e){(e=e.data.getKeystroke())==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):e==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(t,n,i,o){if(!(4>arguments.length)){var r=e.call(this,n);r.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[];var s={role:n.role||"presentation"};n.includeLabel&&(s["aria-labelledby"]=r.labelId),CKEDITOR.ui.dialog.uiElement.call(this,t,n,i,"div",null,s,(function(){var e=[],i=n.required?" cke_required":"";return"horizontal"!=n.labelLayout?e.push('<label class="cke_dialog_ui_labeled_label'+i+'" ',' id="'+r.labelId+'"',r.inputId?' for="'+r.inputId+'"':"",(n.labelStyle?' style="'+n.labelStyle+'"':"")+">",n.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',n.controlStyle?' style="'+n.controlStyle+'"':"",' role="presentation">',o.call(this,t,n),"</div>"):(i={type:"hbox",widths:n.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+i+'" id="'+r.labelId+'" for="'+r.inputId+'"'+(n.labelStyle?' style="'+n.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(n.label)+"</label>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(n.controlStyle?' style="'+n.controlStyle+'"':"")+">"+o.call(this,t,n)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(t,i,e)),e.join("")}))}},textInput:function(t,n,i){if(!(3>arguments.length)){e.call(this,n);var o=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",r={class:"cke_dialog_ui_input_"+n.type,id:o,type:n.type};n.validate&&(this.validate=n.validate),n.maxLength&&(r.maxlength=n.maxLength),n.size&&(r.size=n.size),n.inputStyle&&(r.style=n.inputStyle);var s=this,l=!1;t.on("load",(function(){s.getInputElement().on("keydown",(function(e){13==e.data.getKeystroke()&&(l=!0)})),s.getInputElement().on("keyup",(function(e){13==e.data.getKeystroke()&&l&&(t.getButton("ok")&&setTimeout((function(){t.getButton("ok").click()}),0),l=!1),s.bidi&&a.call(s,e)}),null,null,1e3)})),CKEDITOR.ui.dialog.labeledElement.call(this,t,n,i,(function(){var e=['<div class="cke_dialog_ui_input_',n.type,'" role="presentation"'];for(var t in n.width&&e.push('style="width:'+n.width+'" '),e.push("><input "),r["aria-labelledby"]=this._.labelId,this._.required&&(r["aria-required"]=this._.required),r)e.push(t+'="'+r[t]+'" ');return e.push(" /></div>"),e.join("")}))}},textarea:function(t,n,i){if(!(3>arguments.length)){e.call(this,n);var o=this,r=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",s={};n.validate&&(this.validate=n.validate),s.rows=n.rows||5,s.cols=n.cols||20,s.class="cke_dialog_ui_input_textarea "+(n.class||""),void 0!==n.inputStyle&&(s.style=n.inputStyle),n.dir&&(s.dir=n.dir),o.bidi&&t.on("load",(function(){o.getInputElement().on("keyup",a)}),o),CKEDITOR.ui.dialog.labeledElement.call(this,t,n,i,(function(){s["aria-labelledby"]=this._.labelId,this._.required&&(s["aria-required"]=this._.required);var e,t=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',r,'" '];for(e in s)t.push(e+'="'+CKEDITOR.tools.htmlEncode(s[e])+'" ');return t.push(">",CKEDITOR.tools.htmlEncode(o._.default),"</textarea></div>"),t.join("")}))}},checkbox:function(t,n,i){if(!(3>arguments.length)){var o=e.call(this,n,{default:!!n.default});n.validate&&(this.validate=n.validate),CKEDITOR.ui.dialog.uiElement.call(this,t,n,i,"span",null,null,(function(){var e=CKEDITOR.tools.extend({},n,{id:n.id?n.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),i=[],r=CKEDITOR.tools.getNextId()+"_label",a={class:"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":r};return s(e),n.default&&(a.checked="checked"),void 0!==e.inputStyle&&(e.style=e.inputStyle),o.checkbox=new CKEDITOR.ui.dialog.uiElement(t,e,i,"input",null,a),i.push(' <label id="',r,'" for="',a.id,'"'+(n.labelStyle?' style="'+n.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(n.label),"</label>"),i.join("")}))}},radio:function(t,n,i){if(!(3>arguments.length)){e.call(this,n),this._.default||(this._.default=this._.initValue=n.items[0][1]),n.validate&&(this.validate=n.validate);var o=[],r=this;n.role="radiogroup",n.includeLabel=!0,CKEDITOR.ui.dialog.labeledElement.call(this,t,n,i,(function(){for(var e=[],i=[],a=(n.id?n.id:CKEDITOR.tools.getNextId())+"_radio",l=0;l<n.items.length;l++){var c=n.items[l],u=void 0!==c[2]?c[2]:c[0],d=void 0!==c[1]?c[1]:c[0],h=(f=CKEDITOR.tools.getNextId()+"_radio_input")+"_label",f=CKEDITOR.tools.extend({},n,{id:f,title:null,type:null},!0),p=(u=CKEDITOR.tools.extend({},f,{title:u},!0),{type:"radio",class:"cke_dialog_ui_radio_input",name:a,value:d,"aria-labelledby":h}),g=[];r._.default==d&&(p.checked="checked"),s(f),s(u),void 0!==f.inputStyle&&(f.style=f.inputStyle),f.keyboardFocusable=!0,o.push(new CKEDITOR.ui.dialog.uiElement(t,f,g,"input",null,p)),g.push(" "),new CKEDITOR.ui.dialog.uiElement(t,u,g,"label",null,{id:h,for:p.id},c[0]),e.push(g.join(""))}return new CKEDITOR.ui.dialog.hbox(t,o,e,i),i.join("")})),this._.children=o}},button:function(t,n,i){if(arguments.length){"function"==typeof n&&(n=n(t.getParentEditor())),e.call(this,n,{disabled:n.disabled||!1}),CKEDITOR.event.implementOn(this);var o=this;t.on("load",(function(){var e=this.getElement();e.on("click",(function(e){o.click(),e.data.preventDefault()})),e.on("keydown",(function(e){e.data.getKeystroke()in{32:1}&&(o.click(),e.data.preventDefault())})),e.unselectable()}),this);var r=CKEDITOR.tools.extend({},n);delete r.style;var s=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,t,r,i,"a",null,{style:n.style,href:"javascript:void(0)",title:n.label,hidefocus:"true",class:n.class,role:"button","aria-labelledby":s},'<span id="'+s+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(n.label)+"</span>")}},select:function(t,n,i){if(!(3>arguments.length)){var o=e.call(this,n);n.validate&&(this.validate=n.validate),o.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,t,n,i,(function(){var e=CKEDITOR.tools.extend({},n,{id:n.id?n.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),i=[],r=[],a={id:o.inputId,class:"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};i.push('<div class="cke_dialog_ui_input_',n.type,'" role="presentation"'),n.width&&i.push('style="width:'+n.width+'" '),i.push(">"),void 0!==n.size&&(a.size=n.size),void 0!==n.multiple&&(a.multiple=n.multiple),s(e);for(var l,c=0;c<n.items.length&&(l=n.items[c]);c++)r.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==l[1]?l[1]:l[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(l[0]));return void 0!==e.inputStyle&&(e.style=e.inputStyle),o.select=new CKEDITOR.ui.dialog.uiElement(t,e,i,"select",null,a,r.join("")),i.push("</div>"),i.join("")}))}},file:function(t,n,i){if(!(3>arguments.length)){void 0===n.default&&(n.default="");var o=CKEDITOR.tools.extend(e.call(this,n),{definition:n,buttons:[]});n.validate&&(this.validate=n.validate),t.on("load",(function(){CKEDITOR.document.getById(o.frameId).getParent().addClass("cke_dialog_ui_input_file")})),CKEDITOR.ui.dialog.labeledElement.call(this,t,n,i,(function(){o.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var e=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',o.frameId,'" title="',n.label,'" src="javascript:void('];return e.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),e.push(')"></iframe>'),e.join("")}))}},fileButton:function(t,n,i){var o=this;if(!(3>arguments.length)){e.call(this,n),n.validate&&(this.validate=n.validate);var r=CKEDITOR.tools.extend({},n),s=r.onClick;r.className=(r.className?r.className+" ":"")+"cke_dialog_ui_button",r.onClick=function(e){var i=n.for;!1!==(e=!!s&&s.call(this,e))&&("xhr"!==e&&t.getContentElement(i[0],i[1]).submit(),this.disable())},t.on("load",(function(){t.getContentElement(n.for[0],n.for[1])._.buttons.push(o)})),CKEDITOR.ui.dialog.button.call(this,t,r,i)}},html:function(){var e=/^\s*<[\w:]+\s+([^>]*)?>/,t=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,n=/\/$/;return function(i,o,r){if(!(3>arguments.length)){var s=[],a=o.html;"<"!=a.charAt(0)&&(a="<span>"+a+"</span>");var l=o.focus;if(l){var c=this.focus;this.focus=function(){("function"==typeof l?l:c).call(this),this.fire("focus")},o.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,i,o,s,"span",null,null,""),s=s.join("").match(e),a=a.match(t)||["","",""],n.test(a[1])&&(a[1]=a[1].slice(0,-1),a[2]="/"+a[2]),r.push([a[1]," ",s[1]||"",a[2]].join(""))}}}(),fieldset:function(e,t,n,i,o){var r=o.label;this._={children:t},CKEDITOR.ui.dialog.uiElement.call(this,e,o,i,"fieldset",null,null,(function(){var e=[];r&&e.push("<legend"+(o.labelStyle?' style="'+o.labelStyle+'"':"")+">"+r+"</legend>");for(var t=0;t<n.length;t++)e.push(n[t]);return e.join("")}))}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(e){var t=CKEDITOR.document.getById(this._.labelId);return 1>t.getChildCount()?new CKEDITOR.dom.text(e,CKEDITOR.document).appendTo(t):t.getChild(0).$.nodeValue=e,this},getLabel:function(){var e=CKEDITOR.document.getById(this._.labelId);return!e||1>e.getChildCount()?"":e.getChild(0).getText()},eventProcessors:o},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return!this._.disabled&&this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var e=this.getElement();e&&e.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(e,t){this.on("click",(function(){t.apply(this,arguments)}))}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var e=this.selectParentTab();setTimeout((function(){var t=e.getInputElement();t&&t.$.focus()}),0)},select:function(){var e=this.selectParentTab();setTimeout((function(){var t=e.getInputElement();t&&(t.$.focus(),t.$.select())}),0)},accessKeyUp:function(){this.select()},setValue:function(e){if(this.bidi){var t=e&&e.charAt(0);(t="‪"==t?"ltr":"‫"==t?"rtl":null)&&(e=e.slice(1)),this.setDirectionMarker(t)}return e||(e=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var e=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&e){var t=this.getDirectionMarker();t&&(e=("ltr"==t?"‪":"‫")+e)}return e},setDirectionMarker:function(e){var t=this.getInputElement();e?t.setAttributes({dir:e,"data-cke-dir-marker":e}):this.getDirectionMarker()&&t.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},i,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(e,t,n){var i=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),o=this.getInputElement().$;return i.$.text=e,i.$.value=null==t?e:t,null==n?CKEDITOR.env.ie?o.add(i.$):o.add(i.$,null):o.add(i.$,n),this},remove:function(e){return this.getInputElement().$.remove(e),this},clear:function(){for(var e=this.getInputElement().$;0<e.length;)e.remove(0);return this},keyboardFocusable:!0},i,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(e,t){this.getInputElement().$.checked=e,!t&&this.fire("change",{value:e})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(e,t){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?o.onChange.apply(this,arguments):(e.on("load",(function(){var e=this._.checkbox.getElement();e.on("propertychange",(function(t){"checked"==(t=t.data.$).propertyName&&this.fire("change",{value:e.$.checked})}),this)}),this),this.on("change",t),null)}},keyboardFocusable:!0},i,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(e,t){for(var n,i=this._.children,o=0;o<i.length&&(n=i[o]);o++)n.getElement().$.checked=n.getValue()==e;!t&&this.fire("change",{value:e})},getValue:function(){for(var e=this._.children,t=0;t<e.length;t++)if(e[t].getElement().$.checked)return e[t].getValue();return null},accessKeyUp:function(){var e,t=this._.children;for(e=0;e<t.length;e++)if(t[e].getElement().$.checked)return void t[e].getElement().focus();t[0].getElement().focus()},eventProcessors:{onChange:function(e,t){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?o.onChange.apply(this,arguments):(e.on("load",(function(){for(var e=this._.children,t=this,n=0;n<e.length;n++)e[n].getElement().on("propertychange",(function(e){"checked"==(e=e.data.$).propertyName&&this.$.checked&&t.fire("change",{value:this.getAttribute("value")})}))}),this),this.on("change",t),null)}}},i,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,i,{getInputElement:function(){var e=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<e.$.forms.length?new CKEDITOR.dom.element(e.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(e){var t,n,i=/^on([A-Z]\w+)/,o=function(e,t,n,i){e.on("formLoaded",(function(){e.getInputElement().on(n,i,e)}))};for(n in e)(t=n.match(i))&&(this.eventProcessors[n]?this.eventProcessors[n].call(this,this._.dialog,e[n]):o(this,this._.dialog,t[1].toLowerCase(),e[n]));return this},reset:function(){function e(){n.$.open();var e="";i.size&&(e=i.size-(CKEDITOR.env.ie?7:0));var c=t.frameId+"_input";for(n.$.write(['<html dir="'+a+'" lang="'+l+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+a+'" lang="'+l+'" action="',CKEDITOR.tools.htmlEncode(i.action),'"><label id="',t.labelId,'" for="',c,'" style="display:none">',CKEDITOR.tools.htmlEncode(i.label),'</label><input style="width:100%" id="',c,'" aria-labelledby="',t.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(i.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(0<e?e:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+r+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+s+")}","<\/script>"].join("")),n.$.close(),e=0;e<o.length;e++)o[e].enable()}var t=this._,n=CKEDITOR.document.getById(t.frameId).getFrameDocument(),i=t.definition,o=t.buttons,r=this.formLoadedNumber,s=this.formUnloadNumber,a=t.dialog._.editor.lang.dir,l=t.dialog._.editor.langCode;r||(r=this.formLoadedNumber=CKEDITOR.tools.addFunction((function(){this.fire("formLoaded")}),this),s=this.formUnloadNumber=CKEDITOR.tools.addFunction((function(){this.getInputElement().clearCustomData()}),this),this.getDialog()._.editor.on("destroy",(function(){CKEDITOR.tools.removeFunction(r),CKEDITOR.tools.removeFunction(s)}))),CKEDITOR.env.gecko?setTimeout(e,500):e()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(e,t){this._.domOnChangeRegistered||(this.on("formLoaded",(function(){this.getInputElement().on("change",(function(){this.fire("change",{value:this.getValue()})}),this)}),this),this._.domOnChangeRegistered=!0),this.on("change",t)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",t),CKEDITOR.dialog.addUIElement("password",t),CKEDITOR.dialog.addUIElement("tel",t),CKEDITOR.dialog.addUIElement("textarea",n),CKEDITOR.dialog.addUIElement("checkbox",n),CKEDITOR.dialog.addUIElement("radio",n),CKEDITOR.dialog.addUIElement("button",n),CKEDITOR.dialog.addUIElement("select",n),CKEDITOR.dialog.addUIElement("file",n),CKEDITOR.dialog.addUIElement("fileButton",n),CKEDITOR.dialog.addUIElement("html",n),CKEDITOR.dialog.addUIElement("fieldset",{build:function(e,t,n){for(var i,o=t.children,r=[],s=[],a=0;a<o.length&&(i=o[a]);a++){var l=[];r.push(l),s.push(CKEDITOR.dialog._.uiElementBuilders[i.type].build(e,i,l))}return new CKEDITOR.ui.dialog[t.type](e,s,r,n,t)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,CKEDITOR.DIALOG_STATE_IDLE=1,CKEDITOR.DIALOG_STATE_BUSY=2,function(){function e(e){e._.tabBarMode=!0,e._.tabs[e._.currentTabId][0].focus(),e._.currentFocusIndex=-1}function t(){for(var e=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+e,n=t-1;n>t-e;n--)if(this._.tabs[this._.tabIdList[n%e]][0].$.offsetHeight)return this._.tabIdList[n%e];return null}function n(){for(var e=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),n=t+1;n<t+e;n++)if(this._.tabs[this._.tabIdList[n%e]][0].$.offsetHeight)return this._.tabIdList[n%e];return null}function i(e,t){for(var n=e.$.getElementsByTagName("input"),i=0,o=n.length;i<o;i++){var r=new CKEDITOR.dom.element(n[i]);"text"==r.getAttribute("type").toLowerCase()&&(t?(r.setAttribute("value",r.getCustomData("fake_value")||""),r.removeCustomData("fake_value")):(r.setCustomData("fake_value",r.getAttribute("value")),r.setAttribute("value","")))}}function o(e,t){var n=this.getInputElement();n&&(e?n.removeAttribute("aria-invalid"):n.setAttribute("aria-invalid",!0)),e||(this.select?this.select():this.focus()),t&&alert(t),this.fire("validated",{valid:e,msg:t})}function r(){var e=this.getInputElement();e&&e.removeAttribute("aria-invalid")}function s(e,t,n){this.element=t,this.focusIndex=n,this.tabIndex=0,this.isFocusable=function(){return!t.getAttribute("disabled")&&t.isVisible()},this.focus=function(){e._.currentFocusIndex=this.focusIndex,this.element.focus()},t.on("keydown",(function(e){e.data.getKeystroke()in{32:1,13:1}&&this.fire("click")})),t.on("focus",(function(){this.fire("mouseover")})),t.on("blur",(function(){this.fire("mouseout")}))}function a(e,t){this.dialog=e;for(var n,i=t.contents,o=0;n=i[o];o++)i[o]=n&&new l(e,n);CKEDITOR.tools.extend(this,t)}function l(e,t){this._={dialog:e},CKEDITOR.tools.extend(this,t)}function c(e){function t(t){var n=e.getSize(),l=e.parts.dialog.getParent().getClientSize(),c=t.data.$.screenX,u=t.data.$.screenY,d=c-i.x,h=u-i.y;i={x:c,y:u},o.x+=d,o.y+=h,c=o.x+a[3]<s?-a[3]:o.x-a[1]>l.width-n.width-s?l.width-n.width+("rtl"==r.lang.dir?0:a[1]):o.x,n=o.y+a[0]<s?-a[0]:o.y-a[2]>l.height-n.height-s?l.height-n.height+a[2]:o.y,c=Math.floor(c),n=Math.floor(n),e.move(c,n,1),t.data.preventDefault()}function n(){if(CKEDITOR.document.removeListener("mousemove",t),CKEDITOR.document.removeListener("mouseup",n),CKEDITOR.env.ie6Compat){var e=I.getChild(0).getFrameDocument();e.removeListener("mousemove",t),e.removeListener("mouseup",n)}}var i=null,o=null,r=e.getParentEditor(),s=r.config.dialog_magnetDistance,a=CKEDITOR.skin.margins||[0,0,0,0];void 0===s&&(s=20),e.parts.title.on("mousedown",(function(r){if(!e._.moved){var s=e._.element;s.getFirst().setStyle("position","absolute"),s.removeStyle("display"),e._.moved=!0,e.layout()}i={x:r.data.$.screenX,y:r.data.$.screenY},CKEDITOR.document.on("mousemove",t),CKEDITOR.document.on("mouseup",n),o=e.getPosition(),CKEDITOR.env.ie6Compat&&((s=I.getChild(0).getFrameDocument()).on("mousemove",t),s.on("mouseup",n)),r.data.preventDefault()}),e)}function u(e){function t(t){var n="rtl"==h.lang.dir,u=c.width,f=c.height,p=u+(t.data.$.screenX-l.x)*(n?-1:1)*(e._.moved?1:2),g=f+(t.data.$.screenY-l.y)*(e._.moved?1:2),m=e._.element.getFirst(),E=(m=n&&parseInt(m.getComputedStyle("right"),10),e.getPosition());E.x=E.x||0,E.y=E.y||0,E.y+g>a.height&&(g=a.height-E.y),(n?m:E.x)+p>a.width&&(p=a.width-(n?m:E.x)),g=Math.floor(g),p=Math.floor(p),o!=CKEDITOR.DIALOG_RESIZE_WIDTH&&o!=CKEDITOR.DIALOG_RESIZE_BOTH||(u=Math.max(i.minWidth||0,p-r)),o!=CKEDITOR.DIALOG_RESIZE_HEIGHT&&o!=CKEDITOR.DIALOG_RESIZE_BOTH||(f=Math.max(i.minHeight||0,g-s)),e.resize(u,f),e._.moved&&d(e,e._.position.x,e._.position.y),e._.moved||e.layout(),t.data.preventDefault()}function n(){if(CKEDITOR.document.removeListener("mouseup",n),CKEDITOR.document.removeListener("mousemove",t),u&&(u.remove(),u=null),CKEDITOR.env.ie6Compat){var e=I.getChild(0).getFrameDocument();e.removeListener("mouseup",n),e.removeListener("mousemove",t)}}var i=e.definition,o=i.resizable;if(o!=CKEDITOR.DIALOG_RESIZE_NONE){var r,s,a,l,c,u,h=e.getParentEditor(),f=CKEDITOR.tools.addFunction((function(i){function o(e){return e.isVisible()}c=e.getSize();var d=e.parts.contents,h=d.$.getElementsByTagName("iframe").length,f=!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks);h&&(u=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%; left:0; top:0;"></div>'),d.append(u)),s=c.height-e.parts.contents.getFirst(o).getSize("height",f),r=c.width-e.parts.contents.getFirst(o).getSize("width",1),l={x:i.screenX,y:i.screenY},a=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",t),CKEDITOR.document.on("mouseup",n),CKEDITOR.env.ie6Compat&&((d=I.getChild(0).getFrameDocument()).on("mousemove",t),d.on("mouseup",n)),i.preventDefault&&i.preventDefault()}));e.on("load",(function(){var t="";o==CKEDITOR.DIALOG_RESIZE_WIDTH?t=" cke_resizer_horizontal":o==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(t=" cke_resizer_vertical"),t=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+t+" cke_resizer_"+h.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(h.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+f+', event )">'+("ltr"==h.lang.dir?"◢":"◣")+"</div>"),e.parts.footer.append(t,1)})),h.on("destroy",(function(){CKEDITOR.tools.removeFunction(f)}))}}function d(e,t,n){var i=e.parts.dialog.getParent().getClientSize(),o=e.getSize(),r=e._.viewportRatio,s=Math.max(i.width-o.width,0);i=Math.max(i.height-o.height,0),r.width=s?t/s:r.width,r.height=i?n/i:r.height,e._.viewportRatio=r}function h(e){e.data.preventDefault(1)}function f(e){var t=e.config,n=CKEDITOR.skinName||e.config.skin,i=t.dialog_backgroundCoverColor||("moono-lisa"==n?"black":"white"),o=(n=t.dialog_backgroundCoverOpacity,t.baseFloatZIndex),r=(t=CKEDITOR.tools.genKey(i,n,o),K[t]);CKEDITOR.document.getBody().addClass("cke_dialog_open"),r?r.show():(o=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",o,"; top: 0px; left: 0px; ","; width: 100%; height: 100%;",CKEDITOR.env.ie6Compat?"":"background-color: "+i,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(i="<html><body style=\\'background-color:"+i+";\\'></body></html>",o.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),o.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+i+"' );document.close();")+"})())"),o.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),o.push("</div>"),(r=CKEDITOR.dom.element.createFromHtml(o.join(""))).setOpacity(void 0!==n?n:.5),r.on("keydown",h),r.on("keypress",h),r.on("keyup",h),r.appendTo(CKEDITOR.document.getBody()),K[t]=r),e.focusManager.add(r),I=r,CKEDITOR.env.mac&&CKEDITOR.env.webkit||r.focus()}function p(e){CKEDITOR.document.getBody().removeClass("cke_dialog_open"),I&&(e.focusManager.remove(I),I.hide())}function g(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,n=e.data.$.altKey,i=e.data.$.shiftKey,o=String.fromCharCode(e.data.$.keyCode);(t=k[(t?"CTRL+":"")+(n?"ALT+":"")+(i?"SHIFT+":"")+o])&&t.length&&((t=t[t.length-1]).keydown&&t.keydown.call(t.uiElement,t.dialog,t.key),e.data.preventDefault())}function m(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,n=e.data.$.altKey,i=e.data.$.shiftKey,o=String.fromCharCode(e.data.$.keyCode);(t=k[(t?"CTRL+":"")+(n?"ALT+":"")+(i?"SHIFT+":"")+o])&&t.length&&(t=t[t.length-1]).keyup&&(t.keyup.call(t.uiElement,t.dialog,t.key),e.data.preventDefault())}function E(e,t,n,i,o){(k[n]||(k[n]=[])).push({uiElement:e,dialog:t,key:n,keyup:o||e.accessKeyUp,keydown:i||e.accessKeyDown})}function T(e,t){e._.accessKeyMap[t]&&e.selectPage(e._.accessKeyMap[t])}function C(){}var v,I,D=CKEDITOR.tools.cssLength,O=!CKEDITOR.env.ie||CKEDITOR.env.edge,b='<div class="cke_reset_all cke_dialog_container {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" style="'+(O?"display:flex":"")+'" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="'+(O?"margin:auto":"position:absolute")+'" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(i,s){function l(e){var t=D._.focusList;if(e=e||0,!(1>t.length)){var n=D._.currentFocusIndex;D._.tabBarMode&&0>e&&(n=0);try{t[n].getInputElement().$.blur()}catch(e){}var i=n,o=1<D._.pageCount;do{if(i+=e,o&&!D._.tabBarMode&&(i==t.length||-1==i))return D._.tabBarMode=!0,D._.tabs[D._.currentTabId][0].focus(),void(D._.currentFocusIndex=-1);if((i=(i+t.length)%t.length)==n)break}while(e&&!t[i].isFocusable());t[i].focus(),"text"==t[i].type&&t[i].select()}}function d(o){if(D==CKEDITOR.dialog._.currentTop){var r=o.data.getKeystroke(),s="rtl"==i.lang.dir;if(f=p=0,9==r||r==CKEDITOR.SHIFT+9)l(r==CKEDITOR.SHIFT+9?-1:1),f=1;else if(r==CKEDITOR.ALT+121&&!D._.tabBarMode&&1<D.getPageCount())e(D),f=1;else if(-1!=CKEDITOR.tools.indexOf([37,38,39,40],r)&&D._.tabBarMode)r=-1!=CKEDITOR.tools.indexOf([s?39:37,38],r)?t.call(D):n.call(D),D.selectPage(r),D._.tabs[r][0].focus(),f=1;else if(13!=r&&32!=r||!D._.tabBarMode)if(13==r)(r=o.data.getTarget()).is("a","button","select","textarea")||r.is("input")&&"button"==r.$.type||((r=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(r.click,0,r),f=1),p=1;else{if(27!=r)return;(r=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(r.click,0,r):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),p=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,l(1),f=1;h(o)}}function h(e){f?e.data.preventDefault(1):p&&e.data.stopPropagation()}var f,p,g=CKEDITOR.dialog._.dialogDefinitions[s],m=CKEDITOR.tools.clone(v),E=i.config.dialog_buttonsOrder||"OS",T=i.lang.dir,C={};if(("OS"==E&&CKEDITOR.env.mac||"rtl"==E&&"ltr"==T||"ltr"==E&&"rtl"==T)&&m.buttons.reverse(),g=CKEDITOR.tools.extend(g(i),m),g=new a(this,g=CKEDITOR.tools.clone(g)),m=function(e){var t=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",b).output({id:CKEDITOR.tools.getNextNumber(),editorId:e.id,langDir:e.lang.dir,langCode:e.langCode,editorDialogClass:"cke_editor_"+e.name.replace(/\./g,"\\.")+"_dialog",closeTitle:e.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),n=t.getChild([0,0,0,0,0]),i=n.getChild(0),o=n.getChild(1);return e.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(n),!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(e="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+e+'" tabIndex="-1"></iframe>').appendTo(n.getParent())),i.unselectable(),o.unselectable(),{element:t,parts:{dialog:t.getChild(0),title:i,close:o,tabs:n.getChild(2),contents:n.getChild([3,0,0,0]),footer:n.getChild([3,0,1,0])}}}(i),this._={editor:i,element:m.element,name:s,model:null,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},viewportRatio:{width:.5,height:.5},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=m.parts,CKEDITOR.tools.setTimeout((function(){i.fire("ariaWidget",this.parts.contents)}),0,this),m={top:0,visibility:"hidden"},CKEDITOR.env.ie6Compat&&(m.position="absolute"),m["rtl"==T?"right":"left"]=0,this.parts.dialog.setStyles(m),CKEDITOR.event.call(this),this.definition=g=CKEDITOR.fire("dialogDefinition",{name:s,definition:g,dialog:this},i).definition,!("removeDialogTabs"in i._)&&i.config.removeDialogTabs){for(m=i.config.removeDialogTabs.split(";"),T=0;T<m.length;T++)if(2==(E=m[T].split(":")).length){var I=E[0];C[I]||(C[I]=[]),C[I].push(E[1])}i._.removeDialogTabs=C}if(i._.removeDialogTabs&&(C=i._.removeDialogTabs[s]))for(T=0;T<C.length;T++)g.removeContents(C[T]);g.onLoad&&this.on("load",g.onLoad),g.onShow&&this.on("show",g.onShow),g.onHide&&this.on("hide",g.onHide),g.onOk&&this.on("ok",(function(e){i.fire("saveSnapshot"),setTimeout((function(){i.fire("saveSnapshot")}),0),!1===g.onOk.call(this,e)&&(e.data.hide=!1)})),this.state=CKEDITOR.DIALOG_STATE_IDLE,g.onCancel&&this.on("cancel",(function(e){!1===g.onCancel.call(this,e)&&(e.data.hide=!1)}));var D=this,O=function(e){var t,n=D._.contents;for(t in n)for(var i in n[t])if(e.call(this,n[t][i]))return};this.on("ok",(function(e){O((function(t){if(t.validate){var n=t.validate(this),i="string"==typeof n||!1===n;return i&&(e.data.hide=!1,e.stop()),o.call(t,!i,"string"==typeof n?n:void 0),i}}))}),this,null,0),this.on("cancel",(function(e){O((function(t){if(t.isChanged())return i.config.dialog_noConfirmCancel||confirm(i.lang.common.confirmCancel)||(e.data.hide=!1),!0}))}),this,null,0),this.parts.close.on("click",(function(e){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),e.data.preventDefault()}),this),this.changeFocus=l;var y=this._.element;for(i.focusManager.add(y,1),this.on("show",(function(){y.on("keydown",d,this),CKEDITOR.env.gecko&&y.on("keypress",h,this)})),this.on("hide",(function(){y.removeListener("keydown",d),CKEDITOR.env.gecko&&y.removeListener("keypress",h),O((function(e){r.apply(e)}))})),this.on("iframeAdded",(function(e){new CKEDITOR.dom.document(e.data.iframe.$.contentWindow.document).on("keydown",d,this,null,0)})),this.on("show",(function(){!function(){var e=D._.focusList;e.sort((function(e,t){return e.tabIndex!=t.tabIndex?t.tabIndex-e.tabIndex:e.focusIndex-t.focusIndex}));for(var t=e.length,n=0;n<t;n++)e[n].focusIndex=n}();var e=1<D._.pageCount;i.config.dialog_startupFocusTab&&e?(D._.tabBarMode=!0,D._.tabs[D._.currentTabId][0].focus(),D._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=e?-1:this._.focusList.length-1,g.onFocus?(e=g.onFocus.call(this))&&e.focus():l(1))}),this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",(function(){var e=this.getElement(),t=e.getFirst();t.remove(),t.appendTo(e)}),this),c(this),u(this),new CKEDITOR.dom.text(g.title,CKEDITOR.document).appendTo(this.parts.title),T=0;T<g.contents.length;T++)(C=g.contents[T])&&this.addPage(C);for(this.parts.tabs.on("click",(function(t){var n=t.data.getTarget();n.hasClass("cke_dialog_tab")&&(n=n.$.id,this.selectPage(n.substring(4,n.lastIndexOf("_"))),e(this),t.data.preventDefault())}),this),T=[],C=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:g.buttons},T).getChild(),this.parts.footer.setHtml(T.join("")),T=0;T<C.length;T++)this._.buttons[C[T].id]=C[T]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(e,t){if(!this._.contentSize||this._.contentSize.width!=e||this._.contentSize.height!=t){if(CKEDITOR.dialog.fire("resize",{dialog:this,width:e,height:t},this._.editor),this.fire("resize",{width:e,height:t},this._.editor),this.parts.contents.setStyles({width:e+"px",height:t+"px"}),"rtl"==this._.editor.lang.dir&&this._.position){var n=this.parts.dialog.getParent().getClientSize().width;this._.position.x=n-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)}this._.contentSize={width:e,height:t}}},getSize:function(){var e=this._.element.getFirst();return{width:e.$.offsetWidth||0,height:e.$.offsetHeight||0}},move:function(e,t,n){var i=this._.element.getFirst(),o="rtl"==this._.editor.lang.dir;CKEDITOR.env.ie&&i.setStyle("zoom","100%");var r=this.parts.dialog.getParent().getClientSize(),s=this.getSize(),a=this._.viewportRatio,l=Math.max(r.width-s.width,0);r=Math.max(r.height-s.height,0),this._.position&&this._.position.x==e&&this._.position.y==t?(e=Math.floor(l*a.width),t=Math.floor(r*a.height)):d(this,e,t),this._.position={x:e,y:t},o&&(e=l-e),(t={top:(0<t?t:0)+"px"})[o?"right":"left"]=(0<e?e:0)+"px",i.setStyles(t),n&&(this._.moved=1)},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var e=this._.element,t=this.definition,n=CKEDITOR.document.getBody(),i=this._.editor.config.baseFloatZIndex;for(var o in e.getParent()&&e.getParent().equals(n)?e.setStyle("display",O?"flex":"block"):e.appendTo(n),this.resize(this._.contentSize&&this._.contentSize.width||t.width||t.minWidth,this._.contentSize&&this._.contentSize.height||t.height||t.minHeight),this.reset(),null===this._.currentTabId&&this.selectPage(this.definition.contents[0].id),null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=i),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10),this.getElement().setStyle("z-index",CKEDITOR.dialog._.currentZIndex),null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,f(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,(n=this._.parentDialog.getElement().getFirst()).$.style.zIndex-=Math.floor(i/2),this._.parentDialog.getElement().setStyle("z-index",n.$.style.zIndex),CKEDITOR.dialog._.currentTop=this),e.on("keydown",g),e.on("keyup",m),this._.hasFocus=!1,t.contents)if(t.contents[o]){e=t.contents[o],i=this._.tabs[e.id],n=e.requiredContent;var r=0;if(i){for(var s in this._.contents[e.id]){var a=this._.contents[e.id][s];"hbox"!=a.type&&"vbox"!=a.type&&a.getInputElement()&&(a.requiredContent&&!this._.editor.activeFilter.check(a.requiredContent)?a.disable():(a.enable(),r++))}!r||n&&!this._.editor.activeFilter.check(n)?i[0].addClass("cke_dialog_tab_disabled"):i[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout((function(){this.layout(),function(e){function t(){e.layout()}var n=CKEDITOR.document.getWindow();n.on("resize",t),e.on("hide",(function(){n.removeListener("resize",t)}))}(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach((function(e){e.setInitValue&&e.setInitValue()}))}),100,this)},layout:function(){var e=this.parts.dialog;if(this._.moved||!O){var t,n=this.getSize(),i=CKEDITOR.document.getWindow().getViewPaneSize();this._.moved&&this._.position?(t=this._.position.x,n=this._.position.y):(t=(i.width-n.width)/2,n=(i.height-n.height)/2),CKEDITOR.env.ie6Compat||(e.setStyle("position","absolute"),e.removeStyle("margin")),t=Math.floor(t),n=Math.floor(n),this.move(t,n)}},foreach:function(e){for(var t in this._.contents)for(var n in this._.contents[t])e.call(this,this._.contents[t][n]);return this},reset:function(){var e=function(e){e.reset&&e.reset(1)};return function(){return this.foreach(e),this}}(),setupContent:function(){var e=arguments;this.foreach((function(t){t.setup&&t.setup.apply(t,e)}))},commitContent:function(){var e=arguments;this.foreach((function(t){CKEDITOR.env.ie&&this._.currentFocusIndex==t.focusIndex&&t.getInputElement().$.blur(),t.commit&&t.commit.apply(t,e)}))},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var e=this._.element;for(e.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),function(e){for(var t in k){for(var n=k[t],i=n.length-1;0<=i;i--)n[i].dialog!=e&&n[i].uiElement!=e||n.splice(i,1);0===n.length&&delete k[t]}}(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var t=this._.parentDialog.getElement().getFirst();this._.parentDialog.getElement().removeStyle("z-index"),t.setStyle("z-index",parseInt(t.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else p(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null,e.removeListener("keydown",g),e.removeListener("keyup",m);var n=this._.editor;n.focus(),setTimeout((function(){n.focusManager.unlock(),CKEDITOR.env.iOS&&n.window.focus()}),0)}delete this._.parentDialog,this.foreach((function(e){e.resetInitValue&&e.resetInitValue()})),this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(e){if(!e.requiredContent||this._.editor.filter.check(e.requiredContent)){for(var t=[],n=e.label?' title="'+CKEDITOR.tools.htmlEncode(e.label)+'"':"",i=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:e.elements,expand:!!e.expand,padding:e.padding,style:e.style||"width: 100%;"},t),o=this._.contents[e.id]={},r=i.getChild(),s=0;i=r.shift();)i.notAllowed||"hbox"==i.type||"vbox"==i.type||s++,o[i.id]=i,"function"==typeof i.getChild&&r.push.apply(r,i.getChild());s||(e.hidden=!0),(t=CKEDITOR.dom.element.createFromHtml(t.join(""))).setAttribute("role","tabpanel"),t.setStyle("min-height","100%"),i=CKEDITOR.env,o="cke_"+e.id+"_"+CKEDITOR.tools.getNextNumber(),n=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",n,e.hidden?' style="display:none"':"",' id="',o,'"',i.gecko&&!i.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',e.label,"</a>"].join("")),t.setAttribute("aria-labelledby",o),this._.tabs[e.id]=[n,t],this._.tabIdList.push(e.id),!e.hidden&&this._.pageCount++,this._.lastTab=n,this.updateStyle(),t.setAttribute("name",e.id),t.appendTo(this.parts.contents),n.unselectable(),this.parts.tabs.append(n),e.accessKey&&(E(this,this,"CTRL+"+e.accessKey,C,T),this._.accessKeyMap["CTRL+"+e.accessKey]=e.id)}},selectPage:function(e){if(this._.currentTabId!=e&&!this._.tabs[e][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:e,currentPage:this._.currentTabId})){for(var t in this._.tabs){var n=this._.tabs[t][0],o=this._.tabs[t][1];t!=e&&(n.removeClass("cke_dialog_tab_selected"),n.removeAttribute("aria-selected"),o.hide()),o.setAttribute("aria-hidden",t!=e)}var r=this._.tabs[e];r[0].addClass("cke_dialog_tab_selected"),r[0].setAttribute("aria-selected",!0),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(i(r[1]),r[1].show(),setTimeout((function(){i(r[1],1)}),0)):r[1].show(),this._.currentTabId=e,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,e)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(e){var n=this._.tabs[e]&&this._.tabs[e][0];n&&1!=this._.pageCount&&n.isVisible()&&(e==this._.currentTabId&&this.selectPage(t.call(this)),n.hide(),this._.pageCount--,this.updateStyle())},showPage:function(e){(e=this._.tabs[e]&&this._.tabs[e][0])&&(e.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(e,t){var n=this._.contents[e];return n&&n[t]},getValueOf:function(e,t){return this.getContentElement(e,t).getValue()},setValueOf:function(e,t,n){return this.getContentElement(e,t).setValue(n)},getButton:function(e){return this._.buttons[e]},click:function(e){return this._.buttons[e].click()},disableButton:function(e){return this._.buttons[e].disable()},enableButton:function(e){return this._.buttons[e].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(e,t){if(void 0===t)t=this._.focusList.length,this._.focusList.push(new s(this,e,t));else{this._.focusList.splice(t,0,new s(this,e,t));for(var n=t+1;n<this._.focusList.length;n++)this._.focusList[n].focusIndex++}},setState:function(e){if(this.state!=e){if(this.state=e,e==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var t=this.getParentEditor().lang.dir,n={attributes:{class:"cke_dialog_spinner"},styles:{float:"rtl"==t?"right":"left"}};n.styles["margin-"+("rtl"==t?"left":"right")]="8px",this.parts.spinner=CKEDITOR.document.createElement("div",n),this.parts.spinner.setHtml("&#8987;"),this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show(),this.getButton("ok").disable()}else e==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",e)}},getModel:function(e){return this._.model?this._.model:this.definition.getModel?this.definition.getModel(e):null},setModel:function(e){this._.model=e},getMode:function(e){return this.definition.getMode?this.definition.getMode(e):!(e=this.getModel(e))||e instanceof CKEDITOR.dom.element&&!e.getParent()?CKEDITOR.dialog.CREATION_MODE:CKEDITOR.dialog.EDITING_MODE}},CKEDITOR.tools.extend(CKEDITOR.dialog,{CREATION_MODE:0,EDITING_MODE:1,add:function(e,t){this._.dialogDefinitions[e]&&"function"!=typeof t||(this._.dialogDefinitions[e]=t)},exists:function(e){return!!this._.dialogDefinitions[e]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(e,t,n){return!((e=e.config.removeDialogTabs)&&e.match(new RegExp("(?:^|;)"+t+":"+n+"(?:$|;)","i")))},okButton:function(){var e=function(e,t){return t=t||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:e.lang.common.ok,class:"cke_dialog_ui_button_ok",onClick:function(e){!1!==(e=e.data.dialog).fire("ok",{hide:!0}).hide&&e.hide()}},t,!0)};return e.type="button",e.override=function(t){return CKEDITOR.tools.extend((function(n){return e(n,t)}),{type:"button"},!0)},e}(),cancelButton:function(){var e=function(e,t){return t=t||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:e.lang.common.cancel,class:"cke_dialog_ui_button_cancel",onClick:function(e){!1!==(e=e.data.dialog).fire("cancel",{hide:!0}).hide&&e.hide()}},t,!0)};return e.type="button",e.override=function(t){return CKEDITOR.tools.extend((function(n){return e(n,t)}),{type:"button"},!0)},e}(),addUIElement:function(e,t){this._.uiElementBuilders[e]=t}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype),v={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]};var y=function e(t,n,i){for(var o,r=0;o=t[r];r++)if(o.id==n||i&&o[i]&&(o=e(o[i],n,i)))return o;return null},R=function e(t,n,i,o,r){if(i){for(var s,a=0;s=t[a];a++){if(s.id==i)return t.splice(a,0,n),n;if(o&&s[o]&&(s=e(s[o],n,i,o,!0)))return s}if(r)return null}return t.push(n),n},_=function e(t,n,i){for(var o,r=0;o=t[r];r++){if(o.id==n)return t.splice(r,1);if(i&&o[i]&&(o=e(o[i],n,i)))return o}return null};a.prototype={getContents:function(e){return y(this.contents,e)},getButton:function(e){return y(this.buttons,e)},addContents:function(e,t){return R(this.contents,e,t)},addButton:function(e,t){return R(this.buttons,e,t)},removeContents:function(e){_(this.contents,e)},removeButton:function(e){_(this.buttons,e)}},l.prototype={get:function(e){return y(this.elements,e,"children")},add:function(e,t){return R(this.elements,e,t,"children")},remove:function(e){_(this.elements,e,"children")}};var K={},k={};CKEDITOR.ui.dialog={uiElement:function(e,t,n,i,o,r,s){if(!(4>arguments.length)){var a=(i.call?i(t):i)||"div",l=["<",a," "],c=(o&&o.call?o(t):o)||{},u=(r&&r.call?r(t):r)||{},d=(s&&s.call?s.call(this,e,t):s)||"",h=this.domId=u.id||CKEDITOR.tools.getNextId()+"_uiElement";t.requiredContent&&!e.getParentEditor().filter.check(t.requiredContent)&&(c.display="none",this.notAllowed=!0),u.id=h;var f={};t.type&&(f["cke_dialog_ui_"+t.type]=1),t.className&&(f[t.className]=1),t.disabled&&(f.cke_disabled=1);var p=u.class&&u.class.split?u.class.split(" "):[];for(h=0;h<p.length;h++)p[h]&&(f[p[h]]=1);for(h in p=[],f)p.push(h);for(h in u.class=p.join(" "),t.title&&(u.title=t.title),f=(t.style||"").split(";"),t.align&&(p=t.align,c["margin-left"]="left"==p?0:"auto",c["margin-right"]="right"==p?0:"auto"),c)f.push(h+":"+c[h]);for(t.hidden&&f.push("display:none"),h=f.length-1;0<=h;h--)""===f[h]&&f.splice(h,1);for(h in 0<f.length&&(u.style=(u.style?u.style+"; ":"")+f.join("; ")),u)l.push(h+'="'+CKEDITOR.tools.htmlEncode(u[h])+'" ');l.push(">",d,"</",a,">"),n.push(l.join("")),(this._||(this._={})).dialog=e,"boolean"==typeof t.isChanged&&(this.isChanged=function(){return t.isChanged}),"function"==typeof t.isChanged&&(this.isChanged=t.isChanged),"function"==typeof t.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,(function(e){return function(n){e.call(this,t.setValue.call(this,n))}}))),"function"==typeof t.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,(function(e){return function(){return t.getValue.call(this,e.call(this))}}))),CKEDITOR.event.implementOn(this),this.registerEvents(t),this.accessKeyUp&&this.accessKeyDown&&t.accessKey&&E(this,e,"CTRL+"+t.accessKey);var g=this;e.on("load",(function(){var t=g.getInputElement();if(t){var n=g.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";t.on("focus",(function(){e._.tabBarMode=!1,e._.hasFocus=!0,g.fire("focus"),n&&this.addClass(n)})),t.on("blur",(function(){g.fire("blur"),n&&this.removeClass(n)}))}})),CKEDITOR.tools.extend(this,t),this.keyboardFocusable&&(this.tabIndex=t.tabIndex||0,this.focusIndex=e._.focusList.push(this)-1,this.on("focus",(function(){e._.currentFocusIndex=g.focusIndex})))}},hbox:function(e,t,n,i,o){if(!(4>arguments.length)){this._||(this._={});var r,s=this._.children=t,a=o&&o.widths||null,l=o&&o.height||null,c={role:"presentation"};o&&o.align&&(c.align=o.align),CKEDITOR.ui.dialog.uiElement.call(this,e,o||{type:"hbox"},i,"table",{},c,(function(){var e=['<tbody><tr class="cke_dialog_ui_hbox">'];for(r=0;r<n.length;r++){var t="cke_dialog_ui_hbox_child",i=[];0===r&&(t="cke_dialog_ui_hbox_first"),r==n.length-1&&(t="cke_dialog_ui_hbox_last"),e.push('<td class="',t,'" role="presentation" '),a?a[r]&&i.push("width:"+D(a[r])):i.push("width:"+Math.floor(100/n.length)+"%"),l&&i.push("height:"+D(l)),o&&void 0!==o.padding&&i.push("padding:"+D(o.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&s[r].align&&i.push("text-align:"+s[r].align),0<i.length&&e.push('style="'+i.join("; ")+'" '),e.push(">",n[r],"</td>")}return e.push("</tr></tbody>"),e.join("")}))}},vbox:function(e,t,n,i,o){if(!(3>arguments.length)){this._||(this._={});var r=this._.children=t,s=o&&o.width||null,a=o&&o.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,e,o||{type:"vbox"},i,"div",null,{role:"presentation"},(function(){var t=['<table role="presentation" cellspacing="0" border="0" '];t.push('style="'),o&&o.expand&&t.push("height:100%;"),t.push("width:"+D(s||"100%"),";"),CKEDITOR.env.webkit&&t.push("float:none;"),t.push('"'),t.push('align="',CKEDITOR.tools.htmlEncode(o&&o.align||("ltr"==e.getParentEditor().lang.dir?"left":"right")),'" '),t.push("><tbody>");for(var i=0;i<n.length;i++){var l=[];t.push('<tr><td role="presentation" '),s&&l.push("width:"+D(s||"100%")),a?l.push("height:"+D(a[i])):o&&o.expand&&l.push("height:"+Math.floor(100/n.length)+"%"),o&&void 0!==o.padding&&l.push("padding:"+D(o.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&r[i].align&&l.push("text-align:"+r[i].align),0<l.length&&t.push('style="',l.join("; "),'" '),t.push(' class="cke_dialog_ui_vbox_child">',n[i],"</td></tr>")}return t.push("</tbody></table>"),t.join("")}))}}},CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(e,t){return this.getInputElement().setValue(e),!t&&this.fire("change",{value:e}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var e=this.getInputElement();(e=e.getParent())&&-1==e.$.className.search("cke_dialog_page_contents"););return e?(e=e.getAttribute("name"),this._.dialog._.currentTabId!=e&&this._.dialog.selectPage(e),this):this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(e){var t,n,i=/^on([A-Z]\w+)/,o=function(e,t,n,i){t.on("load",(function(){e.getInputElement().on(n,i,e)}))};for(n in e)(t=n.match(i))&&(this.eventProcessors[n]?this.eventProcessors[n].call(this,this._.dialog,e[n]):o(this,this._.dialog,t[1].toLowerCase(),e[n]));return this},eventProcessors:{onLoad:function(e,t){e.on("load",t,this)},onShow:function(e,t){e.on("show",t,this)},onHide:function(e,t){e.on("hide",t,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var e=this.getElement();this.getInputElement().setAttribute("disabled","true"),e.addClass("cke_disabled")},enable:function(){var e=this.getElement();this.getInputElement().removeAttribute("disabled"),e.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!(!this.isEnabled()||!this.isVisible())}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(e){return 1>arguments.length?this._.children.concat():(e.splice||(e=[e]),2>e.length?this._.children[e[0]]:this._.children[e[0]]&&this._.children[e[0]].getChild?this._.children[e[0]].getChild(e.slice(1,e.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var e={build:function(e,t,n){for(var i,o=t.children,r=[],s=[],a=0;a<o.length&&(i=o[a]);a++){var l=[];r.push(l),s.push(CKEDITOR.dialog._.uiElementBuilders[i.type].build(e,i,l))}return new CKEDITOR.ui.dialog[t.type](e,s,r,n,t)}};CKEDITOR.dialog.addUIElement("hbox",e),CKEDITOR.dialog.addUIElement("vbox",e)}(),CKEDITOR.dialogCommand=function(e,t){this.dialogName=e,CKEDITOR.tools.extend(this,t,!0)},CKEDITOR.dialogCommand.prototype={exec:function(e){var t=this.tabId;e.openDialog(this.dialogName,(function(e){t&&e.selectPage(t)}))},canUndo:!1,editorFocus:1},function(){var e=/^([a]|[^a])+$/,t=/^\d*$/,n=/^\d*(?:\.\d+)?$/,i=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,o=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,r=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var e=arguments;return function(){var t,n,i=this&&this.getValue?this.getValue():e[0],o=CKEDITOR.VALIDATE_AND,r=[];for(n=0;n<e.length&&"function"==typeof e[n];n++)r.push(e[n]);n<e.length&&"string"==typeof e[n]&&(t=e[n],n++),n<e.length&&"number"==typeof e[n]&&(o=e[n]);var s=o==CKEDITOR.VALIDATE_AND;for(n=0;n<r.length;n++)s=o==CKEDITOR.VALIDATE_AND?s&&r[n](i):s||r[n](i);return!!s||t}},regex:function(e,t){return function(n){return n=this&&this.getValue?this.getValue():n,!!e.test(n)||t}},notEmpty:function(t){return this.regex(e,t)},integer:function(e){return this.regex(t,e)},number:function(e){return this.regex(n,e)},cssLength:function(e){return this.functions((function(e){return o.test(CKEDITOR.tools.trim(e))}),e)},htmlLength:function(e){return this.functions((function(e){return i.test(CKEDITOR.tools.trim(e))}),e)},inlineStyle:function(e){return this.functions((function(e){return r.test(CKEDITOR.tools.trim(e))}),e)},equals:function(e,t){return this.functions((function(t){return t==e}),t)},notEqual:function(e,t){return this.functions((function(t){return t!=e}),t)}},CKEDITOR.on("instanceDestroyed",(function(e){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var t;t=CKEDITOR.dialog._.currentTop;)t.hide();for(var n in K)K[n].remove();K={}}for(var i in e=e.editor._.storedDialogs)e[i].destroy()}))}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(e,t,n){var i=null,o=CKEDITOR.dialog._.dialogDefinitions[e];if(null===CKEDITOR.dialog._.currentTop&&f(this),"function"==typeof o)o=this._.storedDialogs||(this._.storedDialogs={}),(i=o[e]||(o[e]=new CKEDITOR.dialog(this,e))).setModel(n),t&&t.call(i,i),i.show();else{if("failed"==o)throw p(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+e+'" failed when loading definition.');"string"==typeof o&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(o),(function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[e]&&(CKEDITOR.dialog._.dialogDefinitions[e]="failed"),this.openDialog(e,t,n)}),this,0,1)}return CKEDITOR.skin.loadPart("dialog"),i&&i.once("hide",(function(){i.setModel(null)}),null,null,999),i}})}();var t=!1;CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(e){t||(CKEDITOR.document.appendStyleSheet(this.path+"styles/dialog.css"),t=!0),e.on("doubleclick",(function(t){t.data.dialog&&e.openDialog(t.data.dialog)}),null,null,999)}}),CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-gb":1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(e){var t=this;e.addCommand("a11yHelp",{exec:function(){var n=e.langCode;n=t.availableLangs[n]?n:t.availableLangs[n.replace(/-.*/,"")]?n.replace(/-.*/,""):"en",CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t.path+"dialogs/lang/"+n+".js"),(function(){e.lang.a11yhelp=t.langEntries[n],e.openDialog("a11yHelp")}))},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1}),e.setKeystroke(CKEDITOR.ALT+48,"a11yHelp"),CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js"),e.on("ariaEditorHelpLabel",(function(t){t.data.label=e.lang.common.editorHelp}))}}),CKEDITOR.plugins.add("about",{requires:"dialog",init:function(e){var t=e.addCommand("about",new CKEDITOR.dialogCommand("about"));t.modes={wysiwyg:1,source:1},t.canUndo=!1,t.readOnly=1,e.ui.addButton&&e.ui.addButton("About",{label:e.lang.about.dlgTitle,command:"about",toolbar:"about"}),CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}}),CKEDITOR.plugins.add("basicstyles",{init:function(e){var t=0,n=function(n,o,r,s){if(s){s=new CKEDITOR.style(s);var a=i[r];a.unshift(s),e.attachStyleStateChange(s,(function(t){!e.readOnly&&e.getCommand(r).setState(t)})),e.addCommand(r,new CKEDITOR.styleCommand(s,{contentForms:a})),e.ui.addButton&&e.ui.addButton(n,{label:o,command:r,toolbar:"basicstyles,"+(t+=10)})}},i={bold:["strong","b",["span",function(e){return"bold"==(e=e.styles["font-weight"])||700<=+e}]],italic:["em","i",["span",function(e){return"italic"==e.styles["font-style"]}]],underline:["u",["span",function(e){return"underline"==e.styles["text-decoration"]}]],strike:["s","strike",["span",function(e){return"line-through"==e.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},o=e.config,r=e.lang.basicstyles;n("Bold",r.bold,"bold",o.coreStyles_bold),n("Italic",r.italic,"italic",o.coreStyles_italic),n("Underline",r.underline,"underline",o.coreStyles_underline),n("Strike",r.strike,"strike",o.coreStyles_strike),n("Subscript",r.subscript,"subscript",o.coreStyles_subscript),n("Superscript",r.superscript,"superscript",o.coreStyles_superscript),e.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){var e={exec:function(e){var t=e.getCommand("blockquote").state,n=e.getSelection(),i=n&&n.getRanges()[0];if(i){var o=n.createBookmarks();if(CKEDITOR.env.ie){var r,s=o[0].startNode,a=o[0].endNode;if(s&&"blockquote"==s.getParent().getName())for(r=s;r=r.getNext();)if(r.type==CKEDITOR.NODE_ELEMENT&&r.isBlockBoundary()){s.move(r,!0);break}if(a&&"blockquote"==a.getParent().getName())for(r=a;r=r.getPrevious();)if(r.type==CKEDITOR.NODE_ELEMENT&&r.isBlockBoundary()){a.move(r);break}}if((l=i.createIterator()).enlargeBr=e.config.enterMode!=CKEDITOR.ENTER_BR,t==CKEDITOR.TRISTATE_OFF){for(s=[];t=l.getNextParagraph();)s.push(t);for(1>s.length&&(t=e.document.createElement(e.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),a=o.shift(),i.insertNode(t),t.append(new CKEDITOR.dom.text("\ufeff",e.document)),i.moveToBookmark(a),i.selectNodeContents(t),i.collapse(!0),a=i.createBookmark(),s.push(t),o.unshift(a)),r=s[0].getParent(),i=[],a=0;a<s.length;a++)t=s[a],r=r.getCommonAncestor(t.getParent());for(t={table:1,tbody:1,tr:1,ol:1,ul:1};t[r.getName()];)r=r.getParent();for(a=null;0<s.length;){for(t=s.shift();!t.getParent().equals(r);)t=t.getParent();t.equals(a)||i.push(t),a=t}for(;0<i.length;)if("blockquote"==(t=i.shift()).getName()){for(a=new CKEDITOR.dom.documentFragment(e.document);t.getFirst();)a.append(t.getFirst().remove()),s.push(a.getLast());a.replace(t)}else s.push(t);for((i=e.document.createElement("blockquote")).insertBefore(s[0]);0<s.length;)t=s.shift(),i.append(t)}else if(t==CKEDITOR.TRISTATE_ON){for(a=[],r={};t=l.getNextParagraph();){for(s=i=null;t.getParent();){if("blockquote"==t.getParent().getName()){i=t.getParent(),s=t;break}t=t.getParent()}i&&s&&!s.getCustomData("blockquote_moveout")&&(a.push(s),CKEDITOR.dom.element.setMarker(r,s,"blockquote_moveout",!0))}for(CKEDITOR.dom.element.clearAllMarkers(r),t=[],s=[],r={};0<a.length;)i=(l=a.shift()).getParent(),l.getPrevious()?l.getNext()?(l.breakParent(l.getParent()),s.push(l.getNext())):l.remove().insertAfter(i):l.remove().insertBefore(i),i.getCustomData("blockquote_processed")||(s.push(i),CKEDITOR.dom.element.setMarker(r,i,"blockquote_processed",!0)),t.push(l);for(CKEDITOR.dom.element.clearAllMarkers(r),a=s.length-1;0<=a;a--){e:{for(var l=0,c=(r=i=s[a]).getChildCount(),u=void 0;l<c&&(u=r.getChild(l));l++)if(u.type==CKEDITOR.NODE_ELEMENT&&u.isBlockBoundary()){r=!1;break e}r=!0}r&&i.remove()}if(e.config.enterMode==CKEDITOR.ENTER_BR)for(i=!0;t.length;)if("div"==(l=t.shift()).getName()){for(a=new CKEDITOR.dom.documentFragment(e.document),!i||!l.getPrevious()||l.getPrevious().type==CKEDITOR.NODE_ELEMENT&&l.getPrevious().isBlockBoundary()||a.append(e.document.createElement("br")),i=l.getNext()&&!(l.getNext().type==CKEDITOR.NODE_ELEMENT&&l.getNext().isBlockBoundary());l.getFirst();)l.getFirst().remove().appendTo(a);i&&a.append(e.document.createElement("br")),a.replace(l),i=!1}}n.selectBookmarks(o),e.focus()}},refresh:function(e,t){this.setState(e.elementPath(t.block||t.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(t){t.blockless||(t.addCommand("blockquote",e),t.ui.addButton&&t.ui.addButton("Blockquote",{label:t.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}(),function(){function e(e,t){CKEDITOR.tools.extend(this,t,{editor:e,id:"cke-"+CKEDITOR.tools.getUniqueId(),area:e._.notificationArea}),t.type||(this.type="info"),this.element=this._createElement(),e.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(this.element)}function t(e){var t=this;this.editor=e,this.notifications=[],this.element=this._createElement(),this._uiBuffer=CKEDITOR.tools.eventsBuffer(10,this._layout,this),this._changeBuffer=CKEDITOR.tools.eventsBuffer(500,this._layout,this),e.on("destroy",(function(){t._removeListeners(),t.element.remove()}))}CKEDITOR.plugins.add("notification",{init:function(e){e._.notificationArea=new t(e),e.showNotification=function(t,n,i){var o,r;return"progress"==n?o=i:r=i,(t=new CKEDITOR.plugins.notification(e,{message:t,type:n,progress:o,duration:r})).show(),t},e.on("key",(function(t){if(27==t.data.keyCode){var n=e._.notificationArea.notifications;n.length&&(function(e){var t=new CKEDITOR.dom.element("div");t.setStyles({position:"fixed","margin-left":"-9999px"}),t.setAttributes({"aria-live":"assertive","aria-atomic":"true"}),t.setText(e),CKEDITOR.document.getBody().append(t),setTimeout((function(){t.remove()}),100)}(e.lang.notification.closed),n[n.length-1].hide(),t.cancel())}}))}}),e.prototype={show:function(){!1!==this.editor.fire("notificationShow",{notification:this})&&(this.area.add(this),this._hideAfterTimeout())},update:function(e){var t=!0;!1===this.editor.fire("notificationUpdate",{notification:this,options:e})&&(t=!1);var n=this.element,i=n.findOne(".cke_notification_message"),o=n.findOne(".cke_notification_progress"),r=e.type;n.removeAttribute("role"),e.progress&&"progress"!=this.type&&(r="progress"),r&&(n.removeClass(this._getClass()),n.removeAttribute("aria-label"),this.type=r,n.addClass(this._getClass()),n.setAttribute("aria-label",this.type),"progress"!=this.type||o?"progress"!=this.type&&o&&o.remove():(o=this._createProgressElement()).insertBefore(i)),void 0!==e.message&&(this.message=e.message,i.setHtml(this.message)),void 0!==e.progress&&(this.progress=e.progress,o&&o.setStyle("width",this._getPercentageProgress())),t&&e.important&&(n.setAttribute("role","alert"),this.isVisible()||this.area.add(this)),this.duration=e.duration,this._hideAfterTimeout()},hide:function(){!1!==this.editor.fire("notificationHide",{notification:this})&&this.area.remove(this)},isVisible:function(){return 0<=CKEDITOR.tools.indexOf(this.area.notifications,this)},_createElement:function(){var e,t,n=this,i=this.editor.lang.common.close;return(e=new CKEDITOR.dom.element("div")).addClass("cke_notification"),e.addClass(this._getClass()),e.setAttributes({id:this.id,role:"alert","aria-label":this.type}),"progress"==this.type&&e.append(this._createProgressElement()),(t=new CKEDITOR.dom.element("p")).addClass("cke_notification_message"),t.setHtml(this.message),e.append(t),t=CKEDITOR.dom.element.createFromHtml('<a class="cke_notification_close" href="javascript:void(0)" title="'+i+'" role="button" tabindex="-1"><span class="cke_label">X</span></a>'),e.append(t),t.on("click",(function(){n.editor.focus(),n.hide()})),e},_getClass:function(){return"progress"==this.type?"cke_notification_info":"cke_notification_"+this.type},_createProgressElement:function(){var e=new CKEDITOR.dom.element("span");return e.addClass("cke_notification_progress"),e.setStyle("width",this._getPercentageProgress()),e},_getPercentageProgress:function(){return Math.round(100*(this.progress||0))+"%"},_hideAfterTimeout:function(){var e,t=this;this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),"number"==typeof this.duration?e=this.duration:"info"!=this.type&&"success"!=this.type||(e="number"==typeof this.editor.config.notification_duration?this.editor.config.notification_duration:5e3),e&&(t._hideTimeoutId=setTimeout((function(){t.hide()}),e))}},t.prototype={add:function(e){this.notifications.push(e),this.element.append(e.element),1==this.element.getChildCount()&&(CKEDITOR.document.getBody().append(this.element),this._attachListeners()),this._layout()},remove:function(e){var t=CKEDITOR.tools.indexOf(this.notifications,e);0>t||(this.notifications.splice(t,1),e.element.remove(),this.element.getChildCount()||(this._removeListeners(),this.element.remove()))},_createElement:function(){var e=this.editor,t=e.config,n=new CKEDITOR.dom.element("div");return n.addClass("cke_notifications_area"),n.setAttribute("id","cke_notifications_area_"+e.name),n.setStyle("z-index",t.baseFloatZIndex-2),n},_attachListeners:function(){var e=CKEDITOR.document.getWindow(),t=this.editor;e.on("scroll",this._uiBuffer.input),e.on("resize",this._uiBuffer.input),t.on("change",this._changeBuffer.input),t.on("floatingSpaceLayout",this._layout,this,null,20),t.on("blur",this._layout,this,null,20)},_removeListeners:function(){var e=CKEDITOR.document.getWindow(),t=this.editor;e.removeListener("scroll",this._uiBuffer.input),e.removeListener("resize",this._uiBuffer.input),t.removeListener("change",this._changeBuffer.input),t.removeListener("floatingSpaceLayout",this._layout),t.removeListener("blur",this._layout)},_layout:function(){function e(){o.setStyle("left",g(m+s.width-c-u))}var t,n,i,o=this.element,r=this.editor,s=r.ui.contentsElement.getClientRect(),a=r.ui.contentsElement.getDocumentPosition(),l=o.getClientRect(),c=this._notificationWidth,u=this._notificationMargin,d=(i=CKEDITOR.document.getWindow()).getScrollPosition(),h=i.getViewPaneSize(),f=CKEDITOR.document.getBody(),p=f.getDocumentPosition(),g=CKEDITOR.tools.cssLength;c&&u||(i=this.element.getChild(0),c=this._notificationWidth=i.getClientRect().width,u=this._notificationMargin=parseInt(i.getComputedStyle("margin-left"),10)+parseInt(i.getComputedStyle("margin-right"),10)),r.toolbar&&(n=(t=r.ui.space(r.config.toolbarLocation)).getClientRect()),t&&t.isVisible()&&n.bottom>s.top&&n.bottom<s.bottom-l.height?o.setStyles({position:"fixed",top:g(n.bottom)}):0<s.top?o.setStyles({position:"absolute",top:g(a.y)}):a.y+s.height-l.height>d.y?o.setStyles({position:"fixed",top:0}):o.setStyles({position:"absolute",top:g(a.y+s.height-l.height)});var m="fixed"==o.getStyle("position")?s.left:"static"!=f.getComputedStyle("position")?a.x-p.x:a.x;s.width<c+u?a.x+c+u>d.x+h.width?e():o.setStyle("left",g(m)):a.x+c+u>d.x+h.width?o.setStyle("left",g(m)):a.x+s.width/2+c/2+u>d.x+h.width?o.setStyle("left",g(m-a.x+d.x+h.width-c-u)):0>s.left+s.width-c-u?e():0>s.left+s.width/2-c/2?o.setStyle("left",g(m-a.x+d.x)):o.setStyle("left",g(m+s.width/2-c/2-u/2))}},CKEDITOR.plugins.notification=e}(),function(){var e='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-describedby="{id}_description" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');var t="";CKEDITOR.env.ie&&(t='return false;" onmouseup="CKEDITOR.tools.getMouseButton(event)==CKEDITOR.MOUSE_BUTTON_LEFT&&'),e=e+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" onclick="'+t+'CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}">&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span><span id="{id}_description" class="cke_button_label" aria-hidden="false">{ariaShortcut}</span>{arrowHtml}</a>';var n=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),i=CKEDITOR.addTemplate("button",e);CKEDITOR.plugins.add("button",{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(e){CKEDITOR.tools.extend(this,e,{title:e.label,click:e.click||function(t){t.execCommand(e.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(e){return new CKEDITOR.ui.button(e)}},CKEDITOR.ui.button.prototype={render:function(e,t){function o(){var t=e.mode;t&&(t=this.modes[t]?void 0!==l[t]?l[t]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,t=e.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:t,this.setState(t),this.refresh&&this.refresh())}var r,s,a,l=null,c=CKEDITOR.env,u=this._.id=CKEDITOR.tools.getNextId(),d="",h=this.command;this._.editor=e;var f,p={id:u,button:this,editor:e,focus:function(){CKEDITOR.document.getById(u).focus()},execute:function(){this.button.click(e)},attach:function(e){this.button.attach(e)}},g=CKEDITOR.tools.addFunction((function(e){if(p.onkey)return e=new CKEDITOR.dom.event(e),!1!==p.onkey(p,e.getKeystroke())})),m=CKEDITOR.tools.addFunction((function(e){var t;return p.onfocus&&(t=!1!==p.onfocus(p,new CKEDITOR.dom.event(e))),t})),E=0;p.clickFn=r=CKEDITOR.tools.addFunction((function(){E&&(e.unlockSelection(1),E=0),p.execute(),c.iOS&&e.focus()})),this.modes?(l={},e.on("beforeModeUnload",(function(){e.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(l[e.mode]=this._.state)}),this),e.on("activeFilterChange",o,this),e.on("mode",o,this),!this.readOnly&&e.on("readOnly",o,this)):h&&(h=e.getCommand(h))&&(h.on("state",(function(){this.setState(h.state)}),this),d+=h.state==CKEDITOR.TRISTATE_ON?"on":h.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off"),this.directional&&e.on("contentDirChanged",(function(t){var n=CKEDITOR.document.getById(this._.id),i=n.getFirst();(t=t.data)!=e.lang.dir?n.addClass("cke_"+t):n.removeClass("cke_ltr").removeClass("cke_rtl"),i.setAttribute("style",CKEDITOR.skin.getIconStyle(f,"rtl"==t,this.icon,this.iconOffset))}),this),h?(s=e.getCommandKeystroke(h))&&(a=CKEDITOR.tools.keystrokeToString(e.lang.common.keyboard,s)):d+="off",s=this.name||this.command;var T=null,C=this.icon;return f=s,this.icon&&!/\./.test(this.icon)?(f=this.icon,C=null):(this.icon&&(T=this.icon),CKEDITOR.env.hidpi&&this.iconHiDpi&&(T=this.iconHiDpi)),T?(CKEDITOR.skin.addIcon(T,T),C=null):T=f,d={id:u,name:s,iconName:f,label:this.label,cls:(this.hasArrow?"cke_button_expandable ":"")+(this.className||""),state:d,ariaDisabled:"disabled"==d?"true":"false",title:this.title+(a?" ("+a.display+")":""),ariaShortcut:a?e.lang.common.keyboardShortcut+" "+a.aria:"",titleJs:c.gecko&&!c.hc?"":(this.title||"").replace("'",""),hasArrow:"string"==typeof this.hasArrow&&this.hasArrow||(this.hasArrow?"true":"false"),keydownFn:g,focusFn:m,clickFn:r,style:CKEDITOR.skin.getIconStyle(T,"rtl"==e.lang.dir,C,this.iconOffset),arrowHtml:this.hasArrow?n.output():""},i.output(d,t),this.onRender&&this.onRender(),p},setState:function(e){if(this._.state==e)return!1;this._.state=e;var t=CKEDITOR.document.getById(this._.id);return!!t&&(t.setState(e,"cke_button"),t.setAttribute("aria-disabled",e==CKEDITOR.TRISTATE_DISABLED),this.hasArrow?t.setAttribute("aria-expanded",e==CKEDITOR.TRISTATE_ON):e===CKEDITOR.TRISTATE_ON?t.setAttribute("aria-pressed",!0):t.removeAttribute("aria-pressed"),!0)},getState:function(){return this._.state},toFeature:function(e){if(this._.feature)return this._.feature;var t=this;return this.allowedContent||this.requiredContent||!this.command||(t=e.getCommand(this.command)||t),this._.feature=t}},CKEDITOR.ui.prototype.addButton=function(e,t){this.add(e,CKEDITOR.UI_BUTTON,t)}}(),function(){function e(e){function n(t,n){if(n.length){t.items?t.items.push(e.ui.create("-")):t.items=[];for(var o;o=n.shift();)o="string"==typeof o?o:o.name,i&&-1!=CKEDITOR.tools.indexOf(i,o)||(o=e.ui.create(o))&&e.addFeature(o)&&t.items.push(o)}}var i=(i=e.config.removeButtons)&&i.split(","),o=e.config.toolbar;return"string"==typeof o&&(o=e.config["toolbar_"+o]),e.toolbar=o?function(e){var t,i,o,r=[];for(t=0;t<e.length;++t)o={},"/"==(i=e[t])?r.push(i):CKEDITOR.tools.isArray(i)?(n(o,CKEDITOR.tools.clone(i)),r.push(o)):i.items&&(n(o,CKEDITOR.tools.clone(i.items)),o.name=i.name,r.push(o));return r}(o):function(){for(var i=function(){var t,n,i,o={};for(t in e.ui.items)n=(i=(i=(n=e.ui.items[t]).toolbar||"others").split(","))[0],i=parseInt(i[1]||-1,10),o[n]||(o[n]=[]),o[n].push({name:t,order:i});for(n in o)o[n]=o[n].sort((function(e,t){return e.order==t.order?0:0>t.order?-1:0>e.order?1:e.order<t.order?-1:1}));return o}(),o=CKEDITOR.tools.clone(e.config.toolbarGroups)||t(e),r=0;r<o.length;r++){var s=o[r];if("/"!=s){"string"==typeof s&&(s=o[r]={name:s});var a,l=s.groups;if(l)for(var c=0;c<l.length;c++)(a=i[a=l[c]])&&n(s,a);(a=i[s.name])&&n(s,a)}}return o}()}function t(e){return e._.toolbarGroups||(e._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var n=function(){this.toolbars=[],this.focusCommandExecuted=!1};n.prototype.focus=function(){for(var e,t=0;e=this.toolbars[t++];)for(var n,i=0;n=e.items[i++];)if(n.focus)return void n.focus()};var i={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(e){e.toolbox&&(e.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout((function(){e.toolbox.focus()}),100):e.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(t){var o,r=function e(n,i){var r,s=(a="rtl"==t.lang.dir)?37:39,a=a?39:37,l=void 0===(l=t.config.toolbarGroupCycling)||l;switch(i){case 9:case CKEDITOR.SHIFT+9:for(;!r||!r.items.length;)if((r=9==i?(r?r.next:n.toolbar.next)||t.toolbox.toolbars[0]:(r?r.previous:n.toolbar.previous)||t.toolbox.toolbars[t.toolbox.toolbars.length-1]).items.length)for(n=r.items[o?r.items.length-1:0];n&&!n.focus;)(n=o?n.previous:n.next)||(r=0);return n&&n.focus(),!1;case s:r=n;do{!(r=r.next)&&l&&(r=n.toolbar.items[0])}while(r&&!r.focus);return r?r.focus():e(n,9),!1;case 40:return n.button&&n.button.hasArrow?n.execute():e(n,40==i?s:a),!1;case a:case 38:r=n;do{!(r=r.previous)&&l&&(r=n.toolbar.items[n.toolbar.items.length-1])}while(r&&!r.focus);return r?r.focus():(o=1,e(n,CKEDITOR.SHIFT+9),o=0),!1;case 27:return t.focus(),!1;case 13:case 32:return n.execute(),!1}return!0};t.on("uiSpace",(function(i){if(i.data.space==t.config.toolbarLocation){i.removeListener(),t.toolbox=new n;var o,s,a=['<span id="',l=CKEDITOR.tools.getNextId(),'" class="cke_voice_label">',t.lang.toolbar.toolbars,"</span>",'<span id="'+t.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',l,'" onmousedown="return false;">'],l=!1!==t.config.toolbarStartupExpanded;t.config.toolbarCanCollapse&&t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&a.push('<span class="cke_toolbox_main"'+(l?">":' style="display:none">'));for(var c=t.toolbox.toolbars,u=e(t),d=u.length,h=0;h<d;h++){var f,p,g,m=0,E=u[h],T="/"!==E&&("/"===u[h+1]||h==d-1);if(E)if(o&&(a.push("</span>"),s=o=0),"/"===E)a.push('<span class="cke_toolbar_break"></span>');else{g=E.items||E;for(var C=0;C<g.length;C++){var v,I=g[C];if(I){var D=function(e){e=e.render(t,a),0<(O=m.items.push(e)-1)&&(e.previous=m.items[O-1],e.previous.next=e),e.toolbar=m,e.onkey=r,e.onfocus=function(){t.toolbox.focusCommandExecuted||t.focus()}};if(I.type==CKEDITOR.UI_SEPARATOR)s=o&&I;else{if(v=!1!==I.canGroup,!m){f=CKEDITOR.tools.getNextId(),m={id:f,items:[]},p=E.name&&(t.lang.toolbar.toolbarGroups[E.name]||E.name),a.push('<span id="',f,'" class="cke_toolbar'+(T?' cke_toolbar_last"':'"'),p?' aria-labelledby="'+f+'_label"':"",' role="toolbar">'),p&&a.push('<span id="',f,'_label" class="cke_voice_label">',p,"</span>"),a.push('<span class="cke_toolbar_start"></span>');var O=c.push(m)-1;0<O&&(m.previous=c[O-1],m.previous.next=m)}v?o||(a.push('<span class="cke_toolgroup" role="presentation">'),o=1):o&&(a.push("</span>"),o=0),s&&(D(s),s=0),D(I)}}}o&&(a.push("</span>"),s=o=0),m&&a.push('<span class="cke_toolbar_end"></span></span>')}}if(t.config.toolbarCanCollapse&&a.push("</span>"),t.config.toolbarCanCollapse&&t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var b=CKEDITOR.tools.addFunction((function(){t.execCommand("toolbarCollapse")}));t.on("destroy",(function(){CKEDITOR.tools.removeFunction(b)})),t.addCommand("toolbarCollapse",{readOnly:1,exec:function(e){var t=e.ui.space("toolbar_collapser"),n=t.getPrevious(),i=e.ui.space("contents"),o=n.getParent(),r=parseInt(i.$.style.height,10),s=o.$.offsetHeight,a=t.hasClass("cke_toolbox_collapser_min");a?(n.show(),t.removeClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbar.toolbarCollapse)):(n.hide(),t.addClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbar.toolbarExpand)),t.getFirst().setText(a?"▲":"◀"),i.setStyle("height",r-(o.$.offsetHeight-s)+"px"),e.fire("resize",{outerHeight:e.container.$.offsetHeight,contentsHeight:i.$.offsetHeight,outerWidth:e.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}}),t.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),a.push('<a title="'+(l?t.lang.toolbar.toolbarCollapse:t.lang.toolbar.toolbarExpand)+'" id="'+t.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),l||a.push(" cke_toolbox_collapser_min"),a.push('" onclick="CKEDITOR.tools.callFunction('+b+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}a.push("</span>"),i.data.html+=a.join("")}})),t.on("destroy",(function(){if(this.toolbox){var e,t,n,i,o=0;for(e=this.toolbox.toolbars;o<e.length;o++)for(n=e[o].items,t=0;t<n.length;t++)(i=n[t]).clickFn&&CKEDITOR.tools.removeFunction(i.clickFn),i.keyDownFn&&CKEDITOR.tools.removeFunction(i.keyDownFn)}})),t.on("uiReady",(function(){var e=t.ui.space("toolbox");e&&t.focusManager.add(e,1)})),t.addCommand("toolbarFocus",i),t.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),t.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),t.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(e,t){return t.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(e,n,i){var o=t(this.editor),r=0===n,s={name:e};if(i){if(i=CKEDITOR.tools.search(o,(function(e){return e.name==i})))return!i.groups&&(i.groups=[]),n&&0<=(n=CKEDITOR.tools.indexOf(i.groups,n))?void i.groups.splice(n+1,0,e):void(r?i.groups.splice(0,0,e):i.groups.push(e));n=null}n&&(n=CKEDITOR.tools.indexOf(o,(function(e){return e.name==n}))),r?o.splice(0,0,e):"number"==typeof n?o.splice(n+1,0,s):o.push(e)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){function e(e,t,n){return t.type||(t.type="auto"),!(n&&!1===e.fire("beforePaste",t)||!t.dataValue&&t.dataTransfer.isEmpty())&&(t.dataValue||(t.dataValue=""),CKEDITOR.env.gecko&&"drop"==t.method&&e.toolbox&&e.once("afterPaste",(function(){e.toolbox.focus()})),e.fire("paste",t))}function t(t){function n(){var e,n=t.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var i=function(e){t.getSelection().isCollapsed()||(t.readOnly&&"cut"==e.name||p.initPasteDataTransfer(e,t),e.data.preventDefault())};n.on("copy",i),n.on("cut",i),n.on("cut",(function(){t.readOnly||t.extractSelectedHtml()}),null,null,999)}n.on(p.mainPasteEvent,(function(e){"beforepaste"==p.mainPasteEvent&&g||d(e)})),"beforepaste"==p.mainPasteEvent&&(n.on("paste",(function(e){m||(r(),e.data.preventDefault(),d(e),a("paste"))})),n.on("contextmenu",s,null,null,0),n.on("beforepaste",(function(e){!e.data||e.data.$.ctrlKey||e.data.$.shiftKey||s()}),null,null,0)),n.on("beforecut",(function(){!g&&l()})),n.attachListener(CKEDITOR.env.ie?n:t.document.getDocumentElement(),"mouseup",(function(){e=setTimeout(h,0)})),t.on("destroy",(function(){clearTimeout(e)})),n.on("keyup",h)}function i(e){return{type:e,canUndo:"cut"==e,startDisabled:!0,fakeKeystroke:"cut"==e?CKEDITOR.CTRL+88:CKEDITOR.CTRL+67,exec:function(){var e;"cut"==this.type&&l();var n=this.type;if(CKEDITOR.env.ie)e=a(n);else try{e=t.document.$.execCommand(n,!1,null)}catch(t){e=!1}return e||t.showNotification(t.lang.clipboard[this.type+"Error"]),e}}}function o(){return{canUndo:!1,async:!0,fakeKeystroke:CKEDITOR.CTRL+86,exec:function(t,n){function i(n,i){i=void 0===i||i,n?(n.method="paste",n.dataTransfer||(n.dataTransfer=p.initPasteDataTransfer()),e(t,n,i)):r&&!t._.forcePasteDialog&&t.showNotification(l,"info",t.config.clipboard_notificationDuration),t._.forcePasteDialog=!1,t.fire("afterCommandExec",{name:"paste",command:o,returnValue:!!n})}var o=this,r=void 0===(n=null!=n?n:{}).notification||n.notification,s=n.type,a=CKEDITOR.tools.keystrokeToString(t.lang.common.keyboard,t.getCommandKeystroke(this)),l="string"==typeof r?r:t.lang.clipboard.pasteNotification.replace(/%1/,'<kbd aria-label="'+a.aria+'">'+a.display+"</kbd>");a="string"==typeof n?n:n.dataValue,s&&!0!==t.config.forcePasteAsPlainText&&"allow-word"!==t.config.forcePasteAsPlainText?t._.nextPasteType=s:delete t._.nextPasteType,"string"==typeof a?i({dataValue:a}):t.getClipboardData(i)}}}function r(){m=1,setTimeout((function(){m=0}),100)}function s(){g=1,setTimeout((function(){g=0}),10)}function a(e){var n=t.document,i=n.getBody(),o=!1,r=function(){o=!0};return i.on(e,r),7<CKEDITOR.env.version?n.$.execCommand(e):n.$.selection.createRange().execCommand(e),i.removeListener(e,r),o}function l(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var e,n,i,o=t.getSelection();o.getType()==CKEDITOR.SELECTION_ELEMENT&&(e=o.getSelectedElement())&&(n=o.getRanges()[0],(i=t.document.createText("")).insertBefore(e),n.setStartBefore(i),n.setEndAfter(e),o.selectRanges([n]),setTimeout((function(){e.getParent()&&(i.remove(),o.selectElement(e))}),0))}}function c(){if("paste"==p.mainPasteEvent)return t.fire("beforePaste",{type:"auto",method:"paste"}),!1;t.focus(),r();var e=t.focusManager;return e.lock(),t.editable().fire(p.mainPasteEvent)&&!a("paste")?(e.unlock(),!1):(e.unlock(),!0)}function u(e){if("wysiwyg"==t.mode)switch(e.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:e=t.editable(),r(),"paste"==p.mainPasteEvent&&e.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:t.fire("saveSnapshot"),setTimeout((function(){t.fire("saveSnapshot")}),50)}}function d(n){var i={type:"auto",method:"paste",dataTransfer:p.initPasteDataTransfer(n)};i.dataTransfer.cacheData();var o=!1!==t.fire("beforePaste",i);o&&p.canClipboardApiBeTrusted(i.dataTransfer,t)?(n.data.preventDefault(),setTimeout((function(){e(t,i)}),0)):function(e,n){var i,o=t.document,r=t.editable(),s=function(e){e.cancel()};if(!o.getById("cke_pastebin")){var a=t.getSelection(),l=a.createBookmarks();CKEDITOR.env.ie&&a.root.fire("selectionchange");var c=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!r.is("body")||CKEDITOR.env.ie?"div":"body",o);c.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var u=0;o=o.getWindow(),CKEDITOR.env.webkit?(r.append(c),c.addClass("cke_editable"),r.is("body")||(u=(u="static"!=r.getComputedStyle("position")?r:CKEDITOR.dom.element.get(r.$.offsetParent)).getDocumentPosition().y)):r.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(c),c.setStyles({position:"absolute",top:o.getScrollPosition().y-u+10+"px",width:"1px",height:Math.max(1,o.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0}),CKEDITOR.env.safari&&c.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text")),(u=c.getParent().isReadOnly())?(c.setOpacity(0),c.setAttribute("contenteditable",!0)):c.setStyle("ltr"==t.config.contentsLangDirection?"left":"right","-10000px"),t.on("selectionChange",s,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(i=r.once("blur",s,null,null,-100)),u&&c.focus(),(u=new CKEDITOR.dom.range(c)).selectNodeContents(c);var d=u.select();CKEDITOR.env.ie&&(i=r.once("blur",(function(){t.lockSelection(d)})));var h=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout((function(){var e;CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=h),i&&i.removeListener(),CKEDITOR.env.ie&&r.focus(),a.selectBookmarks(l),c.remove(),CKEDITOR.env.webkit&&(e=c.getFirst())&&e.is&&e.hasClass("Apple-style-span")&&(c=e),t.removeListener("selectionChange",s),n(c.getHtml())}),0)}}(0,(function(n){i.dataValue=n.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""),o&&e(t,i)}))}function h(){if("wysiwyg"==t.mode){var e=f("paste");t.getCommand("cut").setState(f("cut")),t.getCommand("copy").setState(f("copy")),t.getCommand("paste").setState(e),t.fire("pasteState",e)}}function f(e){var n=(n=t.getSelection())&&n.getRanges()[0];return(t.readOnly||n&&n.checkReadOnly())&&e in{paste:1,cut:1}?CKEDITOR.TRISTATE_DISABLED:"paste"==e?CKEDITOR.TRISTATE_OFF:(n=(e=t.getSelection()).getRanges(),e.getType()==CKEDITOR.SELECTION_NONE||1==n.length&&n[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF)}var p=CKEDITOR.plugins.clipboard,g=0,m=0;!function(){if(t.on("key",u),t.on("contentDom",n),t.on("selectionChange",h),t.contextMenu){t.contextMenu.addListener((function(){return{cut:f("cut"),copy:f("copy"),paste:f("paste")}}));var e=null;t.on("menuShow",(function(){e&&(e.removeListener(),e=null);var n=t.contextMenu.findItemByCommandName("paste");n&&n.element&&(e=n.element.on("touchend",(function(){t._.forcePasteDialog=!0})))}))}t.ui.addButton&&t.once("instanceReady",(function(){t._.pasteButtons&&CKEDITOR.tools.array.forEach(t._.pasteButtons,(function(e){(e=t.ui.get(e))&&(e=CKEDITOR.document.getById(e._.id))&&e.on("touchend",(function(){t._.forcePasteDialog=!0}))}))}))}(),function(){function e(e,n,i,o,r){var s=t.lang.clipboard[n];t.addCommand(n,i),t.ui.addButton&&t.ui.addButton(e,{label:s,command:n,toolbar:"clipboard,"+o}),t.addMenuItems&&t.addMenuItem(n,{label:s,command:n,group:"clipboard",order:r})}e("Cut","cut",i("cut"),10,1),e("Copy","copy",i("copy"),20,4),e("Paste","paste",o(),30,8),t._.pasteButtons||(t._.pasteButtons=[]),t._.pasteButtons.push("Paste")}(),t.getClipboardData=function(e,n){function i(e){e.removeListener(),e.cancel(),n(e.data)}function o(e){e.removeListener(),e.cancel(),n({type:s,dataValue:e.data.dataValue,dataTransfer:e.data.dataTransfer,method:"paste"})}var r=!1,s="auto";n||(n=e,e=null),t.on("beforePaste",(function(e){e.removeListener(),r=!0,s=e.data.type}),null,null,1e3),t.on("paste",i,null,null,0),!1===c()&&(t.removeListener("paste",i),t._.forcePasteDialog&&r&&t.fire("pasteDialog")?(t.on("pasteDialogCommit",o),t.on("dialogHide",(function(e){e.removeListener(),e.data.removeListener("pasteDialogCommit",o),e.data._.committed||n(null)}))):n(null))}}function n(e,t,n){t=CKEDITOR.htmlParser.fragment.fromHtml(t);var i=new CKEDITOR.htmlParser.basicWriter;return n.applyTo(t,!0,!1,e.activeEnterMode),t.writeHtml(i),i.getHtml()}function i(e){e.data.preventDefault(),e.data.$.dataTransfer.dropEffect="none"}function o(t){var n=CKEDITOR.plugins.clipboard;t.on("contentDom",(function(){function i(n,i,o){i.select(),e(t,{dataTransfer:o,method:"drop"},1),o.sourceEditor.fire("saveSnapshot"),o.sourceEditor.editable().extractHtmlFromRange(n),o.sourceEditor.getSelection().selectRanges([n]),o.sourceEditor.fire("saveSnapshot")}function o(i,o){i.select(),e(t,{dataTransfer:o,method:"drop"},1),n.resetDragDataTransfer()}function r(e,n,i){var o={$:e.data.$,target:e.data.getTarget()};n&&(o.dragRange=n),i&&(o.dropRange=i),!1===t.fire(e.name,o)&&e.data.preventDefault()}function s(e){return e.type!=CKEDITOR.NODE_ELEMENT&&(e=e.getParent()),e.getChildCount()}var a=t.editable(),l=CKEDITOR.plugins.clipboard.getDropTarget(t),c=t.ui.space("top"),u=t.ui.space("bottom");n.preventDefaultDropOnElement(c),n.preventDefaultDropOnElement(u),a.attachListener(l,"dragstart",r),a.attachListener(t,"dragstart",n.resetDragDataTransfer,n,null,1),a.attachListener(t,"dragstart",(function(e){n.initDragDataTransfer(e,t)}),null,null,2),a.attachListener(t,"dragstart",(function(){var e=n.dragRange=t.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(n.dragStartContainerChildCount=e?s(e.startContainer):null,n.dragEndContainerChildCount=e?s(e.endContainer):null)}),null,null,100),a.attachListener(l,"dragend",r),a.attachListener(t,"dragend",n.initDragDataTransfer,n,null,1),a.attachListener(t,"dragend",n.resetDragDataTransfer,n,null,100),a.attachListener(l,"dragover",(function(e){if(CKEDITOR.env.edge)e.data.preventDefault();else{var t=e.data.getTarget();(t&&t.is&&t.is("html")||CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&e.data.$.dataTransfer.types.contains("Files"))&&e.data.preventDefault()}})),a.attachListener(l,"drop",(function(e){if(!e.data.$.defaultPrevented&&(e.data.preventDefault(),!t.readOnly)&&(!(i=e.data.getTarget()).isReadOnly()||i.type==CKEDITOR.NODE_ELEMENT&&i.is("html"))){var i=n.getRangeAtDropPosition(e,t),o=n.dragRange;i&&r(e,o,i)}}),null,null,9999),a.attachListener(t,"drop",n.initDragDataTransfer,n,null,1),a.attachListener(t,"drop",(function(e){if(e=e.data){var r=e.dropRange,s=e.dragRange,a=e.dataTransfer;a.getTransferType(t)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout((function(){n.internalDrop(s,r,a,t)}),0):a.getTransferType(t)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?i(s,r,a):o(r,a)}}),null,null,9999)}))}var r;CKEDITOR.plugins.add("clipboard",{requires:"dialog,notification,toolbar",init:function(e){var i,r=function(e){function t(){var e,t={};for(e in CKEDITOR.dtd)"$"!=e.charAt(0)&&"div"!=e&&"span"!=e&&(t[e]=1);return t}var n={};return{get:function(i){return"plain-text"==i?n.plainText||(n.plainText=new CKEDITOR.filter(e,"br")):"semantic-content"==i?((i=n.semanticContent)||((i=new CKEDITOR.filter(e,{})).allow({$1:{elements:t(),attributes:!0,styles:!1,classes:!1}}),i=n.semanticContent=i),i):i?new CKEDITOR.filter(e,i):null}}}(e);if(e.config.forcePasteAsPlainText?i="plain-text":e.config.pasteFilter?i=e.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in e.config||(i="semantic-content"),e.pasteFilter=r.get(i),t(e),o(e),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),CKEDITOR.env.gecko){var s,a=["image/png","image/jpeg","image/gif"];e.on("paste",(function(t){var n=t.data,i=n.dataTransfer;if(!n.dataValue&&"paste"==n.method&&function(e){if(!e||s===e.id)return!1;var t=1===(t=e.getTypes()).length&&"Files"===t[0];return e=1===e.getFilesCount(),t&&e}(i)&&(i=i.getFile(0),-1!=CKEDITOR.tools.indexOf(a,i.type))){var o=new FileReader;o.addEventListener("load",(function(){t.data.dataValue='<img src="'+o.result+'" />',e.fire("paste",t.data)}),!1),o.addEventListener("abort",(function(){e.fire("paste",t.data)}),!1),o.addEventListener("error",(function(){e.fire("paste",t.data)}),!1),o.readAsDataURL(i),s=n.dataTransfer.id,t.stop()}}),null,null,1)}e.on("paste",(function(t){if(t.data.dataTransfer||(t.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer),!t.data.dataValue){var n=t.data.dataTransfer,i=n.getData("text/html");i?(t.data.dataValue=i,t.data.type="html"):(i=n.getData("text/plain"))&&(t.data.dataValue=e.editable().transformPlainTextToHtml(i),t.data.type="text")}}),null,null,1),e.on("paste",(function(e){var t=e.data.dataValue,n=CKEDITOR.dtd.$block;if(-1<t.indexOf("Apple-")&&(t=t.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=e.data.type&&(t=t.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,(function(e,t){return t.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")}))),-1<t.indexOf('<br class="Apple-interchange-newline">')&&(e.data.startsWithEOL=1,e.data.preSniffing="html",t=t.replace(/<br class="Apple-interchange-newline">/,"")),t=t.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),t.match(/^<[^<]+cke_(editable|contents)/i)){var i,o,r=new CKEDITOR.dom.element("div");for(r.setHtml(t);1==r.getChildCount()&&(i=r.getFirst())&&i.type==CKEDITOR.NODE_ELEMENT&&(i.hasClass("cke_editable")||i.hasClass("cke_contents"));)r=o=i;o&&(t=o.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?t=t.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,(function(t,i){return i.toLowerCase()in n?(e.data.preSniffing="html","<"+i):t})):CKEDITOR.env.webkit?t=t.replace(/<\/(\w+)><div><br><\/div>$/,(function(t,i){return i in n?(e.data.endsWithEOL=1,"</"+i+">"):t})):CKEDITOR.env.gecko&&(t=t.replace(/(\s)<br>$/,"$1")),e.data.dataValue=t}),null,null,3),e.on("paste",(function(t){t=t.data;var i,o=e._.nextPasteType||t.type,s=t.dataValue,a=e.config.clipboard_defaultContentType||"html",l=t.dataTransfer.getTransferType(e)==CKEDITOR.DATA_TRANSFER_EXTERNAL,c=!0===e.config.forcePasteAsPlainText;i="html"==o||"html"==t.preSniffing?"html":function(e){if(CKEDITOR.env.webkit){if(!e.match(/^[^<]*$/g)&&!e.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!e.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko)return"html";if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}(s),delete e._.nextPasteType,"htmlifiedtext"==i&&(s=function(e,t){function n(e){return CKEDITOR.tools.repeat("</p><p>",~~(e/2))+(1==e%2?"<br>":"")}return(t=(t=t.replace(/(?!\u3000)\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>")).replace(/<\/?[A-Z]+>/g,(function(e){return e.toLowerCase()}))).match(/^[^<]$/)?t:(CKEDITOR.env.webkit&&-1<t.indexOf("<div>")&&((t=t.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>")).match(/<div>(<br>|)<\/div>/)&&(t="<p>"+t.replace(/(<div>(<br>|)<\/div>)+/g,(function(e){return n(e.split("</div><div>").length+1)}))+"</p>"),t=(t=t.replace(/<\/div><div>/g,"<br>")).replace(/<\/?div>/g,"")),CKEDITOR.env.gecko&&e.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(t=t.replace(/^<br><br>$/,"<br>")),-1<t.indexOf("<br><br>")&&(t="<p>"+t.replace(/(<br>){2,}/g,(function(e){return n(e.length/4)}))+"</p>")),function(e,t){return e.enterMode==CKEDITOR.ENTER_BR?t=t.replace(/(<\/p><p>)+/g,(function(e){return CKEDITOR.tools.repeat("<br>",e.length/7*2)})).replace(/<\/?p>/g,""):e.enterMode==CKEDITOR.ENTER_DIV&&(t=t.replace(/<(\/)?p>/g,"<$1div>")),t}(e,t))}(e.config,s)),"text"==o&&"html"==i?s=n(e,s,r.get("plain-text")):(l&&e.pasteFilter&&!t.dontFilter||c)&&(s=n(e,s,e.pasteFilter)),t.startsWithEOL&&(s='<br data-cke-eol="1">'+s),t.endsWithEOL&&(s+='<br data-cke-eol="1">'),"auto"==o&&(o="html"==i||"html"==a?"html":"text"),t.type=o,t.dataValue=s,delete t.preSniffing,delete t.startsWithEOL,delete t.endsWithEOL}),null,null,6),e.on("paste",(function(t){(t=t.data).dataValue&&(e.insertHtml(t.dataValue,t.type,t.range),setTimeout((function(){e.fire("afterPaste")}),0))}),null,null,1e3),e.on("pasteDialog",(function(t){setTimeout((function(){e.openDialog("paste",t.data)}),0)}))}}),CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:!(CKEDITOR.env.ie&&16>CKEDITOR.env.version||CKEDITOR.env.iOS&&605>CKEDITOR.env.version),isCustomDataTypesSupported:!CKEDITOR.env.ie||16<=CKEDITOR.env.version,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",addPasteButton:function(e,t,n){e.ui.addButton&&(e.ui.addButton(t,n),e._.pasteButtons||(e._.pasteButtons=[]),e._.pasteButtons.push(t))},canClipboardApiBeTrusted:function(e,t){return!!(e.getTransferType(t)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!e.isEmpty()||CKEDITOR.env.gecko&&(e.getData("text/html")||e.getFilesCount())||CKEDITOR.env.safari&&603<=CKEDITOR.env.version&&!CKEDITOR.env.iOS||CKEDITOR.env.iOS&&605<=CKEDITOR.env.version||CKEDITOR.env.edge&&16<=CKEDITOR.env.version)},getDropTarget:function(e){var t=e.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||t.isInline()?t:e.document},fixSplitNodesAfterDrop:function(e,t,n,i){function o(e,n,i){var o=e;if(o.type==CKEDITOR.NODE_TEXT&&(o=e.getParent()),o.equals(n)&&i!=n.getChildCount())return e=t.startContainer.getChild(t.startOffset-1),n=t.startContainer.getChild(t.startOffset),e&&e.type==CKEDITOR.NODE_TEXT&&n&&n.type==CKEDITOR.NODE_TEXT&&(i=e.getLength(),e.setText(e.getText()+n.getText()),n.remove(),t.setStart(e,i),t.collapse(!0)),!0}var r=t.startContainer;"number"==typeof i&&"number"==typeof n&&r.type==CKEDITOR.NODE_ELEMENT&&(o(e.startContainer,r,n)||o(e.endContainer,r,i))},isDropRangeAffectedByDragRange:function(e,t){var n=t.startContainer,i=t.endOffset;return!!(e.endContainer.equals(n)&&e.endOffset<=i||e.startContainer.getParent().equals(n)&&e.startContainer.getIndex()<i||e.endContainer.getParent().equals(n)&&e.endContainer.getIndex()<i)},internalDrop:function(t,n,i,o){var r,s,a=CKEDITOR.plugins.clipboard,l=o.editable();o.fire("saveSnapshot"),o.fire("lockSnapshot",{dontUpdate:1}),CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(t,n,a.dragStartContainerChildCount,a.dragEndContainerChildCount),(s=this.isDropRangeAffectedByDragRange(t,n))||(r=t.createBookmark(!1)),a=n.clone().createBookmark(!1),s&&(r=t.createBookmark(!1)),t=r.startNode,n=r.endNode,s=a.startNode,n&&t.getPosition(s)&CKEDITOR.POSITION_PRECEDING&&n.getPosition(s)&CKEDITOR.POSITION_FOLLOWING&&s.insertBefore(t),(t=o.createRange()).moveToBookmark(r),l.extractHtmlFromRange(t,1),n=o.createRange(),a.startNode.getCommonAncestor(l)||(a=o.getSelection().createBookmarks()[0]),n.moveToBookmark(a),e(o,{dataTransfer:i,method:"drop",range:n},1),o.fire("unlockSnapshot")},getRangeAtDropPosition:function(e,t){var n=e.data.$,i=n.clientX,o=n.clientY,r=t.getSelection(!0).getRanges()[0],s=t.createRange();if(e.data.testRange)return e.data.testRange;if(document.caretRangeFromPoint&&t.document.$.caretRangeFromPoint(i,o))n=t.document.$.caretRangeFromPoint(i,o),s.setStart(CKEDITOR.dom.node(n.startContainer),n.startOffset),s.collapse(!0);else if(n.rangeParent)s.setStart(CKEDITOR.dom.node(n.rangeParent),n.rangeOffset),s.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&r&&t.editable().hasFocus)return r;if(!document.body.createTextRange)return null;t.focus(),n=t.document.getBody().$.createTextRange();try{for(var a=!1,l=0;20>l&&!a;l++){if(!a)try{n.moveToPoint(i,o-l),a=!0}catch(e){}if(!a)try{n.moveToPoint(i,o+l),a=!0}catch(e){}}if(a){var c="cke-temp-"+(new Date).getTime();n.pasteHTML('<span id="'+c+'">​</span>');var u=t.document.getById(c);s.moveToPosition(u,CKEDITOR.POSITION_BEFORE_START),u.remove()}else{var d=t.document.$.elementFromPoint(i,o),h=new CKEDITOR.dom.element(d);if(h.equals(t.editable())||"html"==h.getName())return r&&r.startContainer&&!r.startContainer.equals(t.editable())?r:null;i<h.getClientRect().left?s.setStartAt(h,CKEDITOR.POSITION_AFTER_START):s.setStartAt(h,CKEDITOR.POSITION_BEFORE_END),s.collapse(!0)}}catch(e){return null}}return s},initDragDataTransfer:function(e,t){var n=e.data.$?e.data.$.dataTransfer:null,i=new this.dataTransfer(n,t);"dragstart"===e.name&&i.storeId(),n?this.dragData&&i.id==this.dragData.id?i=this.dragData:this.dragData=i:this.dragData?i=this.dragData:this.dragData=i,e.data.dataTransfer=i},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(e,t){if(this.isCustomCopyCutSupported){if(e&&e.data&&e.data.$){var n=e.data.$.clipboardData,i=new this.dataTransfer(n,t);return"copy"!==e.name&&"cut"!==e.name||i.storeId(),this.copyCutData&&i.id==this.copyCutData.id?(i=this.copyCutData).$=n:this.copyCutData=i,i}return new this.dataTransfer(null,t)}return new this.dataTransfer(CKEDITOR.env.edge&&e&&e.data.$&&e.data.$.clipboardData||null,t)},preventDefaultDropOnElement:function(e){e&&e.on("dragover",i)}},r=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text",CKEDITOR.plugins.clipboard.dataTransfer=function(e,t){e&&(this.$=e),this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\s*\x3c!--StartFragment--\x3e|\x3c!--EndFragment--\x3e\s*/g,data:{},files:[],nativeHtmlCache:"",normalizeType:function(e){return"text"==(e=e.toLowerCase())||"text/plain"==e?"Text":"url"==e?"URL":e}},this._.fallbackDataTransfer=new CKEDITOR.plugins.clipboard.fallbackDataTransfer(this),this.id=this.getData(r),this.id||(this.id="Text"==r?"":"cke-"+CKEDITOR.tools.getUniqueId()),t&&(this.sourceEditor=t,this.setData("text/html",t.getSelectedHtml(1)),"Text"==r||this.getData("text/plain")||this.setData("text/plain",t.getSelection().getSelectedText()))},CKEDITOR.DATA_TRANSFER_INTERNAL=1,CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2,CKEDITOR.DATA_TRANSFER_EXTERNAL=3,CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(e,t){if(null==(i="text/html"==(e=this._.normalizeType(e))&&t?this._.nativeHtmlCache:this._.data[e])||""===i){if(this._.fallbackDataTransfer.isRequired())i=this._.fallbackDataTransfer.getData(e,t);else try{i=this.$.getData(e)||""}catch(e){i=""}"text/html"!=e||t||(i=this._stripHtml(i))}if("Text"==e&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==i.substring(0,7)&&(i=""),"string"==typeof i)var n=i.indexOf("</html>"),i=-1!==n?i.substring(0,n+7):i;return i},setData:function(e,t){if("text/html"==(e=this._.normalizeType(e))?(this._.data[e]=this._stripHtml(t),this._.nativeHtmlCache=t):this._.data[e]=t,CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==e||"Text"==e)if("Text"==r&&"Text"==e&&(this.id=t),this._.fallbackDataTransfer.isRequired())this._.fallbackDataTransfer.setData(e,t);else try{this.$.setData(e,t)}catch(e){}},storeId:function(){"Text"!==r&&this.setData(r,this.id)},getTransferType:function(e){return this.sourceEditor?this.sourceEditor==e?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function e(e){e=i._.normalizeType(e);var t=i.getData(e);"text/html"==e&&(i._.nativeHtmlCache=i.getData(e,!0),t=i._stripHtml(t)),t&&(i._.data[e]=t)}if(this.$){var t,n,i=this;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(t=0;t<this.$.types.length;t++)e(this.$.types[t])}else e("Text"),e("URL");if(n=this._getImageFromClipboard(),this.$&&this.$.files||n){if(this._.files=[],this.$.files&&this.$.files.length)for(t=0;t<this.$.files.length;t++)this._.files.push(this.$.files[t]);0===this._.files.length&&n&&this._.files.push(n)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(e){return this._.files.length?this._.files[e]:this.$&&this.$.files&&this.$.files.length?this.$.files[e]:0===e?this._getImageFromClipboard():void 0},isEmpty:function(){var e,t={};if(this.getFilesCount())return!1;if(CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(this._.data),(function(e){t[e]=1})),this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var n=0;n<this.$.types.length;n++)t[this.$.types[n]]=1}else t.Text=1,t.URL=1;for(e in"Text"!=r&&(t[r]=0),t)if(t[e]&&""!==this.getData(e))return!1;return!0},getTypes:function(){return this.$&&this.$.types?[].slice.call(this.$.types):[]},_getImageFromClipboard:function(){var e;try{if(this.$&&this.$.items&&this.$.items[0]&&(e=this.$.items[0].getAsFile())&&e.type)return e}catch(e){}},_stripHtml:function(e){if(e&&e.length){e=e.replace(this._.metaRegExp,"");var t=this._.bodyRegExp.exec(e);t&&t.length&&(e=(e=t[1]).replace(this._.fragmentRegExp,""))}return e}},CKEDITOR.plugins.clipboard.fallbackDataTransfer=function(e){this._dataTransfer=e,this._customDataFallbackType="text/html"},CKEDITOR.plugins.clipboard.fallbackDataTransfer._isCustomMimeTypeSupported=null,CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes=[],CKEDITOR.plugins.clipboard.fallbackDataTransfer.prototype={isRequired:function(){var e=CKEDITOR.plugins.clipboard.fallbackDataTransfer,t=this._dataTransfer.$;if(null===e._isCustomMimeTypeSupported){if(!t)return!1;if(e._isCustomMimeTypeSupported=!1,CKEDITOR.env.edge&&17<=CKEDITOR.env.version)return!0;try{t.setData("cke/mimetypetest","cke test value"),e._isCustomMimeTypeSupported="cke test value"===t.getData("cke/mimetypetest"),t.clearData("cke/mimetypetest")}catch(e){}}return!e._isCustomMimeTypeSupported},getData:function(e,t){var n=this._getData(this._customDataFallbackType,!0);if(t)return n;n=this._extractDataComment(n);var i;return null!==(i=e===this._customDataFallbackType?n.content:n.data&&n.data[e]?n.data[e]:this._getData(e,!0))?i:""},setData:function(e,t){(o=e===this._customDataFallbackType)&&(t=this._applyDataComment(t,this._getFallbackTypeData()));var n=t,i=this._dataTransfer.$;try{i.setData(e,n),o&&(this._dataTransfer._.nativeHtmlCache=n)}catch(t){if(this._isUnsupportedMimeTypeError(t)){o=CKEDITOR.plugins.clipboard.fallbackDataTransfer,-1===CKEDITOR.tools.indexOf(o._customTypes,e)&&o._customTypes.push(e);var o=this._getFallbackTypeContent(),r=this._getFallbackTypeData();r[e]=n;try{n=this._applyDataComment(o,r),i.setData(this._customDataFallbackType,n),this._dataTransfer._.nativeHtmlCache=n}catch(e){n=""}}}return n},_getData:function(e,t){var n=this._dataTransfer._.data;if(!t&&n[e])return n[e];try{return this._dataTransfer.$.getData(e)}catch(e){return null}},_getFallbackTypeContent:function(){var e=this._dataTransfer._.data[this._customDataFallbackType];return e||(e=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).content),e},_getFallbackTypeData:function(){var e=CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes,t=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).data||{},n=this._dataTransfer._.data;return CKEDITOR.tools.array.forEach(e,(function(e){void 0!==n[e]?t[e]=n[e]:void 0!==t[e]&&(t[e]=t[e])}),this),t},_isUnsupportedMimeTypeError:function(e){return e.message&&-1!==e.message.search(/element not found/gi)},_extractDataComment:function(e){var t,n={data:null,content:e||""};return e&&16<e.length&&(t=/\x3c!--cke-data:(.*?)--\x3e/g.exec(e))&&t[1]&&(n.data=JSON.parse(decodeURIComponent(t[1])),n.content=e.replace(t[0],"")),n},_applyDataComment:function(e,t){var n="";return t&&CKEDITOR.tools.object.keys(t).length&&(n="\x3c!--cke-data:"+encodeURIComponent(JSON.stringify(t))+"--\x3e"),n+(e&&e.length?e:"")}}}(),CKEDITOR.config.clipboard_notificationDuration=1e4,function(){CKEDITOR.plugins.add("panel",{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(e,t){t&&CKEDITOR.tools.extend(this,t),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=e,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(e){return new CKEDITOR.ui.panel(e)}};var e=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),t=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),n=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(i,o){var r={editorId:i.id,id:this.id,langCode:i.langCode,dir:i.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":i.config.baseFloatZIndex+1};if(this.getHolderElement=function(){if(!(t=this._.holder)){if(this.isFramed){var e=(t=this.document.getById(this.id+"_frame")).getParent(),t=t.getFrameDocument();CKEDITOR.env.iOS&&e.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),e=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind((function(){this.isLoaded=!0,this.onLoad&&this.onLoad()}),this)),t.write(n.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+e+");"},r))),t.getWindow().$.CKEDITOR=CKEDITOR,t.on("keydown",(function(e){var t=e.data.getKeystroke(),n=this.document.getById(this.id).getAttribute("dir");("input"!==e.data.getTarget().getName()||37!==t&&39!==t)&&(this._.onKeyDown&&!1===this._.onKeyDown(t)?"input"===e.data.getTarget().getName()&&32===t||e.data.preventDefault():(27==t||t==("rtl"==n?39:37))&&this.onEscape&&!1===this.onEscape(t)&&e.data.preventDefault())}),this),(t=t.getBody()).unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(e)}else t=this.document.getById(this.id);this._.holder=t}return t},this.isFramed){var s=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";r.frame=t.output({id:this.id+"_frame",src:s})}return s=e.output(r),o&&o.push(s),s},addBlock:function(e,t){return t=this._.blocks[e]=t instanceof CKEDITOR.ui.panel.block?t:new CKEDITOR.ui.panel.block(this.getHolderElement(),t),this._.currentBlock||this.showBlock(e),t},getBlock:function(e){return this._.blocks[e]},showBlock:function(e){e=this._.blocks[e];var t=this._.currentBlock,n=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return t&&t.hide(),this._.currentBlock=e,CKEDITOR.fire("ariaWidget",n),e._.focusIndex=-1,this._.onKeyDown=e.onKeyDown&&CKEDITOR.tools.bind(e.onKeyDown,e),e.show(),e},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(e,t){this.element=e.append(e.getDocument().createElement("div",{attributes:{tabindex:-1,class:"cke_panel_block"},styles:{display:"none"}})),t&&CKEDITOR.tools.extend(this,t),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(e){-1!=e&&(e=this._.getItems().getItem(this._.focusIndex=e),CKEDITOR.env.webkit&&e.getDocument().getWindow().focus(),e.focus(),this.onMark&&this.onMark(e))},markFirstDisplayed:function(e){for(var t,n,i=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&"none"==e.getStyle("display")},o=this._.getItems(),r=o.count()-1;0<=r;r--)if((t=o.getItem(r)).getAscendant(i)||(n=t,this._.focusIndex=r),"true"==t.getAttribute("aria-selected")){n=t,this._.focusIndex=r;break}n&&(e&&e(),CKEDITOR.env.webkit&&n.getDocument().getWindow().focus(),n.focus(),this.onMark&&this.onMark(n))},getItems:function(){return this.element.find("a,input")}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(e,t){switch(o=this.keys[e]){case"next":for(var n,i=this._.focusIndex,o=this._.getItems();n=o.getItem(++i);)if(n.getAttribute("_cke_focus")&&n.$.offsetWidth){this._.focusIndex=i,n.focus(!0);break}return!n&&!t&&(this._.focusIndex=-1,this.onKeyDown(e,1));case"prev":for(i=this._.focusIndex,o=this._.getItems();0<i&&(n=o.getItem(--i));){if(n.getAttribute("_cke_focus")&&n.$.offsetWidth){this._.focusIndex=i,n.focus(!0);break}n=null}return!n&&!t&&(this._.focusIndex=o.count(),this.onKeyDown(e,1));case"click":case"mouseup":return(n=0<=(i=this._.focusIndex)&&this._.getItems().getItem(i))&&n.fireEventHandler(o,{button:CKEDITOR.tools.normalizeMouseButton(CKEDITOR.MOUSE_BUTTON_LEFT,!0)}),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){function e(e,n,i,o,r){r=CKEDITOR.tools.genKey(n.getUniqueId(),i.getUniqueId(),e.lang.dir,e.uiColor||"",o.css||"",r||"");var s=t[r];return s||((s=t[r]=new CKEDITOR.ui.panel(n,o)).element=i.append(CKEDITOR.dom.element.createFromHtml(s.render(e),n)),s.element.setStyles({display:"none",position:"absolute"})),s}var t={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(t,n,i,o){function r(){c.hide()}i.forceIFrame=1,i.toolbarRelated&&t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(n=CKEDITOR.document.getById("cke_"+t.name));var s=n.getDocument(),a=(o=e(t,s,n,i,o||0)).element,l=a.getFirst(),c=this;a.disableContextMenu(),this.element=a,this._={editor:t,panel:o,parentElement:n,definition:i,document:s,iframe:l,children:[],dir:t.lang.dir,showBlockParams:null,markFirst:void 0===i.markFirst||i.markFirst},t.on("mode",r),t.on("resize",r),s.getWindow().on("resize",(function(){this.reposition()}),this)},proto:{addBlock:function(e,t){return this._.panel.addBlock(e,t)},addListBlock:function(e,t){return this._.panel.addListBlock(e,t)},getBlock:function(e){return this._.panel.getBlock(e)},showBlock:function(e,t,n,i,o,r){var s=this._.panel,a=s.showBlock(e);this._.showBlockParams=[].slice.call(arguments),this.allowBlur(!1);var l=this._.editor.editable();this._.returnFocus=l.hasFocus?l:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement),this._.hideTimeout=0;var c=this.element,u=(l=this._.iframe,l=CKEDITOR.env.ie&&!CKEDITOR.env.edge?l:new CKEDITOR.dom.window(l.$.contentWindow),c.getDocument()),d=this._.parentElement.getPositionedAncestor(),h=t.getDocumentPosition(u),f=(u=d?d.getDocumentPosition(u):{x:0,y:0},"rtl"==this._.dir),p=h.x+(i||0)-u.x,g=h.y+(o||0)-u.y;!f||1!=n&&4!=n?f||2!=n&&3!=n||(p+=t.$.offsetWidth-1):p+=t.$.offsetWidth,3!=n&&4!=n||(g+=t.$.offsetHeight-1),this._.panel._.offsetParentId=t.getId(),c.setStyles({top:g+"px",left:0,display:""}),c.setOpacity(0),c.getFirst().removeStyle("width"),this._.editor.focusManager.add(l),this._.blurSet||(CKEDITOR.event.useCapture=!0,l.on("blur",(function(e){function t(){delete this._.returnFocus,this.hide()}this.allowBlur()&&e.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(t,0,this)):t.call(this))}),this),l.on("focus",(function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)}),this),CKEDITOR.env.iOS&&(l.on("touchstart",(function(){clearTimeout(this._.hideTimeout)}),this),l.on("touchend",(function(){this._.hideTimeout=0,this.focus()}),this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1),s.onEscape=CKEDITOR.tools.bind((function(e){if(this.onEscape&&!1===this.onEscape(e))return!1}),this),CKEDITOR.tools.setTimeout((function(){var e=CKEDITOR.tools.bind((function(){if((n=c).removeStyle("width"),a.autoSize){var e=a.element.getDocument();e=(CKEDITOR.env.webkit||CKEDITOR.env.edge?a.element:e.getBody()).$.scrollWidth,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<e&&(e+=(n.$.offsetWidth||0)-(n.$.clientWidth||0)+3),n.setStyle("width",e+10+"px"),e=a.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<e&&(e+=(n.$.offsetHeight||0)-(n.$.clientHeight||0)+3),n.setStyle("height",e+"px"),s._.currentBlock.element.setStyle("display","none").removeStyle("display")}else n.removeStyle("height");f&&(p-=c.$.offsetWidth),c.setStyle("left",p+"px"),e=s.element.getWindow();var t,n=c.$.getBoundingClientRect(),i=(e=e.getViewPaneSize(),n.width||n.right-n.left),o=n.height||n.bottom-n.top,l=f?n.right:e.width-n.left,u=f?e.width-n.right:n.left;f?l<i&&(p=u>i?p+i:e.width>i?p-n.left:p-n.right+e.width):l<i&&(p=u>i?p-i:e.width>i?p-n.right+e.width:p-n.left),i=n.top,e.height-n.top<o&&(g=i>o?g-o:e.height>o?g-n.bottom+e.height:g-n.top),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&((e=n=c.$.offsetParent&&new CKEDITOR.dom.element(c.$.offsetParent))&&"html"==e.getName()&&(e=e.getDocument().getBody()),e&&"rtl"==e.getComputedStyle("direction")&&(p=CKEDITOR.env.ie8Compat?p-2*c.getDocument().getDocumentElement().$.scrollLeft:p-(n.$.scrollWidth-n.$.clientWidth))),(t=(n=c.getFirst()).getCustomData("activePanel"))&&t.onHide&&t.onHide.call(this,1),n.setCustomData("activePanel",this),c.setStyles({top:g+"px",left:p+"px"}),c.setOpacity(1),r&&r()}),this);s.isLoaded?e():s.onLoad=e,CKEDITOR.tools.setTimeout((function(){var e=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),a.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=e),this.allowBlur(!0),this._.markFirst&&(CKEDITOR.env.ie?CKEDITOR.tools.setTimeout((function(){a.markFirstDisplayed?a.markFirstDisplayed():a._.markFirstDisplayed()}),0):a.markFirstDisplayed?a.markFirstDisplayed():a._.markFirstDisplayed()),this._.editor.fire("panelShow",this)}),0,this)}),CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},reposition:function(){var e=this._.showBlockParams;this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,e))},focus:function(){if(CKEDITOR.env.webkit){var e=CKEDITOR.document.getActive();e&&!e.equals(this._.iframe)&&e.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var e=this._.iframe.getFrameDocument().getActive();e&&e.is("a")&&(this._.lastFocused=e)},hide:function(e){!this.visible||this.onHide&&!0===this.onHide.call(this)||(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(e=e&&this._.returnFocus)&&(CKEDITOR.env.webkit&&e.type&&e.getWindow().$.focus(),e.focus()),delete this._.lastFocused,this._.showBlockParams=null,this._.editor.fire("panelHide",this))},allowBlur:function(e){var t=this._.panel;return void 0!==e&&(t.allowBlur=e),t.allowBlur},showAsChild:function(e,t,n,i,o,r){this._.activeChild==e&&e._.panel._.offsetParentId==n.getId()||(this.hideChild(),e.onHide=CKEDITOR.tools.bind((function(){CKEDITOR.tools.setTimeout((function(){this._.focused||this.hide()}),0,this)}),this),this._.activeChild=e,this._.focused=!1,e.showBlock(t,n,i,o,r),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout((function(){e.element.getChild(0).$.style.cssText+=""}),100))},hideChild:function(e){var t=this._.activeChild;t&&(delete t.onHide,delete this._.activeChild,t.hide(),e&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",(function(){var e,n=CKEDITOR.tools.isEmpty(CKEDITOR.instances);for(e in t){var i=t[e];n?i.destroy():i.element.hide()}n&&(t={})}))}(),CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(e){for(var t=e.config.menu_groups.split(","),n=e._.menuGroups={},i=e._.menuItems={},o=0;o<t.length;o++)n[t[o]]=o+1;e.addMenuGroup=function(e,t){n[e]=t||100},e.addMenuItem=function(e,t){n[t.group]&&(i[e]=new CKEDITOR.menuItem(this,e,t))},e.addMenuItems=function(e){for(var t in e)this.addMenuItem(t,e[t])},e.getMenuItem=function(e){return i[e]},e.removeMenuItem=function(e){delete i[e]}}}),function(){var e='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1" _cke_focus=1 hidefocus="true" role="{role}" aria-label="{attrLabel}" aria-describedby="{id}_description" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked} draggable="false"',t="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;" ondragstart="return false;"'),CKEDITOR.env.ie&&(t='return false;" onmouseup="CKEDITOR.tools.getMouseButton(event)===CKEDITOR.MOUSE_BUTTON_LEFT&&'),e=e+' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" onclick="'+t+'CKEDITOR.tools.callFunction({clickFn},{index}); return false;"><span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{shortcutHtml}{arrowHtml}</span></a><span id="{id}_description" class="cke_voice_label" aria-hidden="false">{ariaShortcut}</span></span>';var n=CKEDITOR.addTemplate("menuItem",e),i=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>'),o=CKEDITOR.addTemplate("menuShortcut",'<span class="cke_menubutton_label cke_menubutton_shortcut">{shortcut}</span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(e,t){t=this._.definition=t||{},this.id=CKEDITOR.tools.getNextId(),this.editor=e,this.items=[],this._.listeners=[],this._.level=t.level||1;var n=CKEDITOR.tools.extend({},t.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),i=n.block.attributes=n.attributes||{};!i.role&&(i.role="menu"),this._.panelDefinition=n},_:{onShow:function(){var e=this.editor.getSelection(),t=e&&e.getStartElement(),n=this.editor.elementPath(),i=this._.listeners;this.removeAll();for(var o=0;o<i.length;o++){var r=i[o](t,e,n);if(r)for(var s in r){var a=this.editor.getMenuItem(s);!a||a.command&&!this.editor.getCommand(a.command).state||(a.state=r[s],this.add(a))}}},onClick:function(e){this.hide(),e.onClick?e.onClick():e.command&&this.editor.execCommand(e.command)},onEscape:function(e){var t=this.parent;return t?t._.panel.hideChild(1):27==e&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(e){var t=this._.subMenu,n=this.items[e];if(n=n.getItems&&n.getItems()){for(var i in t?t.removeAll():((t=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0))).parent=this,t._.onClick=CKEDITOR.tools.bind(this._.onClick,this)),n){var o=this.editor.getMenuItem(i);o&&(o.state=n[i],t.add(o))}var r=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+String(e));setTimeout((function(){t.show(r,2)}),0)}else this._.panel.hideChild(1)}},proto:{add:function(e){e.order||(e.order=this.items.length),this.items.push(e)},removeAll:function(){this.items=[]},show:function(e,t,n,i){if(this.parent||(this._.onShow(),this.items.length)){t=t||("rtl"==this.editor.lang.dir?2:1);var o=this.items,r=this.editor,s=this._.panel,a=this._.element;s||((s=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level)).onEscape=CKEDITOR.tools.bind((function(e){if(!1===this._.onEscape(e))return!1}),this),s.onShow=function(){s._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")},s.onHide=CKEDITOR.tools.bind((function(){this._.onHide&&this._.onHide()}),this),(a=s.addBlock(this.id,this._.panelDefinition.block)).autoSize=!0,(l=a.keys)[40]="next",l[9]="next",l[38]="prev",l[CKEDITOR.SHIFT+9]="prev",l["rtl"==r.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click",l[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(l[13]="mouseup"),(l=(a=this._.element=a.element).getDocument()).getBody().setStyle("overflow","hidden"),l.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction((function(e){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,r.config.menu_subMenuDelay||400,this,[e])}),this),this._.itemOutFn=CKEDITOR.tools.addFunction((function(){clearTimeout(this._.showSubTimeout)}),this),this._.itemClickFn=CKEDITOR.tools.addFunction((function(e){var t=this.items[e];t.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):t.getItems?this._.showSubMenu(e):this._.onClick(t)}),this)),function(e){e.sort((function(e,t){return e.group<t.group?-1:e.group>t.group?1:e.order<t.order?-1:e.order>t.order?1:0}))}(o);for(var l=['<div class="cke_menu'+((l=r.elementPath())&&l.direction()!=r.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],c=o.length,u=c&&o[0].group,d=0;d<c;d++){var h=o[d];u!=h.group&&(l.push('<div class="cke_menuseparator" role="separator"></div>'),u=h.group),h.render(this,d,l)}l.push("</div>"),a.setHtml(l.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(s,this.id,e,t,n,i):s.showBlock(this.id,e,t,n,i),r.fire("menuShow",[s])}},addListener:function(e){this._.listeners.push(e)},hide:function(e){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(e)},findItemByCommandName:function(e){var t=CKEDITOR.tools.array.filter(this.items,(function(t){return e===t.command}));return t.length?{item:t=t[0],element:this._.element.findOne("."+t.className)}:null}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(e,t,n){CKEDITOR.tools.extend(this,n,{order:0,className:"cke_menubutton__"+t}),this.group=e._.menuGroups[this.group],this.editor=e,this.name=t},proto:{render:function(e,t,r){var s,a,l=e.id+String(t),c=void 0===this.state?CKEDITOR.TRISTATE_OFF:this.state,u="",d=this.editor,h=c==CKEDITOR.TRISTATE_ON?"on":c==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(u=' aria-checked="'+(c==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var f=this.getItems,p="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",g=this.name;this.icon&&!/\./.test(this.icon)&&(g=this.icon),this.command&&(s=d.getCommand(this.command),(s=d.getCommandKeystroke(s))&&(a=CKEDITOR.tools.keystrokeToString(d.lang.common.keyboard,s))),s=CKEDITOR.tools.htmlEncodeAttr(this.label),e={id:l,name:this.name,iconName:g,label:this.label,attrLabel:s,cls:this.className||"",state:h,hasPopup:f?"true":"false",disabled:c==CKEDITOR.TRISTATE_DISABLED,title:s+(a?" ("+a.display+")":""),ariaShortcut:a?d.lang.common.keyboardShortcut+" "+a.aria:"",href:"javascript:void('"+(s||"").replace("'")+"')",hoverFn:e._.itemOverFn,moveOutFn:e._.itemOutFn,clickFn:e._.itemClickFn,index:t,iconStyle:CKEDITOR.skin.getIconStyle(g,"rtl"==this.editor.lang.dir,g==this.icon?null:this.icon,this.iconOffset),shortcutHtml:a?o.output({shortcut:a.display}):"",arrowHtml:f?i.output({label:p}):"",role:this.role?this.role:"menuitem",ariaChecked:u},n.output(e,r)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(e){this.base.call(this,e,{panel:{css:e.config.contextmenu_contentsCss,className:"cke_menu_panel",attributes:{"aria-label":e.lang.contextmenu.options}}})},proto:{addTarget:function(e,t){function n(){o=!1}var i,o;if(e.on("contextmenu",(function(e){e=e.data;var n=CKEDITOR.env.webkit?i:CKEDITOR.env.mac?e.$.metaKey:e.$.ctrlKey;if(!(t&&n||(e.preventDefault(),o))){CKEDITOR.env.mac&&CKEDITOR.env.webkit&&(n=this.editor,(r=new CKEDITOR.dom.elementPath(e.getTarget(),n.editable()).contains((function(e){return e.hasAttribute("contenteditable")}),!0))&&"false"==r.getAttribute("contenteditable")&&n.getSelection().fake(r));var r=e.getTarget().getDocument(),s=e.getTarget().getDocument().getDocumentElement(),a=(n=!r.equals(CKEDITOR.document),r=r.getWindow().getScrollPosition(),n?e.$.clientX:e.$.pageX||r.x+e.$.clientX),l=n?e.$.clientY:e.$.pageY||r.y+e.$.clientY;CKEDITOR.tools.setTimeout((function(){this.open(s,null,a,l)}),CKEDITOR.env.ie?200:0,this)}}),this),CKEDITOR.env.webkit){var r=function(){i=0};e.on("keydown",(function(e){i=CKEDITOR.env.mac?e.data.$.metaKey:e.data.$.ctrlKey})),e.on("keyup",r),e.on("contextmenu",r)}CKEDITOR.env.gecko&&!CKEDITOR.env.mac&&(e.on("keydown",(function(e){e.data.$.shiftKey&&121===e.data.$.keyCode&&(o=!0)}),null,null,0),e.on("keyup",n),e.on("contextmenu",n))},open:function(e,t,n,i){!1!==this.editor.config.enableContextMenu&&this.editor.getSelection().getType()!==CKEDITOR.SELECTION_NONE&&(this.editor.focus(),e=e||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(e,t,n,i))}}})},beforeInit:function(e){var t=e.contextMenu=new CKEDITOR.plugins.contextMenu(e);e.on("contentDom",(function(){t.addTarget(e.editable(),!1!==e.config.browserContextMenuOnCtrl)})),e.addCommand("contextMenu",{exec:function(e){var t,n=0,i=0;(t=(t=(t=e.getSelection().getRanges())[t.length-1].getClientRects(e.editable().isInline()))[t.length-1])&&(n=t["rtl"===e.lang.dir?"left":"right"],i=t.bottom),e.contextMenu.open(e.document.getBody().getParent(),null,n,i)}}),e.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),e.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),function(){function e(e,n){function o(t){var n;(t=l.list[t]).equals(e.editable())||"true"==t.getAttribute("contenteditable")?((n=e.createRange()).selectNodeContents(t),n=n.select()):(n=e.getSelection()).selectElement(t),CKEDITOR.env.ie&&e.fire("selectionChange",{selection:n,path:new CKEDITOR.dom.elementPath(t)}),e.focus()}function r(){s&&s.setHtml('<span class="cke_path_empty">&nbsp;</span>'),delete l.list}var s,a=e.ui.spaceId("path"),l=e._.elementsPath,c=l.idBase;n.html+='<span id="'+a+'_label" class="cke_voice_label">'+e.lang.elementspath.eleLabel+'</span><span id="'+a+'" class="cke_path" role="group" aria-labelledby="'+a+'_label"><span class="cke_path_empty">&nbsp;</span></span>',e.on("uiReady",(function(){var t=e.ui.space("path");t&&e.focusManager.add(t,1)})),l.onClick=o;var u=CKEDITOR.tools.addFunction(o),d=CKEDITOR.tools.addFunction((function(t,n){var i,r=l.idBase;switch(n=new CKEDITOR.dom.event(n),i="rtl"==e.lang.dir,n.getKeystroke()){case i?39:37:case 9:return(i=CKEDITOR.document.getById(r+(t+1)))||(i=CKEDITOR.document.getById(r+"0")),i.focus(),!1;case i?37:39:case CKEDITOR.SHIFT+9:return(i=CKEDITOR.document.getById(r+(t-1)))||(i=CKEDITOR.document.getById(r+(l.list.length-1))),i.focus(),!1;case 27:return e.focus(),!1;case 13:case 32:return o(t),!1}return!0}));e.on("selectionChange",(function(t){for(var n=[],o=l.list=[],r=[],h=l.filters,f=!0,p=t.data.path.elements,g=p.length;g--;){var m=p[g],E=0;t=m.data("cke-display-name")?m.data("cke-display-name"):m.data("cke-real-element-type")?m.data("cke-real-element-type"):m.getName(),(f=m.hasAttribute("contenteditable")?"true"==m.getAttribute("contenteditable"):f)||m.hasAttribute("contenteditable")||(E=1);for(var T=0;T<h.length;T++){var C=h[T](m,t);if(!1===C){E=1;break}t=C||t}E||(o.unshift(m),r.unshift(t))}for(o=o.length,h=0;h<o;h++)t=r[h],f=e.lang.elementspath.eleTitle.replace(/%1/,t),t=i.output({id:c+h,label:f,text:t,jsTitle:"javascript:void('"+t+"')",index:h,keyDownFn:d,clickFn:u}),n.unshift(t);s||(s=CKEDITOR.document.getById(a)),(r=s).setHtml(n.join("")+'<span class="cke_path_empty">&nbsp;</span>'),e.fire("elementsPathUpdate",{space:r})})),e.on("readOnly",r),e.on("contentDomUnload",r),e.addCommand("elementsPathFocus",t.toolbarFocus),e.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var t={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(e){(e=CKEDITOR.document.getById(e._.elementsPath.idBase+"0"))&&e.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},n="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(n+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(n+=' onblur="this.style.cssText = this.style.cssText;"');var i=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+n+' hidefocus="true"  draggable="false"  ondragstart="return false;" onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(t){t._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]},t.on("uiSpace",(function(n){"bottom"==n.data.space&&e(t,n.data)}))}})}(),function(){function e(e,i){var o,r;i.on("refresh",(function(e){var i,o=[t];for(i in e.data.states)o.push(e.data.states[i]);this.setState(CKEDITOR.tools.search(o,n)?n:t)}),i,null,100),i.on("exec",(function(t){o=e.getSelection(),r=o.createBookmarks(1),t.data||(t.data={}),t.data.done=!1}),i,null,0),i.on("exec",(function(){e.forceNextSelectionCheck(),o.selectBookmarks(r)}),i,null,100)}var t=CKEDITOR.TRISTATE_DISABLED,n=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(t){var n=CKEDITOR.plugins.indent.genericDefinition;e(t,t.addCommand("indent",new n(!0))),e(t,t.addCommand("outdent",new n)),t.ui.addButton&&(t.ui.addButton("Indent",{label:t.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),t.ui.addButton("Outdent",{label:t.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),t.on("dirChanged",(function(e){var n=t.createRange(),i=e.data.node;n.setStartBefore(i),n.setEndAfter(i);for(var o,r=new CKEDITOR.dom.walker(n);o=r.next();)if(o.type==CKEDITOR.NODE_ELEMENT)if(!o.equals(i)&&o.getDirection())n.setStartAfter(o),r=new CKEDITOR.dom.walker(n);else{var s=t.config.indentClasses;if(s)for(var a="ltr"==e.data.dir?["_rtl",""]:["","_rtl"],l=0;l<s.length;l++)o.hasClass(s[l]+a[0])&&(o.removeClass(s[l]+a[0]),o.addClass(s[l]+a[1]));s=o.getStyle("margin-right"),a=o.getStyle("margin-left"),s?o.setStyle("margin-left",s):o.removeStyle("margin-left"),a?o.setStyle("margin-right",a):o.removeStyle("margin-right")}}))}}),CKEDITOR.plugins.indent={genericDefinition:function(e){this.isIndent=!!e,this.startDisabled=!this.isIndent},specificDefinition:function(e,t,n){this.name=t,this.editor=e,this.jobs={},this.enterBr=e.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!n,this.relatedGlobal=n?"indent":"outdent",this.indentKey=n?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(e,t){e.on("pluginsLoaded",(function(){for(var e in t)!function(e,t){var n,i=e.getCommand(t.relatedGlobal);for(n in t.jobs)i.on("exec",(function(i){i.data.done||(e.fire("lockSnapshot"),t.execJob(e,n)&&(i.data.done=!0),e.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(t.database))}),this,null,n),i.on("refresh",(function(i){i.data.states||(i.data.states={}),i.data.states[t.name+"@"+n]=t.refreshJob(e,n,i.data.path)}),this,null,n);e.addFeature(t)}(this,t[e])}))}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(e,n){var i=this.jobs[n];if(i.state!=t)return i.exec.call(this,e)},refreshJob:function(e,n,i){return n=this.jobs[n],e.activeFilter.checkFeature(this)?n.state=n.refresh.call(this,e,i):n.state=t,n.state},getContext:function(e){return e.contains(this.context)}}}(),function(){function e(e){function i(t){for(var i=o.startContainer,l=o.endContainer;i&&!i.getParent().equals(t);)i=i.getParent();for(;l&&!l.getParent().equals(t);)l=l.getParent();if(!i||!l)return!1;for(var c=[],u=!1;!u;)i.equals(l)&&(u=!0),c.push(i),i=i.getNext();if(1>c.length)return!1;for(i=t.getParents(!0),l=0;l<i.length;l++)if(i[l].getName&&a[i[l].getName()]){t=i[l];break}i=r.isIndent?1:-1,l=c[0],c=c[c.length-1];var d,h=(u=CKEDITOR.plugins.list.listToArray(t,s))[c.getCustomData("listarray_index")].indent;for(l=l.getCustomData("listarray_index");l<=c.getCustomData("listarray_index");l++)if(u[l].indent+=i,0<i){for(var f=u[l].parent,p=l-1;0<=p;p--)if(u[p].indent===i){f=u[p].parent;break}u[l].parent=new CKEDITOR.dom.element(f.getName(),f.getDocument())}for(l=c.getCustomData("listarray_index")+1;l<u.length&&u[l].indent>h;l++)u[l].indent+=i;if(i=CKEDITOR.plugins.list.arrayToList(u,s,null,e.config.enterMode,t.getDirection()),!r.isIndent&&(d=t.getParent())&&d.is("li")){var g,m=[];for(l=(c=i.listNode.getChildren()).count()-1;0<=l;l--)(g=c.getItem(l))&&g.is&&g.is("li")&&m.push(g)}if(i&&i.listNode.replace(t),m&&m.length)for(l=0;l<m.length;l++){for(g=t=m[l];(g=g.getNext())&&g.is&&g.getName()in a;)CKEDITOR.env.needsNbspFiller&&!t.getFirst(n)&&t.append(o.document.createText(" ")),t.append(g);t.insertAfter(d)}return i&&e.fire("contentDomInvalidated"),!0}for(var o,r=this,s=this.database,a=this.context,l=((l=e.getSelection())&&l.getRanges()).createIterator();o=l.getNextRange();){for(var c=o.getCommonAncestor();c&&(c.type!=CKEDITOR.NODE_ELEMENT||!a[c.getName()]);){if(e.editable().equals(c)){c=!1;break}c=c.getParent()}if(c||(c=o.startPath().contains(a))&&o.setEndAt(c,CKEDITOR.POSITION_BEFORE_END),!c){var u=o.getEnclosedNode();u&&u.type==CKEDITOR.NODE_ELEMENT&&u.getName()in a&&(o.setStartAt(u,CKEDITOR.POSITION_AFTER_START),o.setEndAt(u,CKEDITOR.POSITION_BEFORE_END),c=u)}if(c&&o.startContainer.type==CKEDITOR.NODE_ELEMENT&&o.startContainer.getName()in a&&((u=new CKEDITOR.dom.walker(o)).evaluator=t,o.startContainer=u.next()),c&&o.endContainer.type==CKEDITOR.NODE_ELEMENT&&o.endContainer.getName()in a&&((u=new CKEDITOR.dom.walker(o)).evaluator=t,o.endContainer=u.previous()),c)return i(c)}return 0}function t(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.is("li")}function n(e){return i(e)&&o(e)}var i=CKEDITOR.dom.walker.whitespaces(!0),o=CKEDITOR.dom.walker.bookmark(!1,!0),r=CKEDITOR.TRISTATE_DISABLED,s=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(t){function n(t){i.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],t.on("key",(function(e){var n=t.elementPath();if("wysiwyg"==t.mode&&e.data.keyCode==this.indentKey&&n){var i=this.getContext(n);!i||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,n,i)||(t.execCommand(this.relatedGlobal),e.cancel())}}),this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(e,t){var n=this.getContext(t),i=CKEDITOR.plugins.indentList.firstItemInPath(this.context,t,n);return n&&this.isIndent&&!i?s:r}:function(e,t){return!this.getContext(t)||this.isIndent?r:s},exec:CKEDITOR.tools.bind(e,this)}}var i=CKEDITOR.plugins.indent;i.registerCommands(t,{indentlist:new n(t,"indentlist",!0),outdentlist:new n(t,"outdentlist")}),CKEDITOR.tools.extend(n.prototype,i.specificDefinition.prototype,{context:{ol:1,ul:1}})}}),CKEDITOR.plugins.indentList={},CKEDITOR.plugins.indentList.firstItemInPath=function(e,n,i){var o=n.contains(t);return i||(i=n.contains(e)),i&&o&&o.equals(i.getFirst(t))}}(),function(){function e(e,t,n,i){for(var o=CKEDITOR.plugins.list.listToArray(t.root,n),r=[],s=0;s<t.contents.length;s++)(u=(u=t.contents[s]).getAscendant("li",!0))&&!u.getCustomData("list_item_processed")&&(r.push(u),CKEDITOR.dom.element.setMarker(n,u,"list_item_processed",!0));var a,l,c,u=t.root.getDocument();for(s=0;s<r.length;s++){var d=r[s].getCustomData("listarray_index");(a=o[d].parent).is(this.type)||(l=u.createElement(this.type),a.copyAttributes(l,{start:1,type:1}),l.removeStyle("list-style-type"),o[d].parent=l)}for(o=(n=CKEDITOR.plugins.list.arrayToList(o,n,null,e.config.enterMode)).listNode.getChildCount(),s=0;s<o&&(c=n.listNode.getChild(s));s++)c.getName()==this.type&&i.push(c);n.listNode.replace(t.root),e.fire("contentDomInvalidated")}function t(e,t,n){var i,o,r=t.contents,s=t.root.getDocument(),a=[];if(1==r.length&&r[0].equals(t.root)){var l=s.createElement("div");r[0].moveChildren&&r[0].moveChildren(l),r[0].append(l),r[0]=l}for(t=t.contents[0].getParent(),l=0;l<r.length;l++)t=t.getCommonAncestor(r[l].getParent());for(e=void 0===(e=e.config.useComputedState)||e,l=0;l<r.length;l++)for(var c,u=r[l];c=u.getParent();){if(c.equals(t)){a.push(u),!o&&u.getDirection()&&(o=1),u=u.getDirection(e),null!==i&&(i=i&&i!=u?null:u);break}u=c}if(!(1>a.length)){for(r=a[a.length-1].getNext(),l=s.createElement(this.type),n.push(l);a.length;)n=a.shift(),e=s.createElement("li"),(u=n).is("pre")||p.test(u.getName())||"false"==u.getAttribute("contenteditable")?n.appendTo(e):(n.copyAttributes(e),i&&n.getDirection()&&(e.removeStyle("direction"),e.removeAttribute("dir")),n.moveChildren(e),n.remove()),e.appendTo(l);i&&o&&l.setAttribute("dir",i),r?l.insertBefore(r):l.appendTo(t)}}function n(e,t,n){function i(n){!(l=u[n?"getFirst":"getLast"]())||l.is&&l.isBlockBoundary()||!(c=t.root[n?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||c.is&&c.isBlockBoundary({br:1})||e.document.createElement("br")[n?"insertBefore":"insertAfter"](l)}for(var o=CKEDITOR.plugins.list.listToArray(t.root,n),r=[],s=0;s<t.contents.length;s++){var a=t.contents[s];(a=a.getAscendant("li",!0))&&!a.getCustomData("list_item_processed")&&(r.push(a),CKEDITOR.dom.element.setMarker(n,a,"list_item_processed",!0))}for(a=null,s=0;s<r.length;s++)o[a=r[s].getCustomData("listarray_index")].indent=-1;for(s=a+1;s<o.length;s++)if(o[s].indent>o[s-1].indent+1){for(r=o[s-1].indent+1-o[s].indent,a=o[s].indent;o[s]&&o[s].indent>=a;)o[s].indent+=r,s++;s--}var l,c,u=CKEDITOR.plugins.list.arrayToList(o,n,null,e.config.enterMode,t.root.getAttribute("dir")).listNode;i(!0),i(),u.replace(t.root),e.fire("contentDomInvalidated")}function i(e,t){this.name=e,this.context=this.type=t,this.allowedContent=t+" li",this.requiredContent=t}function o(e,t,n,i){for(var o,r;o=e[i?"getLast":"getFirst"](g);)(r=o.getDirection(1))!==t.getDirection(1)&&o.setAttribute("dir",r),o.remove(),n?o[i?"insertBefore":"insertAfter"](n):t.append(o,i),n=o}function r(e){function t(t){var n=e[t?"getPrevious":"getNext"](h);n&&n.type==CKEDITOR.NODE_ELEMENT&&n.is(e.getName())&&(o(e,n,null,!t),e.remove(),e=n)}t(),t(1)}function s(e){return e.type==CKEDITOR.NODE_ELEMENT&&(e.getName()in CKEDITOR.dtd.$block||e.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[e.getName()]["#"]}function a(e,t,n){e.fire("saveSnapshot"),n.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var i=n.extractContents();t.trim(!1,!0);var s=t.createBookmark(),a=(c=new CKEDITOR.dom.elementPath(t.startContainer)).block,c=c.lastElement.getAscendant("li",1)||a,u=(d=new CKEDITOR.dom.elementPath(n.startContainer)).contains(CKEDITOR.dtd.$listItem),d=d.contains(CKEDITOR.dtd.$list);for(a?(a=a.getBogus())&&a.remove():d&&(a=d.getPrevious(h))&&f(a)&&a.remove(),(a=i.getLast())&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("br")&&a.remove(),(a=t.startContainer.getChild(t.startOffset))?i.insertBefore(a):t.startContainer.append(i),u&&(i=l(u))&&(c.contains(u)?(o(i,u.getParent(),u),i.remove()):c.append(i));n.checkStartOfBlock()&&n.checkEndOfBlock()&&(i=(d=n.startPath()).block);)i.is("li")&&(c=i.getParent(),i.equals(c.getLast(h))&&i.equals(c.getFirst(h))&&(i=c)),n.moveToPosition(i,CKEDITOR.POSITION_BEFORE_START),i.remove();n=n.clone(),i=e.editable(),n.setEndAt(i,CKEDITOR.POSITION_BEFORE_END),(n=new CKEDITOR.dom.walker(n)).evaluator=function(e){return h(e)&&!f(e)},(n=n.next())&&n.type==CKEDITOR.NODE_ELEMENT&&n.getName()in CKEDITOR.dtd.$list&&r(n),t.moveToBookmark(s),t.select(),e.fire("saveSnapshot")}function l(e){return(e=e.getLast(h))&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in c?e:null}var c={ol:1,ul:1},u=CKEDITOR.dom.walker.whitespaces(),d=CKEDITOR.dom.walker.bookmark(),h=function(e){return!(u(e)||d(e))},f=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(e,t,n,i,o){if(!c[e.getName()])return[];i||(i=0),n||(n=[]);for(var r=0,s=e.getChildCount();r<s;r++){var a=e.getChild(r);if(a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(a,t,n,i+1),"li"==a.$.nodeName.toLowerCase()){var l={parent:e,indent:i,element:a,contents:[]};o?l.grandparent=o:(l.grandparent=e.getParent(),l.grandparent&&"li"==l.grandparent.$.nodeName.toLowerCase()&&(l.grandparent=l.grandparent.getParent())),t&&CKEDITOR.dom.element.setMarker(t,a,"listarray_index",n.length),n.push(l);for(var u,d=0,h=a.getChildCount();d<h;d++)(u=a.getChild(d)).type==CKEDITOR.NODE_ELEMENT&&c[u.getName()]?CKEDITOR.plugins.list.listToArray(u,t,n,i+1,l.grandparent):l.contents.push(u)}}return n},arrayToList:function(e,t,n,i,o){if(n||(n=0),!e||e.length<n+1)return null;for(var r,s,a,l=e[n].parent.getDocument(),u=new CKEDITOR.dom.documentFragment(l),f=null,p=n,g=Math.max(e[n].indent,0),m=null,E=i==CKEDITOR.ENTER_P?"p":"div";;){var T=e[p];if(r=T.grandparent,s=T.element.getDirection(1),T.indent==g){for(f&&e[p].parent.getName()==f.getName()||(f=e[p].parent.clone(!1,1),o&&f.setAttribute("dir",o),u.append(f)),m=f.append(T.element.clone(0,1)),s!=f.getDirection(1)&&m.setAttribute("dir",s),r=0;r<T.contents.length;r++)m.append(T.contents[r].clone(1,1));p++}else if(T.indent==Math.max(g,0)+1)T=e[p-1].element.getDirection(1),p=CKEDITOR.plugins.list.arrayToList(e,null,p,i,T!=s?s:null),!m.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=l.$.documentMode&&m.append(l.createText(" ")),m.append(p.listNode),p=p.nextIndex;else{if(-1!=T.indent||n||!r)return null;c[r.getName()]?(m=T.element.clone(!1,!0),s!=r.getDirection(1)&&m.setAttribute("dir",s)):m=new CKEDITOR.dom.documentFragment(l),f=r.getDirection(1)!=s;var C,v,I=T.element,D=I.getAttribute("class"),O=I.getAttribute("style"),b=m.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(i!=CKEDITOR.ENTER_BR||f||O||D),y=T.contents.length;for(r=0;r<y;r++)if(C=T.contents[r],d(C)&&1<y)b?v=C.clone(1,1):m.append(C.clone(1,1));else if(C.type==CKEDITOR.NODE_ELEMENT&&C.isBlockBoundary()){f&&!C.getDirection()&&C.setAttribute("dir",s),a=C;var R=I.getAttribute("style");R&&a.setAttribute("style",R.replace(/([^;])$/,"$1;")+(a.getAttribute("style")||"")),D&&C.addClass(D),a=null,v&&(m.append(v),v=null),m.append(C.clone(1,1))}else b?(a||(a=l.createElement(E),m.append(a),f&&a.setAttribute("dir",s)),O&&a.setAttribute("style",O),D&&a.setAttribute("class",D),v&&(a.append(v),v=null),a.append(C.clone(1,1))):m.append(C.clone(1,1));v&&((a||m).append(v),v=null),m.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&p!=e.length-1&&(CKEDITOR.env.needsBrFiller&&(s=m.getLast())&&s.type==CKEDITOR.NODE_ELEMENT&&s.is("br")&&s.remove(),(s=m.getLast(h))&&s.type==CKEDITOR.NODE_ELEMENT&&s.is(CKEDITOR.dtd.$block)||m.append(l.createElement("br"))),"div"!=(s=m.$.nodeName.toLowerCase())&&"p"!=s||m.appendBogus(),u.append(m),f=null,p++}if(a=null,e.length<=p||Math.max(e[p].indent,0)<g)break}if(t)for(e=u.getFirst();e;){if(e.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(t,e),e.getName()in CKEDITOR.dtd.$listItem&&(l=o=i=void 0,i=(n=e).getDirection()))){for(o=n.getParent();o&&!(l=o.getDirection());)o=o.getParent();i==l&&n.removeAttribute("dir")}e=e.getNextSourceNode()}return{listNode:u,nextIndex:p}}};var p=/^h[1-6]$/,g=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);i.prototype={exec:function(i){function o(e){return c[e.root.getName()]&&!function(e,t){return CKEDITOR.tools.array.filter(e.getChildren().toArray(),(function(e){return-1===CKEDITOR.tools.array.indexOf(t,e.type)})).length}(e.root,[CKEDITOR.NODE_COMMENT])}function s(e){var t=!0;return 0!==e.getChildCount()&&(e.forEach((function(e){if(e.type!==CKEDITOR.NODE_COMMENT)return t=!1}),null,!0),t)}this.refresh(i,i.elementPath());var a=i.config,l=i.getSelection(),u=l&&l.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF)if((f=i.editable()).getFirst(h)){var d=1==u.length&&u[0];(a=d&&d.getEnclosedNode())&&a.is&&this.type==a.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else a.enterMode==CKEDITOR.ENTER_BR?f.appendBogus():u[0].fixBlock(1,a.enterMode==CKEDITOR.ENTER_P?"p":"div"),l.selectRanges(u);a=l.createBookmarks(!0);for(var f=[],p={},g=(u=u.createIterator(),0);(d=u.getNextRange())&&++g;){var m=d.getBoundaryNodes(),E=m.startNode,T=m.endNode;for(E.type==CKEDITOR.NODE_ELEMENT&&"td"==E.getName()&&d.setStartAt(m.startNode,CKEDITOR.POSITION_AFTER_START),T.type==CKEDITOR.NODE_ELEMENT&&"td"==T.getName()&&d.setEndAt(m.endNode,CKEDITOR.POSITION_BEFORE_END),(d=d.createIterator()).forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;m=d.getNextParagraph();)if(!m.getCustomData("list_block")&&!s(m)){CKEDITOR.dom.element.setMarker(p,m,"list_block",1),E=(v=i.elementPath(m)).elements,T=0;for(var C,v=v.blockLimit,I=E.length-1;0<=I&&(C=E[I]);I--)if(c[C.getName()]&&v.contains(C)){v.removeCustomData("list_group_object_"+g),(E=C.getCustomData("list_group_object"))?E.contents.push(m):(E={root:C,contents:[m]},f.push(E),CKEDITOR.dom.element.setMarker(p,C,"list_group_object",E)),T=1;break}T||((T=v).getCustomData("list_group_object_"+g)?T.getCustomData("list_group_object_"+g).contents.push(m):(E={root:T,contents:[m]},CKEDITOR.dom.element.setMarker(p,T,"list_group_object_"+g,E),f.push(E)))}}for(C=[];0<f.length;)E=f.shift(),this.state==CKEDITOR.TRISTATE_OFF?o(E)||(c[E.root.getName()]?e.call(this,i,E,p,C):t.call(this,i,E,C)):this.state==CKEDITOR.TRISTATE_ON&&c[E.root.getName()]&&!o(E)&&n.call(this,i,E,p);for(I=0;I<C.length;I++)r(C[I]);CKEDITOR.dom.element.clearAllMarkers(p),l.selectBookmarks(a),i.focus()},refresh:function(e,t){var n=t.contains(c,1),i=t.blockLimit||t.root;n&&i.contains(n)?this.setState(n.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(e){e.blockless||(e.addCommand("numberedlist",new i("numberedlist","ol")),e.addCommand("bulletedlist",new i("bulletedlist","ul")),e.ui.addButton&&(e.ui.addButton("NumberedList",{label:e.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),e.ui.addButton("BulletedList",{label:e.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),e.on("key",(function(t){var n,i=t.data.domEvent.getKey();if("wysiwyg"==e.mode&&i in{8:1,46:1}){var o=e.getSelection().getRanges()[0],r=o&&o.startPath();if(o&&o.collapsed){var u,d=8==i,p=e.editable(),g=new CKEDITOR.dom.walker(o.clone());if(g.evaluator=function(e){return h(e)&&!f(e)},g.guard=function(e,t){return!(t&&e.type==CKEDITOR.NODE_ELEMENT&&e.is("table"))},i=o.clone(),d)if((u=r.contains(c))&&o.checkBoundaryOfElement(u,CKEDITOR.START)&&(u=u.getParent())&&u.is("li")&&(u=l(u))?(n=u,u=u.getPrevious(h),i.moveToPosition(u&&f(u)?u:n,CKEDITOR.POSITION_BEFORE_START)):(g.range.setStartAt(p,CKEDITOR.POSITION_AFTER_START),g.range.setEnd(o.startContainer,o.startOffset),(u=g.previous())&&u.type==CKEDITOR.NODE_ELEMENT&&(u.getName()in c||u.is("li"))&&(u.is("li")||(g.range.selectNodeContents(u),g.reset(),g.evaluator=s,u=g.previous()),n=u,i.moveToElementEditEnd(n),i.moveToPosition(i.endPath().block,CKEDITOR.POSITION_BEFORE_END))),n)a(e,i,o),t.cancel();else{var m=r.contains(c);m&&o.checkBoundaryOfElement(m,CKEDITOR.START)&&(n=m.getFirst(h),o.checkBoundaryOfElement(n,CKEDITOR.START)&&(u=m.getPrevious(h),l(n)?u&&(o.moveToElementEditEnd(u),o.select()):e.execCommand("outdent"),t.cancel()))}else if(n=r.contains("li")){if(g.range.setEndAt(p,CKEDITOR.POSITION_BEFORE_END),d=(p=n.getLast(h))&&s(p)?p:n,r=0,(u=g.next())&&u.type==CKEDITOR.NODE_ELEMENT&&u.getName()in c&&u.equals(p)?(r=1,u=g.next()):o.checkBoundaryOfElement(d,CKEDITOR.END)&&(r=2),r&&u){if((o=o.clone()).moveToElementEditStart(u),1==r&&(i.optimize(),!i.startContainer.equals(n))){for(n=i.startContainer;n.is(CKEDITOR.dtd.$inline);)m=n,n=n.getParent();m&&i.moveToPosition(m,CKEDITOR.POSITION_AFTER_END)}2==r&&(i.moveToPosition(i.endPath().block,CKEDITOR.POSITION_BEFORE_END),o.endPath().block&&o.moveToPosition(o.endPath().block,CKEDITOR.POSITION_AFTER_START)),a(e,i,o),t.cancel()}}else g.range.setEndAt(p,CKEDITOR.POSITION_BEFORE_END),(u=g.next())&&u.type==CKEDITOR.NODE_ELEMENT&&u.is(c)&&(u=u.getFirst(h),r.block&&o.checkStartOfBlock()&&o.checkEndOfBlock()?(r.block.remove(),o.moveToElementEditStart(u),o.select()):l(u)?(o.moveToElementEditStart(u),o.select()):((o=o.clone()).moveToElementEditStart(u),a(e,i,o)),t.cancel());setTimeout((function(){e.selectionChange(1)}))}}})))}})}(),function(){function e(e,t,n){if(n=e.config.forceEnterMode||n,"wysiwyg"==e.mode){t||(t=e.activeEnterMode);var r=e.elementPath();r&&!r.isContextFor("p")&&(t=CKEDITOR.ENTER_BR,n=1),e.fire("saveSnapshot"),t==CKEDITOR.ENTER_BR?i(e,t,null,n):o(e,t,null,n),e.fire("saveSnapshot")}}function t(e){for(var t=(e=e.getSelection().getRanges(!0)).length-1;0<t;t--)e[t].deleteContents();return e[0]}CKEDITOR.plugins.add("enterkey",{init:function(t){t.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t)}}),t.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t,t.activeShiftEnterMode,1)}}),t.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var n,i,o,r,s=CKEDITOR.dom.walker.whitespaces(),a=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(e,n,o,l){if(o=o||t(e)){var c,u=(o=function(e){var t=e.startContainer.getAscendant((function(e){return e.type==CKEDITOR.NODE_ELEMENT&&"true"==e.getAttribute("contenteditable")}),!0);return e.root.equals(t)?e:((t=new CKEDITOR.dom.range(t)).moveToRange(e),t)}(o)).document,d=o.checkStartOfBlock(),h=o.checkEndOfBlock(),f=e.elementPath(o.startContainer),p=f.block,g=n==CKEDITOR.ENTER_DIV?"div":"p";if(p&&d&&h){if((d=p.getParent()).is("li")&&1<d.getChildCount())return u=new CKEDITOR.dom.element("li"),c=e.createRange(),u.insertAfter(d),p.remove(),c.setStart(u,0),void e.getSelection().selectRanges([c]);if(p.is("li")||p.getParent().is("li")){p.is("li")||(d=(p=p.getParent()).getParent()),c=d.getParent(),o=!p.hasPrevious();var m=!p.hasNext(),E=(g=(l=e.getSelection()).createBookmarks(),p.getDirection(1)),T=(h=p.getAttribute("class"),p.getAttribute("style")),C=c.getDirection(1)!=E;if(e=e.enterMode!=CKEDITOR.ENTER_BR||C||T||h,c.is("li"))o||m?(o&&m&&d.remove(),p[m?"insertAfter":"insertBefore"](c)):p.breakParent(c);else{if(e)f.block.is("li")?(c=u.createElement(n==CKEDITOR.ENTER_P?"p":"div"),C&&c.setAttribute("dir",E),T&&c.setAttribute("style",T),h&&c.setAttribute("class",h),p.moveChildren(c)):c=f.block,o||m?c[o?"insertBefore":"insertAfter"](d):(p.breakParent(d),c.insertAfter(d));else if(p.appendBogus(!0),o||m)for(;u=p[o?"getFirst":"getLast"]();)u[o?"insertBefore":"insertAfter"](d);else for(p.breakParent(d);u=p.getLast();)u.insertAfter(d);p.remove()}return void l.selectBookmarks(g)}if(p&&p.getParent().is("blockquote"))return p.breakParent(p.getParent()),p.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||p.getPrevious().remove(),p.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||p.getNext().remove(),o.moveToElementEditStart(p),void o.select()}else if(p&&p.is("pre")&&!h)return void i(e,n,o,l);if(T=o.splitBlock(g)){if(e=T.previousBlock,p=T.nextBlock,d=T.wasStartOfBlock,h=T.wasEndOfBlock,p?(m=p.getParent()).is("li")&&(p.breakParent(m),p.move(p.getNext(),1)):e&&(m=e.getParent())&&m.is("li")&&(e.breakParent(m),m=e.getNext(),o.moveToElementEditStart(m),e.move(e.getPrevious())),d||h)if(function(e){var t;return e!==CKEDITOR.ENTER_BR&&-1!==CKEDITOR.tools.indexOf(["td","th"],f.lastElement.getName())&&1===f.lastElement.getChildCount()&&((t=(e=f.lastElement.getChild(0).clone(!0)).getBogus())&&t.remove(),!e.getText().length)}(n))o.moveToElementEditStart(o.getTouchedStartNode());else{if(e?(e.is("li")||!r.test(e.getName())&&!e.is("pre"))&&(c=e.clone()):p&&(c=p.clone()),c?l&&!c.is("li")&&c.renameNode(g):m&&m.is("li")?c=m:(c=u.createElement(g),e&&(E=e.getDirection())&&c.setAttribute("dir",E)),u=T.elementPath)for(n=0,l=u.elements.length;n<l&&!(g=u.elements[n]).equals(u.block)&&!g.equals(u.blockLimit);n++)CKEDITOR.dtd.$removeEmpty[g.getName()]&&(g=g.clone(),c.moveChildren(g),c.append(g));c.appendBogus(),c.getParent()||o.insertNode(c),c.is("li")&&c.removeAttribute("value"),!CKEDITOR.env.ie||!d||h&&e.getChildCount()||(o.moveToElementEditStart(h?e:c),o.select()),o.moveToElementEditStart(d&&!h?p:c)}else p.is("li")&&((c=o.clone()).selectNodeContents(p),(c=new CKEDITOR.dom.walker(c)).evaluator=function(e){return!(a(e)||s(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in CKEDITOR.dtd.$inline&&!(e.getName()in CKEDITOR.dtd.$empty))},(m=c.next())&&m.type==CKEDITOR.NODE_ELEMENT&&m.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?u.createElement("br"):u.createText(" ")).insertBefore(m)),p&&o.moveToElementEditStart(p);o.select(),o.scrollIntoView()}}},enterBr:function(e,n,i,s){if(i=i||t(e)){var a=i.document,l=i.checkEndOfBlock(),c=new CKEDITOR.dom.elementPath(e.getSelection().getStartElement()),u=c.block,d=u&&c.block.getName();s||"li"!=d?(!s&&l&&r.test(d)?(l=u.getDirection())?((a=a.createElement("div")).setAttribute("dir",l),a.insertAfter(u),i.setStart(a,0)):(a.createElement("br").insertAfter(u),CKEDITOR.env.gecko&&a.createText("").insertAfter(u),i.setStartAt(u.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(e="pre"==d&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?a.createText("\r"):a.createElement("br"),i.deleteContents(),i.insertNode(e),CKEDITOR.env.needsBrFiller?(a.createText("\ufeff").insertAfter(e),l&&(u||c.blockLimit).appendBogus(),e.getNext().$.nodeValue="",i.setStartAt(e.getNext(),CKEDITOR.POSITION_AFTER_START)):i.setStartAt(e,CKEDITOR.POSITION_AFTER_END)),i.collapse(!0),i.select(),i.scrollIntoView()):o(e,n,i,s)}}},n=CKEDITOR.plugins.enterkey,i=n.enterBr,o=n.enterBlock,r=/^h[1-6]$/}(),function(){function e(e,t){var n={},i=[],o={nbsp:" ",shy:"­",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'};if(e=(e=e.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,(function(e,r){var s=t?"&"+r+";":o[r];return n[s]=t?o[r]:"&"+r+";",i.push(s),""}))).replace(/,$/,""),!t&&e){e=e.split(",");var r,s=document.createElement("div");for(s.innerHTML="&"+e.join(";&")+";",r=s.innerHTML,s=null,s=0;s<r.length;s++){var a=r.charAt(s);n[a]="&"+e[s]+";",i.push(a)}}return n.regex=i.join(t?"|":""),n}CKEDITOR.plugins.add("entities",{afterInit:function(t){function n(e){return l[e]}function i(e){return"force"!=o.entities_processNumerical&&s[e]?s[e]:"&#"+e.charCodeAt(0)+";"}var o=t.config;if(t=(t=t.dataProcessor)&&t.htmlFilter){var r=[];!1!==o.basicEntities&&r.push("nbsp,gt,lt,amp"),o.entities&&(r.length&&r.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),o.entities_latin&&r.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),o.entities_greek&&r.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),o.entities_additional&&r.push(o.entities_additional));var s=e(r.join(",")),a=s.regex?"["+s.regex+"]":"a^";delete s.regex,o.entities&&o.entities_processNumerical&&(a="[^ -~]|"+a),a=new RegExp(a,"g");var l=e("nbsp,gt,lt,amp,shy",!0),c=new RegExp(l.regex,"g");t.addRules({text:function(e){return e.replace(c,n).replace(a,i)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("popup"),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(e,t,n,i){n=n||"70%","string"==typeof(t=t||"80%")&&1<t.length&&"%"==t.substr(t.length-1,1)&&(t=parseInt(window.screen.width*parseInt(t,10)/100,10)),"string"==typeof n&&1<n.length&&"%"==n.substr(n.length-1,1)&&(n=parseInt(window.screen.height*parseInt(n,10)/100,10)),640>t&&(t=640),420>n&&(n=420);var o=parseInt((window.screen.height-n)/2,10),r=parseInt((window.screen.width-t)/2,10);i=(i||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+t+",height="+n+",top="+o+",left="+r;var s=window.open("",null,i,!0);if(!s)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(s.moveTo(r,o),s.resizeTo(t,n)),s.focus(),s.location.href=e}catch(t){window.open(e,null,i,!0)}return!0}}),function(){function t(e){this.editor=e,this.loaders=[]}function n(e,t,n){var o=e.config.fileTools_defaultFileName;this.editor=e,this.lang=e.lang,"string"==typeof t?(this.data=t,this.file=i(this.data),this.loaded=this.total=this.file.size):(this.data=null,this.file=t,this.total=this.file.size,this.loaded=0),n?this.fileName=n:this.file.name?this.fileName=this.file.name:(e=this.file.type.split("/"),o&&(e[0]=o),this.fileName=e.join(".")),this.uploaded=0,this.responseData=this.uploadTotal=null,this.status="created",this.abort=function(){this.changeStatus("abort")}}function i(e){var t=e.match(o)[1];e=e.replace(o,""),e=atob(e);var n,i,r,s,a=[];for(n=0;n<e.length;n+=512){for(i=e.slice(n,n+512),r=Array(i.length),s=0;s<i.length;s++)r[s]=i.charCodeAt(s);i=new Uint8Array(r),a.push(i)}return new Blob(a,{type:t})}CKEDITOR.plugins.add("filetools",{beforeInit:function(n){n.uploadRepository=new t(n),n.on("fileUploadRequest",(function(e){var t=e.data.fileLoader;t.xhr.open("POST",t.uploadUrl,!0),e.data.requestData.upload={file:t.file,name:t.fileName}}),null,null,5),n.on("fileUploadRequest",(function(t){var i=t.data.fileLoader,o=new FormData;t=t.data.requestData;var r,s,a=n.config.fileTools_requestHeaders;for(s in t){var l=t[s];"object"===e(l)&&l.file?o.append(s,l.file,l.name):o.append(s,l)}if(o.append("ckCsrfToken",CKEDITOR.tools.getCsrfToken()),a)for(r in a)i.xhr.setRequestHeader(r,a[r]);i.xhr.send(o)}),null,null,999),n.on("fileUploadResponse",(function(e){var t=e.data.fileLoader,n=t.xhr,i=e.data;try{var o=JSON.parse(n.responseText);if(o.error&&o.error.message&&(i.message=o.error.message),o.uploaded)for(var r in o)i[r]=o[r];else e.cancel()}catch(o){i.message=t.lang.filetools.responseError,CKEDITOR.warn("filetools-response-error",{responseText:n.responseText}),e.cancel()}}),null,null,999)}}),t.prototype={create:function(e,t,i){i=i||n;var o=this.loaders.length;return(e=new i(this.editor,e,t)).id=o,this.loaders[o]=e,this.fire("instanceCreated",e),e},isFinished:function(){for(var e=0;e<this.loaders.length;++e)if(!this.loaders[e].isFinished())return!1;return!0}},n.prototype={loadAndUpload:function(e,t){var n=this;this.once("loaded",(function(i){i.cancel(),n.once("update",(function(e){e.cancel()}),null,null,0),n.upload(e,t)}),null,null,0),this.load()},load:function(){var e=this,t=this.reader=new FileReader;e.changeStatus("loading"),this.abort=function(){e.reader.abort()},t.onabort=function(){e.changeStatus("abort")},t.onerror=function(){e.message=e.lang.filetools.loadError,e.changeStatus("error")},t.onprogress=function(t){e.loaded=t.loaded,e.update()},t.onload=function(){e.loaded=e.total,e.data=t.result,e.changeStatus("loaded")},t.readAsDataURL(this.file)},upload:function(e,t){var n=t||{};e?(this.uploadUrl=e,this.xhr=new XMLHttpRequest,this.attachRequestListeners(),this.editor.fire("fileUploadRequest",{fileLoader:this,requestData:n})&&this.changeStatus("uploading")):(this.message=this.lang.filetools.noUrlError,this.changeStatus("error"))},attachRequestListeners:function(){function e(){"error"!=n.status&&(n.message=n.lang.filetools.networkError,n.changeStatus("error"))}function t(){"abort"!=n.status&&n.changeStatus("abort")}var n=this,i=this.xhr;n.abort=function(){i.abort(),t()},i.onerror=e,i.onabort=t,i.upload?(i.upload.onprogress=function(e){e.lengthComputable&&(n.uploadTotal||(n.uploadTotal=e.total),n.uploaded=e.loaded,n.update())},i.upload.onerror=e,i.upload.onabort=t):(n.uploadTotal=n.total,n.update()),i.onload=function(){if(n.update(),"abort"!=n.status)if(n.uploaded=n.uploadTotal,200>i.status||299<i.status)n.message=n.lang.filetools["httpError"+i.status],n.message||(n.message=n.lang.filetools.httpError.replace("%1",i.status)),n.changeStatus("error");else{for(var e={fileLoader:n},t=["message","fileName","url"],o=n.editor.fire("fileUploadResponse",e),r=0;r<t.length;r++){var s=t[r];"string"==typeof e[s]&&(n[s]=e[s])}n.responseData=e,delete n.responseData.fileLoader,!1===o?n.changeStatus("error"):n.changeStatus("uploaded")}}},changeStatus:function(e){this.status=e,"error"!=e&&"abort"!=e&&"loaded"!=e&&"uploaded"!=e||(this.abort=function(){}),this.fire(e),this.update()},update:function(){this.fire("update")},isFinished:function(){return!!this.status.match(/^(?:loaded|uploaded|error|abort)$/)}},CKEDITOR.event.implementOn(t.prototype),CKEDITOR.event.implementOn(n.prototype);var o=/^data:(\S*?);base64,/;CKEDITOR.fileTools||(CKEDITOR.fileTools={}),CKEDITOR.tools.extend(CKEDITOR.fileTools,{uploadRepository:t,fileLoader:n,getUploadUrl:function(e,t){var n=CKEDITOR.tools.capitalize;return t&&e[t+"UploadUrl"]?e[t+"UploadUrl"]:e.uploadUrl?e.uploadUrl:t&&e["filebrowser"+n(t,1)+"UploadUrl"]?e["filebrowser"+n(t,1)+"UploadUrl"]+"&responseType=json":e.filebrowserUploadUrl?e.filebrowserUploadUrl+"&responseType=json":null},isTypeSupported:function(e,t){return!!e.type.match(t)},isFileUploadSupported:"function"==typeof FileReader&&"function"==typeof(new FileReader).readAsDataURL&&"function"==typeof FormData&&"function"==typeof(new FormData).append&&"function"==typeof XMLHttpRequest&&"function"==typeof Blob})}(),function(){function e(e,t){var n=[];if(!t)return e;for(var i in t)n.push(i+"="+encodeURIComponent(t[i]));return e+(-1!=e.indexOf("?")?"&":"?")+n.join("&")}function t(t){return!t.match(/command=QuickUpload/)||t.match(/(\?|&)responseType=json/)?t:e(t,{responseType:"json"})}function n(e){return(e+="").charAt(0).toUpperCase()+e.substr(1)}function i(){var t=(o=this.getDialog()).getParentEditor();t._.filebrowserSe=this;var i=t.config["filebrowser"+n(o.getName())+"WindowWidth"]||t.config.filebrowserWindowWidth||"80%",o=t.config["filebrowser"+n(o.getName())+"WindowHeight"]||t.config.filebrowserWindowHeight||"70%",r=this.filebrowser.params||{};r.CKEditor=t.name,r.CKEditorFuncNum=t._.filebrowserFn,r.langCode||(r.langCode=t.langCode),r=e(this.filebrowser.url,r),t.popup(r,i,o,t.config.filebrowserWindowFeatures||t.config.fileBrowserWindowFeatures)}function o(e){var t=new CKEDITOR.dom.element(e.$.form);t&&((e=t.$.elements.ckCsrfToken)?e=new CKEDITOR.dom.element(e):((e=new CKEDITOR.dom.element("input")).setAttributes({name:"ckCsrfToken",type:"hidden"}),t.append(e)),e.setAttribute("value",CKEDITOR.tools.getCsrfToken()))}function r(){var e=this.getDialog();return e.getParentEditor()._.filebrowserSe=this,!(!e.getContentElement(this.for[0],this.for[1]).getInputElement().$.value||!e.getContentElement(this.for[0],this.for[1]).getAction())}function s(t,n,i){var o=i.params||{};o.CKEditor=t.name,o.CKEditorFuncNum=t._.filebrowserFn,o.langCode||(o.langCode=t.langCode),n.action=e(i.url,o),n.filebrowser=i}function a(e,c,d,h){if(h&&h.length)for(var f,p=h.length;p--;)if("hbox"!=(f=h[p]).type&&"vbox"!=f.type&&"fieldset"!=f.type||a(e,c,d,f.children),f.filebrowser)if("string"==typeof f.filebrowser&&(f.filebrowser={action:"fileButton"==f.type?"QuickUpload":"Browse",target:f.filebrowser}),"Browse"==f.filebrowser.action){var g=f.filebrowser.url;void 0===g&&void 0===(g=e.config["filebrowser"+n(c)+"BrowseUrl"])&&(g=e.config.filebrowserBrowseUrl),g&&(f.onClick=i,f.filebrowser.url=g,f.hidden=!1)}else if("QuickUpload"==f.filebrowser.action&&f.for&&(void 0===(g=f.filebrowser.url)&&void 0===(g=e.config["filebrowser"+n(c)+"UploadUrl"])&&(g=e.config.filebrowserUploadUrl),g)){var m=f.onClick;f.onClick=function(n){var i=n.sender,s=i.getDialog().getContentElement(this.for[0],this.for[1]).getInputElement(),a=CKEDITOR.fileTools&&CKEDITOR.fileTools.isFileUploadSupported;return(!m||!1!==m.call(i,n))&&!!r.call(i,n)&&("form"!==e.config.filebrowserUploadMethod&&a?((n=e.uploadRepository.create(s.$.files[0])).on("uploaded",(function(e){var t=e.sender.responseData;u.call(e.sender.editor,t.url,t.message)})),n.on("error",l.bind(this)),n.on("abort",l.bind(this)),n.loadAndUpload(t(g)),"xhr"):(o(s),!0))},f.filebrowser.url=g,f.hidden=!1,s(e,d.getContents(f.for[0]).get(f.for[1]),f.filebrowser)}}function l(e){var t={};try{t=JSON.parse(e.sender.xhr.response)||{}}catch(e){}this.enable(),alert(t.error?t.error.message:e.sender.message)}function c(e,t,n){if(-1!==n.indexOf(";")){n=n.split(";");for(var i=0;i<n.length;i++)if(c(e,t,n[i]))return!0;return!1}return(e=e.getContents(t).get(n).filebrowser)&&e.url}function u(e,t){var n=this._.filebrowserSe.getDialog(),i=this._.filebrowserSe.for,o=this._.filebrowserSe.filebrowser.onSelect;i&&n.getContentElement(i[0],i[1]).reset(),"function"==typeof t&&!1===t.call(this._.filebrowserSe)||o&&!1===o.call(this._.filebrowserSe,e,t)||("string"==typeof t&&t&&alert(t),e&&(n=(i=this._.filebrowserSe).getDialog(),i=i.filebrowser.target||null)&&(i=i.split(":"),(o=n.getContentElement(i[0],i[1]))&&(o.setValue(e),n.selectPage(i[0]))))}CKEDITOR.plugins.add("filebrowser",{requires:"popup,filetools",init:function(e){e._.filebrowserFn=CKEDITOR.tools.addFunction(u,e),e.on("destroy",(function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)}))}}),CKEDITOR.on("dialogDefinition",(function(e){if(e.editor.plugins.filebrowser)for(var t,n=e.data.definition,i=0;i<n.contents.length;++i)(t=n.contents[i])&&(a(e.editor,e.data.name,n,t.elements),t.hidden&&t.filebrowser&&(t.hidden=!c(n,t.id,t.filebrowser)))}))}(),function(){var e=CKEDITOR.document.getWindow(),t=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(n){n.on("loaded",(function(){!function(n){var i=n.config,o=n.fire("uiSpace",{space:"top",html:""}).html,r=function(){function o(e,n,i){a.setStyle(n,t(i)),a.setStyle("position",e)}function s(e){var t=c.getDocumentPosition();switch(e){case"top":o("absolute","top",t.y-f-m);break;case"pin":o("fixed","top",T);break;case"bottom":o("absolute","top",t.y+(d.height||d.bottom-d.top)+m)}l=e}var l,c,u,d,h,f,p,g=i.floatSpaceDockedOffsetX||0,m=i.floatSpaceDockedOffsetY||0,E=i.floatSpacePinnedOffsetX||0,T=i.floatSpacePinnedOffsetY||0;return function(o){if(c=n.editable()){var T=o&&"focus"==o.name;T&&a.show(),n.fire("floatingSpaceLayout",{show:T}),a.removeStyle("left"),a.removeStyle("right"),u=a.getClientRect(),d=c.getClientRect(),h=e.getViewPaneSize(),f=u.height,p="pageXOffset"in e.$?e.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,l?(f+m<=d.top?s("top"):f+m>h.height-d.bottom?s("pin"):s("bottom"),o=h.width/2,o=i.floatSpacePreferRight?"right":0<d.left&&d.right<h.width&&d.width>u.width?"rtl"==i.contentsLangDirection?"right":"left":o-d.left>d.right-o?"left":"right",u.width>h.width?(o="left",T=0):(T="left"==o?0<d.left?d.left:0:d.right<h.width?h.width-d.right:0)+u.width>h.width&&(o="left"==o?"right":"left",T=0),a.setStyle(o,t(("pin"==l?E:g)+T+("pin"==l?0:"left"==o?p:-p)))):(l="pin",s("pin"),r(o))}}}();if(o){var s=new CKEDITOR.template('<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}"'+(n.title?' aria-labelledby="cke_{name}_arialbl"':" ")+">"+(n.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':" ")+'<div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),a=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(s.output({content:o,id:n.id,langDir:n.lang.dir,langCode:n.langCode,name:n.name,style:"display:none;z-index:"+(i.baseFloatZIndex-1),topId:n.ui.spaceId("top"),voiceLabel:n.title}))),l=CKEDITOR.tools.eventsBuffer(500,r),c=CKEDITOR.tools.eventsBuffer(100,r);a.unselectable(),a.on("mousedown",(function(e){(e=e.data).getTarget().hasAscendant("a",1)||e.preventDefault()})),n.on("focus",(function(t){r(t),n.on("change",l.input),e.on("scroll",c.input),e.on("resize",c.input)})),n.on("blur",(function(){a.hide(),n.removeListener("change",l.input),e.removeListener("scroll",c.input),e.removeListener("resize",c.input)})),n.on("destroy",(function(){e.removeListener("scroll",c.input),e.removeListener("resize",c.input),a.clearCustomData(),a.remove()})),n.focusManager.hasFocus&&a.show(),n.focusManager.add(a,1)}}(this)}),null,null,20)}})}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var e=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),t=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" draggable="false" ondragstart="return false;" href="javascript:void(\'{val}\')"  onclick="{onclick}CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),n=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" draggable="false" ondragstart="return false;" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),i=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(e,t){return this.addBlock(e,new CKEDITOR.ui.listBlock(this.getHolderElement(),t))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(e,t){var n=(t=t||{}).attributes||(t.attributes={});(this.multiSelect=!!t.multiSelect)&&(n["aria-multiselectable"]=!0),!n.role&&(n.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",n.role),(n=this.keys)[40]="next",n[9]="next",n[38]="prev",n[CKEDITOR.SHIFT+9]="prev",n[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(n[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var t=e.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(t),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction((function(e){var t=this.toggle(e);this.onClick&&this.onClick(e,t)}),this)),this._.click}},proto:{add:function(e,n,o){var r=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),this._.items[e]=r,e={id:r,val:CKEDITOR.tools.htmlEncodeAttr(e).replace(i,"\\'"),onclick:CKEDITOR.env.ie?'return false;" onmouseup="CKEDITOR.tools.getMouseButton(event)===CKEDITOR.MOUSE_BUTTON_LEFT&&':"",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(o||e),text:n||e},this._.pendingList.push(t.output(e))},startGroup:function(e){this._.close();var t=CKEDITOR.tools.getNextId();this._.groups[e]=t,this._.pendingHtml.push(n.output({id:t,label:e}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(e){var t=this.isMarked(e);return t?this.unmark(e):this.mark(e),!t},hideGroup:function(e){var t=(e=this.element.getDocument().getById(this._.groups[e]))&&e.getNext();e&&(e.setStyle("display","none"),t&&"ul"==t.getName()&&t.setStyle("display","none"))},hideItem:function(e){this.element.getDocument().getById(this._.items[e]).setStyle("display","none")},showAll:function(){var e,t=this._.items,n=this._.groups,i=this.element.getDocument();for(e in t)i.getById(t[e]).setStyle("display","");for(var o in n)e=(t=i.getById(n[o])).getNext(),t.setStyle("display",""),e&&"ul"==e.getName()&&e.setStyle("display","")},mark:function(e){this.multiSelect||this.unmarkAll(),e=this._.items[e];var t=this.element.getDocument().getById(e);t.addClass("cke_selected"),this.element.getDocument().getById(e+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(t)},markFirstDisplayed:function(){var e=this;this._.markFirstDisplayed((function(){e.multiSelect||e.unmarkAll()}))},unmark:function(e){var t=this.element.getDocument();e=this._.items[e];var n=t.getById(e);n.removeClass("cke_selected"),t.getById(e+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(n)},unmarkAll:function(){var e,t=this._.items,n=this.element.getDocument();for(e in t){var i=t[e];n.getById(i).removeClass("cke_selected"),n.getById(i+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(e){return this.element.getDocument().getById(this._.items[e]).hasClass("cke_selected")},focus:function(e){this._.focusIndex=-1;var t,n=this.element.getElementsByTag("a"),i=-1;if(e){for(t=this.element.getDocument().getById(this._.items[e]).getFirst();e=n.getItem(++i);)if(e.equals(t)){this._.focusIndex=i;break}}else this.element.focus();t&&setTimeout((function(){t.focus()}),0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var e='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="listbox"',t="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"'),CKEDITOR.env.ie&&(t='return false;" onmouseup="CKEDITOR.tools.getMouseButton(event)==CKEDITOR.MOUSE_BUTTON_LEFT&&'),e=e+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" onclick="'+t+'CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>";var n=CKEDITOR.addTemplate("combo",e);CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(e){CKEDITOR.tools.extend(this,e,{canGroup:!1,title:e.label,modes:{wysiwyg:1},editorFocus:1}),e=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=e.parent&&e.parent.getDocument()||CKEDITOR.document,e.className="cke_combopanel",e.block={multiSelect:e.multiSelect,attributes:e.attributes},e.toolbarRelated=!0,this._={panelDefinition:e,items:{},listeners:[]}},proto:{renderHtml:function(e){var t=[];return this.render(e,t),t.join("")},render:function(e,t){function i(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var t=this.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;e.readOnly&&!this.readOnly&&(t=CKEDITOR.TRISTATE_DISABLED),this.setState(t),this.setValue(""),t!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var o,r,s=CKEDITOR.env,a="cke_"+this.id,l=CKEDITOR.tools.addFunction((function(t){r&&(e.unlockSelection(1),r=0),o.execute(t)}),this),c=this;o={id:a,combo:this,focus:function(){CKEDITOR.document.getById(a).getChild(1).focus()},execute:function(t){var n=c._;if(n.state!=CKEDITOR.TRISTATE_DISABLED)if(c.createPanel(e),n.on)n.panel.hide();else{c.commit();var i=c.getValue();i?n.list.mark(i):n.list.unmarkAll(),n.panel.showBlock(c.id,new CKEDITOR.dom.element(t),4)}},clickFn:l},this._.listeners.push(e.on("activeFilterChange",i,this)),this._.listeners.push(e.on("mode",i,this)),this._.listeners.push(e.on("selectionChange",i,this)),!this.readOnly&&this._.listeners.push(e.on("readOnly",i,this));var u=CKEDITOR.tools.addFunction((function(e,t){var n=(e=new CKEDITOR.dom.event(e)).getKeystroke();switch(n){case 13:case 32:case 40:CKEDITOR.tools.callFunction(l,t);break;default:o.onkey(o,n)}e.preventDefault()})),d=CKEDITOR.tools.addFunction((function(){o.onfocus&&o.onfocus()}));return r=0,o.keyDownFn=u,s={id:a,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:s.gecko&&!s.hc?"":(this.title||"").replace("'",""),keydownFn:u,focusFn:d,clickFn:l},n.output(s,t),this.onRender&&this.onRender(),o},createPanel:function(e){if(!this._.panel){var t=this._.panelDefinition,n=this._.panelDefinition.block,i=t.parent||CKEDITOR.document.getBody(),o="cke_combopanel__"+this.name,r=new CKEDITOR.ui.floatPanel(e,i,t),s=(t=r.addListBlock(this.id,n),this);r.onShow=function(){this.element.addClass(o),s.setState(CKEDITOR.TRISTATE_ON),s._.on=1,s.editorFocus&&!e.focusManager.hasFocus&&e.focus(),s.onOpen&&s.onOpen()},r.onHide=function(t){this.element.removeClass(o),s.setState(s.modes&&s.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),s._.on=0,!t&&s.onClose&&s.onClose()},r.onEscape=function(){r.hide(1)},t.onClick=function(e,t){s.onClick&&s.onClick.call(s,e,t),r.hide()},this._.panel=r,this._.list=t,r.getBlock(this.id).onHide=function(){s._.on=0,s.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(e,t){this._.value=e;var n=this.document.getById("cke_"+this.id+"_text");n&&(e||t?n.removeClass("cke_combo_inlinelabel"):(t=this.label,n.addClass("cke_combo_inlinelabel")),n.setText(void 0!==t?t:e))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(e){this._.list.mark(e)},hideItem:function(e){this._.list.hideItem(e)},hideGroup:function(e){this._.list.hideGroup(e)},showAll:function(){this._.list.showAll()},add:function(e,t,n){this._.items[e]=n||e,this._.list.add(e,t,n)},startGroup:function(e){this._.list.startGroup(e)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(e){if(this._.state!=e){var t=this.document.getById("cke_"+this.id),n=t.getElementsByTag("a").getItem(0);t.setState(e,"cke_combo"),e==CKEDITOR.TRISTATE_DISABLED?t.setAttribute("aria-disabled",!0):t.removeAttribute("aria-disabled"),n&&n.setAttribute("aria-expanded",e==CKEDITOR.TRISTATE_ON),this._.state=e}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))},destroy:function(){CKEDITOR.tools.array.forEach(this._.listeners,(function(e){e.removeListener()})),this._.listeners=[]},select:function(e){if(!CKEDITOR.tools.isEmpty(this._.items))for(var t in this._.items)if(e({value:t,text:this._.items[t]})){this.setValue(t);break}}},statics:{handler:{create:function(e){return new CKEDITOR.ui.richCombo(e)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(e,t){this.add(e,CKEDITOR.UI_RICHCOMBO,t)}}(),CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(e){if(!e.blockless){for(var t=e.config,n=e.lang.format,i=t.format_tags.split(";"),o={},r=0,s=[],a=0;a<i.length;a++){var l=i[a],c=new CKEDITOR.style(t["format_"+l]);e.filter.customConfig&&!e.filter.check(c)||(r++,o[l]=c,o[l]._.enterMode=e.config.enterMode,s.push(c))}0!==r&&e.ui.addRichCombo("Format",{label:n.label,title:n.panelTitle,toolbar:"styles,20",allowedContent:s,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(t.contentsCss),multiSelect:!1,attributes:{"aria-label":n.panelTitle}},init:function(){for(var e in this.startGroup(n.panelTitle),o){var t=n["tag_"+e];this.add(e,o[e].buildPreview(t),t)}},onClick:function(t){e.focus(),e.fire("saveSnapshot"),t=o[t];var n=e.elementPath();t.checkActive(n,e)||e.applyStyle(t),setTimeout((function(){e.fire("saveSnapshot")}),0)},onRender:function(){e.on("selectionChange",(function(t){var n=this.getValue();for(var i in t=t.data.path,this.refresh(),o)if(o[i].checkActive(t,e))return void(i!=n&&this.setValue(i,e.lang.format["tag_"+i]));this.setValue("")}),this)},onOpen:function(){for(var t in this.showAll(),o)e.activeFilter.check(o[t])||this.hideItem(t)},refresh:function(){var t=e.elementPath();if(t){if(t.isContextFor("p"))for(var n in o)if(e.activeFilter.check(o[n]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},function(){var e={canUndo:!1,exec:function(e){var t=e.document.createElement("hr");e.insertElement(t)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(t){t.blockless||(t.addCommand("horizontalrule",e),t.ui.addButton&&t.ui.addButton("HorizontalRule",{label:t.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function(e){var t=new CKEDITOR.htmlWriter;t.forceSimpleAmpersand=e.config.forceSimpleAmpersand,t.indentationChars="string"==typeof e.config.dataIndentationChars?e.config.dataIndentationChars:"\t",e.dataProcessor.writer=t}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="\t",this.selfClosingEnd=" />",this.lineBreakChars="\n",this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};var e,t=CKEDITOR.dtd;for(e in CKEDITOR.tools.extend({},t.$nonBodyContent,t.$block,t.$listItem,t.$tableContent))this.setRules(e,{indent:!t[e]["#"],breakBeforeOpen:1,breakBeforeClose:!t[e]["#"],breakAfterClose:1,needsSpace:e in t.$block&&!(e in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(e){var t=this._.rules[e];this._.afterCloser&&t&&t.needsSpace&&this._.needsSpace&&this._.output.push("\n"),this._.indent?this.indentation():t&&t.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",e),this._.afterCloser=0},openTagClose:function(e,t){var n=this._.rules[e];t?(this._.output.push(this.selfClosingEnd),n&&n.breakAfterClose&&(this._.needsSpace=n.needsSpace)):(this._.output.push(">"),n&&n.indent&&(this._.indentation+=this.indentationChars)),n&&n.breakAfterOpen&&this.lineBreak(),"pre"==e&&(this._.inPre=1)},attribute:function(e,t){"string"==typeof t&&(t=CKEDITOR.tools.htmlEncodeAttr(t),this.forceSimpleAmpersand&&(t=t.replace(/&amp;/g,"&"))),this._.output.push(" ",e,'="',t,'"')},closeTag:function(e){var t=this._.rules[e];t&&t.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():t&&t.breakBeforeClose&&(this.lineBreak(),this.indentation()),this._.output.push("</",e,">"),"pre"==e&&(this._.inPre=0),t&&t.breakAfterClose&&(this.lineBreak(),this._.needsSpace=t.needsSpace),this._.afterCloser=1},text:function(e){this._.indent&&(this.indentation(),!this._.inPre&&(e=CKEDITOR.tools.ltrim(e))),this._.output.push(e)},comment:function(e){this._.indent&&this.indentation(),this._.output.push("\x3c!--",e,"--\x3e")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0,this._.needsSpace=0},setRules:function(e,t){var n=this._.rules[e];n?CKEDITOR.tools.extend(n,t,!0):this._.rules[e]=t}}}),function(){function e(e,t){if(t||(t=e.getSelection().getSelectedElement()),t&&t.is("img")&&!t.data("cke-realelement")&&!t.isReadOnly())return t}function t(e){var t=e.getStyle("float");return"inherit"!=t&&"none"!=t||(t=0),t||(t=e.getAttribute("align")),t}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(t){if(!t.plugins.detectConflict("image",["easyimage","image2"])){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var n="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(t,"image","advanced")&&(n="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)"),t.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:n,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]})),t.ui.addButton&&t.ui.addButton("Image",{label:t.lang.common.image,command:"image",toolbar:"insert,10"}),t.on("doubleclick",(function(e){var t=e.data.element;!t.is("img")||t.data("cke-realelement")||t.isReadOnly()||(e.data.dialog="image")})),t.addMenuItems&&t.addMenuItems({image:{label:t.lang.image.menu,command:"image",group:"image"}}),t.contextMenu&&t.contextMenu.addListener((function(n){if(e(t,n))return{image:CKEDITOR.TRISTATE_OFF}}))}},afterInit:function(n){function i(i){var o=n.getCommand("justify"+i);o&&("left"!=i&&"right"!=i||o.on("exec",(function(o){var r=e(n);r&&(t(r)==i?(r.removeStyle("float"),i==t(r)&&r.removeAttribute("align")):r.setStyle("float",i),o.cancel())})),o.on("refresh",(function(o){var r=e(n);r&&(r=t(r),this.setState(r==i?CKEDITOR.TRISTATE_ON:"right"==i||"left"==i?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),o.cancel())})))}n.plugins.image2||(i("left"),i("right"),i("center"),i("block"))}})}(),CKEDITOR.config.image_removeLinkByEmptyURL=!0,function(){function e(e,t){var n=i.exec(e),o=i.exec(t);if(n){if(!n[2]&&"px"==o[2])return o[1];if("px"==n[2]&&!o[2])return o[1]+"px"}return t}var t=CKEDITOR.htmlParser.cssStyle,n=CKEDITOR.tools.cssLength,i=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,o={elements:{$:function(n){var i=n.attributes;if((i=(i=(i=i&&i["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(i)))&&i.children[0])&&n.attributes["data-cke-resizable"]){var o=new t(n).rules;n=i.attributes;var r=o.width;o=o.height,r&&(n.width=e(n.width,r)),o&&(n.height=e(n.height,o))}return i}}};CKEDITOR.plugins.add("fakeobjects",{init:function(e){e.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(e){(e=(e=e.dataProcessor)&&e.htmlFilter)&&e.addRules(o,{applyToAll:!0})}}),CKEDITOR.editor.prototype.createFakeElement=function(e,i,o,r){var s=(s=this.lang.fakeobjects)[o]||s.unknown;return i={class:i,"data-cke-realelement":encodeURIComponent(e.getOuterHtml()),"data-cke-real-node-type":e.type,alt:s,title:s,align:e.getAttribute("align")||""},CKEDITOR.env.hc||(i.src=CKEDITOR.tools.transparentImageData),o&&(i["data-cke-real-element-type"]=o),r&&(i["data-cke-resizable"]=r,o=new t,r=e.getAttribute("width"),e=e.getAttribute("height"),r&&(o.rules.width=n(r)),e&&(o.rules.height=n(e)),o.populate(i)),this.document.createElement("img",{attributes:i})},CKEDITOR.editor.prototype.createFakeParserElement=function(e,i,o,r){var s,a=(a=this.lang.fakeobjects)[o]||a.unknown;return s=new CKEDITOR.htmlParser.basicWriter,e.writeHtml(s),s=s.getHtml(),i={class:i,"data-cke-realelement":encodeURIComponent(s),"data-cke-real-node-type":e.type,alt:a,title:a,align:e.attributes.align||""},CKEDITOR.env.hc||(i.src=CKEDITOR.tools.transparentImageData),o&&(i["data-cke-real-element-type"]=o),r&&(i["data-cke-resizable"]=r,r=e.attributes,e=new t,o=r.width,r=r.height,void 0!==o&&(e.rules.width=n(o)),void 0!==r&&(e.rules.height=n(r)),e.populate(i)),new CKEDITOR.htmlParser.element("img",i)},CKEDITOR.editor.prototype.restoreRealElement=function(t){if(t.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var n=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(t.data("cke-realelement")),this.document);if(t.data("cke-resizable")){var i=t.getStyle("width");t=t.getStyle("height"),i&&n.setAttribute("width",e(n.getAttribute("width"),i)),t&&n.setAttribute("height",e(n.getAttribute("height"),t))}return n}}(),function(){function e(e){return e.replace(/'/g,"\\$&")}function t(e){for(var t,n=e.length,i=[],o=0;o<n;o++)t=e.charCodeAt(o),i.push(t);return"String.fromCharCode("+i.join(",")+")"}function n(t,n){for(var i,o,r=(s=t.plugins.link).compiledProtectionFunction.params,s=[s.compiledProtectionFunction.name,"("],a=0;a<r.length;a++)o=n[i=r[a].toLowerCase()],0<a&&s.push(","),s.push("'",o?e(encodeURIComponent(n[i])):"","'");return s.push(")"),s.join("")}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function e(e){return n.replace(/%1/g,"rtl"==e?"right":"left").replace(/%2/g,"cke_contents_"+e)}var t="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",n=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+t+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+t+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(e("ltr")+e("rtl"))},init:function(e){var t="a[!href]";CKEDITOR.dialog.isTabEnabled(e,"link","advanced")&&(t=t.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type,download]{*}(*)")),CKEDITOR.dialog.isTabEnabled(e,"link","target")&&(t=t.replace("]",",target,onclick]")),e.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:t,requiredContent:"a[href]"})),e.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),e.addCommand("unlink",new CKEDITOR.unlinkCommand),e.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),e.setKeystroke(CKEDITOR.CTRL+76,"link"),e.setKeystroke(CKEDITOR.CTRL+75,"link"),e.ui.addButton&&(e.ui.addButton("Link",{label:e.lang.link.toolbar,command:"link",toolbar:"links,10"}),e.ui.addButton("Unlink",{label:e.lang.link.unlink,command:"unlink",toolbar:"links,20"}),e.ui.addButton("Anchor",{label:e.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),e.on("doubleclick",(function(t){var n=t.data.element.getAscendant({a:1,img:1},!0);n&&!n.isReadOnly()&&(n.is("a")?(t.data.dialog=!n.getAttribute("name")||n.getAttribute("href")&&n.getChildCount()?"link":"anchor",t.data.link=n):CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,n)&&(t.data.dialog="anchor"))}),null,null,0),e.on("doubleclick",(function(t){t.data.dialog in{link:1,anchor:1}&&t.data.link&&e.getSelection().selectElement(t.data.link)}),null,null,20),e.addMenuItems&&e.addMenuItems({anchor:{label:e.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:e.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:e.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:e.lang.link.unlink,command:"unlink",group:"link",order:5}}),e.contextMenu&&e.contextMenu.addListener((function(t){if(!t||t.isReadOnly())return null;if(!(t=CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t))&&!(t=CKEDITOR.plugins.link.getSelectedLink(e)))return null;var n={};return t.getAttribute("href")&&t.getChildCount()&&(n={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),t&&t.hasAttribute("name")&&(n.anchor=n.removeAnchor=CKEDITOR.TRISTATE_OFF),n})),this.compiledProtectionFunction=function(e){var t;return(e=e.config.emailProtection||"")&&"encode"!=e&&(t={},e.replace(/^([^(]+)\(([^)]+)\)$/,(function(e,n,i){t.name=n,t.params=[],i.replace(/[^,\s]+/g,(function(e){t.params.push(e)}))}))),t}(e)},afterInit:function(e){e.dataProcessor.dataFilter.addRules({elements:{a:function(t){return t.attributes.name?t.children.length?null:e.createFakeParserElement(t,"cke_anchor","anchor"):null}}});var t=e._.elementsPath&&e._.elementsPath.filters;t&&t.push((function(t,n){if("a"==n&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t)||t.getAttribute("name")&&(!t.getAttribute("href")||!t.getChildCount())))return"anchor"}))}});var i=/^javascript:/,o=/^(?:mailto)(?:(?!\?(subject|body)=).)+/i,r=/subject=([^;?:@&=$,\/]*)/i,s=/body=([^;?:@&=$,\/]*)/i,a=/^#(.*)$/,l=/^((?:http|https|ftp|news):\/\/)?(.*)$/,c=/^(_(?:self|top|parent|blank))$/,u=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,d=/^javascript:([^(]+)\(([^)]+)\)$/,h=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,f=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,p=/^tel:(.*)$/,g={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType",class:"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(e,t){var n,i=e.getSelection(),o=i.getSelectedElement(),r=i.getRanges(),s=[];if(!t&&o&&o.is("a"))return o;for(o=0;o<r.length;o++)if((n=i.getRanges()[o]).shrink(CKEDITOR.SHRINK_ELEMENT,!0,{skipBogus:!0}),(n=e.elementPath(n.getCommonAncestor()).contains("a",1))&&t)s.push(n);else if(n)return n;return t?s:null},getEditorAnchors:function(e){for(var t,n=(i=(n=e.editable()).isInline()&&!e.plugins.divarea?e.document:n).getElementsByTag("a"),i=i.getElementsByTag("img"),o=[],r=0;t=n.getItem(r++);)(t.data("cke-saved-name")||t.hasAttribute("name"))&&o.push({name:t.data("cke-saved-name")||t.getAttribute("name"),id:t.getAttribute("id")});for(r=0;t=i.getItem(r++);)(t=this.tryRestoreFakeAnchor(e,t))&&o.push({name:t.getAttribute("name"),id:t.getAttribute("id")});return o},fakeAnchor:!0,tryRestoreFakeAnchor:function(e,t){if(t&&t.data("cke-real-element-type")&&"anchor"==t.data("cke-real-element-type")){var n=e.restoreRealElement(t);if(n.data("cke-saved-name"))return n}},parseLinkAttributes:function(e,t){var n,m=t&&(t.data("cke-saved-href")||t.getAttribute("href"))||"",E=e.plugins.link.compiledProtectionFunction,T=e.config.emailProtection,C={};if(m.match(i)&&("encode"==T?m=m.replace(u,(function(e,t,n){return n=n||"","mailto:"+String.fromCharCode.apply(String,t.split(","))+n.replace(/\\'/g,"'")})):T&&m.replace(d,(function(e,t,n){if(t==E.name){C.type="email",e=C.email={},t=/(^')|('$)/g;for(var i,o=(n=n.match(/[^,\s]+/g)).length,r=0;r<o;r++)i=decodeURIComponent(i=n[r].replace(t,"").replace(/\\'/g,"'")),e[E.params[r].toLowerCase()]=i;e.address=[e.name,e.domain].join("@")}}))),!C.type)if(T=m.match(a))C.type="anchor",C.anchor={},C.anchor.name=C.anchor.id=T[1];else if(T=m.match(p))C.type="tel",C.tel=T[1];else if(T=m.match(o)){n=m.match(r),m=m.match(s);var v=C.email={};C.type="email",v.address=T[0].replace("mailto:",""),n&&(v.subject=decodeURIComponent(n[1])),m&&(v.body=decodeURIComponent(m[1]))}else m&&(n=m.match(l))&&(C.type="url",C.url={},C.url.protocol=n[1],C.url.url=n[2]);if(t){if(m=t.getAttribute("target"))C.target={type:m.match(c)?m:"frame",name:m};else if(m=(m=t.data("cke-pa-onclick")||t.getAttribute("onclick"))&&m.match(h))for(C.target={type:"popup",name:m[1]};T=f.exec(m[2]);)"yes"!=T[2]&&"1"!=T[2]||T[1]in{height:1,width:1,top:1,left:1}?isFinite(T[2])&&(C.target[T[1]]=T[2]):C.target[T[1]]=!0;var I;for(I in null!==t.getAttribute("download")&&(C.download=!0),m={},g)(T=t.getAttribute(I))&&(m[g[I]]=T);(I=t.data("cke-saved-name")||m.advName)&&(m.advName=I),CKEDITOR.tools.isEmpty(m)||(C.advanced=m)}return C},getLinkAttributes:function(i,o){var r=i.config.emailProtection||"",s={};switch(o.type){case"url":r=o.url&&void 0!==o.url.protocol?o.url.protocol:"http://";var a=o.url&&CKEDITOR.tools.trim(o.url.url)||"";s["data-cke-saved-href"]=0===a.indexOf("/")?a:r+a;break;case"anchor":r=o.anchor&&o.anchor.id,s["data-cke-saved-href"]="#"+(o.anchor&&o.anchor.name||r||"");break;case"email":switch(a=(u=o.email).address,r){case"":case"encode":var l=encodeURIComponent(u.subject||""),c=encodeURIComponent(u.body||""),u=[];l&&u.push("subject="+l),c&&u.push("body="+c),u=u.length?"?"+u.join("&"):"","encode"==r?(r=["javascript:void(location.href='mailto:'+",t(a)],u&&r.push("+'",e(u),"'"),r.push(")")):r=["mailto:",a,u];break;default:r=a.split("@",2),u.name=r[0],u.domain=r[1],r=["javascript:",n(i,u)]}s["data-cke-saved-href"]=r.join("");break;case"tel":s["data-cke-saved-href"]="tel:"+o.tel}if(o.target)if("popup"==o.target.type){r=["window.open(this.href, '",o.target.name||"","', '"];var d="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" ");for(a=d.length,l=function(e){o.target[e]&&d.push(e+"="+o.target[e])},u=0;u<a;u++)d[u]+=o.target[d[u]]?"=yes":"=no";l("width"),l("left"),l("height"),l("top"),r.push(d.join(","),"'); return false;"),s["data-cke-pa-onclick"]=r.join("")}else"notSet"!=o.target.type&&o.target.name&&(s.target=o.target.name);if(o.download&&(s.download=""),o.advanced){for(var h in g)(r=o.advanced[g[h]])&&(s[h]=r);s.name&&(s["data-cke-saved-name"]=s.name)}for(var f in s["data-cke-saved-href"]&&(s.href=s["data-cke-saved-href"]),h={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1,download:1},o.advanced&&CKEDITOR.tools.extend(h,g),s)delete h[f];return{set:s,removed:CKEDITOR.tools.object.keys(h)}},showDisplayTextForElement:function(e,t){var n=t.getSelection();return!(t.widgets&&t.widgets.focused||n&&1<n.getRanges().length||e&&e.getName&&e.is({img:1,table:1,tbody:1,thead:1,tfoot:1,input:1,select:1,textarea:1}))}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(e){if(CKEDITOR.env.ie){var t,n=e.getSelection().getRanges()[0],i=n.getPreviousEditableNode()&&n.getPreviousEditableNode().getAscendant("a",!0)||n.getNextEditableNode()&&n.getNextEditableNode().getAscendant("a",!0);n.collapsed&&i&&(t=n.createBookmark(),n.selectNodeContents(i),n.select())}i=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1}),e.removeStyle(i),t&&(n.moveToBookmark(t),n.select())},refresh:function(e,t){var n=t.lastElement&&t.lastElement.getAscendant("a",!0);n&&"a"==n.getName()&&n.getAttribute("href")&&n.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]",editorFocus:1},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(e){var t,n=e.getSelection(),i=n.createBookmarks();n&&(t=n.getSelectedElement())&&(t.getChildCount()?t.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t))?t.remove(1):(t=CKEDITOR.plugins.link.getSelectedLink(e))&&(t.hasAttribute("href")?(t.removeAttributes({name:1,"data-cke-saved-name":1}),t.removeClass("cke_anchor")):t.remove(1)),n.selectBookmarks(i)},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0,linkDefaultProtocol:"http://"})}(),function(){function e(e,t,n){return d(t)&&d(n)&&n.equals(t.getNext((function(e){return!(V(e)||W(e)||h(e))})))}function t(e){this.upper=e[0],this.lower=e[1],this.set.apply(this,e.slice(2))}function n(e){var t=e.element;if(t&&d(t)&&(t=t.getAscendant(e.triggers,!0))&&e.editable.contains(t)){var n=s(t);if("true"==n.getAttribute("contenteditable"))return t;if(n.is(e.triggers))return n}return null}function i(e,t,n){return C(e,t),C(e,n),e=t.size.bottom,n=n.size.top,e&&n?0|(e+n)/2:e||n}function o(e,t,n){return t[n?"getPrevious":"getNext"]((function(t){return t&&t.type==CKEDITOR.NODE_TEXT&&!V(t)||d(t)&&!h(t)&&!u(e,t)}))}function r(e,t,n){return e>t&&e<n}function s(e,t){if(e.data("cke-editable"))return null;for(t||(e=e.getParent());e&&!e.data("cke-editable");){if(e.hasAttribute("contenteditable"))return e;e=e.getParent()}return null}function a(e){var t=e.doc,n=y('<span contenteditable="false" data-cke-magic-line="1" style="'+q+"position:absolute;border-top:1px dashed "+e.boxColor+'"></span>',t),i=CKEDITOR.getUrl(this.path+"images/"+(R.hidpi?"hidpi/":"")+"icon"+(e.rtl?"-rtl":"")+".png");for(O(n,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(e.editable,!0),this},lineChildren:[O(y('<span title="'+e.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',t),{base:q+"height:17px;width:17px;"+(e.rtl?"left":"right")+":17px;background:url("+i+") center no-repeat "+e.boxColor+";cursor:pointer;"+(R.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(R.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),O(y(z,t),{base:G+"left:0px;border-left-color:"+e.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),O(y(z,t),{base:G+"right:0px;border-right-color:"+e.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this},mouseNear:function(){C(e,this);var t=e.holdDistance,n=this.size;return!!(n&&r(e.mouse.y,n.top-t,n.bottom+t)&&r(e.mouse.x,n.left-t,n.right+t))},place:function(){var t=e.view,n=e.editable,i=e.trigger,o=i.upper,s=i.lower,a=o||s,l=a.getParent(),c={};for(var u in this.trigger=i,o&&C(e,o,!0),s&&C(e,s,!0),C(e,l,!0),e.inInlineMode&&v(e,!0),l.equals(n)?(c.left=t.scroll.x,c.right=-t.scroll.x,c.width=""):(c.left=a.size.left-a.size.margin.left+t.scroll.x-(e.inInlineMode?t.editable.left+t.editable.border.left:0),c.width=a.size.outerWidth+a.size.margin.left+a.size.margin.right+t.scroll.x,c.right=""),o&&s?c.top=o.size.margin.bottom===s.size.margin.top?0|o.size.bottom+o.size.margin.bottom/2:o.size.margin.bottom<s.size.margin.top?o.size.bottom+o.size.margin.bottom:o.size.bottom+o.size.margin.bottom-s.size.margin.top:o?s||(c.top=o.size.bottom+o.size.margin.bottom):c.top=s.size.top-s.size.margin.top,i.is(A)||r(c.top,t.scroll.y-15,t.scroll.y+5)?(c.top=e.inInlineMode?0:t.scroll.y,this.look(A)):i.is(L)||r(c.top,t.pane.bottom-5,t.pane.bottom+15)?(c.top=e.inInlineMode?t.editable.height+t.editable.padding.top+t.editable.padding.bottom:t.pane.bottom-1,this.look(L)):(e.inInlineMode&&(c.top-=t.editable.top+t.editable.border.top),this.look(B)),e.inInlineMode&&(c.top--,c.top+=t.editable.scroll.top,c.left+=t.editable.scroll.left),c)c[u]=CKEDITOR.tools.cssLength(c[u]);this.setStyles(c)},look:function(e){if(this.oldLook!=e){for(var t,n=this.lineChildren.length;n--;)(t=this.lineChildren[n]).setAttribute("style",t.base+t.looks[0|e/2]);this.oldLook=e}},wrap:new b("span",e.doc)}),t=n.lineChildren.length;t--;)n.lineChildren[t].appendTo(n);n.look(B),n.appendTo(n.wrap),n.unselectable(),n.lineChildren[0].on("mouseup",(function(t){n.detach(),l(e,(function(t){var n=e.line.trigger;t[n.is(w)?"insertBefore":"insertAfter"](n.is(w)?n.lower:n.upper)}),!0),e.editor.focus(),R.ie||e.enterMode==CKEDITOR.ENTER_BR||e.hotNode.scrollIntoView(),t.data.preventDefault(!0)})),n.on("mousedown",(function(e){e.data.preventDefault(!0)})),e.line=n}function l(e,t,n){var i,o=new CKEDITOR.dom.range(e.doc),r=e.editor;R.ie&&e.enterMode==CKEDITOR.ENTER_BR?i=e.doc.createText(P):(i=(i=s(e.element,!0))&&i.data("cke-enter-mode")||e.enterMode,(i=new b(k[i],e.doc)).is("br")||e.doc.createText(P).appendTo(i)),n&&r.fire("saveSnapshot"),t(i),o.moveToPosition(i,CKEDITOR.POSITION_AFTER_START),r.getSelection().selectRanges([o]),e.hotNode=i,n&&r.fire("saveSnapshot")}function c(e,t){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function i(n){var i=R.ie&&9>R.version?" ":P,o=e.hotNode&&e.hotNode.getText()==i&&e.element.equals(e.hotNode)&&e.lastCmdDirection===!!t;l(e,(function(i){o&&e.hotNode&&e.hotNode.remove(),i[t?"insertAfter":"insertBefore"](n),i.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!t}),e.lastCmdDirection=!!t})),R.ie||e.enterMode==CKEDITOR.ENTER_BR||e.hotNode.scrollIntoView(),e.line.detach()}return function(r){var a,l;r=(r=r.getSelection().getStartElement()).getAscendant(j,1),g(e,r)||!r||r.equals(e.editable)||r.contains(e.editable)||((a=s(r))&&"false"==a.getAttribute("contenteditable")&&(r=a),e.element=r,d(a=o(e,r,!t))&&a.is(e.triggers)&&a.is(M)&&(!o(e,a,!t)||(l=o(e,a,!t))&&d(l)&&l.is(e.triggers))?i(a):d(l=n(e))&&(o(e,l,!t)?(r=o(e,l,!t))&&d(r)&&r.is(e.triggers)&&i(l):i(l)))}}()}}function u(e,t){if(!t||t.type!=CKEDITOR.NODE_ELEMENT||!t.$)return!1;var n=e.line;return n.wrap.equals(t)||n.wrap.contains(t)}function d(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&e.$}function h(e){return!!d(e)&&((t=f(e))||(t=!!d(e)&&!(!(t={left:1,right:1,center:1})[e.getComputedStyle("float")]&&!t[e.getAttribute("align")])),t);var t}function f(e){return!!{absolute:1,fixed:1}[e.getComputedStyle("position")]}function p(e,t){return d(t)?t.is(e.triggers):null}function g(e,t){if(!t)return!1;for(var n=t.getParents(1),i=n.length;i--;)for(var o=e.tabuList.length;o--;)if(n[i].hasAttribute(e.tabuList[o]))return!0;return!1}function m(e){var n=e.editable,i=e.mouse,o=e.view,s=e.triggerOffset;v(e);var a=i.y>(e.inInlineMode?o.editable.top+o.editable.height/2:Math.min(o.editable.height,o.pane.height)/2);return(n=n[a?"getLast":"getFirst"]((function(e){return!(V(e)||W(e))})))?(u(e,n)&&(n=e.line.wrap[a?"getPrevious":"getNext"]((function(e){return!(V(e)||W(e))}))),d(n)&&!h(n)&&p(e,n)?(C(e,n),!a&&0<=n.size.top&&r(i.y,0,n.size.top+s)?(e=e.inInlineMode||0===o.scroll.y?A:B,new t([null,n,w,N,e])):a&&n.size.bottom<=o.pane.height&&r(i.y,n.size.bottom-s,o.pane.height)?(e=e.inInlineMode||r(n.size.bottom,o.pane.height-s,o.pane.height)?L:B,new t([n,null,S,N,e])):null):null):null}function E(e){var i=e.mouse,s=e.view,a=e.triggerOffset,l=n(e);if(!l)return null;C(e,l),a=Math.min(a,0|l.size.outerHeight/2);var c,u,f=[];if(r(i.y,l.size.top-1,l.size.top+a))u=!1;else{if(!r(i.y,l.size.bottom-a,l.size.bottom+1))return null;u=!0}if(h(l)||function(e,t,n){return!!(t=t[n?"getLast":"getFirst"]((function(t){return e.isRelevant(t)&&!t.is($)})))&&(C(e,t),n?t.size.top>e.mouse.y:t.size.bottom<e.mouse.y)}(e,l,u)||l.getParent().is(F))return null;var g=o(e,l,!u);if(g){if(g&&g.type==CKEDITOR.NODE_TEXT)return null;if(d(g)){if(h(g)||!p(e,g)||g.getParent().is(F))return null;f=[g,l][u?"reverse":"concat"]().concat([x,N])}}else l.equals(e.editable[u?"getLast":"getFirst"](e.isRelevant))?(v(e),u&&r(i.y,l.size.bottom-a,s.pane.height)&&r(l.size.bottom,s.pane.height-a,s.pane.height)?c=L:r(i.y,0,l.size.top+a)&&(c=A)):c=B,f=[null,l][u?"reverse":"concat"]().concat([u?S:w,N,c,l.equals(e.editable[u?"getLast":"getFirst"](e.isRelevant))?u?L:A:B]);return 0 in f?new t(f):null}function T(e,t,n,i){for(var o=t.getDocumentPosition(),r={},s={},a={},l={},c=Q.length;c--;)r[Q[c]]=parseInt(t.getComputedStyle.call(t,"border-"+Q[c]+"-width"),10)||0,a[Q[c]]=parseInt(t.getComputedStyle.call(t,"padding-"+Q[c]),10)||0,s[Q[c]]=parseInt(t.getComputedStyle.call(t,"margin-"+Q[c]),10)||0;return n&&!i||I(e,i),l.top=o.y-(n?0:e.view.scroll.y),l.left=o.x-(n?0:e.view.scroll.x),l.outerWidth=t.$.offsetWidth,l.outerHeight=t.$.offsetHeight,l.height=l.outerHeight-(a.top+a.bottom+r.top+r.bottom),l.width=l.outerWidth-(a.left+a.right+r.left+r.right),l.bottom=l.top+l.outerHeight,l.right=l.left+l.outerWidth,e.inInlineMode&&(l.scroll={top:t.$.scrollTop,left:t.$.scrollLeft}),O({border:r,padding:a,margin:s,ignoreScroll:n},l,!0)}function C(e,t,n){if(!d(t))return t.size=null;if(t.size){if(t.size.ignoreScroll==n&&t.size.date>new Date-H)return null}else t.size={};return O(t.size,T(e,t,n),{date:+new Date},!0)}function v(e,t){e.view.editable=T(e,e.editable,t,!0)}function I(e,t){e.view||(e.view={});var n=e.view;if(!(!t&&n&&n.date>new Date-H)){n=(i=e.win).getScrollPosition();var i=i.getViewPaneSize();O(e.view,{scroll:{x:n.x,y:n.y,width:e.doc.$.documentElement.scrollWidth-i.width,height:e.doc.$.documentElement.scrollHeight-i.height},pane:{width:i.width,height:i.height,bottom:i.height+n.y},date:+new Date},!0)}}function D(e,n,i,o){for(var r=o,s=o,a=0,l=!1,c=!1,u=e.view.pane.height,d=e.mouse;d.y+a<u&&0<d.y-a&&(l||(l=n(r,o)),c||(c=n(s,o)),!l&&0<d.y-a&&(r=i(e,{x:d.x,y:d.y-a})),!c&&d.y+a<u&&(s=i(e,{x:d.x,y:d.y+a})),!l||!c);)a+=2;return new t([r,s,null,null])}CKEDITOR.plugins.add("magicline",{init:function(e){var i,r,s,p=e.config,C=p.magicline_triggerOffset||30,D={editor:e,enterMode:p.enterMode,triggerOffset:C,holdDistance:0|C*(p.magicline_holdDistance||.5),boxColor:p.magicline_color||"#ff0000",rtl:"rtl"==p.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(p.magicline_tabuList||[]),triggers:p.magicline_everywhere?j:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1},isRelevant:function(e){return d(e)&&!u(D,e)&&!h(e)}};e.on("contentDom",(function(){var d=e.editable(),h=e.document,C=e.window;O(D,{editable:d,inInlineMode:d.isInline(),doc:h,win:C,hotNode:null},!0),D.boundary=D.inInlineMode?D.editable:D.doc.getDocumentElement(),d.is(K.$inline)||(D.inInlineMode&&!f(d)&&d.setStyles({position:"relative",top:null,left:null}),a.call(this,D),I(D),d.attachListener(e,"beforeUndoImage",(function(){D.line.detach()})),d.attachListener(e,"beforeGetData",(function(){D.line.wrap.getParent()&&(D.line.detach(),e.once("getData",(function(){D.line.attach()}),null,null,1e3))}),null,null,0),d.attachListener(D.inInlineMode?h:h.getWindow().getFrame(),"mouseout",(function(t){if("wysiwyg"==e.mode)if(D.inInlineMode){var n=t.data.$.clientX;t=t.data.$.clientY,I(D),v(D,!0);var i=D.view.editable,o=D.view.scroll;n>i.left-o.x&&n<i.right-o.x&&t>i.top-o.y&&t<i.bottom-o.y||(clearTimeout(s),s=null,D.line.detach())}else clearTimeout(s),s=null,D.line.detach()})),d.attachListener(d,"keyup",(function(){D.hiddenMode=0})),d.attachListener(d,"keydown",(function(t){if("wysiwyg"==e.mode)switch(t.data.getKeystroke()){case 2228240:case 16:D.hiddenMode=1,D.line.detach()}})),d.attachListener(D.inInlineMode?d:h,"mousemove",(function(t){if(r=!0,"wysiwyg"==e.mode&&!e.readOnly&&!s){var n={x:t.data.$.clientX,y:t.data.$.clientY};s=setTimeout((function(){D.mouse=n,s=D.trigger=null,I(D),r&&!D.hiddenMode&&e.focusManager.hasFocus&&!D.line.mouseNear()&&(D.element=U(D,!0))&&((D.trigger=m(D)||E(D)||X(D))&&!g(D,D.trigger.upper||D.trigger.lower)?D.line.attach().place():(D.trigger=null,D.line.detach()),r=!1)}),30)}})),d.attachListener(C,"scroll",(function(){"wysiwyg"==e.mode&&(D.line.detach(),R.webkit&&(D.hiddenMode=1,clearTimeout(i),i=setTimeout((function(){D.mouseDown||(D.hiddenMode=0)}),50)))})),d.attachListener(_?h:C,"mousedown",(function(){"wysiwyg"==e.mode&&(D.line.detach(),D.hiddenMode=1,D.mouseDown=1)})),d.attachListener(_?h:C,"mouseup",(function(){D.hiddenMode=0,D.mouseDown=0})),e.addCommand("accessPreviousSpace",c(D)),e.addCommand("accessNextSpace",c(D,!0)),e.setKeystroke([[p.magicline_keystrokePrevious,"accessPreviousSpace"],[p.magicline_keystrokeNext,"accessNextSpace"]]),e.on("loadSnapshot",(function(){var t,n,i,o;for(o in{p:1,br:1,div:1})for(i=(t=e.document.getElementsByTag(o)).count();i--;)if((n=t.getItem(i)).data("cke-magicline-hot"))return D.hotNode=n,void(D.lastCmdDirection="true"===n.data("cke-magicline-dir"))})),e._.magiclineBackdoor={accessFocusSpace:l,boxTrigger:t,isLine:u,getAscendantTrigger:n,getNonEmptyNeighbour:o,getSize:T,that:D,triggerEdge:E,triggerEditable:m,triggerExpand:X})}),this)}});var O=CKEDITOR.tools.extend,b=CKEDITOR.dom.element,y=b.createFromHtml,R=CKEDITOR.env,_=CKEDITOR.env.ie&&9>CKEDITOR.env.version,K=CKEDITOR.dtd,k={},w=128,S=64,x=32,N=16,A=4,L=2,B=1,P=" ",F=K.$listItem,$=K.$tableContent,M=O({},K.$nonEditable,K.$empty),j=K.$block,H=100,q="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",G=q+"border-color:transparent;display:block;border-style:solid;",z="<span>"+P+"</span>";k[CKEDITOR.ENTER_BR]="br",k[CKEDITOR.ENTER_P]="p",k[CKEDITOR.ENTER_DIV]="div",t.prototype={set:function(e,t,n){return this.properties=e+t+(n||B),this},is:function(e){return(this.properties&e)==e}};var U=function(){function e(e,t){var n=e.$.elementFromPoint(t.x,t.y);return n&&n.nodeType?new CKEDITOR.dom.element(n):null}return function(t,n,i){if(!t.mouse)return null;var o=t.doc,r=t.line.wrap,s=e(o,i=i||t.mouse);return n&&u(t,s)&&(r.hide(),s=e(o,i),r.show()),!s||s.type!=CKEDITOR.NODE_ELEMENT||!s.$||R.ie&&9>R.version&&!t.boundary.equals(s)&&!t.boundary.contains(s)?null:s}}(),V=CKEDITOR.dom.walker.whitespaces(),W=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),X=function(){function t(t){var o,s,a;if(!d(f=t.element)||f.contains(t.editable)||f.isReadOnly())return null;if(e(0,o=(a=D(t,(function(e,t){return!t.equals(e)}),(function(e,t){return U(e,!0,t)}),f)).upper,s=a.lower))return a.set(x,8);if(o&&f.contains(o))for(;!o.getParent().equals(f);)o=o.getParent();else o=f.getFirst((function(e){return n(t,e)}));if(s&&f.contains(s))for(;!s.getParent().equals(f);)s=s.getParent();else s=f.getLast((function(e){return n(t,e)}));if(!o||!s)return null;if(C(t,o),C(t,s),!r(t.mouse.y,o.size.top,s.size.bottom))return null;for(var l,c,u,h,f=Number.MAX_VALUE;s&&!s.equals(o)&&(c=o.getNext(t.isRelevant));)(l=Math.abs(i(t,o,c)-t.mouse.y))<f&&(f=l,u=o,h=c),C(t,o=c);return u&&h&&r(t.mouse.y,u.size.top,h.size.bottom)?(a.upper=u,a.lower=h,a.set(x,8)):null}function n(e,t){return!(t&&t.type==CKEDITOR.NODE_TEXT||W(t)||h(t)||u(e,t)||t.type==CKEDITOR.NODE_ELEMENT&&t.$&&t.is("br"))}return function(n){var i,o=t(n);if(i=o){i=o.upper;var r=o.lower;i=!(!i||!r||h(r)||h(i)||r.equals(i)||i.equals(r)||r.contains(i)||i.contains(r)||!(p(n,i)&&p(n,r)&&e(0,i,r)))}return i?o:null}}(),Q=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){function e(e){if(!e||e.type!=CKEDITOR.NODE_ELEMENT||"form"!=e.getName())return[];for(var t=[],n=["style","className"],i=0;i<n.length;i++){var o=e.$.elements.namedItem(n[i]);o&&(o=new CKEDITOR.dom.element(o),t.push([o,o.nextSibling]),o.remove())}return t}function t(e,t){if(e&&e.type==CKEDITOR.NODE_ELEMENT&&"form"==e.getName()&&0<t.length)for(var n=t.length-1;0<=n;n--){var i=t[n][0],o=t[n][1];o?i.insertBefore(o):i.appendTo(e)}}function n(n,i){var o=e(n),r={},s=n.$;return i||(r.class=s.className||"",s.className=""),r.inline=s.style.cssText||"",i||(s.style.cssText="position: static; overflow: visible"),t(o),r}function i(n,i){var o=e(n),r=n.$;"class"in i&&(r.className=i.class),"inline"in i&&(r.style.cssText=i.inline),t(o)}function o(e){if(!e.editable().isInline()){var t,n=CKEDITOR.instances;for(t in n){var i=n[t];"wysiwyg"!=i.mode||i.readOnly||((i=i.document.getBody()).setAttribute("contentEditable",!1),i.setAttribute("contentEditable",!0))}e.editable().hasFocus&&(e.toolbox.focus(),e.focus())}}CKEDITOR.plugins.add("maximize",{init:function(e){function t(){var t=u.getViewPaneSize();e.resize(t.width,t.height,null,!0)}if(e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var r,s,a,l=e.lang,c=CKEDITOR.document,u=c.getWindow(),d=CKEDITOR.TRISTATE_OFF;e.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var h=e.container.getFirst((function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_inner")})),f=e.ui.space("contents");if("wysiwyg"==e.mode){var p=e.getSelection();r=p&&p.getRanges(),s=u.getScrollPosition()}else{var g=e.editable().$;r=!CKEDITOR.env.ie&&[g.selectionStart,g.selectionEnd],s=[g.scrollLeft,g.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){for(u.on("resize",t),a=u.getScrollPosition(),p=e.container;p=p.getParent();)p.setCustomData("maximize_saved_styles",n(p)),p.setStyle("z-index",e.config.baseFloatZIndex-5);f.setCustomData("maximize_saved_styles",n(f,!0)),h.setCustomData("maximize_saved_styles",n(h,!0)),f={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0},c.getDocumentElement().setStyles(f),!CKEDITOR.env.gecko&&c.getDocumentElement().setStyle("position","fixed"),CKEDITOR.env.gecko&&CKEDITOR.env.quirks||c.getBody().setStyles(f),CKEDITOR.env.ie?setTimeout((function(){u.$.scrollTo(0,0)}),0):u.$.scrollTo(0,0),h.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute"),h.$.offsetLeft,h.setStyles({"z-index":e.config.baseFloatZIndex-5,left:"0px",top:"0px"}),h.addClass("cke_maximized"),t(),f=h.getDocumentPosition(),h.setStyles({left:-1*f.x+"px",top:-1*f.y+"px"}),CKEDITOR.env.gecko&&o(e)}else if(this.state==CKEDITOR.TRISTATE_ON){u.removeListener("resize",t),p=[f,h];for(var m=0;m<p.length;m++)i(p[m],p[m].getCustomData("maximize_saved_styles")),p[m].removeCustomData("maximize_saved_styles");for(p=e.container;p=p.getParent();)i(p,p.getCustomData("maximize_saved_styles")),p.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout((function(){u.$.scrollTo(a.x,a.y)}),0):u.$.scrollTo(a.x,a.y),h.removeClass("cke_maximized"),CKEDITOR.env.webkit&&(h.setStyle("display","inline"),setTimeout((function(){h.setStyle("display","block")}),0)),e.fire("resize",{outerHeight:e.container.$.offsetHeight,contentsHeight:f.$.offsetHeight,outerWidth:e.container.$.offsetWidth})}this.toggleState(),(p=this.uiItems[0])&&(f=this.state==CKEDITOR.TRISTATE_OFF?l.maximize.maximize:l.maximize.minimize,(p=CKEDITOR.document.getById(p._.id)).getChild(1).setHtml(f),p.setAttribute("title",f),p.setAttribute("href",'javascript:void("'+f+'");')),"wysiwyg"==e.mode?r?(CKEDITOR.env.gecko&&o(e),e.getSelection().selectRanges(r),(g=e.getSelection().getStartElement())&&g.scrollIntoView(!0)):u.$.scrollTo(s.x,s.y):(r&&(g.selectionStart=r[0],g.selectionEnd=r[1]),g.scrollLeft=s[0],g.scrollTop=s[1]),r=s=null,d=this.state,e.fire("maximize",this.state)},canUndo:!1}),e.ui.addButton&&e.ui.addButton("Maximize",{label:l.maximize.maximize,command:"maximize",toolbar:"tools,10"}),e.on("mode",(function(){var t=e.getCommand("maximize");t.setState(t.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:d)}),null,null,100)}}})}(),function(){function e(t,n){var i=t.shift();i&&i.handle(n,(function(){e(t,n)}))}function t(e,t){var i,o,r=0;if(!CKEDITOR.tools.array.isArray(e)||0===e.length)return!0;if(0<(i=CKEDITOR.tools.array.filter(e,(function(e){return-1===CKEDITOR.tools.array.indexOf(n,e)}))).length)for(o=0;o<i.length;o++)!function(e){CKEDITOR.scriptLoader.queue(e,(function(o){o&&n.push(e),++r===i.length&&t()}))}(i[o]);return 0===i.length}var n=[],i=CKEDITOR.tools.createClass({$:function(){this.handlers=[]},proto:{register:function(e){"number"!=typeof e.priority&&(e.priority=10),this.handlers.push(e)},addPasteListener:function(n){n.on("paste",(function(i){var o=function(e,t){return CKEDITOR.tools.array.filter(e,(function(e){return e.canHandle(t)})).sort((function(e,t){return e.priority===t.priority?0:e.priority-t.priority}))}(this.handlers,i);if(0!==o.length){if(!t(function(e){var t=CKEDITOR.tools.array.reduce(e,(function(e,t){return CKEDITOR.tools.array.isArray(t.filters)?e.concat(t.filters):e}),[]);return CKEDITOR.tools.array.filter(t,(function(e,n){return CKEDITOR.tools.array.indexOf(t,e)===n}))}(o),(function(){return n.fire("paste",i.data)})))return i.cancel();e(o,i)}}),this,null,3)}}});CKEDITOR.plugins.add("pastetools",{requires:"clipboard",beforeInit:function(e){e.pasteTools=new i,e.pasteTools.addPasteListener(e)}}),CKEDITOR.plugins.pastetools={filters:{},loadFilters:t,createFilter:function(e){var t=CKEDITOR.tools.array.isArray(e.rules)?e.rules:[e.rules],n=e.additionalTransforms;return function(e,i){var o,r=new CKEDITOR.htmlParser.basicWriter,s=new CKEDITOR.htmlParser.filter;return n&&(e=n(e,i)),CKEDITOR.tools.array.forEach(t,(function(t){s.addRules(t(e,i,s))})),o=CKEDITOR.htmlParser.fragment.fromHtml(e),s.applyTo(o),o.writeHtml(r),r.getHtml()}},getClipboardData:function(e,t){var n;return CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"text/html"===t?(n=e.dataTransfer.getData(t,!0))||"text/html"!==t?n:e.dataValue:null},getConfigValue:function(e,t){if(e&&e.config){var n=CKEDITOR.tools,i=e.config,o=n.object.keys(i),r=["pasteTools_"+t,"pasteFromWord_"+t,"pasteFromWord"+n.capitalize(t,!0)];return i[r=n.array.find(r,(function(e){return-1!==n.array.indexOf(o,e)}))]}},getContentGeneratorName:function(e){if((e=/<meta\s+name=["']?generator["']?\s+content=["']?(\w+)/gi.exec(e))&&e.length)return 0===(e=e[1].toLowerCase()).indexOf("microsoft")?"microsoft":0===e.indexOf("libreoffice")?"libreoffice":"unknown"}},CKEDITOR.pasteFilters={}}(),CKEDITOR.plugins.add("pastefromgdocs",{requires:"pastetools",init:function(e){var t=CKEDITOR.plugins.getPath("pastetools"),n=this.path;e.pasteTools.register({filters:[CKEDITOR.getUrl(t+"filter/common.js"),CKEDITOR.getUrl(n+"filter/default.js")],canHandle:function(e){return/id=(\"|\')?docs\-internal\-guid\-/.test(e.data.dataValue)},handle:function(t,n){var i=t.data,o=CKEDITOR.plugins.pastetools.getClipboardData(i,"text/html");i.dontFilter=!0,i.dataValue=CKEDITOR.pasteFilters.gdocs(o,e),!0===e.config.forcePasteAsPlainText&&(i.type="text"),n()}})}}),CKEDITOR.plugins.add("pastefromlibreoffice",{requires:"pastetools",isSupportedEnvironment:function(){var e=CKEDITOR.env.ie&&11>=CKEDITOR.env.version;return!(CKEDITOR.env.webkit&&!CKEDITOR.env.chrome||e)},init:function(e){if(this.isSupportedEnvironment()){var t=CKEDITOR.plugins.getPath("pastetools"),n=this.path;e.pasteTools.register({priority:100,filters:[CKEDITOR.getUrl(t+"filter/common.js"),CKEDITOR.getUrl(t+"filter/image.js"),CKEDITOR.getUrl(n+"filter/default.js")],canHandle:function(e){return!!(e=(e=e.data).dataTransfer.getData("text/html",!0)||e.dataValue)&&"libreoffice"===CKEDITOR.plugins.pastetools.getContentGeneratorName(e)},handle:function(t,n){var i=t.data,o=i.dataValue||CKEDITOR.plugins.pastetools.getClipboardData(i,"text/html");i.dontFilter=!0,o=CKEDITOR.pasteFilters.image(o,e,CKEDITOR.plugins.pastetools.getClipboardData(i,"text/rtf")),i.dataValue=CKEDITOR.pasteFilters.libreoffice(o,e),!0===e.config.forcePasteAsPlainText&&(i.type="text"),n()}})}}}),CKEDITOR.plugins.add("pastefromword",{requires:"pastetools",init:function(e){var t=0,n=CKEDITOR.plugins.getPath("pastetools"),i=this.path,o=void 0===e.config.pasteFromWord_inlineImages||e.config.pasteFromWord_inlineImages;n=[CKEDITOR.getUrl(n+"filter/common.js"),CKEDITOR.getUrl(i+"filter/default.js")],e.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(e,n){t=1,e.execCommand("paste",{type:"html",notification:!n||void 0===n.notification||n.notification})}}),CKEDITOR.plugins.clipboard.addPasteButton(e,"PasteFromWord",{label:e.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),e.pasteTools.register({filters:e.config.pasteFromWordCleanupFile?[e.config.pasteFromWordCleanupFile]:n,canHandle:function(e){e=CKEDITOR.plugins.pastetools.getClipboardData(e.data,"text/html");var n=(n=CKEDITOR.plugins.pastetools.getContentGeneratorName(e))?"microsoft"===n:/(class="?Mso|style=["'][^"]*?\bmso\-|w:WordDocument|<o:\w+>|<\/font>)/.test(e);return e&&(t||n)},handle:function(n,i){var o=n.data,r={dataValue:r=CKEDITOR.plugins.pastetools.getClipboardData(o,"text/html"),dataTransfer:{"text/rtf":CKEDITOR.plugins.pastetools.getClipboardData(o,"text/rtf")}};(!1!==e.fire("pasteFromWord",r)||t)&&(o.dontFilter=!0,(t||!e.config.pasteFromWordPromptCleanup||confirm(e.lang.pastefromword.confirmCleanup))&&(r.dataValue=CKEDITOR.cleanWord(r.dataValue,e),e.fire("afterPasteFromWord",r),o.dataValue=r.dataValue,!0===e.config.forcePasteAsPlainText?o.type="text":CKEDITOR.plugins.clipboard.isCustomCopyCutSupported||"allow-word"!==e.config.forcePasteAsPlainText||(o.type="html")),t=0,i())}}),CKEDITOR.plugins.clipboard.isCustomDataTypesSupported&&o&&e.on("afterPasteFromWord",(function(e){var t,n=CKEDITOR.plugins.pastefromword&&CKEDITOR.plugins.pastefromword.images,i=[];if(n&&e.editor.filter.check("img[src]")&&0!==(t=n.extractTagsFromHtml(e.data.dataValue)).length&&0!==(n=n.extractFromRtf(e.data.dataTransfer["text/rtf"])).length&&(CKEDITOR.tools.array.forEach(n,(function(e){i.push(e.type?"data:"+e.type+";base64,"+CKEDITOR.tools.convertBytesToBase64(CKEDITOR.tools.convertHexStringToBytes(e.hex)):null)}),this),t.length===i.length))for(n=0;n<t.length;n++)0===t[n].indexOf("file://")&&i[n]&&(e.data.dataValue=e.data.dataValue.replace(t[n],i[n]))}))}}),function(){var e={canUndo:!1,async:!0,exec:function(e,t){var n=e.lang,i=CKEDITOR.tools.keystrokeToString(n.common.keyboard,e.getCommandKeystroke(CKEDITOR.env.ie?e.commands.paste:this)),o=t&&void 0!==t.notification?t.notification:!t||!t.from||"keystrokeHandler"===t.from&&CKEDITOR.env.ie;n=o&&"string"==typeof o?o:n.pastetext.pasteNotification.replace(/%1/,'<kbd aria-label="'+i.aria+'">'+i.display+"</kbd>"),e.execCommand("paste",{type:"text",notification:!!o&&n})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(t){var n=CKEDITOR.env.safari?CKEDITOR.CTRL+CKEDITOR.ALT+CKEDITOR.SHIFT+86:CKEDITOR.CTRL+CKEDITOR.SHIFT+86;t.addCommand("pastetext",e),t.setKeystroke(n,"pastetext"),CKEDITOR.plugins.clipboard.addPasteButton(t,"PasteText",{label:t.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),t.config.forcePasteAsPlainText&&t.on("beforePaste",(function(e){"html"!=e.data.type&&(e.data.type="text")})),t.on("pasteState",(function(e){t.getCommand("pastetext").setState(e.data)}))}})}(),CKEDITOR.plugins.add("removeformat",{init:function(e){e.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),e.ui.addButton&&e.ui.addButton("RemoveFormat",{label:e.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(e){for(var t,n=e._.removeFormatRegex||(e._.removeFormatRegex=new RegExp("^(?:"+e.config.removeFormatTags.replace(/,/g,"|")+")$","i")),i=e._.removeAttributes||(e._.removeAttributes=e.config.removeFormatAttributes.split(",")),o=CKEDITOR.plugins.removeformat.filter,r=e.getSelection().getRanges(),s=r.createIterator(),a=function(e){return e.type==CKEDITOR.NODE_ELEMENT};t=s.getNextRange();){t.enlarge(CKEDITOR.ENLARGE_INLINE);var l=t.createBookmark(),c=l.startNode,u=l.endNode,d=function(t){for(var i,r=e.elementPath(t),s=r.elements,a=1;(i=s[a])&&!i.equals(r.block)&&!i.equals(r.blockLimit);a++)n.test(i.getName())&&o(e,i)&&t.breakParent(i)};if(d(c),u)for(d(u),c=c.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);c&&!c.equals(u);)if(c.isReadOnly()){if(c.getPosition(u)&CKEDITOR.POSITION_CONTAINS)break;c=c.getNext(a)}else d=c.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==c.getName()&&c.data("cke-realelement")||!o(e,c)||(n.test(c.getName())?c.remove(1):(c.removeAttributes(i),e.fire("removeFormatCleanup",c))),c=d;t.moveToBookmark(l)}e.forceNextSelectionCheck(),e.getSelection().selectRanges(r)}}},filter:function(e,t){for(var n=e._.removeFormatFilters||[],i=0;i<n.length;i++)if(!1===n[i](t))return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(e){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(e)},CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",CKEDITOR.plugins.add("resize",{init:function(e){function t(t){var n=a.width,o=a.height,l=n+(t.data.$.screenX-s.x)*("rtl"==r?-1:1);t=o+(t.data.$.screenY-s.y),c&&(n=Math.max(i.resize_minWidth,Math.min(l,i.resize_maxWidth))),u&&(o=Math.max(i.resize_minHeight,Math.min(t,i.resize_maxHeight))),e.resize(c?n:null,o)}function n(){CKEDITOR.document.removeListener("mousemove",t),CKEDITOR.document.removeListener("mouseup",n),e.document&&(e.document.removeListener("mousemove",t),e.document.removeListener("mouseup",n))}var i=e.config,o=e.ui.spaceId("resizer"),r=e.element?e.element.getDirection(1):"ltr";if(!i.resize_dir&&(i.resize_dir="vertical"),void 0===i.resize_maxWidth&&(i.resize_maxWidth=3e3),void 0===i.resize_maxHeight&&(i.resize_maxHeight=3e3),void 0===i.resize_minWidth&&(i.resize_minWidth=750),void 0===i.resize_minHeight&&(i.resize_minHeight=250),!1!==i.resize_enabled){var s,a,l=null,c=("both"==i.resize_dir||"horizontal"==i.resize_dir)&&i.resize_minWidth!=i.resize_maxWidth,u=("both"==i.resize_dir||"vertical"==i.resize_dir)&&i.resize_minHeight!=i.resize_maxHeight,d=CKEDITOR.tools.addFunction((function(o){l||(l=e.getResizable()),a={width:l.$.offsetWidth||0,height:l.$.offsetHeight||0},s={x:o.screenX,y:o.screenY},i.resize_minWidth>a.width&&(i.resize_minWidth=a.width),i.resize_minHeight>a.height&&(i.resize_minHeight=a.height),CKEDITOR.document.on("mousemove",t),CKEDITOR.document.on("mouseup",n),e.document&&(e.document.on("mousemove",t),e.document.on("mouseup",n)),o.preventDefault&&o.preventDefault()}));e.on("destroy",(function(){CKEDITOR.tools.removeFunction(d)})),e.on("uiSpace",(function(t){if("bottom"==t.data.space){var n="";c&&!u&&(n=" cke_resizer_horizontal"),!c&&u&&(n=" cke_resizer_vertical");var i='<span id="'+o+'" class="cke_resizer'+n+" cke_resizer_"+r+'" title="'+CKEDITOR.tools.htmlEncode(e.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+d+', event)">'+("ltr"==r?"◢":"◣")+"</span>";"ltr"==r&&"ltr"==n?t.data.html+=i:t.data.html=i+t.data.html}}),e,null,100),e.on("maximize",(function(t){e.ui.space("resizer")[t.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()}))}}}),CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var e=function(e){var t=this._,n=t.menu;t.state!==CKEDITOR.TRISTATE_DISABLED&&(t.on&&n?n.hide():(t.previousState=t.state,n||((n=t.menu=new CKEDITOR.menu(e,{panel:{className:"cke_menu_panel",attributes:{"aria-label":e.lang.common.options}}})).onHide=CKEDITOR.tools.bind((function(){var n=this.command?e.getCommand(this.command).modes:this.modes;this.setState(!n||n[e.mode]?t.previousState:CKEDITOR.TRISTATE_DISABLED),t.on=0}),this),this.onMenu&&n.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),t.on=1,setTimeout((function(){n.show(CKEDITOR.document.getById(t.id),4)}),0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(t){delete t.panel,this.base(t),this.hasArrow="menu",this.click=e},statics:{handler:{create:function(e){return new CKEDITOR.ui.menuButton(e)}}}})},beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}}),CKEDITOR.UI_MENUBUTTON="menubutton",CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",onLoad:function(e){"moono-lisa"==(CKEDITOR.skinName||e.config.skin)&&CKEDITOR.document.appendStyleSheet(CKEDITOR.getUrl(this.path+"skins/"+CKEDITOR.skin.name+"/scayt.css")),CKEDITOR.document.appendStyleSheet(CKEDITOR.getUrl(this.path+"dialogs/dialog.css"));var t=!1;CKEDITOR.on("instanceLoaded",(function(e){if(!t&&CKEDITOR.plugins.autocomplete){t=!0;var n=CKEDITOR.plugins.autocomplete.prototype.getModel;CKEDITOR.plugins.autocomplete.prototype.getModel=function(e){var t=this.editor;return(e=n.bind(this)(e)).on("change-isActive",(function(e){e.data?t.fire("autocompletePanelShow"):t.fire("autocompletePanelHide")})),e}}}))},init:function(t){var n=this,i=CKEDITOR.plugins.scayt;this.bindEvents(t),this.parseConfig(t),this.addRule(t),CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js")),this.addMenuItems(t);var o=t.lang.scayt,r=CKEDITOR.env;t.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:o.text_title,title:t.plugins.wsc?t.lang.wsc.title:o.text_title,modes:{wysiwyg:!(r.ie&&(8>r.version||r.quirks))},toolbar:"spellchecker,20",refresh:function(){var e=t.ui.instances.Scayt.getState();t.scayt&&(e=i.state.scayt[t.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),t.fire("scaytButtonState",e)},onRender:function(){var n=this;t.on("scaytButtonState",(function(t){void 0!==e(t.data)&&n.setState(t.data)}))},onMenu:function(){var e=t.scayt;t.getMenuItem("scaytToggle").label=t.lang.scayt[e&&i.state.scayt[t.name]?"btn_disable":"btn_enable"];var n={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:e?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:e?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:e?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:e?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:t.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};return t.config.scayt_uiTabs[0]||delete n.scaytOptions,t.config.scayt_uiTabs[1]||delete n.scaytLangs,t.config.scayt_uiTabs[2]||delete n.scaytDict,e&&!CKEDITOR.plugins.scayt.isNewUdSupported(e)&&(delete n.scaytDict,t.config.scayt_uiTabs[2]=0,CKEDITOR.plugins.scayt.alarmCompatibilityMessage()),n}}),t.contextMenu&&t.addMenuItems&&(t.contextMenu.addListener((function(e,i){var o,r,s=t.scayt;return s&&(r=s.getSelectionNode())&&(o=n.menuGenerator(t,r),s.showBanner("."+t.contextMenu._.definition.panel.className.split(" ").join(" ."))),o})),t.contextMenu._.onHide=CKEDITOR.tools.override(t.contextMenu._.onHide,(function(e){return function(){var n=t.scayt;return n&&n.hideBanner(),e.apply(this)}})))},addMenuItems:function(e){var t=this,n=CKEDITOR.plugins.scayt;e.addMenuGroup("scaytButton");for(var i=e.config.scayt_contextMenuItemsOrder.split("|"),o=0;o<i.length;o++)i[o]="scayt_"+i[o];if((i=["grayt_description","grayt_suggest","grayt_control"].concat(i))&&i.length)for(o=0;o<i.length;o++)e.addMenuGroup(i[o],o-10);e.addCommand("scaytToggle",{exec:function(e){var t=e.scayt;n.state.scayt[e.name]=!n.state.scayt[e.name],!0===n.state.scayt[e.name]?t||n.createScayt(e):t&&n.destroy(e)}}),e.addCommand("scaytAbout",{exec:function(e){e.scayt.tabToOpen="about",n.openDialog(t.dialogName,e)}}),e.addCommand("scaytOptions",{exec:function(e){e.scayt.tabToOpen="options",n.openDialog(t.dialogName,e)}}),e.addCommand("scaytLangs",{exec:function(e){e.scayt.tabToOpen="langs",n.openDialog(t.dialogName,e)}}),e.addCommand("scaytDict",{exec:function(e){e.scayt.tabToOpen="dictionaries",n.openDialog(t.dialogName,e)}}),i={scaytToggle:{label:e.lang.scayt.btn_enable,group:"scaytButton",command:"scaytToggle"},scaytAbout:{label:e.lang.scayt.btn_about,group:"scaytButton",command:"scaytAbout"},scaytOptions:{label:e.lang.scayt.btn_options,group:"scaytButton",command:"scaytOptions"},scaytLangs:{label:e.lang.scayt.btn_langs,group:"scaytButton",command:"scaytLangs"},scaytDict:{label:e.lang.scayt.btn_dictionaries,group:"scaytButton",command:"scaytDict"}},e.plugins.wsc&&(i.WSC={label:e.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var t=CKEDITOR.plugins.scayt,n=e.scayt,i=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.container.getText():e.document.getBody().getText();(i=i.replace(/\s/g,""))?(n&&t.state.scayt[e.name]&&n.setMarkupPaused&&n.setMarkupPaused(!0),e.lockSelection(),e.execCommand("checkspell")):alert("Nothing to check!")}}),e.addMenuItems(i)},bindEvents:function(e){var t=CKEDITOR.plugins.scayt,n=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE,i=function(){t.destroy(e)},o=function(){!t.state.scayt[e.name]||e.readOnly||e.scayt||t.createScayt(e)},r=function(){n?e.config.scayt_inlineModeImmediateMarkup?o():(e.on("blur",(function(){setTimeout(i,0)})),e.on("focus",o),e.focusManager.hasFocus&&o()):o(),function(){var t=e.editable();t.attachListener(t,"focus",(function(t){var i,r;if(CKEDITOR.plugins.scayt&&!e.scayt&&setTimeout(o,0),t=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[e.name]&&e.scayt,(n||t)&&e._.savedSelection){t=!(t=e._.savedSelection.getSelectedElement())&&e._.savedSelection.getRanges();for(var s=0;s<t.length;s++)"string"==typeof(r=t[s]).startContainer.$.nodeValue&&((i=r.startContainer.getText().length)<r.startOffset||i<r.endOffset)&&e.unlockSelection(!1)}}),this,null,-10)}();var t=e.editable();t.attachListener(t,"mousedown",(function(t){t=t.data.getTarget();var n=e.widgets&&e.widgets.getByElement(t);n&&(n.wrapper=t.getAscendant((function(e){return e.hasAttribute("data-cke-widget-wrapper")}),!0))}),this,null,-10)};e.on("contentDom",r),e.on("beforeCommandExec",(function(n){var i=e.scayt,o=!1,r=!1,s=!0;n.data.name in t.options.disablingCommandExec&&"wysiwyg"==e.mode?i&&(t.destroy(e),e.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)):"bold"!==n.data.name&&"italic"!==n.data.name&&"underline"!==n.data.name&&"strike"!==n.data.name&&"subscript"!==n.data.name&&"superscript"!==n.data.name&&"enter"!==n.data.name&&"cut"!==n.data.name&&"language"!==n.data.name||!i||("cut"===n.data.name&&(s=!1,r=!0),"language"===n.data.name&&(r=o=!0),e.fire("reloadMarkupScayt",{removeOptions:{removeInside:s,forceBookmark:r,language:o},timeout:0}))})),e.on("beforeSetMode",(function(n){"source"==n.data&&((n=e.scayt)&&(t.destroy(e),e.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)),e.document&&e.document.getBody().removeAttribute("_jquid"))})),e.on("afterCommandExec",(function(n){"wysiwyg"!=e.mode||"undo"!=n.data.name&&"redo"!=n.data.name||setTimeout((function(){t.reloadMarkup(e.scayt)}),250)})),e.on("readOnly",(function(n){var i;n&&(i=e.scayt,!0===n.editor.readOnly?i&&i.fire("removeMarkupInDocument",{}):i?t.reloadMarkup(i):"wysiwyg"==n.editor.mode&&!0===t.state.scayt[n.editor.name]&&(t.createScayt(e),n.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))})),e.on("beforeDestroy",i),e.on("setData",(function(){i(),(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE||e.plugins.divarea)&&r()}),this,null,50),e.on("reloadMarkupScayt",(function(n){var i=n.data&&n.data.removeOptions,o=n.data&&n.data.timeout,r=n.data&&n.data.language,s=e.scayt;s&&setTimeout((function(){r&&(i.selectionNode=e.plugins.language.getCurrentLangElement(e),i.selectionNode=i.selectionNode&&i.selectionNode.$||null),s.removeMarkupInSelectionNode(i),t.reloadMarkup(s)}),o||0)})),e.on("insertElement",(function(){e.fire("reloadMarkupScayt",{removeOptions:{forceBookmark:!0}})}),this,null,50),e.on("insertHtml",(function(){e.scayt&&e.scayt.setFocused&&e.scayt.setFocused(!0),e.fire("reloadMarkupScayt")}),this,null,50),e.on("insertText",(function(){e.scayt&&e.scayt.setFocused&&e.scayt.setFocused(!0),e.fire("reloadMarkupScayt")}),this,null,50),e.on("scaytDialogShown",(function(t){t.data.selectPage(e.scayt.tabToOpen)})),e.on("autocompletePanelShow",(function(t){(t=e.scayt)&&t.setMarkupPaused&&t.setMarkupPaused(!0)})),e.on("autocompletePanelHide",(function(t){(t=e.scayt)&&t.setMarkupPaused&&t.setMarkupPaused(!1)}))},parseConfig:function(e){if((i=CKEDITOR.plugins.scayt).replaceOldOptionsNames(e.config),"boolean"!=typeof e.config.scayt_autoStartup&&(e.config.scayt_autoStartup=!1),i.state.scayt[e.name]=e.config.scayt_autoStartup,"boolean"!=typeof e.config.grayt_autoStartup&&(e.config.grayt_autoStartup=!1),"boolean"!=typeof e.config.scayt_inlineModeImmediateMarkup&&(e.config.scayt_inlineModeImmediateMarkup=!1),i.state.grayt[e.name]=e.config.grayt_autoStartup,e.config.scayt_contextCommands||(e.config.scayt_contextCommands="ignoreall|add"),e.config.scayt_contextMenuItemsOrder||(e.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control"),e.config.scayt_sLang||(e.config.scayt_sLang="en_US"),(void 0===e.config.scayt_maxSuggestions||"number"!=typeof e.config.scayt_maxSuggestions||0>e.config.scayt_maxSuggestions)&&(e.config.scayt_maxSuggestions=3),(void 0===e.config.scayt_minWordLength||"number"!=typeof e.config.scayt_minWordLength||1>e.config.scayt_minWordLength)&&(e.config.scayt_minWordLength=3),void 0!==e.config.scayt_customDictionaryIds&&"string"==typeof e.config.scayt_customDictionaryIds||(e.config.scayt_customDictionaryIds=""),void 0!==e.config.scayt_userDictionaryName&&"string"==typeof e.config.scayt_userDictionaryName||(e.config.scayt_userDictionaryName=null),"string"==typeof e.config.scayt_uiTabs&&3===e.config.scayt_uiTabs.split(",").length){var t=[],n=[];e.config.scayt_uiTabs=e.config.scayt_uiTabs.split(","),CKEDITOR.tools.search(e.config.scayt_uiTabs,(function(e){1===Number(e)||0===Number(e)?(n.push(!0),t.push(Number(e))):n.push(!1)})),null===CKEDITOR.tools.search(n,!1)?e.config.scayt_uiTabs=t:e.config.scayt_uiTabs=[1,1,1]}else e.config.scayt_uiTabs=[1,1,1];if("string"!=typeof e.config.scayt_serviceProtocol&&(e.config.scayt_serviceProtocol=null),"string"!=typeof e.config.scayt_serviceHost&&(e.config.scayt_serviceHost=null),"string"!=typeof e.config.scayt_servicePort&&(e.config.scayt_servicePort=null),"string"!=typeof e.config.scayt_servicePath&&(e.config.scayt_servicePath=null),e.config.scayt_moreSuggestions||(e.config.scayt_moreSuggestions="on"),"string"!=typeof e.config.scayt_customerId&&(e.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2"),"string"!=typeof e.config.scayt_customPunctuation&&(e.config.scayt_customPunctuation="-"),"string"!=typeof e.config.scayt_srcUrl&&(i=-1!=(i=document.location.protocol).search(/https?:/)?i:"http:",e.config.scayt_srcUrl=i+"//svc.webspellchecker.net/spellcheck31/wscbundle/wscbundle.js"),"boolean"!=typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0),"boolean"!=typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0),CKEDITOR.config.scayt_handleUndoRedo=!!CKEDITOR.plugins.undo&&CKEDITOR.config.scayt_handleUndoRedo,e.config.scayt_ignoreAllCapsWords&&"boolean"!=typeof e.config.scayt_ignoreAllCapsWords&&(e.config.scayt_ignoreAllCapsWords=!1),e.config.scayt_ignoreDomainNames&&"boolean"!=typeof e.config.scayt_ignoreDomainNames&&(e.config.scayt_ignoreDomainNames=!1),e.config.scayt_ignoreWordsWithMixedCases&&"boolean"!=typeof e.config.scayt_ignoreWordsWithMixedCases&&(e.config.scayt_ignoreWordsWithMixedCases=!1),e.config.scayt_ignoreWordsWithNumbers&&"boolean"!=typeof e.config.scayt_ignoreWordsWithNumbers&&(e.config.scayt_ignoreWordsWithNumbers=!1),e.config.scayt_disableOptionsStorage){var i=CKEDITOR.tools.isArray(e.config.scayt_disableOptionsStorage)?e.config.scayt_disableOptionsStorage:"string"==typeof e.config.scayt_disableOptionsStorage?[e.config.scayt_disableOptionsStorage]:void 0,o="all options lang ignore-all-caps-words ignore-domain-names ignore-words-with-mixed-cases ignore-words-with-numbers".split(" "),r=["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],s=CKEDITOR.tools.search,a=CKEDITOR.tools.indexOf;e.config.scayt_disableOptionsStorage=function(e){for(var t=0;t<e.length;t++){var n=e[t],i=!!s(e,"options");if(!s(o,n)||i&&s(r,(function(e){if("lang"===e)return!1})))return;if(s(r,n)&&r.splice(a(r,n),1),"all"===n||i&&s(e,"lang"))return[];"options"===n&&(r=["lang"])}return[].concat(r)}(i)}},addRule:function(e){var t=CKEDITOR.plugins.scayt,n=(o=e.dataProcessor)&&o.htmlFilter,i=e._.elementsPath&&e._.elementsPath.filters,o=o&&o.dataFilter,r=e.addRemoveFormatFilter;i&&i.push((function(n){if(e.scayt&&(n.hasAttribute(t.options.data_attribute_name)||n.hasAttribute(t.options.problem_grammar_data_attribute)))return!1})),o&&o.addRules({elements:{span:function(e){var n=e.hasClass(t.options.misspelled_word_class)&&e.attributes[t.options.data_attribute_name],i=e.hasClass(t.options.problem_grammar_class)&&e.attributes[t.options.problem_grammar_data_attribute];return t&&(n||i)&&delete e.name,e}}}),n&&n.addRules({elements:{span:function(e){var n=e.hasClass(t.options.misspelled_word_class)&&e.attributes[t.options.data_attribute_name],i=e.hasClass(t.options.problem_grammar_class)&&e.attributes[t.options.problem_grammar_data_attribute];return t&&(n||i)&&delete e.name,e}}}),r&&r.call(e,(function(n){var i=!0;return e.scayt&&(n.hasAttribute(t.options.data_attribute_name)||n.hasAttribute(t.options.problem_grammar_data_attribute))&&(i=!1),i}))},scaytMenuDefinition:function(e){var t=this,n=CKEDITOR.plugins.scayt;return{scayt:{scayt_ignore:{label:(e=e.scayt).getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(e){e.scayt.ignoreWord()}},scayt_ignoreall:{label:e.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(e){e.scayt.ignoreAllWords()}},scayt_add:{label:e.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(e){var t=e.scayt;setTimeout((function(){t.addWordToUserDictionary()}),10)}},scayt_option:{label:e.getLocal("btn_options"),group:"scayt_control",order:4,exec:function(e){e.scayt.tabToOpen="options",n.openDialog(t.dialogName,e)},verification:function(e){return 1==e.config.scayt_uiTabs[0]}},scayt_language:{label:e.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(e){e.scayt.tabToOpen="langs",n.openDialog(t.dialogName,e)},verification:function(e){return 1==e.config.scayt_uiTabs[1]}},scayt_dictionary:{label:e.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(e){e.scayt.tabToOpen="dictionaries",n.openDialog(t.dialogName,e)},verification:function(e){return 1==e.config.scayt_uiTabs[2]}},scayt_about:{label:e.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(e){e.scayt.tabToOpen="about",n.openDialog(t.dialogName,e)}}},grayt:{grayt_problemdescription:{label:"Grammar problem description",group:"grayt_description",order:1,state:CKEDITOR.TRISTATE_DISABLED,exec:function(e){}},grayt_ignore:{label:e.getLocal("btn_ignore"),group:"grayt_control",order:2,exec:function(e){e.scayt.ignorePhrase()}},grayt_ignoreall:{label:e.getLocal("btn_ignoreAll"),group:"grayt_control",order:3,exec:function(e){e.scayt.ignoreAllPhrases()}}}}},buildSuggestionMenuItems:function(e,t,n){var i={},o={},r=n?"word":"phrase",s=n?"startGrammarCheck":"startSpellCheck",a=e.scayt;if(0<t.length&&"no_any_suggestions"!==t[0])if(n)for(n=0;n<t.length;n++){var l="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[n].replace(" ","_");e.addCommand(l,this.createCommand(CKEDITOR.plugins.scayt.suggestions[n],r,s)),n<e.config.scayt_maxSuggestions?(e.addMenuItem(l,{label:t[n],command:l,group:"scayt_suggest",order:n+1}),i[l]=CKEDITOR.TRISTATE_OFF):(e.addMenuItem(l,{label:t[n],command:l,group:"scayt_moresuggest",order:n+1}),o[l]=CKEDITOR.TRISTATE_OFF,"on"===e.config.scayt_moreSuggestions&&(e.addMenuItem("scayt_moresuggest",{label:a.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return o}}),i.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}else for(n=0;n<t.length;n++)l="grayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[n].replace(" ","_"),e.addCommand(l,this.createCommand(CKEDITOR.plugins.scayt.suggestions[n],r,s)),e.addMenuItem(l,{label:t[n],command:l,group:"grayt_suggest",order:n+1}),i[l]=CKEDITOR.TRISTATE_OFF;else i.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,e.addCommand("no_scayt_suggest",{exec:function(){}}),e.addMenuItem("no_scayt_suggest",{label:a.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0});return i},menuGenerator:function(e,t){var n,i,o,r,s=e.scayt,a=this.scaytMenuDefinition(e),l={},c=e.config.scayt_contextCommands.split("|"),u=t.getAttribute(s.getLangAttribute())||s.getLang();if(i=s.isScaytNode(t),o=s.isGraytNode(t),i?(a=a.scayt,n=t.getAttribute(s.getScaytNodeAttributeName()),s.fire("getSuggestionsList",{lang:u,word:n}),l=this.buildSuggestionMenuItems(e,CKEDITOR.plugins.scayt.suggestions,i)):o&&(a=a.grayt,l=t.getAttribute(s.getGraytNodeAttributeName()),s.getGraytNodeRuleAttributeName?(n=t.getAttribute(s.getGraytNodeRuleAttributeName()),s.getProblemDescriptionText(l,n,u)):s.getProblemDescriptionText(l,u),r=s.getProblemDescriptionText(l,n,u),a.grayt_problemdescription&&r&&(r=r.replace(/([.!?])\s/g,"$1<br>"),a.grayt_problemdescription.label=r),s.fire("getGrammarSuggestionsList",{lang:u,phrase:l,rule:n}),l=this.buildSuggestionMenuItems(e,CKEDITOR.plugins.scayt.suggestions,i)),i&&"off"==e.config.scayt_contextCommands)return l;for(var d in a)i&&-1==CKEDITOR.tools.indexOf(c,d.replace("scayt_",""))&&"all"!=e.config.scayt_contextCommands||o&&"grayt_problemdescription"!==d&&-1==CKEDITOR.tools.indexOf(c,d.replace("grayt_",""))&&"all"!=e.config.scayt_contextCommands||(l[d]=void 0!==a[d].state?a[d].state:CKEDITOR.TRISTATE_OFF,"function"!=typeof a[d].verification||a[d].verification(e)||delete l[d],e.addCommand(d,{exec:a[d].exec}),e.addMenuItem(d,{label:e.lang.scayt[a[d].label]||a[d].label,command:d,group:a[d].group,order:a[d].order}));return l},createCommand:function(e,t,n){return{exec:function(i){i=i.scayt;var o={};o[t]=e,i.replaceSelectionNode(o),"startGrammarCheck"===n&&i.removeMarkupInSelectionNode({grammarOnly:!0}),i.fire(n)}}}}),CKEDITOR.plugins.scayt={charsToObserve:[{charName:"cke-fillingChar",charCode:function(){var e,t,n=CKEDITOR.version,i=[4,5,6],o=String.fromCharCode(8203),r=Array(8).join(o);if(!n)return o;n=n.split(".");for(var s=0;s<i.length;s++){if(e=i[s],(t=Number(n[s]))>e)return r;if(t<e)break}return o}()}],state:{scayt:{},grayt:{}},warningCounter:0,suggestions:[],options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word",problem_grammar_data_attribute:"data-grayt-phrase",problem_grammar_class:"gramm-problem"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",scayt_customerid:"scayt_customerId"},openDialog:function(e,t){var n=t.scayt;n.isAllModulesReady&&!1===n.isAllModulesReady()||(t.lockSelection(),t.openDialog(e))},alarmCompatibilityMessage:function(){5>this.warningCounter&&(console.warn("You are using the latest version of SCAYT plugin for CKEditor with the old application version. In order to have access to the newest features, it is recommended to upgrade the application version to latest one as well. Contact us for more details at support@webspellchecker.net."),this.warningCounter+=1)},isNewUdSupported:function(e){return!!e.getUserDictionary},reloadMarkup:function(e){var t;e&&(t=e.getScaytLangList(),e.reloadMarkup?e.reloadMarkup():(this.alarmCompatibilityMessage(),t&&t.ltr&&t.rtl&&e.fire("startSpellCheck, startGrammarCheck")))},replaceOldOptionsNames:function(e){for(var t in e)t in this.backCompatibilityMap&&(e[this.backCompatibilityMap[t]]=e[t],delete e[t])},createScayt:function(e){var t=this,n=CKEDITOR.plugins.scayt;this.loadScaytLibrary(e,(function(e){function i(e){return new SCAYT.CKSCAYT(e,(function(){}),(function(){}))}var o;if(e.window&&(o="BODY"==e.editable().$.nodeName?e.window.getFrame():e.editable()),o){var r;o={lang:e.config.scayt_sLang,container:o.$,customDictionary:e.config.scayt_customDictionaryIds,userDictionaryName:e.config.scayt_userDictionaryName,localization:e.langCode,customer_id:e.config.scayt_customerId,customPunctuation:e.config.scayt_customPunctuation,debug:e.config.scayt_debug,data_attribute_name:t.options.data_attribute_name,misspelled_word_class:t.options.misspelled_word_class,problem_grammar_data_attribute:t.options.problem_grammar_data_attribute,problem_grammar_class:t.options.problem_grammar_class,"options-to-restore":e.config.scayt_disableOptionsStorage,focused:e.editable().hasFocus,ignoreElementsRegex:e.config.scayt_elementsToIgnore,ignoreGraytElementsRegex:e.config.grayt_elementsToIgnore,minWordLength:e.config.scayt_minWordLength,graytAutoStartup:e.config.grayt_autoStartup,charsToObserve:n.charsToObserve},e.config.scayt_serviceProtocol&&(o.service_protocol=e.config.scayt_serviceProtocol),e.config.scayt_serviceHost&&(o.service_host=e.config.scayt_serviceHost),e.config.scayt_servicePort&&(o.service_port=e.config.scayt_servicePort),e.config.scayt_servicePath&&(o.service_path=e.config.scayt_servicePath),"boolean"==typeof e.config.scayt_ignoreAllCapsWords&&(o["ignore-all-caps-words"]=e.config.scayt_ignoreAllCapsWords),"boolean"==typeof e.config.scayt_ignoreDomainNames&&(o["ignore-domain-names"]=e.config.scayt_ignoreDomainNames),"boolean"==typeof e.config.scayt_ignoreWordsWithMixedCases&&(o["ignore-words-with-mixed-cases"]=e.config.scayt_ignoreWordsWithMixedCases),"boolean"==typeof e.config.scayt_ignoreWordsWithNumbers&&(o["ignore-words-with-numbers"]=e.config.scayt_ignoreWordsWithNumbers);try{r=i(o)}catch(e){t.alarmCompatibilityMessage(),delete o.charsToObserve,r=i(o)}r.subscribe("suggestionListSend",(function(e){for(var t={},n=[],i=0;i<e.suggestionList.length;i++)t["word_"+e.suggestionList[i]]||(t["word_"+e.suggestionList[i]]=e.suggestionList[i],n.push(e.suggestionList[i]));CKEDITOR.plugins.scayt.suggestions=n})),r.subscribe("selectionIsChanged",(function(t){e.getSelection().isLocked&&"restoreSelection"!==t.action&&e.lockSelection(),"restoreSelection"===t.action&&e.selectionChange(!0)})),r.subscribe("graytStateChanged",(function(t){n.state.grayt[e.name]=t.state})),r.addMarkupHandler&&r.addMarkupHandler((function(t){var n=e.editable(),i=n.getCustomData(t.charName);i&&(i.$=t.node,n.setCustomData(t.charName,i))})),e.scayt=r,e.fire("scaytButtonState",e.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)}else n.state.scayt[e.name]=!1}))},destroy:function(e){e.scayt&&e.scayt.destroy(),delete e.scayt,e.fire("scaytButtonState",CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(e,t){var n,i=function(){CKEDITOR.fireOnce("scaytReady"),e.scayt||"function"==typeof t&&t(e)};void 0===window.SCAYT||"function"!=typeof window.SCAYT.CKSCAYT?(n=e.config.scayt_srcUrl,CKEDITOR.scriptLoader.load(n,(function(e){e&&i()}))):window.SCAYT&&"function"==typeof window.SCAYT.CKSCAYT&&i()}},CKEDITOR.on("dialogDefinition",(function(e){var t=e.data.name;e=e.data.definition.dialog,"scaytDialog"!==t&&"checkspell"!==t&&(e.on("show",(function(e){e=e.sender&&e.sender.getParentEditor();var t=CKEDITOR.plugins.scayt,n=e.scayt;n&&t.state.scayt[e.name]&&n.setMarkupPaused&&n.setMarkupPaused(!0)})),e.on("hide",(function(e){e=e.sender&&e.sender.getParentEditor();var t=CKEDITOR.plugins.scayt,n=e.scayt;n&&t.state.scayt[e.name]&&n.setMarkupPaused&&n.setMarkupPaused(!1)}))),"scaytDialog"===t&&e.on("cancel",(function(e){return!1}),this,null,-1),"checkspell"===t&&e.on("cancel",(function(e){e=e.sender&&e.sender.getParentEditor();var t=CKEDITOR.plugins.scayt,n=e.scayt;n&&t.state.scayt[e.name]&&n.setMarkupPaused&&n.setMarkupPaused(!1),e.unlockSelection()}),this,null,-2),"link"===t&&e.on("ok",(function(e){var t=e.sender&&e.sender.getParentEditor();t&&setTimeout((function(){t.fire("reloadMarkupScayt",{removeOptions:{removeInside:!0,forceBookmark:!0},timeout:0})}),0)})),"replace"===t&&e.on("hide",(function(e){e=e.sender&&e.sender.getParentEditor();var t=CKEDITOR.plugins.scayt,n=e.scayt;e&&setTimeout((function(){n&&(n.fire("removeMarkupInDocument",{}),t.reloadMarkup(n))}),0)}))})),CKEDITOR.on("scaytReady",(function(){if(!0===CKEDITOR.config.scayt_handleCheckDirty&&((e=CKEDITOR.editor.prototype).checkDirty=CKEDITOR.tools.override(e.checkDirty,(function(e){return function(){var t=null,n=this.scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt){if(t="ready"==this.status){var i=n.removeMarkupFromString(this.getSnapshot());n=n.removeMarkupFromString(this._.previousValue),t=t&&n!==i}}else t=e.call(this);return t}})),e.resetDirty=CKEDITOR.tools.override(e.resetDirty,(function(e){return function(){var t=this.scayt;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt?this._.previousValue=t.removeMarkupFromString(this.getSnapshot()):e.call(this)}}))),!0===CKEDITOR.config.scayt_handleUndoRedo){var e,t="function"==typeof(e=CKEDITOR.plugins.undo.Image.prototype).equalsContent?"equalsContent":"equals";e[t]=CKEDITOR.tools.override(e[t],(function(e){return function(t){var n=t.editor.scayt,i=this.contents,o=t.contents,r=null;return CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[t.editor.name]&&t.editor.scayt&&(this.contents=n.removeMarkupFromString(i)||"",t.contents=n.removeMarkupFromString(o)||""),r=e.apply(this,arguments),this.contents=i,t.contents=o,r}}))}})),function(){var e={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(e){this.toggleState(),this.refresh(e)},refresh:function(e){if(e.document){var t=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";e.editable()[t]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var e;e=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,;.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,;.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,;.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders "),CKEDITOR.addCss(e)},init:function(t){var n=t.addCommand("showborders",e);n.canUndo=!1,!1!==t.config.startupShowBorders&&n.setState(CKEDITOR.TRISTATE_ON),t.on("mode",(function(){n.state!=CKEDITOR.TRISTATE_DISABLED&&n.refresh(t)}),null,null,100),t.on("contentDom",(function(){n.state!=CKEDITOR.TRISTATE_DISABLED&&n.refresh(t)})),t.on("removeFormatCleanup",(function(e){e=e.data,t.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&e.is("table")&&(!e.hasAttribute("border")||0>=parseInt(e.getAttribute("border"),10))&&e.addClass("cke_show_border")}))},afterInit:function(e){var t=e.dataProcessor;e=t&&t.dataFilter,t=t&&t.htmlFilter,e&&e.addRules({elements:{table:function(e){var t=(e=e.attributes).class,n=parseInt(e.border,10);n&&!(0>=n)||t&&-1!=t.indexOf("cke_show_border")||(e.class=(t||"")+" cke_show_border")}}}),t&&t.addRules({elements:{table:function(e){var t=(e=e.attributes).class;t&&(e.class=t.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}}),CKEDITOR.on("dialogDefinition",(function(e){var t=e.data.name;"table"!=t&&"tableProperties"!=t||((t=(e=e.data.definition).getContents("info").get("txtBorder")).commit=CKEDITOR.tools.override(t.commit,(function(e){return function(t,n){e.apply(this,arguments);var i=parseInt(this.getValue(),10);n[!i||0>=i?"addClass":"removeClass"]("cke_show_border")}})),(e=(e=e.getContents("advanced"))&&e.get("advCSSClasses"))&&(e.setup=CKEDITOR.tools.override(e.setup,(function(e){return function(){e.apply(this,arguments),this.setValue(this.getValue().replace(/cke_show_border/,""))}})),e.commit=CKEDITOR.tools.override(e.commit,(function(e){return function(t,n){e.apply(this,arguments),parseInt(n.getAttribute("border"),10)||n.addClass("cke_show_border")}}))))}))}(),function(){CKEDITOR.plugins.add("sourcearea",{init:function(t){function n(){var e=o&&this.equals(CKEDITOR.document.getActive());this.hide(),this.setStyle("height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show(),e&&this.focus()}if(t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var i=CKEDITOR.plugins.sourcearea;t.addMode("source",(function(i){var o=t.ui.space("contents").getDocument().createElement("textarea");o.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",t.config.sourceAreaTabSize||4))),o.setAttribute("dir","ltr"),o.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu"),t.ui.space("contents").append(o),(o=t.editable(new e(t,o))).setData(t.getData(1)),CKEDITOR.env.ie&&(o.attachListener(t,"resize",n,o),o.attachListener(CKEDITOR.document.getWindow(),"resize",n,o),CKEDITOR.tools.setTimeout(n,0,o)),t.fire("ariaWidget",this),i()})),t.addCommand("source",i.commands.source),t.ui.addButton&&t.ui.addButton("Source",{label:t.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),t.on("mode",(function(){t.getCommand("source").setState("source"==t.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}));var o=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var e=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(e){this.setValue(e),this.status="ready",this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(e){this[(e?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){e.baseProto.detach.call(this),this.clearCustomData(),this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(e){"wysiwyg"==e.mode&&e.fire("saveSnapshot"),e.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),e.setMode("source"==e.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(e){var t=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),e.addCommand("specialchar",{exec:function(){var n=e.langCode;n=t.availableLangs[n]?n:t.availableLangs[n.replace(/-.*/,"")]?n.replace(/-.*/,""):"en",CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t.path+"dialogs/lang/"+n+".js"),(function(){CKEDITOR.tools.extend(e.lang.specialchar,t.langEntries[n]),e.openDialog("specialchar")}))},modes:{wysiwyg:1},canUndo:!1}),e.ui.addButton&&e.ui.addButton("SpecialChar",{label:e.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(e){var t=e.config,n=e.lang.stylescombo,i={},o=[],r=[];e.on("stylesSet",(function(n){if(n=n.data.styles){for(var s,a,l,c=0,u=n.length;c<u;c++)s=n[c],e.blockless&&s.element in CKEDITOR.dtd.$block||"string"==typeof s.type&&!CKEDITOR.style.customHandlers[s.type]||(a=s.name,s=new CKEDITOR.style(s),e.filter.customConfig&&!e.filter.check(s))||(s._name=a,s._.enterMode=t.enterMode,s._.type=l=s.assignedTo||s.type,s._.weight=c+1e3*(l==CKEDITOR.STYLE_OBJECT?1:l==CKEDITOR.STYLE_BLOCK?2:3),i[a]=s,o.push(s),r.push(s));o.sort((function(e,t){return e._.weight-t._.weight}))}})),e.ui.addRichCombo("Styles",{label:n.label,title:n.panelTitle,toolbar:"styles,10",allowedContent:r,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(t.contentsCss),multiSelect:!0,attributes:{"aria-label":n.panelTitle}},init:function(){var e,t,i,r,s,a;for(s=0,a=o.length;s<a;s++)t=(e=o[s])._name,(r=e._.type)!=i&&(this.startGroup(n["panelTitle"+String(r)]),i=r),this.add(t,e.type==CKEDITOR.STYLE_OBJECT?t:e.buildPreview(),t);this.commit()},onClick:function(t){e.focus(),e.fire("saveSnapshot"),t=i[t];var n=e.elementPath();t.group&&t.removeStylesFromSameGroup(e)?e.applyStyle(t):e[t.checkActive(n,e)?"removeStyle":"applyStyle"](t),e.fire("saveSnapshot")},onRender:function(){e.on("selectionChange",(function(t){for(var n,o=this.getValue(),r=0,s=(t=t.data.path.elements).length;r<s;r++)for(var a in n=t[r],i)if(i[a].checkElementRemovable(n,!0,e))return void(a!=o&&this.setValue(a));this.setValue("")}),this)},onOpen:function(){var t=(t=e.getSelection()).getSelectedElement()||t.getStartElement()||e.editable(),o=(t=e.elementPath(t),[0,0,0,0]);for(var r in this.showAll(),this.unmarkAll(),i){var s=i[r],a=s._.type;s.checkApplicable(t,e,e.activeFilter)?o[a]++:this.hideItem(r),s.checkActive(t,e)&&this.mark(r)}o[CKEDITOR.STYLE_BLOCK]||this.hideGroup(n["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]),o[CKEDITOR.STYLE_INLINE]||this.hideGroup(n["panelTitle"+String(CKEDITOR.STYLE_INLINE)]),o[CKEDITOR.STYLE_OBJECT]||this.hideGroup(n["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var t=e.elementPath();if(t){for(var n in i)if(i[n].checkApplicable(t,e,e.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){i={},o=[]}})}}),function(){function e(e){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(t){if(t.editable().hasFocus){var n,i=t.getSelection();if(n=new CKEDITOR.dom.elementPath(i.getCommonAncestor(),i.root).contains({td:1,th:1},1)){if(i=t.createRange(),(r=CKEDITOR.tools.tryThese((function(){var t=n.getParent().$.cells[n.$.cellIndex+(e?-1:1)];return t.parentNode.parentNode,t}),(function(){var t;return(t=(t=n.getParent()).getAscendant("table").$.rows[t.$.rowIndex+(e?-1:1)]).cells[e?t.cells.length-1:0]})))||e){if(!r)return!0;r=new CKEDITOR.dom.element(r),i.moveToElementEditStart(r),i.checkStartOfBlock()&&i.checkEndOfBlock()||i.selectNodeContents(r)}else{for(var o=n.getAscendant("table").$,r=n.getParent().$.cells,s=(o=new CKEDITOR.dom.element(o.insertRow(-1),t.document),0),a=r.length;s<a;s++)o.append(new CKEDITOR.dom.element(r[s],t.document).clone(!1,!1)).appendBogus();i.moveToElementEditStart(o)}return i.select(!0),!0}}return!1}}}var t={editorFocus:!1,modes:{wysiwyg:1,source:1}},n={exec:function(e){e.container.focusNext(!0,e.tabIndex)}},i={exec:function(e){e.container.focusPrevious(!0,e.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(o){for(var r=!1!==o.config.enableTabKeyTools,s=o.config.tabSpaces||0,a="";s--;)a+=" ";a&&o.on("key",(function(e){9==e.data.keyCode&&(o.insertText(a),e.cancel())})),r&&o.on("key",(function(e){(9==e.data.keyCode&&o.execCommand("selectNextCell")||e.data.keyCode==CKEDITOR.SHIFT+9&&o.execCommand("selectPreviousCell"))&&e.cancel()})),o.addCommand("blur",CKEDITOR.tools.extend(n,t)),o.addCommand("blurBack",CKEDITOR.tools.extend(i,t)),o.addCommand("selectNextCell",e()),o.addCommand("selectPreviousCell",e(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function(e,t){var n,i,o,r,s,a,l=void 0===t?this.getTabIndex():t;if(0>=l)for(s=this.getNextSourceNode(e,CKEDITOR.NODE_ELEMENT);s;){if(s.isVisible()&&0===s.getTabIndex()){o=s;break}s=s.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(s=this.getDocument().getBody().getFirst();s=s.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!n)if(!i&&s.equals(this)){if(i=!0,e){if(!(s=s.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;n=1}}else i&&!this.contains(s)&&(n=1);if(s.isVisible()&&!(0>(a=s.getTabIndex()))){if(n&&a==l){o=s;break}a>l&&(!o||!r||a<r)?(o=s,r=a):o||0!==a||(o=s,r=a)}}o&&o.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(e,t){for(var n,i,o,r,s=void 0===t?this.getTabIndex():t,a=0,l=this.getDocument().getBody().getLast();l=l.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!n)if(!i&&l.equals(this)){if(i=!0,e){if(!(l=l.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;n=1}}else i&&!this.contains(l)&&(n=1);if(l.isVisible()&&!(0>(r=l.getTabIndex())))if(0>=s){if(n&&0===r){o=l;break}r>a&&(o=l,a=r)}else{if(n&&r==s){o=l;break}r<s&&(!o||r>a)&&(o=l,a=r)}}o&&o.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function(e){function t(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!e.blockless){var n=e.lang.table;e.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height,border-collapse}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];td{border*,background-color,vertical-align,width,height}[colspan,rowspan];"+(e.plugins.dialogadvtab?"table"+e.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"],["td: splitBorderShorthand"],[{element:"table",right:function(e){if(e.styles){var t;if(e.styles.border)t=CKEDITOR.tools.style.parse.border(e.styles.border);else if(CKEDITOR.env.ie&&8===CKEDITOR.env.version){var n=e.styles;n["border-left"]&&n["border-left"]===n["border-right"]&&n["border-right"]===n["border-top"]&&n["border-top"]===n["border-bottom"]&&(t=CKEDITOR.tools.style.parse.border(n["border-top"]))}t&&t.style&&"solid"===t.style&&t.width&&0!==parseFloat(t.width)&&(e.attributes.border=1),"collapse"==e.styles["border-collapse"]&&(e.attributes.cellspacing=0)}}}]]})),e.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",t())),e.addCommand("tableDelete",t({exec:function(e){var t=e.elementPath().contains("table",1);if(t){var n=t.getParent(),i=e.editable();1!=n.getChildCount()||n.is("td","th")||n.equals(i)||(t=n),(e=e.createRange()).moveToPosition(t,CKEDITOR.POSITION_BEFORE_START),t.remove(),e.select()}}})),e.ui.addButton&&e.ui.addButton("Table",{label:n.toolbar,command:"table",toolbar:"insert,30"}),CKEDITOR.dialog.add("table",this.path+"dialogs/table.js"),CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js"),e.addMenuItems&&e.addMenuItems({table:{label:n.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:n.deleteTable,command:"tableDelete",group:"table",order:1}}),e.on("doubleclick",(function(e){e.data.element.is("table")&&(e.data.dialog="tableProperties")})),e.contextMenu&&e.contextMenu.addListener((function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}}))}}}),function(){function e(e,t){function n(e){return!t||t.contains(e)&&e.getAscendant("table",!0).equals(t)}function i(e){0<o.length||e.type!=CKEDITOR.NODE_ELEMENT||!/^(?:td|th)$/.test(e.getName())||e.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(r,e,"selected_cell",!0),o.push(e))}var o=[],r={};if(!e)return o;for(var s=e.getRanges(),a=0;a<s.length;a++){var l,c;if((l=s[a]).collapsed)(l=l.getCommonAncestor().getAscendant({td:1,th:1},!0))&&n(l)&&o.push(l);else for((l=new CKEDITOR.dom.walker(l)).guard=i;c=l.next();)c.type==CKEDITOR.NODE_ELEMENT&&c.is(CKEDITOR.dtd.table)||(c=c.getAscendant({td:1,th:1},!0))&&!c.getCustomData("selected_cell")&&n(c)&&(CKEDITOR.dom.element.setMarker(r,c,"selected_cell",!0),o.push(c))}return CKEDITOR.dom.element.clearAllMarkers(r),o}function t(t,n){var i=(o=(a=p(t)?t:e(t))[0]).getAscendant("table"),o=o.getDocument(),r=(l=a[0].getParent()).$.rowIndex,s=(a=a[a.length-1]).getParent().$.rowIndex+a.$.rowSpan-1,a=new CKEDITOR.dom.element(i.$.rows[s]),l=(r=n?r:s,n?l:a);for(i=(a=CKEDITOR.tools.buildTableMap(i))[r],r=n?a[r-1]:a[r+1],a=a[0].length,o=o.createElement("tr"),s=0;i[s]&&s<a;s++){var c;1<i[s].rowSpan&&r&&i[s]==r[s]?(c=i[s]).rowSpan+=1:((c=new CKEDITOR.dom.element(i[s]).clone()).removeAttribute("rowSpan"),c.appendBogus(),o.append(c),c=c.$),s+=c.colSpan-1}return n?o.insertBefore(l):o.insertAfter(l),o}function n(t){if(t instanceof CKEDITOR.dom.selection){var i=t.getRanges(),o=(l=e(t))[0].getAscendant("table"),r=CKEDITOR.tools.buildTableMap(o),s=l[0].getParent().$.rowIndex,a=(l=l[l.length-1]).getParent().$.rowIndex+l.$.rowSpan-1,l=[];for(t.reset(),t=s;t<=a;t++){for(var c=r[t],u=new CKEDITOR.dom.element(o.$.rows[t]),d=0;d<c.length;d++){var h=new CKEDITOR.dom.element(c[d]),f=h.getParent().$.rowIndex;1==h.$.rowSpan?h.remove():(--h.$.rowSpan,f==t&&((f=r[t+1])[d-1]?h.insertAfter(new CKEDITOR.dom.element(f[d-1])):new CKEDITOR.dom.element(o.$.rows[t+1]).append(h,1))),d+=h.$.colSpan-1}l.push(u)}for(r=o.$.rows,i[0].moveToPosition(o,CKEDITOR.POSITION_BEFORE_START),s=new CKEDITOR.dom.element(r[a+1]||(0<s?r[s-1]:null)||o.$.parentNode),t=l.length;0<=t;t--)n(l[t]);return o.$.parentNode?s:(i[0].select(),null)}return t instanceof CKEDITOR.dom.element&&(1==(o=t.getAscendant("table")).$.rows.length?o.remove():t.remove()),null}function i(e){for(var t=e.getParent().$.cells,n=0,i=0;i<t.length;i++){var o=t[i];if(n+=o.colSpan,o==e.$)break}return n-1}function o(e,t){for(var n=t?1/0:0,o=0;o<e.length;o++){var r=i(e[o]);(t?r<n:r>n)&&(n=r)}return n}function r(t,n){for(var i=(s=p(t)?t:e(t))[0].getAscendant("table"),r=o(s,1),s=o(s),a=n?r:s,l=CKEDITOR.tools.buildTableMap(i),c=(i=[],r=[],s=[],l.length),u=0;u<c;u++){var d=n?l[u][a-1]:l[u][a+1];i.push(l[u][a]),r.push(d)}for(u=0;u<c;u++)i[u]&&(1<i[u].colSpan&&r[u]==i[u]?(l=i[u]).colSpan+=1:((l=(a=new CKEDITOR.dom.element(i[u])).clone()).removeAttribute("colSpan"),l.appendBogus(),l[n?"insertBefore":"insertAfter"].call(l,a),s.push(l),l=l.$),u+=l.rowSpan-1);return s}function s(t){CKEDITOR.env.webkit&&!t.isFake&&(t=function(e){var t,n,i=e.getRanges();if(1!==i.length)return e;if((i=i[0]).collapsed||0!==i.endOffset)return e;if("td"!==(n=(t=i.endContainer).getName().toLowerCase())&&"th"!==n)return e;for((n=t.getPrevious())||(n=t.getParent().getPrevious().getLast());n.type!==CKEDITOR.NODE_TEXT&&"br"!==n.getName().toLowerCase();)if(!(n=n.getLast()))return e;return i.setEndAt(n,CKEDITOR.POSITION_BEFORE_END),i.select()}(t));var n,i,o=t.getRanges(),r=(a=e(t))[0],s=a[a.length-1],a=r.getAscendant("table"),l=CKEDITOR.tools.buildTableMap(a),c=[];t.reset();var u=0;for(t=l.length;u<t;u++)for(var d=0,h=l[u].length;d<h;d++)void 0===n&&l[u][d]==r.$&&(n=d),l[u][d]==s.$&&(i=d);for(u=n;u<=i;u++)for(d=0;d<l.length;d++)s=l[d],r=new CKEDITOR.dom.element(a.$.rows[d]),(s=new CKEDITOR.dom.element(s[u])).$&&(1==s.$.colSpan?s.remove():--s.$.colSpan,d+=s.$.rowSpan-1,r.$.cells.length||c.push(r));return n=l[0].length-1>i?new CKEDITOR.dom.element(l[0][i+1]):n&&-1!==l[0][n-1].cellIndex?new CKEDITOR.dom.element(l[0][n-1]):new CKEDITOR.dom.element(a.$.parentNode),c.length==t&&(o[0].moveToPosition(a,CKEDITOR.POSITION_AFTER_END),o[0].select(),a.remove()),n}function a(e,t){var n=e.getStartElement().getAscendant({td:1,th:1},!0);if(n){var i=n.clone();i.appendBogus(),t?i.insertBefore(n):i.insertAfter(n)}}function l(t){if(t instanceof CKEDITOR.dom.selection){var n,i=t.getRanges(),o=e(t),r=o[0]&&o[0].getAscendant("table");e:{var s=0;n=o.length-1;for(var a,u,d={};a=o[s++];)CKEDITOR.dom.element.setMarker(d,a,"delete_cell",!0);for(s=0;a=o[s++];)if((u=a.getPrevious())&&!u.getCustomData("delete_cell")||(u=a.getNext())&&!u.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(d),n=u;break e}CKEDITOR.dom.element.clearAllMarkers(d),n=(s=(s=o[0].getParent()).getPrevious())?s.getLast():(s=(s=o[n].getParent()).getNext())?s.getChild(0):null}for(t.reset(),t=o.length-1;0<=t;t--)l(o[t]);n?c(n,!0):r&&(i[0].moveToPosition(r,CKEDITOR.POSITION_BEFORE_START),i[0].select(),r.remove())}else t instanceof CKEDITOR.dom.element&&(1==(i=t.getParent()).getChildCount()?i.remove():t.remove())}function c(e,t){var n=e.getDocument(),i=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(i.focus(),n.focus()),(n=new CKEDITOR.dom.range(n))["moveToElementEdit"+(t?"End":"Start")](e)||(n.selectNodeContents(e),n.collapse(!t)),n.select(!0)}function u(e,t,n){if(e=e[t],void 0===n)return e;for(t=0;e&&t<e.length;t++){if(n.is&&e[t]==n.$)return t;if(t==n)return new CKEDITOR.dom.element(e[t])}return n.is?-1:null}function d(t,n,i){var o,r=e(t);if((n?1!=r.length:2>r.length)||(o=t.getCommonAncestor())&&o.type==CKEDITOR.NODE_ELEMENT&&o.is("table"))return!1;o=(t=r[0]).getAscendant("table");var s,a=CKEDITOR.tools.buildTableMap(o),l=a.length,c=a[0].length,d=t.getParent().$.rowIndex,h=u(a,d,t);if(n){var f;try{var p=parseInt(t.getAttribute("rowspan"),10)||1;s=parseInt(t.getAttribute("colspan"),10)||1,f=a["up"==n?d-p:"down"==n?d+p:d]["left"==n?h-s:"right"==n?h+s:h]}catch(e){return!1}if(!f||t.$==f)return!1;r["up"==n||"left"==n?"unshift":"push"](new CKEDITOR.dom.element(f))}n=t.getDocument();var g=d,m=(p=f=0,!i&&new CKEDITOR.dom.documentFragment(n)),E=0;for(n=0;n<r.length;n++){var T=(s=r[n]).getParent(),C=s.getFirst(),v=s.$.colSpan,I=s.$.rowSpan,D=u(a,T=T.$.rowIndex,s);E+=v*I,p=Math.max(p,D-h+v),f=Math.max(f,T-d+I),i||((I=(v=s).getBogus())&&I.remove(),v.trim(),s.getChildren().count()&&(T==g||!C||C.isBlockBoundary&&C.isBlockBoundary({br:1})||!(g=m.getLast(CKEDITOR.dom.walker.whitespaces(!0)))||g.is&&g.is("br")||m.append("br"),s.moveChildren(m)),n?s.remove():s.setHtml("")),g=T}if(i)return f*p==E;for(m.moveChildren(t),t.appendBogus(),p>=c?t.removeAttribute("rowSpan"):t.$.rowSpan=f,f>=l?t.removeAttribute("colSpan"):t.$.colSpan=p,n=(r=(i=new CKEDITOR.dom.nodeList(o.$.rows)).count())-1;0<=n;n--)(o=i.getItem(n)).$.cells.length||(o.remove(),r++);return t}function h(t,n){if(1<(i=e(t)).length)return!1;if(n)return!0;var i,o,r=(c=(i=i[0]).getParent()).getAscendant("table"),s=u(d=CKEDITOR.tools.buildTableMap(r),h=c.$.rowIndex,i);if(1<(l=i.$.rowSpan)){o=Math.ceil(l/2);for(var a,l=Math.floor(l/2),c=h+o,d=(r=new CKEDITOR.dom.element(r.$.rows[c]),u(d,c)),h=(c=i.clone(),0);h<d.length;h++){if((a=d[h]).parentNode==r.$&&h>s){c.insertBefore(new CKEDITOR.dom.element(a));break}a=null}a||r.append(c)}else for(l=o=1,(r=c.clone()).insertAfter(c),r.append(c=i.clone()),a=u(d,h),s=0;s<a.length;s++)a[s].rowSpan++;return c.appendBogus(),i.$.rowSpan=o,c.$.rowSpan=l,1==o&&i.removeAttribute("rowSpan"),1==l&&c.removeAttribute("rowSpan"),c}function f(t,n){if(1<(i=e(t)).length)return!1;if(n)return!0;var i,o=(i=i[0]).getParent(),r=o.getAscendant("table"),s=u(r=CKEDITOR.tools.buildTableMap(r),o.$.rowIndex,i);if(1<(a=i.$.colSpan))o=Math.ceil(a/2),a=Math.floor(a/2);else{for(var a=o=1,l=[],c=0;c<r.length;c++){var d=r[c];l.push(d[s]),1<d[s].rowSpan&&(c+=d[s].rowSpan-1)}for(r=0;r<l.length;r++)l[r].colSpan++}return(r=i.clone()).insertAfter(i),r.appendBogus(),i.$.colSpan=o,r.$.colSpan=a,1==o&&i.removeAttribute("colSpan"),1==a&&r.removeAttribute("colSpan"),r}var p=CKEDITOR.tools.isArray;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(i){function o(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function u(e,t){var n=i.addCommand(e,t);i.addFeature(n)}var p=i.lang.table,g=CKEDITOR.tools.style.parse,m="td{width} td{height} td{border-color} td{background-color} td{white-space} td{vertical-align} td{text-align} td[colspan] td[rowspan] th".split(" ");u("cellProperties",new CKEDITOR.dialogCommand("cellProperties",o({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:m,contentTransformations:[[{element:"td",left:function(e){return e.styles.background&&g.background(e.styles.background).color},right:function(e){e.styles["background-color"]=g.background(e.styles.background).color}},{element:"td",check:"td{vertical-align}",left:function(e){return e.attributes&&e.attributes.valign},right:function(e){e.styles["vertical-align"]=e.attributes.valign,delete e.attributes.valign}}],[{element:"tr",check:"td{height}",left:function(e){return e.styles&&e.styles.height},right:function(e){CKEDITOR.tools.array.forEach(e.children,(function(t){t.name in{td:1,th:1}&&(t.attributes["cke-row-height"]=e.styles.height)})),delete e.styles.height}}],[{element:"td",check:"td{height}",left:function(e){return(e=e.attributes)&&e["cke-row-height"]},right:function(e){e.styles.height=e.attributes["cke-row-height"],delete e.attributes["cke-row-height"]}}]]}))),CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),u("rowDelete",o({requiredContent:"table",exec:function(e){(e=n(e=e.getSelection()))&&c(e)}})),u("rowInsertBefore",o({requiredContent:"table",exec:function(n){t(n=e(n=n.getSelection()),!0)}})),u("rowInsertAfter",o({requiredContent:"table",exec:function(n){t(n=e(n=n.getSelection()))}})),u("columnDelete",o({requiredContent:"table",exec:function(e){(e=s(e=e.getSelection()))&&c(e,!0)}})),u("columnInsertBefore",o({requiredContent:"table",exec:function(t){r(t=e(t=t.getSelection()),!0)}})),u("columnInsertAfter",o({requiredContent:"table",exec:function(t){r(t=e(t=t.getSelection()))}})),u("cellDelete",o({requiredContent:"table",exec:function(e){l(e=e.getSelection())}})),u("cellMerge",o({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(e,t){t.cell=d(e.getSelection()),c(t.cell,!0)}})),u("cellMergeRight",o({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e,t){t.cell=d(e.getSelection(),"right"),c(t.cell,!0)}})),u("cellMergeDown",o({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e,t){t.cell=d(e.getSelection(),"down"),c(t.cell,!0)}})),u("cellVerticalSplit",o({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){c(f(e.getSelection()))}})),u("cellHorizontalSplit",o({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){c(h(e.getSelection()))}})),u("cellInsertBefore",o({requiredContent:"table",exec:function(e){a(e=e.getSelection(),!0)}})),u("cellInsertAfter",o({requiredContent:"table",exec:function(e){a(e=e.getSelection())}})),i.addMenuItems&&i.addMenuItems({tablecell:{label:p.cell.menu,group:"tablecell",order:1,getItems:function(){var t=e(n=i.getSelection()),n={tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:d(n,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:d(n,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:d(n,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:f(n,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:h(n,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};return i.filter.check(m)&&(n.tablecell_properties=0<t.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),n}},tablecell_insertBefore:{label:p.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:p.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:p.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:p.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:p.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:p.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:p.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:p.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:p.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:p.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:p.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:p.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:p.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:p.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:p.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:p.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:p.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),i.contextMenu&&i.contextMenu.addListener((function(e,t,n){return(e=n.contains({td:1,th:1},1))&&!e.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null}))},getCellColIndex:i,insertRow:t,insertColumn:r,getSelectedCells:e},CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function(e,t,n,i,o){e=e.$.rows,n=n||0,i="number"==typeof i?i:e.length-1,o="number"==typeof o?o:-1;var r=-1,s=[];for(t=t||0;t<=i;t++){!s[++r]&&(s[r]=[]);for(var a=-1,l=n;l<=(-1===o?e[t].cells.length-1:o)&&(u=e[t].cells[l]);l++){for(a++;s[r][a];)a++;for(var c=isNaN(u.colSpan)?1:u.colSpan,u=isNaN(u.rowSpan)?1:u.rowSpan,d=0;d<u&&!(t+d>i);d++){s[r+d]||(s[r+d]=[]);for(var h=0;h<c;h++)s[r+d][a+h]=e[t].cells[l]}if(a+=c-1,-1!==o&&a>=o)break}}return s},function(){function e(e){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(e)}function t(e,t){var n,i,o=e.getAscendant("table"),r=t.getAscendant("table"),s=CKEDITOR.tools.buildTableMap(o),l=a(e),c=a(t),u=[],d={};for(o.contains(r)&&(c=a(t=t.getAscendant({td:1,th:1}))),l>c&&(o=l,l=c,c=o,o=e,e=t,t=o),o=0;o<s[l].length;o++)if(e.$===s[l][o]){n=o;break}for(o=0;o<s[c].length;o++)if(t.$===s[c][o]){i=o;break}for(n>i&&(o=n,n=i,i=o),o=l;o<=c;o++)for(l=n;l<=i;l++)(r=new CKEDITOR.dom.element(s[o][l])).$&&!r.getCustomData("selected_cell")&&(u.push(r),CKEDITOR.dom.element.setMarker(d,r,"selected_cell",!0));return CKEDITOR.dom.element.clearAllMarkers(d),u}function n(e,t){var n,i=e.editable().find(".cke_table-faked-selection"),o=e.editable().findOne("[data-cke-table-faked-selection-table]");for(e.fire("lockSnapshot"),e.editable().removeClass("cke_table-faked-selection-editor"),n=0;n<i.count();n++)i.getItem(n).removeClass("cke_table-faked-selection");o&&o.data("cke-table-faked-selection-table",!1),e.fire("unlockSnapshot"),t&&(T={active:!1},e.getSelection().isInTable()&&e.getSelection().reset())}function i(e,t){var n,i,o=[];for(i=0;i<t.length;i++)(n=e.createRange()).setStartBefore(t[i]),n.setEndAfter(t[i]),o.push(n);e.getSelection().selectRanges(o)}function o(e){var n=e.editable().find(".cke_table-faked-selection");1>n.count()||i(e,n=t(n.getItem(0),n.getItem(n.count()-1)))}function r(o,r,s){var a,l=p(o.getSelection(!0));if(r=r.is("table")?null:r,(a=T.active&&!T.first)&&!(a=r)&&(a=o.getSelection().getRanges(),a=!!(1<l.length||a[0]&&!a[0].collapsed)),a)T.first=r||l[0],T.dirty=!r&&1!==l.length;else if(T.active&&r&&T.first.getAscendant("table").equals(r.getAscendant("table"))){if(l=t(T.first,r),!T.dirty&&1===l.length&&!e(s.data.getTarget()))return n(o,"mouseup"===s.name);T.dirty=!0,T.last=r,i(o,l)}}function s(e){var t,i=(e=e.editor||e.sender.editor)&&e.getSelection(),o=i&&i.getRanges()||[],r=(r=o&&o[0].getEnclosedNode())&&r.type==CKEDITOR.NODE_ELEMENT&&r.is("img");if(i&&(n(e),i.isInTable()&&i.isFake))if(r)e.getSelection().reset();else if(!o[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored")){for(1===o.length&&o[0]._getTableElement()&&o[0]._getTableElement().is("table")&&(t=o[0]._getTableElement()),t=p(i,t),e.fire("lockSnapshot"),i=0;i<t.length;i++)t[i].addClass("cke_table-faked-selection");0<t.length&&(e.editable().addClass("cke_table-faked-selection-editor"),t[0].getAscendant("table").data("cke-table-faked-selection-table","")),e.fire("unlockSnapshot")}}function a(e){return e.getAscendant("tr",!0).$.rowIndex}function l(t){function i(e){return!e.getAscendant("table",!0)&&e.getDocument().equals(s.document)}if(t.data.getTarget().getName&&("mouseup"===t.name||!e(t.data.getTarget()))){var s=t.editor||t.listenerData.editor,a=s.getSelection(1),c=function(e){return(e=e.editable().findOne(".cke_table-faked-selection"))&&e.getAscendant("table")}(s),u=(d=t.data.getTarget())&&d.getAscendant({td:1,th:1},!0),d=d&&d.getAscendant("table",!0),h={table:1,thead:1,tbody:1,tfoot:1,tr:1,td:1,th:1};d&&d.hasAttribute("data-cke-tableselection-ignored")||(function(e,t,n,o){return!("mousedown"!==e.name||CKEDITOR.tools.getMouseButton(e)!==CKEDITOR.MOUSE_BUTTON_LEFT&&o)||((t=e.name===(CKEDITOR.env.gecko?"mousedown":"mouseup")&&!i(e.data.getTarget()))&&(t=!((e=e.data.getTarget().getAscendant({td:1,th:1},!0))&&e.hasClass("cke_table-faked-selection"))),t)}(t,a,0,d)&&n(s,!0),!T.active&&"mousedown"===t.name&&CKEDITOR.tools.getMouseButton(t)===CKEDITOR.MOUSE_BUTTON_LEFT&&d&&(T={active:!0},CKEDITOR.document.on("mouseup",l,null,{editor:s})),(u||d)&&r(s,u||d,t),"mouseup"===t.name&&(CKEDITOR.tools.getMouseButton(t)===CKEDITOR.MOUSE_BUTTON_LEFT&&(i(t.data.getTarget())||function(e,t){return!(!e||!t)&&(e.equals(t)||e.contains(t)||t.contains(e)||e.getCommonAncestor(t).is(h))}(c,d))&&o(s),T={active:!1},CKEDITOR.document.removeListener("mouseup",l)))}}function c(e){var t=e.data.getTarget().getAscendant("table",!0);t&&t.hasAttribute("data-cke-tableselection-ignored")||(t=e.data.getTarget().getAscendant({td:1,th:1},!0))&&!t.hasClass("cke_table-faked-selection")&&(e.cancel(),e.data.preventDefault())}function u(e){var t=e.editor||e.sender.editor,n=t.getSelection();n.isInTable()&&(n.getRanges()[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored")||function(e,t){var n,i,o,r,s=e.getSelection(),a=s.createBookmarks(),l=e.document,c=e.createRange(),u=l.getDocumentElement().$,d=CKEDITOR.env.ie&&9>CKEDITOR.env.version,h=e.blockless||CKEDITOR.env.ie?"span":"div";l.getById("cke_table_copybin")||(n=l.createElement(h),(i=l.createElement(h)).setAttributes({id:"cke_table_copybin","data-cke-temp":"1"}),n.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),n.setStyle("ltr"==e.config.contentsLangDirection?"left":"right","-5000px"),n.setHtml(e.getSelectedHtml(!0)),e.fire("lockSnapshot"),i.append(n),e.editable().append(i),r=e.on("selectionChange",(function(e){e.cancel()}),null,null,0),d&&(o=u.scrollTop),c.selectNodeContents(n),c.select(),d&&(u.scrollTop=o),setTimeout((function(){i.remove(),s.selectBookmarks(a),r.removeListener(),e.fire("unlockSnapshot"),t&&(e.extractSelectedHtml(),e.fire("saveSnapshot"))}),100))}(t,"cut"===e.name))}function d(e){this._reset(),e&&this.setSelectedCells(e)}function h(e,t,n){e.on("beforeCommandExec",(function(n){-1!==CKEDITOR.tools.array.indexOf(t,n.data.name)&&(n.data.selectedCells=p(e.getSelection()))})),e.on("afterCommandExec",(function(i){-1!==CKEDITOR.tools.array.indexOf(t,i.data.name)&&n(e,i.data)}))}var f,p,g,m,E,T={active:!1};d.prototype={},d.prototype._reset=function(){this.cells={first:null,last:null,all:[]},this.rows={first:null,last:null}},d.prototype.setSelectedCells=function(e){this._reset(),e=e.slice(0),this._arraySortByDOMOrder(e),this.cells.all=e,this.cells.first=e[0],this.cells.last=e[e.length-1],this.rows.first=e[0].getAscendant("tr"),this.rows.last=this.cells.last.getAscendant("tr")},d.prototype.getTableMap=function(){var e,t=g(this.cells.first);e:{var n,i=(e=this.cells.last).getAscendant("table"),o=a(e);for(i=CKEDITOR.tools.buildTableMap(i),n=0;n<i[o].length;n++)if(new CKEDITOR.dom.element(i[o][n]).equals(e)){e=n;break e}e=void 0}return CKEDITOR.tools.buildTableMap(this._getTable(),a(this.rows.first),t,a(this.rows.last),e)},d.prototype._getTable=function(){return this.rows.first.getAscendant("table")},d.prototype.insertRow=function(e,t,n){if(void 0===e)e=1;else if(0>=e)return;for(var i,o=this.cells.first.$.cellIndex,r=this.cells.last.$.cellIndex,s=n?[]:this.cells.all,a=0;a<e;a++)i=m(n?this.cells.all:s,t),i=CKEDITOR.tools.array.filter(i.find("td, th").toArray(),(function(e){return!!n||e.$.cellIndex>=o&&e.$.cellIndex<=r})),s=t?i.concat(s):s.concat(i);this.setSelectedCells(s)},d.prototype.insertColumn=function(e){function t(e){return(e=a(e))>=i&&e<=o}if(void 0===e)e=1;else if(0>=e)return;for(var n=(r=this.cells).all,i=a(r.first),o=a(r.last),r=0;r<e;r++)n=n.concat(CKEDITOR.tools.array.filter(E(n),t));this.setSelectedCells(n)},d.prototype.emptyCells=function(e){e=e||this.cells.all;for(var t=0;t<e.length;t++)e[t].setHtml("")},d.prototype._arraySortByDOMOrder=function(e){e.sort((function(e,t){return e.getPosition(t)&CKEDITOR.POSITION_PRECEDING?-1:1}))};var C={onPaste:function(e){function n(e){return Math.max.apply(null,CKEDITOR.tools.array.map(e,(function(e){return e.length}),0))}var o,r,s=e.editor,a=s.getSelection(),l=p(a),c=a.isInTable(!0)&&this.isBoundarySelection(a),u=this.findTableInPastedContent(s,e.data.dataValue);(function(e,t,n,i){var o=(e=e.getRanges()).length&&e[0]._getTableElement({table:1});return!(!t.length||o&&o.hasAttribute("data-cke-tableselection-ignored")||i&&!n||((t=!i)&&((t=e[0])?((t=t.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),t=(t=t.getEnclosedNode())&&t.is&&t.is(CKEDITOR.dtd.$tableContent)):t=void 0,t=!t),t))})(a,l,u,c)&&(l=l[0].getAscendant("table"),o=new d(p(a,l)),s.once("afterPaste",(function(){var e;if(r){e=new CKEDITOR.dom.element(r[0][0]);var n=r[r.length-1];e=t(e,new CKEDITOR.dom.element(n[n.length-1]))}else e=o.cells.all;i(s,e)})),u?(e.stop(),c?(o.insertRow(1,1===c,!0),a.selectElement(o.rows.first)):(o.emptyCells(),i(s,o.cells.all)),e=o.getTableMap(),r=CKEDITOR.tools.buildTableMap(u),o.insertRow(r.length-e.length),o.insertColumn(n(r)-n(e)),e=o.getTableMap(),this.pasteTable(o,e,r),s.fire("saveSnapshot"),setTimeout((function(){s.fire("afterPaste")}),0)):(function(e){var t=s.createRange();t.selectNodeContents(e),t.select()}(o.cells.first),s.once("afterPaste",(function(){s.fire("lockSnapshot"),o.emptyCells(o.cells.all.slice(1)),i(s,o.cells.all),s.fire("unlockSnapshot")}))))},isBoundarySelection:function(e){var t=(e=e.getRanges()[0]).endContainer.getAscendant("tr",!0);if(t&&e.collapsed){if(e.checkBoundaryOfElement(t,CKEDITOR.START))return 1;if(e.checkBoundaryOfElement(t,CKEDITOR.END))return 2}return 0},findTableInPastedContent:function(e,t){var n=e.dataProcessor,i=new CKEDITOR.dom.element("body");return n||(n=new CKEDITOR.htmlDataProcessor(e)),i.setHtml(n.toHtml(t),{fixForBody:!1}),1<i.getChildCount()?null:i.findOne("table")},pasteTable:function(e,t,n){var i,o,r,s,a,l=g(e.cells.first),c=e._getTable(),u={};for(s=0;s<n.length;s++)for(o=new CKEDITOR.dom.element(c.$.rows[e.rows.first.$.rowIndex+s]),a=0;a<n[s].length;a++)r=new CKEDITOR.dom.element(n[s][a]),i=t[s]&&t[s][a]?new CKEDITOR.dom.element(t[s][a]):null,r&&!r.getCustomData("processed")?(i&&i.getParent()?r.replace(i):(0===a||n[s][a-1])&&((i=0!==a?new CKEDITOR.dom.element(n[s][a-1]):null)&&o.equals(i.getParent())?r.insertAfter(i):0<l?o.$.cells[l]?r.insertAfter(new CKEDITOR.dom.element(o.$.cells[l])):o.append(r):o.append(r,!0)),CKEDITOR.dom.element.setMarker(u,r,"processed",!0)):r.getCustomData("processed")&&i&&i.remove();CKEDITOR.dom.element.clearAllMarkers(u)}};CKEDITOR.plugins.tableselection={getCellsBetween:t,keyboardIntegration:function(e){function t(e){var t=e.getEnclosedNode();t&&"function"==typeof t.is&&t.is({td:1,th:1})?t.setText(""):e.deleteContents(),CKEDITOR.tools.array.forEach(e._find("td"),(function(e){e.appendBogus()}))}var n=e.editable();n.attachListener(n,"keydown",function(e){function n(t,n){if(!n.length)return null;var i=e.createRange(),r=CKEDITOR.dom.range.mergeRanges(n);CKEDITOR.tools.array.forEach(r,(function(e){e.enlarge(CKEDITOR.ENLARGE_ELEMENT)}));var s=(a=r[0].getBoundaryNodes()).startNode,a=a.endNode;if(s&&s.is&&s.is(o)){for(var l=s.getAscendant("table",!0),c=s.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,l),u=!1,d=function(e){return!s.contains(e)&&e.is&&e.is("td","th")};c&&!d(c);)c=c.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,l);return!c&&a&&a.is&&!a.is("table")&&a.getNext()&&(c=a.getNext().findOne("td, th"),u=!0),c?i["moveToElementEdit"+(u?"Start":"End")](c):(i.setStartBefore(s.getAscendant("table",!0)),i.collapse(!0)),r[0].deleteContents(),[i]}return s?(i.moveToElementEditablePosition(s),[i]):void 0}var i={37:1,38:1,39:1,40:1,8:1,46:1,13:1},o=CKEDITOR.tools.extend({table:1},CKEDITOR.dtd.$tableContent);return delete o.td,delete o.th,function(o){var r,s,a,l,c=o.data.getKey(),u=o.data.getKeystroke(),d=37===c||38==c;if(i[c]&&!e.readOnly&&(r=e.getSelection())&&r.isInTable()&&r.isFake)if(a=(s=r.getRanges())[0]._getTableElement(),l=s[s.length-1]._getTableElement(),(13!==c||e.plugins.enterkey)&&(o.data.preventDefault(),o.cancel()),36<c&&41>c)s[0].moveToElementEditablePosition(d?a:l,!d),r.selectRanges([s[0]]);else if(13!==c||13===u||u===CKEDITOR.SHIFT+13){for(o=0;o<s.length;o++)t(s[o]);(o=n(0,s))?s=o:s[0].moveToElementEditablePosition(a),r.selectRanges(s),13===c&&e.plugins.enterkey?(e.fire("lockSnapshot"),13===u?e.execCommand("enter"):e.execCommand("shiftEnter"),e.fire("unlockSnapshot"),e.fire("saveSnapshot")):13!==c&&e.fire("saveSnapshot")}}}(e),null,null,-1),n.attachListener(n,"keypress",(function(n){var i,o=e.getSelection(),r=n.data.$.charCode||13===n.data.getKey();if(!e.readOnly&&o&&o.isInTable()&&o.isFake&&r&&!(n.data.getKeystroke()&CKEDITOR.CTRL)){for(r=(n=o.getRanges())[0].getEnclosedNode().getAscendant({td:1,th:1},!0),i=0;i<n.length;i++)t(n[i]);r&&(n[0].moveToElementEditablePosition(r),o.selectRanges([n[0]]))}}),null,null,-1)}},CKEDITOR.plugins.add("tableselection",{requires:"clipboard,tabletools",isSupportedEnvironment:function(){return!(CKEDITOR.env.ie&&11>CKEDITOR.env.version)},onLoad:function(){f=CKEDITOR.plugins.tabletools,p=f.getSelectedCells,g=f.getCellColIndex,m=f.insertRow,E=f.insertColumn,CKEDITOR.document.appendStyleSheet(this.path+"styles/tableselection.css")},init:function(e){this.isSupportedEnvironment()&&(e.addContentsCss&&e.addContentsCss(this.path+"styles/tableselection.css"),e.on("contentDom",(function(){var t=e.editable(),n=t.isInline()?t:e.document,i={editor:e};t.attachListener(n,"mousedown",l,null,i),t.attachListener(n,"mousemove",l,null,i),t.attachListener(n,"mouseup",l,null,i),t.attachListener(t,"dragstart",c),t.attachListener(e,"selectionCheck",s),CKEDITOR.plugins.tableselection.keyboardIntegration(e),CKEDITOR.plugins.clipboard&&!CKEDITOR.plugins.clipboard.isCustomCopyCutSupported&&(t.attachListener(t,"cut",u),t.attachListener(t,"copy",u))})),e.on("paste",C.onPaste,C),h(e,"rowInsertBefore rowInsertAfter columnInsertBefore columnInsertAfter cellInsertBefore cellInsertAfter".split(" "),(function(e,t){i(e,t.selectedCells)})),h(e,["cellMerge","cellMergeRight","cellMergeDown"],(function(e,t){i(e,[t.commandData.cell])})),h(e,["cellDelete"],(function(e){n(e,!0)})))}})}(),function(){var e=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],t={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(t){function i(e){s.enabled&&!1!==e.data.command.canUndo&&s.save()}function o(){s.enabled=!t.readOnly&&"wysiwyg"==t.mode,s.onChange()}var s=t.undoManager=new n(t),a=s.editingHandler=new r(s),l=t.addCommand("undo",{exec:function(){s.undo()&&(t.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),c=t.addCommand("redo",{exec:function(){s.redo()&&(t.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});t.setKeystroke([[e[0],"undo"],[e[1],"redo"],[e[2],"redo"]]),s.onChange=function(){l.setState(s.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),c.setState(s.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},t.on("beforeCommandExec",i),t.on("afterCommandExec",i),t.on("saveSnapshot",(function(e){s.save(e.data&&e.data.contentOnly)})),t.on("contentDom",a.attachListeners,a),t.on("instanceReady",(function(){t.fire("saveSnapshot")})),t.on("beforeModeUnload",(function(){"wysiwyg"==t.mode&&s.save(!0)})),t.on("mode",o),t.on("readOnly",o),t.ui.addButton&&(t.ui.addButton("Undo",{label:t.lang.undo.undo,command:"undo",toolbar:"undo,10"}),t.ui.addButton("Redo",{label:t.lang.undo.redo,command:"redo",toolbar:"undo,20"})),t.resetUndo=function(){s.reset(),t.fire("saveSnapshot")},t.on("updateSnapshot",(function(){s.currentImage&&s.update()})),t.on("lockSnapshot",(function(e){e=e.data,s.lock(e&&e.dontUpdate,e&&e.forceUpdate)})),t.on("unlockSnapshot",s.unlock,s)}}),CKEDITOR.plugins.undo={};var n=CKEDITOR.plugins.undo.UndoManager=function(e){this.strokesRecorded=[0,0],this.locked=null,this.previousKeyGroup=-1,this.limit=e.config.undoStackSize||20,this.strokesLimit=25,this._filterRules=[],this.editor=e,this.reset(),CKEDITOR.env.ie&&this.addFilterRule((function(e){return e.replace(/\s+data-cke-expando=".*?"/g,"")}))};n.prototype={type:function(e,t){var i=n.getKeyGroup(e),o=this.strokesRecorded[i]+1;t=t||o>=this.strokesLimit,this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange()),t?(o=0,this.editor.fire("saveSnapshot")):this.editor.fire("change"),this.strokesRecorded[i]=o,this.previousKeyGroup=i},keyGroupChanged:function(e){return n.getKeyGroup(e)!=this.previousKeyGroup},reset:function(){this.snapshots=[],this.index=-1,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.strokesRecorded=[0,0],this.typing=!1,this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(e,t,n){var o=this.editor;if(this.locked||"ready"!=o.status||"wysiwyg"!=o.mode)return!1;var r=o.editable();if(!r||"ready"!=r.status)return!1;if(r=this.snapshots,t||(t=new i(o)),!1===t.contents)return!1;if(this.currentImage)if(t.equalsContent(this.currentImage)){if(e||t.equalsSelection(this.currentImage))return!1}else!1!==n&&o.fire("change");return r.splice(this.index+1,r.length-this.index-1),r.length==this.limit&&r.shift(),this.index=r.push(t)-1,this.currentImage=t,!1!==n&&this.refreshState(),!0},restoreImage:function(e){var t,n=this.editor;e.bookmarks&&(n.focus(),t=n.getSelection()),this.locked={level:999},this.editor.loadSnapshot(e.contents),e.bookmarks?t.selectBookmarks(e.bookmarks):CKEDITOR.env.ie&&((t=this.editor.document.getBody().$.createTextRange()).collapse(!0),t.select()),this.locked=null,this.index=e.index,this.currentImage=this.snapshots[this.index],this.update(),this.refreshState(),n.fire("change")},getNextImage:function(e){var t,n=this.snapshots,i=this.currentImage;if(i)if(e){for(t=this.index-1;0<=t;t--)if(e=n[t],!i.equalsContent(e))return e.index=t,e}else for(t=this.index+1;t<n.length;t++)if(e=n[t],!i.equalsContent(e))return e.index=t,e;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var e=this.getNextImage(!0);if(e)return this.restoreImage(e),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var e=this.getNextImage(!1);if(e)return this.restoreImage(e),!0}return!1},update:function(e){if(!this.locked){e||(e=new i(this.editor));for(var t=this.index,n=this.snapshots;0<t&&this.currentImage.equalsContent(n[t-1]);)--t;n.splice(t,this.index-t+1,e),this.index=t,this.currentImage=e}},updateSelection:function(e){if(!this.snapshots.length)return!1;var t=this.snapshots,n=t[t.length-1];return!(!n.equalsContent(e)||n.equalsSelection(e)||(this.currentImage=t[t.length-1]=e,0))},lock:function(e,t){if(this.locked)this.locked.level++;else if(e)this.locked={level:1};else{var n=null;if(t)n=!0;else{var o=new i(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(o)&&(n=o)}this.locked={update:n,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var e=this.locked.update;if(this.locked=null,!0===e)this.update();else if(e){var t=new i(this.editor,!0);e.equalsContent(t)||this.update()}}},addFilterRule:function(e){this._filterRules.push(e)}},n.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1},n.keyGroups={PRINTABLE:0,FUNCTIONAL:1},n.isNavigationKey=function(e){return!!n.navigationKeyCodes[e]},n.getKeyGroup=function(e){var i=n.keyGroups;return t[e]?i.FUNCTIONAL:i.PRINTABLE},n.getOppositeKeyGroup=function(e){var t=n.keyGroups;return e==t.FUNCTIONAL?t.PRINTABLE:t.FUNCTIONAL},n.ieFunctionalKeysBug=function(e){return CKEDITOR.env.ie&&n.getKeyGroup(e)==n.keyGroups.FUNCTIONAL};var i=CKEDITOR.plugins.undo.Image=function(e,t){this.editor=e,e.fire("beforeUndoImage");var n=e.getSnapshot();n&&(this.contents=function(e,t){return CKEDITOR.tools.array.reduce(t,(function(e,t){return t(e)}),e)}(n,e.undoManager._filterRules)),t||(this.bookmarks=(n=n&&e.getSelection())&&n.createBookmarks2(!0)),e.fire("afterUndoImage")},o=/\b(?:href|src|name)="[^"]*?"/gi;i.prototype={equalsContent:function(e){var t=this.contents;return e=e.contents,CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(t=t.replace(o,""),e=e.replace(o,"")),t==e},equalsSelection:function(e){var t=this.bookmarks;if(e=e.bookmarks,t||e){if(!t||!e||t.length!=e.length)return!1;for(var n=0;n<t.length;n++){var i=t[n],o=e[n];if(i.startOffset!=o.startOffset||i.endOffset!=o.endOffset||!CKEDITOR.tools.arrayCompare(i.start,o.start)||!CKEDITOR.tools.arrayCompare(i.end,o.end))return!1}}return!0}};var r=CKEDITOR.plugins.undo.NativeEditingHandler=function(e){this.undoManager=e,this.ignoreInputEvent=!1,this.keyEventsStack=new s,this.lastKeydownImage=null};r.prototype={onKeydown:function(t){var o=t.data.getKey();229!==o&&(-1<CKEDITOR.tools.indexOf(e,t.data.getKeystroke())?t.data.preventDefault():(this.keyEventsStack.cleanUp(t),t=this.undoManager,this.keyEventsStack.getLast(o)||this.keyEventsStack.push(o),this.lastKeydownImage=new i(t.editor),(n.isNavigationKey(o)||this.undoManager.keyGroupChanged(o))&&(t.strokesRecorded[0]||t.strokesRecorded[1])&&(t.save(!1,this.lastKeydownImage,!1),t.resetType())))},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var e=this.keyEventsStack.getLast();e||(e=this.keyEventsStack.push(0)),this.keyEventsStack.increment(e.keyCode),this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(e.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(e){var t=this.undoManager;e=e.data.getKey();var o=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(e),n.ieFunctionalKeysBug(e)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new i(t.editor,!0))||(0<o?t.type(e):n.isNavigationKey(e)&&this.onNavigationKey(!0))},onNavigationKey:function(e){var t=this.undoManager;!e&&t.save(!0,null,!1)||t.updateSelection(new i(t.editor)),t.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},activateInputEventListener:function(){this.ignoreInputEvent=!1},attachListeners:function(){var e=this.undoManager.editor,t=e.editable(),i=this;t.attachListener(t,"keydown",(function(e){i.onKeydown(e),n.ieFunctionalKeysBug(e.data.getKey())&&i.onInput()}),null,null,999),t.attachListener(t,CKEDITOR.env.ie?"keypress":"input",i.onInput,i,null,999),t.attachListener(t,"keyup",i.onKeyup,i,null,999),t.attachListener(t,"paste",i.ignoreInputEventListener,i,null,999),t.attachListener(t,"drop",i.ignoreInputEventListener,i,null,999),e.on("afterPaste",i.activateInputEventListener,i,null,999),t.attachListener(t.isInline()?t:e.document.getDocumentElement(),"click",(function(){i.onNavigationKey()}),null,null,999),t.attachListener(this.undoManager.editor,"blur",(function(){i.keyEventsStack.remove(9)}),null,null,999)}};var s=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};s.prototype={push:function(e){return e=this.stack.push({keyCode:e,inputs:0}),this.stack[e-1]},getLastIndex:function(e){if("number"!=typeof e)return this.stack.length-1;for(var t=this.stack.length;t--;)if(this.stack[t].keyCode==e)return t;return-1},getLast:function(e){return-1!=(e=this.getLastIndex(e))?this.stack[e]:null},increment:function(e){this.getLast(e).inputs++},remove:function(e){-1!=(e=this.getLastIndex(e))&&this.stack.splice(e,1)},resetInputs:function(e){if("number"==typeof e)this.getLast(e).inputs=0;else for(e=this.stack.length;e--;)this.stack[e].inputs=0},getTotalInputs:function(){for(var e=this.stack.length,t=0;e--;)t+=this.stack[e].inputs;return t},cleanUp:function(e){(e=e.data.$).ctrlKey||e.metaKey||this.remove(17),e.shiftKey||this.remove(16),e.altKey||this.remove(18)}}}(),function(){function e(e,t){CKEDITOR.tools.extend(this,{editor:e,editable:e.editable(),doc:e.document,win:e.window},t,!0),this.inline=this.editable.isInline(),this.inline||(this.frame=this.win.getFrame()),this.target=this[this.inline?"editable":"doc"]}function t(e,t){CKEDITOR.tools.extend(this,t,{editor:e},!0)}function n(e,t){var n=e.editable();CKEDITOR.tools.extend(this,{editor:e,editable:n,inline:n.isInline(),doc:e.document,win:e.window,container:CKEDITOR.document.getBody(),winTop:CKEDITOR.document.getWindow()},t,!0),this.hidden={},this.visible={},this.inline||(this.frame=this.win.getFrame()),this.queryViewport();var i=CKEDITOR.tools.bind(this.queryViewport,this),s=CKEDITOR.tools.bind(this.hideVisible,this),a=CKEDITOR.tools.bind(this.removeAll,this);n.attachListener(this.winTop,"resize",i),n.attachListener(this.winTop,"scroll",i),n.attachListener(this.winTop,"resize",s),n.attachListener(this.win,"scroll",s),n.attachListener(this.inline?n:this.frame,"mouseout",(function(e){var t=e.data.$.clientX;e=e.data.$.clientY,this.queryViewport(),(t<=this.rect.left||t>=this.rect.right||e<=this.rect.top||e>=this.rect.bottom)&&this.hideVisible(),(0>=t||t>=this.winTopPane.width||0>=e||e>=this.winTopPane.height)&&this.hideVisible()}),this),n.attachListener(e,"resize",i),n.attachListener(e,"mode",a),e.on("destroy",a),this.lineTpl=new CKEDITOR.template('<div data-cke-lineutils-line="1" class="cke_reset_all" style="{lineStyle}"><span style="{tipLeftStyle}">&nbsp;</span><span style="{tipRightStyle}">&nbsp;</span></div>').output({lineStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},r,this.lineStyle,!0)),tipLeftStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},o,{left:"0px","border-left-color":"red","border-width":"6px 0 6px 6px"},this.tipCss,this.tipLeftStyle,!0)),tipRightStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},o,{right:"0px","border-right-color":"red","border-width":"6px 6px 6px 0"},this.tipCss,this.tipRightStyle,!0))})}function i(e){var t;return(t=e&&e.type==CKEDITOR.NODE_ELEMENT)&&(t=!(s[e.getComputedStyle("float")]||s[e.getAttribute("align")])),t&&!a[e.getComputedStyle("position")]}CKEDITOR.plugins.add("lineutils"),CKEDITOR.LINEUTILS_BEFORE=1,CKEDITOR.LINEUTILS_AFTER=2,CKEDITOR.LINEUTILS_INSIDE=4,e.prototype={start:function(e){var t,n,i,o,r=this,s=this.editor,a=this.doc,l=CKEDITOR.tools.eventsBuffer(50,(function(){s.readOnly||"wysiwyg"!=s.mode||(r.relations={},(n=a.$.elementFromPoint(i,o))&&n.nodeType&&(t=new CKEDITOR.dom.element(n),r.traverseSearch(t),isNaN(i+o)||r.pixelSearch(t,i,o),e&&e(r.relations,i,o)))}));this.listener=this.editable.attachListener(this.target,"mousemove",(function(e){i=e.data.$.clientX,o=e.data.$.clientY,l.input()})),this.editable.attachListener(this.inline?this.editable:this.frame,"mouseout",(function(){l.reset()}))},stop:function(){this.listener&&this.listener.removeListener()},getRange:function(){var e={};return e[CKEDITOR.LINEUTILS_BEFORE]=CKEDITOR.POSITION_BEFORE_START,e[CKEDITOR.LINEUTILS_AFTER]=CKEDITOR.POSITION_AFTER_END,e[CKEDITOR.LINEUTILS_INSIDE]=CKEDITOR.POSITION_AFTER_START,function(t){var n=this.editor.createRange();return n.moveToPosition(this.relations[t.uid].element,e[t.type]),n}}(),store:function(){function e(e,t,n){var i=e.getUniqueId();i in n?n[i].type|=t:n[i]={element:e,type:t}}return function(t,n){var o;n&CKEDITOR.LINEUTILS_AFTER&&i(o=t.getNext())&&o.isVisible()&&(e(o,CKEDITOR.LINEUTILS_BEFORE,this.relations),n^=CKEDITOR.LINEUTILS_AFTER),n&CKEDITOR.LINEUTILS_INSIDE&&i(o=t.getFirst())&&o.isVisible()&&(e(o,CKEDITOR.LINEUTILS_BEFORE,this.relations),n^=CKEDITOR.LINEUTILS_INSIDE),e(t,n,this.relations)}}(),traverseSearch:function(e){var t,n,o;do{if(!(o=e.$["data-cke-expando"])||!(o in this.relations)){if(e.equals(this.editable))break;if(i(e))for(t in this.lookups)(n=this.lookups[t](e))&&this.store(e,n)}}while((!e||e.type!=CKEDITOR.NODE_ELEMENT||"true"!=e.getAttribute("contenteditable"))&&(e=e.getParent()))},pixelSearch:function(){function e(e,n,o,r,s){for(var a,l=0;s(o)&&(o+=r,25!=++l);)if(a=this.doc.$.elementFromPoint(n,o))if(a==e)l=0;else if(t(e,a)&&(l=0,i(a=new CKEDITOR.dom.element(a))))return a}var t=CKEDITOR.env.ie||CKEDITOR.env.webkit?function(e,t){return e.contains(t)}:function(e,t){return!!(16&e.compareDocumentPosition(t))};return function(t,n,o){var r=this.win.getViewPaneSize().height,s=e.call(this,t.$,n,o,-1,(function(e){return 0<e}));if(n=e.call(this,t.$,n,o,1,(function(e){return e<r})),s)for(this.traverseSearch(s);!s.getParent().equals(t);)s=s.getParent();if(n)for(this.traverseSearch(n);!n.getParent().equals(t);)n=n.getParent();for(;(s||n)&&(s&&(s=s.getNext(i)),s&&!s.equals(n))&&(this.traverseSearch(s),n&&(n=n.getPrevious(i)),n&&!n.equals(s));)this.traverseSearch(n)}}(),greedySearch:function(){this.relations={};for(var e,t,n,o=this.editable.getElementsByTag("*"),r=0;e=o.getItem(r++);)if(!e.equals(this.editable)&&e.type==CKEDITOR.NODE_ELEMENT&&(e.hasAttribute("contenteditable")||!e.isReadOnly())&&i(e)&&e.isVisible())for(n in this.lookups)(t=this.lookups[n](e))&&this.store(e,t);return this.relations}},t.prototype={locate:function(){function e(e,t){var n=e.element[t===CKEDITOR.LINEUTILS_BEFORE?"getPrevious":"getNext"]();return n&&i(n)?(e.siblingRect=n.getClientRect(),t==CKEDITOR.LINEUTILS_BEFORE?(e.siblingRect.bottom+e.elementRect.top)/2:(e.elementRect.bottom+e.siblingRect.top)/2):t==CKEDITOR.LINEUTILS_BEFORE?e.elementRect.top:e.elementRect.bottom}return function(t){var n;for(var i in this.locations={},t)(n=t[i]).elementRect=n.element.getClientRect(),n.type&CKEDITOR.LINEUTILS_BEFORE&&this.store(i,CKEDITOR.LINEUTILS_BEFORE,e(n,CKEDITOR.LINEUTILS_BEFORE)),n.type&CKEDITOR.LINEUTILS_AFTER&&this.store(i,CKEDITOR.LINEUTILS_AFTER,e(n,CKEDITOR.LINEUTILS_AFTER)),n.type&CKEDITOR.LINEUTILS_INSIDE&&this.store(i,CKEDITOR.LINEUTILS_INSIDE,(n.elementRect.top+n.elementRect.bottom)/2);return this.locations}}(),sort:function(){var e,t,n,i;return function(o,r){for(var s in e=this.locations,t=[],e)for(var a in e[s])if(n=Math.abs(o-e[s][a]),t.length){for(i=0;i<t.length;i++)if(n<t[i].dist){t.splice(i,0,{uid:+s,type:a,dist:n});break}i==t.length&&t.push({uid:+s,type:a,dist:n})}else t.push({uid:+s,type:a,dist:n});return void 0!==r?t.slice(0,r):t}}(),store:function(e,t,n){this.locations[e]||(this.locations[e]={}),this.locations[e][t]=n}};var o={display:"block",width:"0px",height:"0px","border-color":"transparent","border-style":"solid",position:"absolute",top:"-6px"},r={height:"0px","border-top":"1px dashed red",position:"absolute","z-index":9999};n.prototype={removeAll:function(){for(var e in this.hidden)this.hidden[e].remove(),delete this.hidden[e];for(e in this.visible)this.visible[e].remove(),delete this.visible[e]},hideLine:function(e){var t=e.getUniqueId();e.hide(),this.hidden[t]=e,delete this.visible[t]},showLine:function(e){var t=e.getUniqueId();e.show(),this.visible[t]=e,delete this.hidden[t]},hideVisible:function(){for(var e in this.visible)this.hideLine(this.visible[e])},placeLine:function(e,t){var n,i,o;if(n=this.getStyle(e.uid,e.type)){for(o in this.visible)if(this.visible[o].getCustomData("hash")!==this.hash){i=this.visible[o];break}if(!i)for(o in this.hidden)if(this.hidden[o].getCustomData("hash")!==this.hash){this.showLine(i=this.hidden[o]);break}i||this.showLine(i=this.addLine()),i.setCustomData("hash",this.hash),this.visible[i.getUniqueId()]=i,i.setStyles(n),t&&t(i)}},getStyle:function(e,t){var n=this.relations[e],i=this.locations[e][t],o={};if(o.width=n.siblingRect?Math.max(n.siblingRect.width,n.elementRect.width):n.elementRect.width,o.top=this.inline?i+this.winTopScroll.y-this.rect.relativeY:this.rect.top+this.winTopScroll.y+i,o.top-this.winTopScroll.y<this.rect.top||o.top-this.winTopScroll.y>this.rect.bottom)return!1;for(var r in this.inline?o.left=n.elementRect.left-this.rect.relativeX:(0<n.elementRect.left?o.left=this.rect.left+n.elementRect.left:(o.width+=n.elementRect.left,o.left=this.rect.left),0<(n=o.left+o.width-(this.rect.left+this.winPane.width))&&(o.width-=n)),o.left+=this.winTopScroll.x,o)o[r]=CKEDITOR.tools.cssLength(o[r]);return o},addLine:function(){var e=CKEDITOR.dom.element.createFromHtml(this.lineTpl);return e.appendTo(this.container),e},prepare:function(e,t){this.relations=e,this.locations=t,this.hash=Math.random()},cleanup:function(){var e,t;for(t in this.visible)(e=this.visible[t]).getCustomData("hash")!==this.hash&&this.hideLine(e)},queryViewport:function(){this.winPane=this.win.getViewPaneSize(),this.winTopScroll=this.winTop.getScrollPosition(),this.winTopPane=this.winTop.getViewPaneSize(),this.rect=this.getClientRect(this.inline?this.editable:this.frame)},getClientRect:function(e){e=e.getClientRect();var t=this.container.getDocumentPosition(),n=this.container.getComputedStyle("position");return e.relativeX=e.relativeY=0,"static"!=n&&(e.relativeY=t.y,e.relativeX=t.x,e.top-=e.relativeY,e.bottom-=e.relativeY,e.left-=e.relativeX,e.right-=e.relativeX),e}};var s={left:1,right:1,center:1},a={absolute:1,fixed:1};CKEDITOR.plugins.lineutils={finder:e,locator:t,liner:n}}(),function(){function e(e){return e.getName&&!e.hasAttribute("data-cke-temp")}CKEDITOR.plugins.add("widgetselection",{init:function(e){if(CKEDITOR.env.webkit){var t=CKEDITOR.plugins.widgetselection;e.on("contentDom",(function(e){var n=(e=e.editor).editable();n.attachListener(n,"keydown",(function(e){e.data.getKeystroke()==CKEDITOR.CTRL+65&&CKEDITOR.tools.setTimeout((function(){t.addFillers(n)||t.removeFillers(n)}),0)}),null,null,-1),e.on("selectionCheck",(function(e){t.removeFillers(e.editor.editable())})),e.on("paste",(function(e){e.data.dataValue=t.cleanPasteData(e.data.dataValue)})),"selectall"in e.plugins&&t.addSelectAllIntegration(e)}))}}}),CKEDITOR.plugins.widgetselection={startFiller:null,endFiller:null,fillerAttribute:"data-cke-filler-webkit",fillerContent:"&nbsp;",fillerTagName:"div",addFillers:function(t){var n=t.editor;if(!this.isWholeContentSelected(t)&&0<t.getChildCount()){var i=t.getFirst(e),o=t.getLast(e);if(i&&i.type==CKEDITOR.NODE_ELEMENT&&!i.isEditable()&&(this.startFiller=this.createFiller(),t.append(this.startFiller,1)),o&&o.type==CKEDITOR.NODE_ELEMENT&&!o.isEditable()&&(this.endFiller=this.createFiller(!0),t.append(this.endFiller,0)),this.hasFiller(t))return(n=n.createRange()).selectNodeContents(t),n.select(),!0}return!1},removeFillers:function(e){if(this.hasFiller(e)&&!this.isWholeContentSelected(e)){var t=e.findOne(this.fillerTagName+"["+this.fillerAttribute+"=start]"),n=e.findOne(this.fillerTagName+"["+this.fillerAttribute+"=end]");this.startFiller&&t&&this.startFiller.equals(t)?this.removeFiller(this.startFiller,e):this.startFiller=t,this.endFiller&&n&&this.endFiller.equals(n)?this.removeFiller(this.endFiller,e):this.endFiller=n}},cleanPasteData:function(e){return e&&e.length&&(e=e.replace(this.createFillerRegex(),"").replace(this.createFillerRegex(!0),"")),e},isWholeContentSelected:function(e){var t=e.editor.getSelection().getRanges()[0];return!(!t||t&&t.collapsed||((t=t.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),!(t&&e&&t.startContainer&&t.endContainer&&0===t.startOffset&&t.endOffset===e.getChildCount()&&t.startContainer.equals(e)&&t.endContainer.equals(e))))},hasFiller:function(e){return 0<e.find(this.fillerTagName+"["+this.fillerAttribute+"]").count()},createFiller:function(e){var t=new CKEDITOR.dom.element(this.fillerTagName);return t.setHtml(this.fillerContent),t.setAttribute(this.fillerAttribute,e?"end":"start"),t.setAttribute("data-cke-temp",1),t.setStyles({display:"block",width:0,height:0,padding:0,border:0,margin:0,position:"absolute",top:0,left:"-9999px",opacity:0,overflow:"hidden"}),t},removeFiller:function(e,t){if(e){var n,i,o=t.editor,r=t.editor.getSelection().getRanges()[0].startPath(),s=o.createRange();r.contains(e)&&(n=e.getHtml(),i=!0),r="start"==e.getAttribute(this.fillerAttribute),e.remove(),n&&0<n.length&&n!=this.fillerContent?(t.insertHtmlIntoRange(n,o.getSelection().getRanges()[0]),s.setStartAt(t.getChild(t.getChildCount()-1),CKEDITOR.POSITION_BEFORE_END),o.getSelection().selectRanges([s])):i&&(r?s.setStartAt(t.getFirst().getNext(),CKEDITOR.POSITION_AFTER_START):s.setEndAt(t.getLast().getPrevious(),CKEDITOR.POSITION_BEFORE_END),t.editor.getSelection().selectRanges([s]))}},createFillerRegex:function(e){var t=this.createFiller(e).getOuterHtml().replace(/style="[^"]*"/gi,'style="[^"]*"').replace(/>[^<]*</gi,">[^<]*<");return new RegExp((e?"":"^")+t+(e?"$":""))},addSelectAllIntegration:function(e){var t=this;e.editable().attachListener(e,"beforeCommandExec",(function(n){var i=e.editable();"selectAll"==n.data.name&&i&&t.addFillers(i)}),null,null,9999)}}}(),function(){function t(e){this.editor=e,this.registered={},this.instances={},this.selected=[],this.widgetHoldingFocusedEditable=this.focused=null,this._={nextId:0,upcasts:[],upcastCallbacks:[],filters:{}},function(e){var t,i,o=e.editor;o.on("toHtml",(function(i){var o,r=function(e){var t=[],i=e._.upcasts,o=e._.upcastCallbacks;return{toBeWrapped:t,iterator:function(e){var r,s,a,l,c;if("data-cke-widget-wrapper"in e.attributes)return(e=e.getFirst(n.isParserWidgetElement))&&t.push([e]),!1;if("data-widget"in e.attributes)return t.push([e]),!1;if(c=i.length){if(e.attributes["data-cke-widget-upcasted"])return!1;for(l=0,r=o.length;l<r;++l)if(!1===o[l](e))return;for(l=0;l<c;++l)if(a={},s=(r=i[l])[0](e,a))return s instanceof CKEDITOR.htmlParser.element&&(e=s),e.attributes["data-cke-widget-data"]=encodeURIComponent(JSON.stringify(a)),e.attributes["data-cke-widget-upcasted"]=1,t.push([e,r[1]]),!1}}}}(e);for(i.data.dataValue.forEach(r.iterator,CKEDITOR.NODE_ELEMENT,!0);o=r.toBeWrapped.pop();){var s=o[0],a=s.parent;a.type==CKEDITOR.NODE_ELEMENT&&a.attributes["data-cke-widget-wrapper"]&&a.replaceWith(s),e.wrapElement(o[0],o[1])}t=i.data.protectedWhitespaces?3==i.data.dataValue.children.length&&n.isParserWidgetWrapper(i.data.dataValue.children[1]):1==i.data.dataValue.children.length&&n.isParserWidgetWrapper(i.data.dataValue.children[0])}),null,null,8),o.on("dataReady",(function(){if(i)for(var t,r,s=o.editable().find(".cke_widget_wrapper"),a=0,l=s.count();a<l;++a)(r=(t=s.getItem(a)).getFirst(n.isDomWidgetElement)).type==CKEDITOR.NODE_ELEMENT&&r.data("widget")?(r.replace(t),e.wrapElement(r)):t.remove();i=0,e.destroyAll(!0),e.initOnAll()})),o.on("loadSnapshot",(function(t){/data-cke-widget/.test(t.data)&&(i=1),e.destroyAll(!0)}),null,null,9),o.on("paste",(function(e){(e=e.data).dataValue=e.dataValue.replace(w,g),e.range&&(e=n.getNestedEditable(o.editable(),e.range.startContainer))&&(e=CKEDITOR.filter.instances[e.data("cke-filter")])&&o.setActiveFilter(e)})),o.on("afterInsertHtml",(function(n){n.data.intoRange?e.checkWidgets({initOnlyNew:!0}):(o.fire("lockSnapshot"),e.checkWidgets({initOnlyNew:!0,focusInited:t}),o.fire("unlockSnapshot"))}))}(this),function(e){var t=e.editor,i={};t.on("toDataFormat",(function(t){var o=CKEDITOR.tools.getNextNumber(),r=[];t.data.downcastingSessionId=o,i[o]=r,t.data.dataValue.forEach((function(t){var i,o=t.attributes;if("data-cke-widget-white-space"in o){i=a(t);var s=l(t);i.parent.attributes["data-cke-white-space-first"]&&(i.value=i.value.replace(/^&nbsp;/g," ")),s.parent.attributes["data-cke-white-space-last"]&&(s.value=s.value.replace(/&nbsp;$/g," "))}if("data-cke-widget-id"in o)(o=e.instances[o["data-cke-widget-id"]])&&(i=t.getFirst(n.isParserWidgetElement),r.push({wrapper:t,element:i,widget:o,editables:{}}),"1"!=i.attributes["data-cke-widget-keep-attr"]&&delete i.attributes["data-widget"]);else if("data-cke-widget-editable"in o)return 0<r.length&&(r[r.length-1].editables[o["data-cke-widget-editable"]]=t),!1}),CKEDITOR.NODE_ELEMENT,!0)}),null,null,8),t.on("toDataFormat",(function(e){if(e.data.downcastingSessionId)for(var t,n,o,r,s,a,l=i[e.data.downcastingSessionId];t=l.shift();){for(a in n=t.widget,o=t.element,r=n._.downcastFn&&n._.downcastFn.call(n,o),e.data.widgetsCopy&&n.getClipboardHtml&&(r=(r=CKEDITOR.htmlParser.fragment.fromHtml(n.getClipboardHtml())).children[0]),t.editables)delete(s=t.editables[a]).attributes.contenteditable,s.setHtml(n.editables[a].getData());r||(r=o),t.wrapper.replaceWith(r)}}),null,null,13),t.on("contentDomUnload",(function(){e.destroyAll(!0)}))}(this),this.on("checkWidgets",r),this.editor.on("contentDomInvalidated",this.checkWidgets,this),function(e){function t(e){return e?e.type==CKEDITOR.NODE_TEXT?t(e.getParent()):r.widgets.getByElement(e):null}function i(){e.fire("checkSelection")}var r=e.editor;r.on("selectionCheck",i),r.on("contentDom",(function(){r.editable().attachListener(r,"key",(function(){setTimeout(i,10)}))})),CKEDITOR.env.ie||e.on("checkSelection",(function(){var e=r.getSelection();if(e&&(e=e.getRanges()[0])&&!e.collapsed){var n=t(e.startContainer),i=t(e.endContainer);!n&&i?(e.setEndBefore(i.wrapper),e.select()):n&&!i&&(e.setStartAfter(n.wrapper),e.select())}})),e.on("checkSelection",e.checkSelection,e),r.on("selectionChange",(function(t){var i=(t=n.getNestedEditable(r.editable(),t.data.selection.getStartElement()))&&e.getByElement(t),o=e.widgetHoldingFocusedEditable;o?o===i&&o.focusedEditable.equals(t)||(p(e,o,null),i&&t&&p(e,i,t)):i&&t&&p(e,i,t)})),r.on("dataReady",(function(){m(e).commit()})),r.on("blur",(function(){var t;(t=e.focused)&&o(e,t),(t=e.widgetHoldingFocusedEditable)&&p(e,t,null)}))}(this),function(e){var t=e.editor;t.on("contentDom",(function(){var i,o,r=t.editable(),s=r.isInline()?r:t.document;r.attachListener(s,"mousedown",(function(r){var s=r.data.getTarget();i=s instanceof CKEDITOR.dom.element?e.getByElement(s):null,o=0,i&&(i.inline&&s.type==CKEDITOR.NODE_ELEMENT&&s.hasAttribute("data-cke-widget-drag-handler")?(o=1,e.focused!=i&&t.getSelection().removeAllRanges()):n.getNestedEditable(i.wrapper,s)?i=null:(r.data.preventDefault(),CKEDITOR.env.ie||i.focus()))})),r.attachListener(s,"mouseup",(function(){o&&i&&i.wrapper&&(o=0,i.focus())})),CKEDITOR.env.ie&&r.attachListener(s,"mouseup",(function(){setTimeout((function(){i&&i.wrapper&&r.contains(i.wrapper)&&(i.focus(),i=null)}))}))})),t.on("doubleclick",(function(t){var i=e.getByElement(t.data.element);if(i&&!n.getNestedEditable(i.wrapper,t.data.element))return i.fire("doubleclick",{element:t.data.element})}),null,null,1)}(this),function(e){e.editor.on("key",(function(t){var n,i=e.focused,o=e.widgetHoldingFocusedEditable;return i?n=i.fire("key",{keyCode:t.data.keyCode}):o&&(i=t.data.keyCode,t=o.focusedEditable,i==CKEDITOR.CTRL+65?(i=t.getBogus(),(o=o.editor.createRange()).selectNodeContents(t),i&&o.setEndAt(i,CKEDITOR.POSITION_BEFORE_START),o.select(),n=!1):8==i||46==i?(n=o.editor.getSelection().getRanges(),o=n[0],n=!(1==n.length&&o.collapsed&&o.checkBoundaryOfElement(t,CKEDITOR[8==i?"START":"END"]))):n=void 0),n}),null,null,1)}(this),function(e){var t=e.editor,i=CKEDITOR.plugins.lineutils;t.on("dragstart",(function(i){var o=i.data.target;n.isDomDragHandler(o)&&(o=e.getByElement(o),i.data.dataTransfer.setData("cke/widget-id",o.id),t.focus(),o.focus())})),t.on("drop",(function(n){var i=(r=n.data.dataTransfer).getData("cke/widget-id"),o=r.getTransferType(t),r=t.createRange();""!==i&&o===CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?n.cancel():o==CKEDITOR.DATA_TRANSFER_INTERNAL&&(""===i&&0<t.widgets.selected.length?n.data.dataTransfer.setData("text/html",O(t)):(i=e.instances[i])&&(r.setStartBefore(i.wrapper),r.setEndAfter(i.wrapper),n.data.dragRange=r,delete CKEDITOR.plugins.clipboard.dragStartContainerChildCount,delete CKEDITOR.plugins.clipboard.dragEndContainerChildCount,n.data.dataTransfer.setData("text/html",i.getClipboardHtml()),t.widgets.destroy(i,!0)))})),t.on("contentDom",(function(){var o=t.editable();CKEDITOR.tools.extend(e,{finder:new i.finder(t,{lookups:{default:function(t){if(!t.is(CKEDITOR.dtd.$listItem)&&t.is(CKEDITOR.dtd.$block)&&!n.isDomNestedEditable(t)&&!e._.draggedWidget.wrapper.contains(t)){var i=n.getNestedEditable(o,t);if(i){if(t=e._.draggedWidget,e.getByElement(i)==t)return;if(i=CKEDITOR.filter.instances[i.data("cke-filter")],t=t.requiredContent,i&&t&&!i.check(t))return}return CKEDITOR.LINEUTILS_BEFORE|CKEDITOR.LINEUTILS_AFTER}}}}),locator:new i.locator(t),liner:new i.liner(t,{lineStyle:{cursor:"move !important","border-top-color":"#666"},tipLeftStyle:{"border-left-color":"#666"},tipRightStyle:{"border-right-color":"#666"}})},!0)}))}(this),function(e){function t(t){1>e.selected.length||C(n,"cut"===t.name)}var n=e.editor;n.on("contentDom",(function(){var e=n.editable();e.attachListener(e,"copy",t),e.attachListener(e,"cut",t)}))}(this)}function n(e,t,i,o,r){var s=e.editor;CKEDITOR.tools.extend(this,o,{editor:s,id:t,inline:"span"==i.getParent().getName(),element:i,data:CKEDITOR.tools.extend({},"function"==typeof o.defaults?o.defaults():o.defaults),dataReady:!1,inited:!1,ready:!1,edit:n.prototype.edit,focusedEditable:null,definition:o,repository:e,draggable:!1!==o.draggable,_:{downcastFn:o.downcast&&"string"==typeof o.downcast?o.downcasts[o.downcast]:o.downcast}},!0),e.fire("instanceCreated",this),function(e,t){(function(e){(e.wrapper=e.element.getParent()).setAttribute("data-cke-widget-id",e.id)})(e),b(e),function(e){var t,n,i=e.editables;if(e.editables={},e.editables)for(t in i)n=i[t],e.initEditable(t,"string"==typeof n?{selector:n}:n)}(e),y(e),function(e){if(e.draggable){var t,i=e.editor,o=e.wrapper.getLast(n.isDomDragHandlerContainer);o?t=o.findOne("img"):((o=new CKEDITOR.dom.element("span",i.document)).setAttributes({class:"cke_reset cke_widget_drag_handler_container",style:"background:rgba(220,220,220,0.5);background-image:url("+i.plugins.widget.path+"images/handle.png);display:none;"}),(t=new CKEDITOR.dom.element("img",i.document)).setAttributes({class:"cke_reset cke_widget_drag_handler","data-cke-widget-drag-handler":"1",src:CKEDITOR.tools.transparentImageData,width:15,title:i.lang.widget.move,height:15,role:"presentation"}),e.inline&&t.setAttribute("draggable","true"),o.append(t),e.wrapper.append(o)),e.wrapper.on("dragover",(function(e){e.data.preventDefault()})),e.wrapper.on("mouseenter",e.updateDragHandlerPosition,e),setTimeout((function(){e.on("data",e.updateDragHandlerPosition,e)}),50),!e.inline&&(t.on("mousedown",_,e),CKEDITOR.env.ie&&9>CKEDITOR.env.version)&&t.on("dragstart",(function(e){e.data.preventDefault(!0)})),e.dragHandlerContainer=o}}(e),function(e){var t=null;e.on("data",(function(){var e,n=this.data.classes;if(t!=n){for(e in t)n&&n[e]||this.removeClass(e);for(e in n)this.addClass(e);t=n}}))}(e),function(e){e.on("data",(function(){if(e.wrapper){var t=this.getLabel?this.getLabel():this.editor.lang.widget.label.replace(/%1/,this.pathName||this.element.getName());e.wrapper.setAttribute("role","region"),e.wrapper.setAttribute("aria-label",t)}}),null,null,9999)}(e),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&e.wrapper.on("dragstart",(function(t){var i=t.data.getTarget();n.getNestedEditable(e,i)||e.inline&&n.isDomDragHandler(i)||t.data.preventDefault()})),e.wrapper.removeClass("cke_widget_new"),e.element.addClass("cke_widget_element"),e.on("key",(function(t){if(13==(t=t.data.keyCode))e.edit();else{if(t==CKEDITOR.CTRL+67||t==CKEDITOR.CTRL+88)return void C(e.editor,t==CKEDITOR.CTRL+88);if(t in S||CKEDITOR.CTRL&t||CKEDITOR.ALT&t)return}return!1}),null,null,999),e.on("doubleclick",(function(t){e.edit()&&t.cancel()})),t.data&&e.on("data",t.data),t.edit&&e.on("edit",t.edit)}(this,o),this.init&&this.init(),this.inited=!0,(e=this.element.data("cke-widget-data"))&&this.setData(JSON.parse(decodeURIComponent(e))),r&&this.setData(r),this.data.classes||this.setData("classes",this.getClasses()),this.dataReady=!0,K(this),this.fire("data",this.data),this.isInited()&&s.editable().contains(this.wrapper)&&(this.ready=!0,this.fire("ready"))}function i(e,t,n){CKEDITOR.dom.element.call(this,t.$),this.editor=e,this._={},t=this.filter=n.filter,CKEDITOR.dtd[this.getName()].p?(this.enterMode=t?t.getAllowedEnterMode(e.enterMode):e.enterMode,this.shiftEnterMode=t?t.getAllowedEnterMode(e.shiftEnterMode,!0):e.shiftEnterMode):this.enterMode=this.shiftEnterMode=CKEDITOR.ENTER_BR}function o(e,t){if(e.focused=null,t.isInited()){var n=t.editor.checkDirty();e.fire("widgetBlurred",{widget:t}),t.setFocused(!1),!n&&t.editor.resetDirty()}}function r(e){if(e=e.data,"wysiwyg"==this.editor.mode){var t,i,o,r,s=this.editor.editable(),a=this.instances;if(s){for(t in a)a[t].isReady()&&!s.contains(a[t].wrapper)&&this.destroy(a[t],!0);if(e&&e.initOnlyNew)a=this.initOnAll();else{var l=s.find(".cke_widget_wrapper");for(a=[],t=0,i=l.count();t<i;t++){if(o=l.getItem(t),r=!this.getByElement(o,!0)){e:{r=f;for(var c=o;c=c.getParent();)if(r(c)){r=!0;break e}r=!1}r=!r}r&&s.contains(o)&&(o.addClass("cke_widget_new"),a.push(this.initOn(o.getFirst(n.isDomWidgetElement))))}}e&&e.focusInited&&1==a.length&&a[0].focus()}}}function s(e){if(void 0!==e.attributes&&e.attributes["data-widget"]){var t=a(e),n=l(e),i=!1;t&&t.value&&t.value.match(/^\s/g)&&(t.parent.attributes["data-cke-white-space-first"]=1,t.value=t.value.replace(/^\s/g,"&nbsp;"),i=!0),n&&n.value&&n.value.match(/\s$/g)&&(n.parent.attributes["data-cke-white-space-last"]=1,n.value=n.value.replace(/\s$/g,"&nbsp;"),i=!0),i&&(e.attributes["data-cke-widget-white-space"]=1)}}function a(e){return e.find((function(e){return 3===e.type}),!0).shift()}function l(e){return e.find((function(e){return 3===e.type}),!0).pop()}function c(e,t,n){if(!n.allowedContent&&!n.disallowedContent)return null;var i=this._.filters[e];return i||(this._.filters[e]=i={}),(e=i[t])||(e=n.allowedContent?new CKEDITOR.filter(n.allowedContent):this.editor.filter.clone(),i[t]=e,n.disallowedContent&&e.disallow(n.disallowedContent)),e}function u(e,t){return{tabindex:-1,contenteditable:"false","data-cke-widget-wrapper":1,"data-cke-filter":"off",class:"cke_widget_wrapper cke_widget_new cke_widget_"+(e?"inline":"block")+(t?" cke_widget_"+t:"")}}function d(e,t,n){if(e.type==CKEDITOR.NODE_ELEMENT&&(i=CKEDITOR.dtd[e.name])&&!i[n.name]){var i=e.split(t),o=e.parent;return t=i.getIndex(),e.children.length||(--t,e.remove()),i.children.length||i.remove(),d(o,t,n)}e.add(n,t)}function h(e,t){return"boolean"==typeof e.inline?e.inline:!!CKEDITOR.dtd.$inline[t]}function f(e){return e.hasAttribute("data-cke-temp")}function p(e,t,n,i){var o=e.editor;o.fire("lockSnapshot"),n?(i=n.data("cke-widget-editable"),i=t.editables[i],e.widgetHoldingFocusedEditable=t,t.focusedEditable=i,n.addClass("cke_widget_editable_focused"),i.filter&&o.setActiveFilter(i.filter),o.setActiveEnterMode(i.enterMode,i.shiftEnterMode)):(i||t.focusedEditable.removeClass("cke_widget_editable_focused"),t.focusedEditable=null,e.widgetHoldingFocusedEditable=null,o.setActiveFilter(null),o.setActiveEnterMode(null,null)),o.fire("unlockSnapshot")}function g(e,t){return CKEDITOR.tools.trim(t)}function m(e){var t=e.selected,n=[],i=t.slice(0),r=null;return{select:function(e){return 0>CKEDITOR.tools.indexOf(t,e)&&n.push(e),0<=(e=CKEDITOR.tools.indexOf(i,e))&&i.splice(e,1),this},focus:function(e){return r=e,this},commit:function(){var s,a,l=e.focused!==r;for(e.editor.fire("lockSnapshot"),l&&(s=e.focused)&&o(e,s);s=i.pop();)t.splice(CKEDITOR.tools.indexOf(t,s),1),s.isInited()&&(a=s.editor.checkDirty(),s.setSelected(!1),!a&&s.editor.resetDirty());for(l&&r&&(a=e.editor.checkDirty(),e.focused=r,e.fire("widgetFocused",{widget:r}),r.setFocused(!0),!a&&e.editor.resetDirty());s=n.pop();)t.push(s),s.setSelected(!0);e.editor.fire("unlockSnapshot")}}}function E(e,t,n){var i=0;t=v(t);var o,r=e.data.classes||{};if(t){for(r=CKEDITOR.tools.clone(r);o=t.pop();)n?r[o]||(i=r[o]=1):r[o]&&(delete r[o],i=1);i&&e.setData("classes",r)}}function T(e){e.cancel()}function C(e,t){var n,i,o,r=e.widgets.focused;x.hasCopyBin(e)||(i=new x(e,{beforeDestroy:function(){!t&&r&&r.focus(),o&&e.getSelection().selectBookmarks(o),n&&CKEDITOR.plugins.widgetselection.addFillers(e.editable())},afterDestroy:function(){t&&!e.readOnly&&(r?e.widgets.del(r):e.extractSelectedHtml(),e.fire("saveSnapshot"))}}),r||(n=CKEDITOR.env.webkit&&CKEDITOR.plugins.widgetselection.isWholeContentSelected(e.editable()),o=e.getSelection().createBookmarks(!0)),i.handle(O(e)))}function v(e){return(e=(e=e.getDefinition().attributes)&&e.class)?e.split(/\s+/):null}function I(){var e=CKEDITOR.document.getActive(),t=this.editor,n=t.editable();(n.isInline()?n:t.document.getWindow().getFrame()).equals(e)&&t.focusManager.focus(n)}function D(){CKEDITOR.env.gecko&&this.editor.unlockSelection(),CKEDITOR.env.webkit||(this.editor.forceNextSelectionCheck(),this.editor.selectionChange(1))}function O(e){var t=e.getSelectedHtml(!0);return e.widgets.focused?e.widgets.focused.getClipboardHtml():(e.once("toDataFormat",(function(e){e.data.widgetsCopy=!0}),null,null,-1),e.dataProcessor.toDataFormat(t))}function b(e,t){if(e.partSelectors||(e.partSelectors=e.parts),e.parts){var n,i,o={};for(i in e.partSelectors)t||!e.parts[i]||"string"==typeof e.parts[i]?(n=e.wrapper.findOne(e.partSelectors[i]),o[i]=n):o[i]=e.parts[i];e.parts=o}}function y(e){if(!0===e.mask)!function(e){var t=e.wrapper.findOne(".cke_widget_mask");t||((t=new CKEDITOR.dom.element("img",e.editor.document)).setAttributes({src:CKEDITOR.tools.transparentImageData,class:"cke_reset cke_widget_mask"}),e.wrapper.append(t)),e.mask=t}(e);else if(e.mask){var t,n,i=new CKEDITOR.tools.buffers.throttle(250,R,e),o=CKEDITOR.env.gecko?300:0;if(e.on("focus",(function(){i.input(),t=e.editor.on("change",i.input),n=e.on("blur",(function(){t.removeListener(),n.removeListener()}))})),e.editor.on("instanceReady",(function(){setTimeout((function(){i.input()}),o)})),e.editor.on("mode",(function(){setTimeout((function(){i.input()}),o)})),CKEDITOR.env.gecko){var r=e.element.find("img");CKEDITOR.tools.array.forEach(r.toArray(),(function(e){e.on("load",(function(){i.input()}))}))}for(var s in e.editables)e.editables[s].on("focus",(function(){e.editor.on("change",i.input),n&&n.removeListener()})),e.editables[s].on("blur",(function(){e.editor.removeListener("change",i.input)}));i.input()}}function R(){if(this.wrapper){this.maskPart=this.maskPart||this.mask;var e,t=this.parts[this.maskPart];if(t&&"string"!=typeof t){(e=this.wrapper.findOne(".cke_widget_partial_mask"))||((e=new CKEDITOR.dom.element("img",this.editor.document)).setAttributes({src:CKEDITOR.tools.transparentImageData,class:"cke_reset cke_widget_partial_mask"}),this.wrapper.append(e)),this.mask=e;var n=e.$,i=t.$,o=!(n.offsetTop==i.offsetTop&&n.offsetLeft==i.offsetLeft);(n.offsetWidth!=i.offsetWidth||n.offsetHeight!=i.offsetHeight||o)&&(n=t.getParent(),i=CKEDITOR.plugins.widget.isDomWidget(n),e.setStyles({top:t.$.offsetTop+(i?0:n.$.offsetTop)+"px",left:t.$.offsetLeft+(i?0:n.$.offsetLeft)+"px",width:t.$.offsetWidth+"px",height:t.$.offsetHeight+"px"}))}}}function _(e){function t(){var t;for(h.reset();t=c.pop();)t.removeListener();var n=u;t=e.sender;var i=this.repository.finder,o=this.repository.liner,r=this.editor,s=this.editor.editable();CKEDITOR.tools.isEmpty(o.visible)||(n=i.getRange(n[0]),this.focus(),r.fire("drop",{dropRange:n,target:n.startContainer})),s.removeClass("cke_widget_dragging"),o.hideVisible(),r.fire("dragend",{target:t})}if(CKEDITOR.tools.getMouseButton(e)===CKEDITOR.MOUSE_BUTTON_LEFT){var n,i,o=this.repository.finder,r=this.repository.locator,s=this.repository.liner,a=this.editor,l=a.editable(),c=[],u=[];this.repository._.draggedWidget=this;var d=o.greedySearch(),h=CKEDITOR.tools.eventsBuffer(50,(function(){n=r.locate(d),(u=r.sort(i,1)).length&&(s.prepare(d,n),s.placeLine(u[0]),s.cleanup())}));l.addClass("cke_widget_dragging"),c.push(l.on("mousemove",(function(e){i=e.data.$.clientY,h.input()}))),a.fire("dragstart",{target:e.sender}),c.push(a.document.once("mouseup",t,this)),l.isInline()||c.push(CKEDITOR.document.once("mouseup",t,this))}}function K(e){e.element.data("cke-widget-data",encodeURIComponent(JSON.stringify(e.data)))}function k(){function t(){}function i(e,t,n){return!(!n||!this.checkElement(e))&&(e=n.widgets.getByElement(e,!0))&&e.checkStyleActive(this)}function o(t){function n(e,t,n){for(var i=e.length,o=0;o<i;){if(t.call(n,e[o],o,e))return e[o];o++}}function i(t){function n(t,i){var o=CKEDITOR.tools.object.keys(t),r=CKEDITOR.tools.object.keys(i);if(o.length!==r.length)return!1;for(var s in t)if(("object"!==e(t[s])||"object"!==e(i[s])||!n(t[s],i[s]))&&t[s]!==i[s])return!1;return!0}return function(e){return n(t.getDefinition(),e.getDefinition())}}var o,s=t.widget;r[s]||(r[s]={});for(var a=0,l=t.group.length;a<l;a++)o=t.group[a],r[s][o]||(r[s][o]=[]),n(o=r[s][o],i(t))||o.push(t)}var r={};CKEDITOR.style.addCustomHandler({type:"widget",setup:function(e){this.widget=e.widget,(this.group="string"==typeof e.group?[e.group]:e.group)&&o(this)},apply:function(e){var t;e instanceof CKEDITOR.editor&&this.checkApplicable(e.elementPath(),e)&&(t=e.widgets.focused,this.group&&this.removeStylesFromSameGroup(e),t.applyStyle(this))},remove:function(e){e instanceof CKEDITOR.editor&&this.checkApplicable(e.elementPath(),e)&&e.widgets.focused.removeStyle(this)},removeStylesFromSameGroup:function(e){var t,n,i=!1;if(!(e instanceof CKEDITOR.editor))return!1;if(n=e.elementPath(),this.checkApplicable(n,e))for(var o=0,s=this.group.length;o<s;o++){t=r[this.widget][this.group[o]];for(var a=0;a<t.length;a++)t[a]!==this&&t[a].checkActive(n,e)&&(e.widgets.focused.removeStyle(t[a]),i=!0)}return i},checkActive:function(e,t){return this.checkElementMatch(e.lastElement,0,t)},checkApplicable:function(e,t){return t instanceof CKEDITOR.editor&&this.checkElement(e.lastElement)},checkElementMatch:i,checkElementRemovable:i,checkElement:function(e){return!!n.isDomWidgetWrapper(e)&&(e=e.getFirst(n.isDomWidgetElement))&&e.data("widget")==this.widget},buildPreview:function(e){return e||this._.definition.name},toAllowedContentRules:function(e){if(!e)return null;var t,n={};return(e=e.widgets.registered[this.widget])?e.styleableElements?(t=this.getClassesArray())?(n[e.styleableElements]={classes:t,propertiesOnly:!0},n):null:e.styleToAllowedContentRules?e.styleToAllowedContentRules(this):null:null},getClassesArray:function(){var e=this._.definition.attributes&&this._.definition.attributes.class;return e?CKEDITOR.tools.trim(e).split(/\s+/):null},applyToRange:t,removeFromRange:t,applyToObject:t})}CKEDITOR.plugins.add("widget",{requires:"lineutils,clipboard,widgetselection",onLoad:function(){void 0!==CKEDITOR.document.$.querySelectorAll&&(CKEDITOR.addCss('.cke_widget_wrapper{position:relative;outline:none}.cke_widget_inline{display:inline-block}.cke_widget_wrapper:hover>.cke_widget_element{outline:2px solid #ffd25c;cursor:default}.cke_widget_wrapper:hover .cke_widget_editable{outline:2px solid #ffd25c}.cke_widget_wrapper.cke_widget_focused>.cke_widget_element,.cke_widget_wrapper .cke_widget_editable.cke_widget_editable_focused{outline:2px solid #47a4f5}.cke_widget_editable{cursor:text}.cke_widget_drag_handler_container{position:absolute;width:15px;height:0;display:block;opacity:0.75;transition:height 0s 0.2s;line-height:0}.cke_widget_wrapper:hover>.cke_widget_drag_handler_container{height:15px;transition:none}.cke_widget_drag_handler_container:hover{opacity:1}.cke_editable[contenteditable="false"] .cke_widget_drag_handler_container{display:none;}img.cke_widget_drag_handler{cursor:move;width:15px;height:15px;display:inline-block}.cke_widget_mask{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.cke_widget_partial_mask{position:absolute;display:block}.cke_editable.cke_widget_dragging, .cke_editable.cke_widget_dragging *{cursor:move !important}'),k())},beforeInit:function(e){void 0!==CKEDITOR.document.$.querySelectorAll&&(e.widgets=new t(e))},afterInit:function(e){if(void 0!==CKEDITOR.document.$.querySelectorAll){var t,n,i,o=e.widgets.registered;for(n in o)(i=(t=o[n]).button)&&e.ui.addButton&&e.ui.addButton(CKEDITOR.tools.capitalize(t.name,!0),{label:i,command:t.name,toolbar:"insert,10"});!function(e){e.contextMenu&&e.contextMenu.addListener((function(t){if(t=e.widgets.getByElement(t,!0))return t.fire("contextMenu",{})}))}(e),function(e){e&&e.addFilterRule((function(e){return e.replace(/\s*cke_widget_selected/g,"").replace(/\s*cke_widget_focused/g,"").replace(/<span[^>]*cke_widget_drag_handler_container[^>]*.*?<\/span>/gim,"")}))}(e.undoManager)}}}),t.prototype={MIN_SELECTION_CHECK_INTERVAL:500,add:function(e,t){var n=this.editor;if((t=CKEDITOR.tools.prototypedCopy(t)).name=e,t._=t._||{},n.fire("widgetDefinition",t),t.template&&(t.template=new CKEDITOR.template(t.template)),function(e,t){e.addCommand(t.name,{exec:function(e,n){function i(){e.widgets.finalizeCreation(a)}if((r=e.widgets.focused)&&r.name==t.name)r.edit();else if(t.insert)t.insert({editor:e,commandData:n});else if(t.template){var o,r="function"==typeof t.defaults?t.defaults():t.defaults,s=(r=CKEDITOR.dom.element.createFromHtml(t.template.output(r),e.document),e.widgets.wrapElement(r,t.name)),a=new CKEDITOR.dom.documentFragment(s.getDocument());a.append(s),(o=e.widgets.initOn(r,t,n&&n.startupData))?(r=o.once("edit",(function(t){t.data.dialog?o.once("dialog",(function(t){var n,r;t=t.data,n=t.once("ok",i,null,null,20),r=t.once("cancel",(function(t){t.data&&!1===t.data.hide||e.widgets.destroy(o,!0)})),t.once("hide",(function(){n.removeListener(),r.removeListener()}))})):i()}),null,null,999),o.edit(),r.removeListener()):i()}},allowedContent:t.allowedContent,requiredContent:t.requiredContent,contentForms:t.contentForms,contentTransformations:t.contentTransformations})}(n,t),function(e,t){var n=t.upcast,i=t.upcastPriority||10;n&&function(t,n,i){var o=CKEDITOR.tools.getIndex(e._.upcasts,(function(e){return e[2]>i}));0>o&&(o=e._.upcasts.length),e._.upcasts.splice(o,0,[CKEDITOR.tools.bind(t,n),n.name,i])}("string"==typeof n?function(e,n){var i,o,r=t.upcast.split(",");for(o=0;o<r.length;o++)if((i=r[o])===e.name)return t.upcasts[i].call(this,e,n);return!1}:n,t,i)}(this,t),this.registered[e]=t,t.dialog&&n.plugins.dialog)var i=CKEDITOR.on("dialogDefinition",(function(e){var o=(e=e.data.definition).dialog;e.getMode||o.getName()!==t.dialog||(e.getMode=function(){var e=o.getModel(n);return e&&e instanceof CKEDITOR.plugins.widget&&e.ready?CKEDITOR.dialog.EDITING_MODE:CKEDITOR.dialog.CREATION_MODE}),i.removeListener()}));return t},addUpcastCallback:function(e){this._.upcastCallbacks.push(e)},checkSelection:function(){if(this.editor.getSelection()){var e,t=this.editor.getSelection(),i=t.getSelectedElement(),o=m(this);if(i&&(e=this.getByElement(i,!0)))return o.focus(e).select(e).commit();if(!(t=t.getRanges()[0])||t.collapsed)return o.commit();for((t=new CKEDITOR.dom.walker(t)).evaluator=n.isDomWidgetWrapper;i=t.next();)o.select(this.getByElement(i));o.commit()}},checkWidgets:function(e){this.fire("checkWidgets",CKEDITOR.tools.copy(e||{}))},del:function(e){if(this.focused===e){var t,n=e.editor,i=n.createRange();(t=i.moveToClosestEditablePosition(e.wrapper,!0))||(t=i.moveToClosestEditablePosition(e.wrapper,!1)),t&&n.getSelection().selectRanges([i])}e.wrapper.remove(),this.destroy(e,!0)},destroy:function(e,t){this.widgetHoldingFocusedEditable===e&&p(this,e,null,t),e.destroy(t),delete this.instances[e.id],this.fire("instanceDestroyed",e)},destroyAll:function(e,t){var n,i,o=this.instances;if(t&&!e){o=(i=t.find(".cke_widget_wrapper")).count();for(var r=0;r<o;++r)(n=this.getByElement(i.getItem(r),!0))&&this.destroy(n)}else for(i in o)n=o[i],this.destroy(n,e)},finalizeCreation:function(e){(e=e.getFirst())&&n.isDomWidgetWrapper(e)&&(this.editor.insertElement(e),(e=this.getByElement(e)).ready=!0,e.fire("ready"),e.focus())},getByElement:function(){function e(e){return e.is(t)&&e.data("cke-widget-id")}var t={div:1,span:1};return function(t,n){if(!t)return null;var i=e(t);if(!n&&!i){var o=this.editor.editable();do{t=t.getParent()}while(t&&!t.equals(o)&&!(i=e(t)))}return this.instances[i]||null}}(),initOn:function(e,t,i){if(t?"string"==typeof t&&(t=this.registered[t]):t=this.registered[e.data("widget")],!t)return null;var o=this.wrapElement(e,t.name);return o?o.hasClass("cke_widget_new")?(e=new n(this,this._.nextId++,e,t,i)).isInited()?this.instances[e.id]=e:null:this.getByElement(e):null},initOnAll:function(e){for(var t,i=[],o=(e=(e||this.editor.editable()).find(".cke_widget_new")).count();o--;)(t=this.initOn(e.getItem(o).getFirst(n.isDomWidgetElement)))&&i.push(t);return i},onWidget:function(e){var t=Array.prototype.slice.call(arguments);for(var n in t.shift(),this.instances){var i=this.instances[n];i.name==e&&i.on.apply(i,t)}this.on("instanceCreated",(function(n){(n=n.data).name==e&&n.on.apply(n,t)}))},parseElementClasses:function(e){if(!e)return null;e=CKEDITOR.tools.trim(e).split(/\s+/);for(var t,n={},i=0;t=e.pop();)-1==t.indexOf("cke_")&&(n[t]=i=1);return i?n:null},wrapElement:function(e,t){var n,i,o=null;if(e instanceof CKEDITOR.dom.element){if(t=t||e.data("widget"),!(n=this.registered[t]))return null;if((o=e.getParent())&&o.type==CKEDITOR.NODE_ELEMENT&&o.data("cke-widget-wrapper"))return o;e.hasAttribute("data-cke-widget-keep-attr")||e.data("cke-widget-keep-attr",e.data("widget")?1:0),e.data("widget",t),(i=h(n,e.getName()))&&s(e),(o=new CKEDITOR.dom.element(i?"span":"div",e.getDocument())).setAttributes(u(i,t)),o.data("cke-display-name",n.pathName?n.pathName:e.getName()),e.getParent(!0)&&o.replace(e),e.appendTo(o)}else if(e instanceof CKEDITOR.htmlParser.element){if(t=t||e.attributes["data-widget"],!(n=this.registered[t]))return null;if((o=e.parent)&&o.type==CKEDITOR.NODE_ELEMENT&&o.attributes["data-cke-widget-wrapper"])return o;var r;"data-cke-widget-keep-attr"in e.attributes||(e.attributes["data-cke-widget-keep-attr"]=e.attributes["data-widget"]?1:0),t&&(e.attributes["data-widget"]=t),(i=h(n,e.name))&&s(e),(o=new CKEDITOR.htmlParser.element(i?"span":"div",u(i,t))).attributes["data-cke-display-name"]=n.pathName?n.pathName:e.name,(n=e.parent)&&(r=e.getIndex(),e.remove()),o.add(e),n&&d(n,r,o)}return o},_tests_createEditableFilter:c},CKEDITOR.event.implementOn(t.prototype),n.prototype={addClass:function(e){this.element.addClass(e),this.wrapper.addClass(n.WRAPPER_CLASS_PREFIX+e)},applyStyle:function(e){E(this,e,1)},checkStyleActive:function(e){var t;if(!(e=v(e)))return!1;for(;t=e.pop();)if(!this.hasClass(t))return!1;return!0},destroy:function(e){if(this.fire("destroy"),this.editables)for(var t in this.editables)this.destroyEditable(t,e);e||("0"==this.element.data("cke-widget-keep-attr")&&this.element.removeAttribute("data-widget"),this.element.removeAttributes(["data-cke-widget-data","data-cke-widget-keep-attr"]),this.element.removeClass("cke_widget_element"),this.element.replace(this.wrapper)),this.wrapper=null},destroyEditable:function(e,t){var n=this.editables[e],i=!0;if(n.removeListener("focus",D),n.removeListener("blur",I),this.editor.focusManager.remove(n),n.filter){for(var o in this.repository.instances){var r=this.repository.instances[o];r.editables&&(r=r.editables[e])&&r!==n&&n.filter===r.filter&&(i=!1)}i&&(n.filter.destroy(),(i=this.repository._.filters[this.name])&&delete i[e])}t||(this.repository.destroyAll(!1,n),n.removeClass("cke_widget_editable"),n.removeClass("cke_widget_editable_focused"),n.removeAttributes(["contenteditable","data-cke-widget-editable","data-cke-enter-mode"])),delete this.editables[e]},edit:function(){var e={dialog:this.dialog},t=this;return!(!1===this.fire("edit",e)||!e.dialog||(this.editor.openDialog(e.dialog,(function(e){var n,i;!1!==t.fire("dialog",e)&&(n=e.on("show",(function(){e.setupContent(t)})),i=e.on("ok",(function(){var n,i=t.on("data",(function(e){n=1,e.cancel()}),null,null,0);t.editor.fire("saveSnapshot"),e.commitContent(t),i.removeListener(),n&&(t.fire("data",t.data),t.editor.fire("saveSnapshot"))})),e.once("hide",(function(){n.removeListener(),i.removeListener()})))}),t),0))},getClasses:function(){return this.repository.parseElementClasses(this.element.getAttribute("class"))},getClipboardHtml:function(){var e=this.editor.createRange();return e.setStartBefore(this.wrapper),e.setEndAfter(this.wrapper),this.editor.editable().getHtmlFromRange(e).getHtml()},hasClass:function(e){return this.element.hasClass(e)},initEditable:function(e,t){var n=this._findOneNotNested(t.selector);return!(!n||!n.is(CKEDITOR.dtd.$editable)||(n=new i(this.editor,n,{filter:c.call(this.repository,this.name,e,t)}),this.editables[e]=n,n.setAttributes({contenteditable:"true","data-cke-widget-editable":e,"data-cke-enter-mode":n.enterMode}),n.filter&&n.data("cke-filter",n.filter.id),n.addClass("cke_widget_editable"),n.removeClass("cke_widget_editable_focused"),t.pathName&&n.data("cke-display-name",t.pathName),this.editor.focusManager.add(n),n.on("focus",D,this),CKEDITOR.env.ie&&n.on("blur",I,this),n._.initialSetData=!0,n.setData(n.getHtml()),0))},_findOneNotNested:function(e){e=this.wrapper.find(e);for(var t,i,o=0;o<e.count();o++)if(i=(t=e.getItem(o)).getAscendant(n.isDomWidgetWrapper),this.wrapper.equals(i))return t;return null},isInited:function(){return!(!this.wrapper||!this.inited)},isReady:function(){return this.isInited()&&this.ready},focus:function(){var e=this.editor.getSelection();if(e){var t=this.editor.checkDirty();e.fake(this.wrapper),!t&&this.editor.resetDirty()}this.editor.focus()},refreshMask:function(){y(this)},refreshParts:function(e){b(this,void 0===e||e)},removeClass:function(e){this.element.removeClass(e),this.wrapper.removeClass(n.WRAPPER_CLASS_PREFIX+e)},removeStyle:function(e){E(this,e,0)},setData:function(e,t){var n=this.data,i=0;if("string"==typeof e)n[e]!==t&&(n[e]=t,i=1);else{var o=e;for(e in o)n[e]!==o[e]&&(i=1,n[e]=o[e])}return i&&this.dataReady&&(K(this),this.fire("data",n)),this},setFocused:function(e){return this.wrapper[e?"addClass":"removeClass"]("cke_widget_focused"),this.fire(e?"focus":"blur"),this},setSelected:function(e){return this.wrapper[e?"addClass":"removeClass"]("cke_widget_selected"),this.fire(e?"select":"deselect"),this},updateDragHandlerPosition:function(){var e=this.editor,t=this.element.$,n=this._.dragHandlerOffset;t={x:t.offsetLeft,y:t.offsetTop-15},n&&t.x==n.x&&t.y==n.y||(n=e.checkDirty(),e.fire("lockSnapshot"),this.dragHandlerContainer.setStyles({top:t.y+"px",left:t.x+"px"}),this.dragHandlerContainer.removeStyle("display"),e.fire("unlockSnapshot"),!n&&e.resetDirty(),this._.dragHandlerOffset=t)}},CKEDITOR.event.implementOn(n.prototype),n.getNestedEditable=function(e,t){return!t||t.equals(e)?null:n.isDomNestedEditable(t)?t:n.getNestedEditable(e,t.getParent())},n.isDomDragHandler=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-drag-handler")},n.isDomDragHandlerContainer=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_widget_drag_handler_container")},n.isDomNestedEditable=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-editable")},n.isDomWidgetElement=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-widget")},n.isDomWidgetWrapper=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-wrapper")},n.isDomWidget=function(e){return!!e&&(this.isDomWidgetWrapper(e)||this.isDomWidgetElement(e))},n.isParserWidgetElement=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&!!e.attributes["data-widget"]},n.isParserWidgetWrapper=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&!!e.attributes["data-cke-widget-wrapper"]},n.WRAPPER_CLASS_PREFIX="cke_widget_wrapper_",i.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.dom.element.prototype),{setData:function(e){this._.initialSetData||this.editor.widgets.destroyAll(!1,this),this._.initialSetData=!1,e=this.editor.dataProcessor.toDataFormat(e,{context:this.getName(),filter:this.filter,enterMode:this.enterMode}),e=this.editor.dataProcessor.toHtml(e,{context:this.getName(),filter:this.filter,enterMode:this.enterMode}),this.setHtml(e),this.editor.widgets.initOnAll(this)},getData:function(){return this.editor.dataProcessor.toDataFormat(this.getHtml(),{context:this.getName(),filter:this.filter,enterMode:this.enterMode})}});var w=/^(?:<(?:div|span)(?: data-cke-temp="1")?(?: id="cke_copybin")?(?: data-cke-temp="1")?>)?(?:<(?:div|span)(?: style="[^"]+")?>)?<span [^>]*data-cke-copybin-start="1"[^>]*>.?<\/span>([\s\S]+)<span [^>]*data-cke-copybin-end="1"[^>]*>.?<\/span>(?:<\/(?:div|span)>)?(?:<\/(?:div|span)>)?$/i,S={37:1,38:1,39:1,40:1,8:1,46:1};S[CKEDITOR.SHIFT+121]=1;var x=CKEDITOR.tools.createClass({$:function(e,t){this._.createCopyBin(e,t),this._.createListeners(t)},_:{createCopyBin:function(e){var t=e.document,n=CKEDITOR.env.edge&&16<=CKEDITOR.env.version,i=!e.blockless&&!CKEDITOR.env.ie||n?"div":"span";n=t.createElement(i),(t=t.createElement(i)).setAttributes({id:"cke_copybin","data-cke-temp":"1"}),n.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),n.setStyle("ltr"==e.config.contentsLangDirection?"left":"right","-5000px"),this.editor=e,this.copyBin=n,this.container=t},createListeners:function(e){e&&(e.beforeDestroy&&(this.beforeDestroy=e.beforeDestroy),e.afterDestroy&&(this.afterDestroy=e.afterDestroy))}},proto:{handle:function(e){var t,n,i,o=this.copyBin,r=this.editor,s=this.container,a=CKEDITOR.env.ie&&9>CKEDITOR.env.version,l=r.document.getDocumentElement().$,c=r.createRange(),u=this,d=CKEDITOR.env.mac&&CKEDITOR.env.webkit,h=d?100:0,f=window.requestAnimationFrame&&!d?requestAnimationFrame:setTimeout;return o.setHtml('<span data-cke-copybin-start="1">​</span>'+e+'<span data-cke-copybin-end="1">​</span>'),r.fire("lockSnapshot"),s.append(o),r.editable().append(s),t=r.on("selectionChange",T,null,null,0),n=r.widgets.on("checkSelection",T,null,null,0),a&&(i=l.scrollTop),c.selectNodeContents(o),c.select(),a&&(l.scrollTop=i),new CKEDITOR.tools.promise((function(e){f((function(){u.beforeDestroy&&u.beforeDestroy(),s.remove(),t.removeListener(),n.removeListener(),r.fire("unlockSnapshot"),u.afterDestroy&&u.afterDestroy(),e()}),h)}))}},statics:{hasCopyBin:function(e){return!!x.getCopyBin(e)},getCopyBin:function(e){return e.document.getById("cke_copybin")}}});CKEDITOR.plugins.widget=n,n.repository=t,n.nestedEditable=i}(),function(){function e(e,t,n){this.editor=e,this.notification=null,this._message=new CKEDITOR.template(t),this._singularMessage=n?new CKEDITOR.template(n):null,this._tasks=[],this._doneTasks=this._doneWeights=this._totalWeights=0}function t(e){this._weight=e||1,this._doneWeight=0,this._isCanceled=!1}CKEDITOR.plugins.add("notificationaggregator",{requires:"notification"}),e.prototype={createTask:function(e){e=e||{};var t,n=!this.notification;return n&&(this.notification=this._createNotification()),(t=this._addTask(e)).on("updated",this._onTaskUpdate,this),t.on("done",this._onTaskDone,this),t.on("canceled",(function(){this._removeTask(t)}),this),this.update(),n&&this.notification.show(),t},update:function(){this._updateNotification(),this.isFinished()&&this.fire("finished")},getPercentage:function(){return 0===this.getTaskCount()?1:this._doneWeights/this._totalWeights},isFinished:function(){return this.getDoneTaskCount()===this.getTaskCount()},getTaskCount:function(){return this._tasks.length},getDoneTaskCount:function(){return this._doneTasks},_updateNotification:function(){this.notification.update({message:this._getNotificationMessage(),progress:this.getPercentage()})},_getNotificationMessage:function(){var e=this.getTaskCount(),t={current:this.getDoneTaskCount(),max:e,percentage:Math.round(100*this.getPercentage())};return(1==e&&this._singularMessage?this._singularMessage:this._message).output(t)},_createNotification:function(){return new CKEDITOR.plugins.notification(this.editor,{type:"progress"})},_addTask:function(e){return e=new t(e.weight),this._tasks.push(e),this._totalWeights+=e._weight,e},_removeTask:function(e){var t=CKEDITOR.tools.indexOf(this._tasks,e);-1!==t&&(e._doneWeight&&(this._doneWeights-=e._doneWeight),this._totalWeights-=e._weight,this._tasks.splice(t,1),this.update())},_onTaskUpdate:function(e){this._doneWeights+=e.data,this.update()},_onTaskDone:function(){this._doneTasks+=1,this.update()}},CKEDITOR.event.implementOn(e.prototype),t.prototype={done:function(){this.update(this._weight)},update:function(e){if(!this.isDone()&&!this.isCanceled()){var t=(e=Math.min(this._weight,e))-this._doneWeight;this._doneWeight=e,this.fire("updated",t),this.isDone()&&this.fire("done")}},cancel:function(){this.isDone()||this.isCanceled()||(this._isCanceled=!0,this.fire("canceled"))},isDone:function(){return this._weight===this._doneWeight},isCanceled:function(){return this._isCanceled}},CKEDITOR.event.implementOn(t.prototype),CKEDITOR.plugins.notificationAggregator=e,CKEDITOR.plugins.notificationAggregator.task=t}(),CKEDITOR.plugins.add("uploadwidget",{requires:"widget,clipboard,filetools,notificationaggregator",init:function(e){e.filter.allow("*[!data-widget,!data-cke-upload-id]")},isSupportedEnvironment:function(){return CKEDITOR.plugins.clipboard.isFileApiSupported}}),CKEDITOR.fileTools||(CKEDITOR.fileTools={}),CKEDITOR.tools.extend(CKEDITOR.fileTools,{addUploadWidget:function(e,t,n){var i=CKEDITOR.fileTools,o=e.uploadRepository,r=n.supportedTypes?10:20;n.fileToElement&&e.on("paste",(function(n){n=n.data;var r,s,a=e.widgets.registered[t],l=n.dataTransfer,c=l.getFilesCount(),u=a.loadMethod||"loadAndUpload";if(!n.dataValue&&c)for(s=0;s<c;s++)if(r=l.getFile(s),!a.supportedTypes||i.isTypeSupported(r,a.supportedTypes)){var d=a.fileToElement(r);r=o.create(r,void 0,a.loaderType),d&&(r[u](a.uploadUrl,a.additionalRequestParameters),CKEDITOR.fileTools.markElement(d,t,r.id),"loadAndUpload"!=u&&"upload"!=u||a.skipNotifications||CKEDITOR.fileTools.bindNotifications(e,r),n.dataValue+=d.getOuterHtml())}}),null,null,r),CKEDITOR.tools.extend(n,{downcast:function(){return new CKEDITOR.htmlParser.text("")},init:function(){var t,n,i=this,r=this.wrapper.findOne("[data-cke-upload-id]").data("cke-upload-id"),s=o.loaders[r],a=CKEDITOR.tools.capitalize;s.on("update",(function(o){"abort"===s.status&&"function"==typeof i.onAbort&&i.onAbort(s),i.wrapper&&i.wrapper.getParent()?(e.fire("lockSnapshot"),o="on"+a(s.status),"abort"!==s.status&&"function"==typeof i[o]&&!1===i[o](s)||(n="cke_upload_"+s.status,i.wrapper&&n!=t&&(t&&i.wrapper.removeClass(t),i.wrapper.addClass(n),t=n),"error"!=s.status&&"abort"!=s.status||e.widgets.del(i)),e.fire("unlockSnapshot")):(CKEDITOR.instances[e.name]&&e.editable().find('[data-cke-upload-id="'+r+'"]').count()||s.abort(),o.removeListener())})),s.update()},replaceWith:function(t,n){if(""===t.trim())e.widgets.del(this);else{var i,o,r=this==e.widgets.focused,s=e.editable(),a=e.createRange();r||(o=e.getSelection().createBookmarks()),a.setStartBefore(this.wrapper),a.setEndAfter(this.wrapper),r&&(i=a.createBookmark()),s.insertHtmlIntoRange(t,a,n),e.widgets.checkWidgets({initOnlyNew:!0}),e.widgets.destroy(this,!0),r?(a.moveToBookmark(i),a.select()):e.getSelection().selectBookmarks(o)}},_getLoader:function(){var e=this.wrapper.findOne("[data-cke-upload-id]");return e?this.editor.uploadRepository.loaders[e.data("cke-upload-id")]:null}}),e.widgets.add(t,n)},markElement:function(e,t,n){e.setAttributes({"data-cke-upload-id":n,"data-widget":t})},bindNotifications:function(e,t){var n,i=null;t.on("update",(function(){!i&&t.uploadTotal&&((n=e._.uploadWidgetNotificaionAggregator)&&!n.isFinished()||(n=e._.uploadWidgetNotificaionAggregator=new CKEDITOR.plugins.notificationAggregator(e,e.lang.uploadwidget.uploadMany,e.lang.uploadwidget.uploadOne)).once("finished",(function(){var t=n.getTaskCount();0===t?n.notification.hide():n.notification.update({message:1==t?e.lang.uploadwidget.doneOne:e.lang.uploadwidget.doneMany.replace("%1",t),type:"success",important:1})})),i=n.createTask({weight:t.uploadTotal})),i&&"uploading"==t.status&&i.update(t.uploaded)})),t.on("uploaded",(function(){i&&i.done()})),t.on("error",(function(){i&&i.cancel(),e.showNotification(t.message,"warning")})),t.on("abort",(function(){i&&i.cancel(),CKEDITOR.instances[e.name]&&e.showNotification(e.lang.uploadwidget.abort,"info")}))}}),function(){function e(e){return 9>=e&&(e="0"+e),String(e)}function t(t){var i=[(i=new Date).getFullYear(),i.getMonth()+1,i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds()];return n+=1,"image-"+CKEDITOR.tools.array.map(i,e).join("")+"-"+n+"."+t}var n=0;CKEDITOR.plugins.add("uploadimage",{requires:"uploadwidget",onLoad:function(){CKEDITOR.addCss(".cke_upload_uploading img{opacity: 0.3}")},isSupportedEnvironment:function(){return CKEDITOR.plugins.clipboard.isFileApiSupported},init:function(e){if(this.isSupportedEnvironment()){var n=CKEDITOR.fileTools,i=n.getUploadUrl(e.config,"image");i&&(n.addUploadWidget(e,"uploadimage",{supportedTypes:/image\/(jpeg|png|gif|bmp)/,uploadUrl:i,fileToElement:function(){var e=new CKEDITOR.dom.element("img");return e.setAttribute("src","data:image/gif;base64,R0lGODlhDgAOAIAAAAAAAP///yH5BAAAAAAALAAAAAAOAA4AAAIMhI+py+0Po5y02qsKADs="),e},parts:{img:"img"},onUploading:function(e){this.parts.img.setAttribute("src",e.data)},onUploaded:function(e){var t=this.parts.img.$;this.replaceWith('<img src="'+e.url+'" width="'+(e.responseData.width||t.naturalWidth)+'" height="'+(e.responseData.height||t.naturalHeight)+'">')}}),e.on("paste",(function(o){if(o.data.dataValue.match(/<img[\s\S]+data:/i)){o=o.data;var r,s,a,l=document.implementation.createHTMLDocument("");for((l=new CKEDITOR.dom.element(l.body)).data("cke-editable",1),l.appendHtml(o.dataValue),r=l.find("img"),a=0;a<r.count();a++){var c=(s=r.getItem(a)).getAttribute("src"),u=c&&"data:"==c.substring(0,5),d=null===s.data("cke-realelement");u&&d&&!s.data("cke-upload-id")&&!s.isReadOnly(1)&&(u=(u=c.match(/image\/([a-z]+?);/i))&&u[1]||"jpg",(c=e.uploadRepository.create(c,t(u))).upload(i),n.markElement(s,"uploadimage",c.id),n.bindNotifications(e,c))}o.dataValue=l.getHtml()}})))}}})}(),CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(e){e.config.wsc_onFinish="function"==typeof e.config.wsc_onFinish?e.config.wsc_onFinish:function(){},e.config.wsc_onClose="function"==typeof e.config.wsc_onClose?e.config.wsc_onClose:function(){}},parseConfig:function(e){e.config.wsc_customerId=e.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk",e.config.wsc_customDictionaryIds=e.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"",e.config.wsc_userDictionaryName=e.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"",e.config.wsc_customLoaderScript=e.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript,e.config.wsc_interfaceLang=e.config.wsc_interfaceLang,CKEDITOR.config.wsc_cmd=e.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell",CKEDITOR.config.wsc_version="v4.3.0-master-d769233",CKEDITOR.config.wsc_removeGlobalVariable=!0},onLoad:function(e){"moono-lisa"==(CKEDITOR.skinName||e.config.skin)&&CKEDITOR.document.appendStyleSheet(CKEDITOR.getUrl(this.path+"skins/"+CKEDITOR.skin.name+"/wsc.css"))},init:function(e){var t=CKEDITOR.env;this.parseConfig(e),this.parseApi(e),e.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!(CKEDITOR.env.opera||CKEDITOR.env.air||document.domain!=window.location.hostname||t.ie&&(8>t.version||t.quirks))},void 0===e.plugins.scayt&&e.ui.addButton&&e.ui.addButton("SpellChecker",{label:e.lang.wsc.toolbar,click:function(e){var t=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.container.getText():e.document.getBody().getText();(t=t.replace(/\s/g,""))?e.execCommand("checkspell"):alert("Nothing to check!")},toolbar:"spellchecker,10"}),CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}}),function(){function e(e){function t(e){var t=!1;s.attachListener(s,"keydown",(function(){var n=i.getBody().getElementsByTag(e);if(!t){for(var o=0;o<n.count();o++)n.getItem(o).setCustomData("retain",!0);t=!0}}),null,null,1),s.attachListener(s,"keyup",(function(){var n=i.getElementsByTag(e);t&&(1==n.count()&&!n.getItem(0).getCustomData("retain")&&CKEDITOR.tools.isEmpty(n.getItem(0).getAttributes())&&n.getItem(0).remove(1),t=!1)}))}var n=this.editor;if(n&&!n.isDetached()){var i=e.document,o=i.body,r=i.getElementById("cke_actscrpt");r&&r.parentNode.removeChild(r),(r=i.getElementById("cke_shimscrpt"))&&r.parentNode.removeChild(r),(r=i.getElementById("cke_basetagscrpt"))&&r.parentNode.removeChild(r),o.contentEditable=!0,CKEDITOR.env.ie&&(o.hideFocus=!0,o.disabled=!0,o.removeAttribute("disabled")),delete this._.isLoadingData,this.$=o,i=new CKEDITOR.dom.document(i),this.setup(),this.fixInitialSelection();var s=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&i.getDocumentElement().addClass(i.$.compatMode),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&n.enterMode!=CKEDITOR.ENTER_P?t("p"):CKEDITOR.env.edge&&15>CKEDITOR.env.version&&n.enterMode!=CKEDITOR.ENTER_DIV&&t("div"),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)&&i.getDocumentElement().on("mousedown",(function(e){e.data.getTarget().is("html")&&setTimeout((function(){n.editable().focus()}))})),function(e){function t(e){e.returnValue=!1}if(CKEDITOR.env.gecko)try{var n=e.document.$;n.execCommand("enableObjectResizing",!1,!e.config.disableObjectResizing),n.execCommand("enableInlineTableEditing",!1,!e.config.disableNativeTableHandles)}catch(e){}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&e.config.disableObjectResizing&&function(){var n;e.editable().attachListener(e,"selectionChange",(function(){var i=e.getSelection().getSelectedElement();i&&(n&&(n.detachEvent("onresizestart",t),n=null),i.$.attachEvent("onresizestart",t),n=i.$)}))}()}(n);try{n.document.$.execCommand("2D-position",!1,!0)}catch(e){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==n.document.$.compatMode)&&this.attachListener(this,"keydown",(function(e){var t=e.data.getKeystroke();if(33==t||34==t)if(CKEDITOR.env.ie)setTimeout((function(){n.getSelection().scrollIntoView()}),0);else if(n.window.$.innerHeight>this.$.offsetHeight){var i=n.createRange();i[33==t?"moveToElementEditStart":"moveToElementEditEnd"](this),i.select(),e.data.preventDefault()}})),CKEDITOR.env.ie&&this.attachListener(i,"blur",(function(){try{i.$.selection.empty()}catch(e){}})),CKEDITOR.env.iOS&&this.attachListener(i,"touchend",(function(){e.focus()})),(o=n.document.getElementsByTag("title").getItem(0)).data("cke-title",o.getText()),CKEDITOR.env.ie&&(n.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout((function(){"unloaded"==this.status&&(this.status="ready"),n.fire("contentDom"),this._.isPendingFocus&&(n.focus(),this._.isPendingFocus=!1),setTimeout((function(){n.fire("dataReady")}),0)}),0,this)}}var t;CKEDITOR.plugins.add("wysiwygarea",{init:function(e){e.config.fullPage&&e.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),e.addMode("wysiwyg",(function(n){function i(i){i&&i.removeListener(),e.isDestroyed()||e.isDetached()||(e.editable(new t(e,r.$.contentWindow.document.body)),e.setData(e.getData(1),n))}var o="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",r=(o=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(o)+"}())":"",CKEDITOR.dom.element.createFromHtml('<iframe src="'+o+'" frameBorder="0"></iframe>'));r.setStyles({width:"100%",height:"100%"}),r.addClass("cke_wysiwyg_frame").addClass("cke_reset"),(o=e.ui.space("contents")).append(r);var s=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;s&&r.on("load",i);var a=e.title,l=e.fire("ariaEditorHelpLabel",{}).label;if(a&&(CKEDITOR.env.ie&&l&&(a+=", "+l),r.setAttribute("title",a)),l){a=CKEDITOR.tools.getNextId();var c=CKEDITOR.dom.element.createFromHtml('<span id="'+a+'" class="cke_voice_label">'+l+"</span>");o.append(c,1),r.setAttribute("aria-describedby",a)}e.on("beforeModeUnload",(function(e){e.removeListener(),c&&c.remove()})),r.setAttributes({tabIndex:e.tabIndex,allowTransparency:"true"}),!s&&i(),e.fire("ariaWidget",r)}))}}),CKEDITOR.editor.prototype.addContentsCss=function(e){var t=this.config,n=t.contentsCss;CKEDITOR.tools.isArray(n)||(t.contentsCss=n?[n]:[]),t.contentsCss.push(e)},t=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction((function(t){CKEDITOR.tools.setTimeout(e,0,this,t)}),this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(e,t){var n=this.editor;if(t)this.setHtml(e),this.fixInitialSelection(),n.fire("dataReady");else{this._.isLoadingData=!0,n._.dataStore={id:1};var i=n.config,o=i.fullPage,r=i.docType,s=CKEDITOR.tools.buildStyleHtml(function(){var e=[];if(8<=CKEDITOR.document.$.documentMode){e.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var t,n=[];for(t in CKEDITOR.dtd.$removeEmpty)n.push("html.CSS1Compat "+t+"[contenteditable=false]");e.push(n.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(e.push("html{height:100% !important}"),e.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return e.push("html{cursor:text;*cursor:auto}"),e.push("img,input,textarea{cursor:default}"),e.join("\n")}()).replace(/<style>/,'<style data-cke-temp="1">');o||(s+=CKEDITOR.tools.buildStyleHtml(n.config.contentsCss));var a=i.baseHref?'<base href="'+i.baseHref+'" data-cke-temp="1" />':"";o&&(e=e.replace(/<!DOCTYPE[^>]*>/i,(function(e){return n.docType=r=e,""})).replace(/<\?xml\s[^\?]*\?>/i,(function(e){return n.xmlDeclaration=e,""}))),e=n.dataProcessor.toHtml(e),o?(/<body[\s|>]/.test(e)||(e="<body>"+e),/<html[\s|>]/.test(e)||(e="<html>"+e+"</html>"),/<head[\s|>]/.test(e)?/<title[\s|>]/.test(e)||(e=e.replace(/<head[^>]*>/,"$&<title></title>")):e=e.replace(/<html[^>]*>/,"$&<head><title></title></head>"),a&&(e=e.replace(/<head[^>]*?>/,"$&"+a)),e=e.replace(/<\/head\s*>/,s+"$&"),e=r+e):e=i.docType+'<html dir="'+i.contentsLangDirection+'" lang="'+(i.contentsLanguage||n.langCode)+'"><head><title>'+this._.docTitle+"</title>"+a+s+"</head><body"+(i.bodyId?' id="'+i.bodyId+'"':"")+(i.bodyClass?' class="'+i.bodyClass+'"':"")+">"+e+"</body></html>",CKEDITOR.env.gecko&&(e=e.replace(/<body/,'<body contenteditable="true" '),2e4>CKEDITOR.env.version&&(e=e.replace(/<body[^>]*>/,"$&\x3c!-- cke-content-start --\x3e"))),i='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"<\/script>",CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(i+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)<\/script>'),a&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(i+='<script id="cke_basetagscrpt">var baseTag = document.querySelector( "base" );baseTag.href = baseTag.href;<\/script>'),e=e.replace(/(?=\s*<\/(:?head)>)/,i),this.clearCustomData(),this.clearListeners(),n.fire("contentDomUnload");var l=this.getDocument();try{l.write(e)}catch(t){setTimeout((function(){l.write(e)}),0)}}},getData:function(e){if(e)return this.getHtml();var t=(e=this.editor).config,n=(r=t.fullPage)&&e.docType,i=r&&e.xmlDeclaration,o=this.getDocument(),r=r?o.getDocumentElement().getOuterHtml():o.getBody().getHtml();return CKEDITOR.env.gecko&&t.enterMode!=CKEDITOR.ENTER_BR&&(r=r.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),r=e.dataProcessor.toDataFormat(r),i&&(r=i+"\n"+r),n&&(r=n+"\n"+r),r},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:t.baseProto.focus.call(this)},detach:function(){var e=(n=this.editor).document,n=n.container.findOne("iframe.cke_wysiwyg_frame");t.baseProto.detach.call(this),this.clearCustomData(this._.expandoNumber),e.getDocumentElement().clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),n&&(n.clearCustomData(),(e=n.removeCustomData("onResize"))&&e.removeListener(),n.isDetached()||n.remove())}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,CKEDITOR.config.plugins="dialogui,dialog,a11yhelp,about,basicstyles,blockquote,notification,button,toolbar,clipboard,panel,floatpanel,menu,contextmenu,elementspath,indent,indentlist,list,enterkey,entities,popup,filetools,filebrowser,floatingspace,listblock,richcombo,format,horizontalrule,htmlwriter,image,fakeobjects,link,magicline,maximize,pastetools,pastefromgdocs,pastefromlibreoffice,pastefromword,pastetext,removeformat,resize,menubutton,scayt,showborders,sourcearea,specialchar,stylescombo,tab,table,tabletools,tableselection,undo,lineutils,widgetselection,widget,notificationaggregator,uploadwidget,uploadimage,wsc,wysiwygarea",CKEDITOR.config.skin="moono-lisa",function(){var e=function(e,t){var n=CKEDITOR.getUrl("plugins/"+t);e=e.split(",");for(var i=0;i<e.length;i++)CKEDITOR.skin.icons[e[i]]={path:n,offset:-e[++i],bgsize:e[++i]}};CKEDITOR.env.hidpi?e("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,codesnippet,384,,bgcolor,408,,textcolor,432,,copyformatting,456,,creatediv,480,,docprops-rtl,504,,docprops,528,,easyimagealigncenter,552,,easyimagealignleft,576,,easyimagealignright,600,,easyimagealt,624,,easyimagefull,648,,easyimageside,672,,easyimageupload,696,,embed,720,,embedsemantic,744,,emojipanel,768,,exportpdf,792,,find-rtl,816,,find,840,,replace,864,,flash,888,,button,912,,checkbox,936,,form,960,,hiddenfield,984,,imagebutton,1008,,radio,1032,,select-rtl,1056,,select,1080,,textarea-rtl,1104,,textarea,1128,,textfield-rtl,1152,,textfield,1176,,horizontalrule,1200,,iframe,1224,,image,1248,,indent-rtl,1272,,indent,1296,,outdent-rtl,1320,,outdent,1344,,justifyblock,1368,,justifycenter,1392,,justifyleft,1416,,justifyright,1440,,language,1464,,anchor-rtl,1488,,anchor,1512,,link,1536,,unlink,1560,,bulletedlist-rtl,1584,,bulletedlist,1608,,numberedlist-rtl,1632,,numberedlist,1656,,mathjax,1680,,maximize,1704,,newpage-rtl,1728,,newpage,1752,,pagebreak-rtl,1776,,pagebreak,1800,,pastefromword-rtl,1824,,pastefromword,1848,,pastetext-rtl,1872,,pastetext,1896,,placeholder,1920,,preview-rtl,1944,,preview,1968,,print,1992,,removeformat,2016,,save,2040,,scayt,2064,,selectall,2088,,showblocks-rtl,2112,,showblocks,2136,,smiley,2160,,source-rtl,2184,,source,2208,,sourcedialog-rtl,2232,,sourcedialog,2256,,specialchar,2280,,table,2304,,templates-rtl,2328,,templates,2352,,uicolor,2376,,redo-rtl,2400,,redo,2424,,undo-rtl,2448,,undo,2472,,simplebox,4992,auto,spellchecker,2520,","icons_hidpi.png"):e("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,codesnippet,384,auto,bgcolor,408,auto,textcolor,432,auto,copyformatting,456,auto,creatediv,480,auto,docprops-rtl,504,auto,docprops,528,auto,easyimagealigncenter,552,auto,easyimagealignleft,576,auto,easyimagealignright,600,auto,easyimagealt,624,auto,easyimagefull,648,auto,easyimageside,672,auto,easyimageupload,696,auto,embed,720,auto,embedsemantic,744,auto,emojipanel,768,auto,exportpdf,792,auto,find-rtl,816,auto,find,840,auto,replace,864,auto,flash,888,auto,button,912,auto,checkbox,936,auto,form,960,auto,hiddenfield,984,auto,imagebutton,1008,auto,radio,1032,auto,select-rtl,1056,auto,select,1080,auto,textarea-rtl,1104,auto,textarea,1128,auto,textfield-rtl,1152,auto,textfield,1176,auto,horizontalrule,1200,auto,iframe,1224,auto,image,1248,auto,indent-rtl,1272,auto,indent,1296,auto,outdent-rtl,1320,auto,outdent,1344,auto,justifyblock,1368,auto,justifycenter,1392,auto,justifyleft,1416,auto,justifyright,1440,auto,language,1464,auto,anchor-rtl,1488,auto,anchor,1512,auto,link,1536,auto,unlink,1560,auto,bulletedlist-rtl,1584,auto,bulletedlist,1608,auto,numberedlist-rtl,1632,auto,numberedlist,1656,auto,mathjax,1680,auto,maximize,1704,auto,newpage-rtl,1728,auto,newpage,1752,auto,pagebreak-rtl,1776,auto,pagebreak,1800,auto,pastefromword-rtl,1824,auto,pastefromword,1848,auto,pastetext-rtl,1872,auto,pastetext,1896,auto,placeholder,1920,auto,preview-rtl,1944,auto,preview,1968,auto,print,1992,auto,removeformat,2016,auto,save,2040,auto,scayt,2064,auto,selectall,2088,auto,showblocks-rtl,2112,auto,showblocks,2136,auto,smiley,2160,auto,source-rtl,2184,auto,source,2208,auto,sourcedialog-rtl,2232,auto,sourcedialog,2256,auto,specialchar,2280,auto,table,2304,auto,templates-rtl,2328,auto,templates,2352,auto,uicolor,2376,auto,redo-rtl,2400,auto,redo,2424,auto,undo-rtl,2448,auto,undo,2472,auto,simplebox,2496,auto,spellchecker,2520,auto","icons.png")}()}var n,i,o,r,s,a,l,c,u}()},5509:(e,t,n)=>{var i,o,r;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r=window,console.log(r),i=[n(1311),n(3609),t],void 0===(o=function(e,t,n){r.GridBackbone=function(e,t,n,i){var o=e.Backbone,r=[],a=r.slice;t.VERSION="1.1.2",t.$=i,t.noConflict=function(){return e.Backbone=o,this},t.emulateHTTP=!1,t.emulateJSON=!1;var l=t.Events={on:function(e,t,n){return u(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this},once:function(e,t,i){if(!u(this,"once",e,[t,i])||!t)return this;var o=this,r=n.once((function(){o.off(e,r),t.apply(this,arguments)}));return r._callback=t,this.on(e,r,i)},off:function(e,t,i){var o,r,s,a,l,c,d,h;if(!this._events||!u(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events=void 0,this;for(l=0,c=(a=e?[e]:n.keys(this._events)).length;l<c;l++)if(e=a[l],s=this._events[e]){if(this._events[e]=o=[],t||i)for(d=0,h=s.length;d<h;d++)r=s[d],(t&&t!==r.callback&&t!==r.callback._callback||i&&i!==r.context)&&o.push(r);o.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!u(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&d(n,t),i&&d(i,arguments),this},stopListening:function(e,t,i){var o=this._listeningTo;if(!o)return this;var r=!t&&!i;for(var a in i||"object"!==s(t)||(i=this),e&&((o={})[e._listenId]=e),o)(e=o[a]).off(t,i,this),(r||n.isEmpty(e._events))&&delete this._listeningTo[a];return this}},c=/\s+/,u=function(e,t,n,i){if(!n)return!0;if("object"===s(n)){for(var o in n)e[t].apply(e,[o,n[o]].concat(i));return!1}if(c.test(n)){for(var r=n.split(c),a=0,l=r.length;a<l;a++)e[t].apply(e,[r[a]].concat(i));return!1}return!0},d=function(e,t){var n,i=-1,o=e.length,r=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++i<o;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=e[i]).callback.call(n.ctx,r);return;case 2:for(;++i<o;)(n=e[i]).callback.call(n.ctx,r,s);return;case 3:for(;++i<o;)(n=e[i]).callback.call(n.ctx,r,s,a);return;default:for(;++i<o;)(n=e[i]).callback.apply(n.ctx,t);return}};n.each({listenTo:"on",listenToOnce:"once"},(function(e,t){l[t]=function(t,i,o){return(this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=n.uniqueId("l"))]=t,o||"object"!==s(i)||(o=this),t[e](i,o,this),this}})),l.bind=l.on,l.unbind=l.off,n.extend(t,l);var h=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(h.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var o,r,a,l,c,u,d,h;if(null==e)return this;if("object"===s(e)?(r=e,i=t):(r={})[e]=t,i||(i={}),!this._validate(r,i))return!1;for(o in a=i.unset,c=i.silent,l=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={}),h=this.attributes,d=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]),r)t=r[o],n.isEqual(h[o],t)||l.push(o),n.isEqual(d[o],t)?delete this.changed[o]:this.changed[o]=t,a?delete h[o]:h[o]=t;if(!c){l.length&&(this._pending=i);for(var f=0,p=l.length;f<p;f++)this.trigger("change:"+l[f],this,h[l[f]],i)}if(u)return this;if(!c)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t,i=!1,o=this._changing?this._previousAttributes:this.attributes;for(var r in e)n.isEqual(o[r],t=e[r])||((i||(i={}))[r]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){void 0===(e=e?n.clone(e):{}).parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;i&&i(t,n,e),t.trigger("sync",t,n,e)},N(this,e),this.sync("read",this,e)},save:function(e,t,i){var o,r,a,l=this.attributes;if(null==e||"object"===s(e)?(o=e,i=t):(o={})[e]=t,i=n.extend({validate:!0},i),o&&!i.wait){if(!this.set(o,i))return!1}else if(!this._validate(o,i))return!1;o&&i.wait&&(this.attributes=n.extend({},l,o)),void 0===i.parse&&(i.parse=!0);var c=this,u=i.success;return i.success=function(e){c.attributes=l;var t=c.parse(e,i);if(i.wait&&(t=n.extend(o||{},t)),n.isObject(t)&&!c.set(t,i))return!1;u&&u(c,e,i),c.trigger("sync",c,e,i)},N(this,i),"patch"==(r=this.isNew()?"create":i.patch?"patch":"update")&&(i.attrs=o),a=this.sync(r,this,i),o&&i.wait&&(this.attributes=l),a},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,o=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&o(),i&&i(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;N(this,e);var r=this.sync("delete",this,e);return e.wait||o(),r},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||x();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return!i||(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1)}});n.each(["keys","values","pairs","invert","pick","omit"],(function(e){h.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}}));var f=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},p={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};n.extend(f.prototype,l,{model:h,initialize:function(){},toJSON:function(e){return this.map((function(t){return t.toJSON(e)}))},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,g))},remove:function(e,t){var i,o,r,s,a=!n.isArray(e);for(t||(t={}),i=0,o=(e=a?[e]:n.clone(e)).length;i<o;i++)(s=e[i]=this.get(e[i]))&&(delete this._byId[s.id],delete this._byId[s.cid],r=this.indexOf(s),this.models.splice(r,1),this.length--,t.silent||(t.index=r,s.trigger("remove",s,this,t)),this._removeReference(s,t));return a?e[0]:e},set:function(e,t){(t=n.defaults({},t,p)).parse&&(e=this.parse(e,t));var i,o,r,s,a,l,c,u=!n.isArray(e);e=u?e?[e]:[]:n.clone(e);var d=t.at,f=this.model,g=this.comparator&&null==d&&!1!==t.sort,m=n.isString(this.comparator)?this.comparator:null,E=[],T=[],C={},v=t.add,I=t.merge,D=t.remove,O=!(g||!v||!D)&&[];for(i=0,o=e.length;i<o;i++){if(r=(a=e[i]||{})instanceof h?s=a:a[f.prototype.idAttribute||"id"],l=this.get(r))D&&(C[l.cid]=!0),I&&(a=a===s?s.attributes:a,t.parse&&(a=l.parse(a,t)),l.set(a,t),g&&!c&&l.hasChanged(m)&&(c=!0)),e[i]=l;else if(v){if(!(s=e[i]=this._prepareModel(a,t)))continue;E.push(s),this._addReference(s,t)}s=l||s,!O||!s.isNew()&&C[s.id]||O.push(s),C[s.id]=!0}if(D){for(i=0,o=this.length;i<o;++i)C[(s=this.models[i]).cid]||T.push(s);T.length&&this.remove(T,t)}if(E.length||O&&O.length)if(g&&(c=!0),this.length+=E.length,null!=d)for(i=0,o=E.length;i<o;i++)this.models.splice(d+i,0,E[i]);else{O&&(this.models.length=0);var b=O||E;for(i=0,o=b.length;i<o;i++)this.models.push(b[i])}if(c&&this.sort({silent:!0}),!t.silent){for(i=0,o=E.length;i<o;i++)(s=E[i]).trigger("add",s,this,t);(c||O&&O.length)&&this.trigger("sort",this,t)}return u?e[0]:e},reset:function(e,t){t||(t={});for(var i=0,o=this.models.length;i<o;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return a.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"]((function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0}))},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){void 0===(e=e?n.clone(e):{}).parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){var o=e.reset?"reset":"set";i[o](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},N(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,o=t.success;return t.success=function(e,n){t.wait&&i.add(e,t),o&&o(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof h)return e;(t=t?n.clone(t):{}).collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_addReference:function(e,t){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});n.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"],(function(e){f.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}}));n.each(["groupBy","countBy","sortBy","indexBy"],(function(e){f.prototype[e]=function(t,i){var o=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,o,i)}}));var m=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,T)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},E=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];n.extend(m.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],!1!==n&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;for(var t in this.undelegateEvents(),e){var i=e[t];if(n.isFunction(i)||(i=this[e[t]]),i){var o=t.match(E),r=o[1],s=o[2];i=n.bind(i,this),r+=".delegateEvents"+this.cid,""===s?this.$el.on(r,i):this.$el.on(r,s,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className"));var i=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,o){var r=v[e];n.defaults(o||(o={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:r,dataType:"json"};if(o.url||(s.url=n.result(i,"url")||x()),null!=o.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(o.attrs||i.toJSON(o))),o.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),o.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){s.type="POST",o.emulateJSON&&(s.data._method=r);var a=o.beforeSend;o.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",r),a)return a.apply(this,arguments)}}"GET"===s.type||o.emulateJSON||(s.processData=!1),"PATCH"===s.type&&C&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=o.xhr=t.ajax(n.extend(s,o));return i.trigger("request",i,l,o),l};var C=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),v={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var I=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},D=/\((.*?)\)/g,O=/(\(\?)?:\w+/g,b=/\*\w+/g,y=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(I.prototype,l,{initialize:function(){},route:function(e,i,o){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(o=i,i=""),o||(o=this[i]);var r=this;return t.history.route(e,(function(n){var s=r._extractParameters(e,n);r.execute(o,s),r.trigger.apply(r,["route:"+i].concat(s)),r.trigger("route",i,s),t.history.trigger("route",r,i,s)})),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(y,"\\$&").replace(D,"(?:$1)?").replace(O,(function(e,t){return t?e:"([^/?]+)"})).replace(b,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,(function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null}))}});var R=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,K=/^\/+|\/+$/g,k=/msie [\w.]+/,w=/\/$/,S=/#.*$/;R.started=!1,n.extend(R.prototype,l,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(w,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(R.started)throw new Error("Backbone.history has already been started");R.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),o=document.documentMode,r=k.exec(navigator.userAgent.toLowerCase())&&(!o||o<=7);if(this.root=("/"+this.root+"/").replace(K,"/"),r&&this._wantsHashChange){var s=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=s.hide().appendTo("body")[0].contentWindow,this.navigate(i)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),R.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,(function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(e,t){if(!R.started)return!1;t&&!0!==t||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(S,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new R;h.extend=f.extend=I.extend=m.extend=R.extend=function(e,t){var i,o=this;i=e&&n.has(e,"constructor")?e.constructor:function(){return o.apply(this,arguments)},n.extend(i,o,t);var r=function(){this.constructor=i};return r.prototype=o.prototype,i.prototype=new r,e&&n.extend(i.prototype,e),i.__super__=o.prototype,i};var x=function(){throw new Error('A "url" property or function must be specified')},N=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}};return t}(r,n,e,t)}.apply(t,i))||(e.exports=o)},6554:(e,t)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i;i=function(){var e=Object.prototype.toString;Array.isArray=Array.isArray||function(t){return"[object Array]"==e.call(t)};var t,i,o,r=String.prototype.trim;r?t=function(e){return null==e?"":r.call(e)}:(/\S/.test(" ")?(i=/^[\s\xA0]+/,o=/[\s\xA0]+$/):(i=/^\s+/,o=/\s+$/),t=function(e){return null==e?"":e.toString().replace(i,"").replace(o,"")});var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},a={},l=function(){};return l.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(e,t,n,i){if(i||(this.context=t,this.buffer=[]),!this.includes("",e))return i?e:void this.send(e);e=this.render_pragmas(e);var o=this.render_section(e,t,n);if(!1===o&&(o=this.render_tags(e,t,n,i)),i)return o;this.sendLines(o)},send:function(e){""!==e&&this.buffer.push(e)},sendLines:function(e){if(e)for(var t=e.split("\n"),n=0;n<t.length;n++)this.send(t[n])},render_pragmas:function(e){if(!this.includes("%",e))return e;var t=this,n=this.getCachedRegex("render_pragmas",(function(e,t){return new RegExp(e+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+t,"g")}));return e.replace(n,(function(e,n,i){if(!t.pragmas_implemented[n])throw{message:"This implementation of mustache doesn't understand the '"+n+"' pragma"};if(t.pragmas[n]={},i){var o=i.split("=");t.pragmas[n][o[0]]=o[1]}return""}))},render_partial:function(e,i,o){if(e=t(e),!o||void 0===o[e])throw{message:"unknown_partial '"+e+"'"};return i&&"object"==n(i[e])?this.render(o[e],i[e],o,!0):this.render(o[e],i,o,!0)},render_section:function(e,t,n){if(!this.includes("#",e)&&!this.includes("^",e))return!1;var i=this,o=this.getCachedRegex("render_section",(function(e,t){return new RegExp("^([\\s\\S]*?)"+e+"(\\^|\\#)\\s*(.+)\\s*"+t+"\n*([\\s\\S]*?)"+e+"\\/\\s*\\3\\s*"+t+"\\s*([\\s\\S]*)$","g")}));return e.replace(o,(function(e,o,r,s,a,l){var c,u=o?i.render_tags(o,t,n,!0):"",d=l?i.render(l,t,n,!0):"",h=i.find(s,t);return"^"===r?c=!h||Array.isArray(h)&&0===h.length?i.render(a,t,n,!0):"":"#"===r&&(c=Array.isArray(h)?i.map(h,(function(e){return i.render(a,i.create_context(e),n,!0)})).join(""):i.is_object(h)?i.render(a,i.create_context(h),n,!0):"function"==typeof h?h.call(t,a,(function(e){return i.render(e,t,n,!0)})):h?i.render(a,t,n,!0):""),u+c+d}))},render_tags:function(e,t,n,i){for(var o=this,r=function(){return o.getCachedRegex("render_tags",(function(e,t){return new RegExp(e+"(=|!|>|&|\\{|%)?([^#\\^]+?)\\1?"+t+"+","g")}))},a=r(),l=function(e,i,l){switch(i){case"!":return"";case"=":return o.set_delimiters(l),a=r(),"";case">":return o.render_partial(l,t,n);case"{":case"&":return o.find(l,t);default:return c=o.find(l,t),String(c).replace(/&(?!\w+;)|[<>"']/g,(function(e){return s[e]||e}))}var c},c=e.split("\n"),u=0;u<c.length;u++)c[u]=c[u].replace(a,l,this),i||this.send(c[u]);if(i)return c.join("\n")},set_delimiters:function(e){var t=e.split(" ");this.otag=this.escape_regex(t[0]),this.ctag=this.escape_regex(t[1])},escape_regex:function(e){if(!arguments.callee.sRE){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=new RegExp("(\\"+t.join("|\\")+")","g")}return e.replace(arguments.callee.sRE,"\\$1")},find:function(e,n){function i(e){return!1===e||0===e||e}var o;if((e=t(e)).match(/([a-z_]+)\./gi)){var r=this.walk_context(e,n);i(r)&&(o=r)}else i(n[e])?o=n[e]:i(this.context[e])&&(o=this.context[e]);return"function"==typeof o?o.apply(n):void 0!==o?o:""},walk_context:function(e,t){for(var n=e.split("."),i=null!=t[n[0]]?t:this.context,o=i[n.shift()];null!=o&&n.length>0;)i=o,o=o[n.shift()];return"function"==typeof o?o.apply(i):o},includes:function(e,t){return-1!=t.indexOf(this.otag+e)},create_context:function(e){if(this.is_object(e))return e;var t=".";this.pragmas["IMPLICIT-ITERATOR"]&&(t=this.pragmas["IMPLICIT-ITERATOR"].iterator);var n={};return n[t]=e,n},is_object:function(e){return e&&"object"==n(e)},map:function(e,t){if("function"==typeof e.map)return e.map(t);for(var n=[],i=e.length,o=0;o<i;o++)n.push(t(e[o]));return n},getCachedRegex:function(e,t){var n=a[this.otag];n||(n=a[this.otag]={});var i=n[this.ctag];i||(i=n[this.ctag]={});var o=i[e];return o||(o=i[e]=t(this.otag,this.ctag)),o}},{name:"mustache.js",version:"0.4.0",to_html:function(e,t,n,i){var o=new l;if(i&&(o.send=i),o.render(e,t||{},n),!i)return o.buffer.join("\n")}}}(),function(){function o(e){return"".trim?e.trim():e.replace(/^\s+/,"").replace(/\s+$/,"")}var r={VERSION:"0.10.2",templates:{},$:"undefined"!=typeof window&&(window.jQuery||window.Zepto)||null,addTemplate:function(e,t){if("object"!==n(e))r[e]?console.error("Invalid name: "+e+"."):r.templates[e]?console.error('Template "'+e+'  " exists'):(r.templates[e]=t,r[e]=function(t,n){t=t||{};var s=i.to_html(r.templates[e],t,r.templates);return r.$&&!n?r.$(o(s)):s});else for(var s in e)this.addTemplate(s,e[s])},clearAll:function(){for(var e in r.templates)delete r[e];r.templates={}},refresh:function(){r.clearAll(),r.grabTemplates()},grabTemplates:function(){var e,t,n,i=document.getElementsByTagName("script"),s=[];for(e=0,t=i.length;e<t;e++)(n=i[e])&&n.innerHTML&&n.id&&"text/grid-icanhaz"===n.type&&(r.addTemplate(n.id,o(n.innerHTML)),s.unshift(n));for(e=0,t=s.length;e<t;e++)s[e].parentNode.removeChild(s[e])}};e.exports&&(t=e.exports=r),t.ich=r,"undefined"!=typeof document&&(r.$?r.$((function(){r.grabTemplates()})):document.addEventListener("DOMContentLoaded",(function(){r.grabTemplates()}),!0)),window.ich=r}()},2039:(e,t,n)=>{var i,o,r;!function(s){"use strict";o=[n(3609)],void 0===(r="function"==typeof(i=function(e){var t=0;e.ajaxTransport("iframe",(function(n){var i,o,r;if(n.async)return{send:function(s,a){(i=e('<form style="display:none;"></form>')).attr("accept-charset",n.formAcceptCharset),r=/\?/.test(n.url)?"&":"?","DELETE"===n.type?(n.url=n.url+r+"_method=DELETE",n.type="POST"):"PUT"===n.type?(n.url=n.url+r+"_method=PUT",n.type="POST"):"PATCH"===n.type&&(n.url=n.url+r+"_method=PATCH",n.type="POST"),o=e('<iframe src="javascript:false;" name="iframe-transport-'+(t+=1)+'"></iframe>').bind("load",(function(){var t,r=e.isArray(n.paramName)?n.paramName:[n.paramName];o.unbind("load").bind("load",(function(){var t;try{if(!(t=o.contents()).length||!t[0].firstChild)throw new Error}catch(e){t=void 0}a(200,"success",{iframe:t}),e('<iframe src="javascript:false;"></iframe>').appendTo(i),window.setTimeout((function(){i.remove()}),0)})),i.prop("target",o.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&e.each(n.formData,(function(t,n){e('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(i)})),n.fileInput&&n.fileInput.length&&"POST"===n.type&&(t=n.fileInput.clone(),n.fileInput.after((function(e){return t[e]})),n.paramName&&n.fileInput.each((function(t){e(this).prop("name",r[t]||n.paramName)})),i.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),i.submit(),t&&t.length&&n.fileInput.each((function(n,i){var o=e(t[n]);e(i).prop("name",o.prop("name")),o.replaceWith(i)}))})),i.append(o).appendTo(document.body)},abort:function(){o&&o.unbind("load").prop("src","javascript".concat(":false;")),i&&i.remove()}}})),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var n=t&&t[0];return n&&e.isXMLDoc(n)?n:e.parseXML(n.XMLDocument&&n.XMLDocument.xml||e(n.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})})?i.apply(t,o):i)||(e.exports=r)}()},2650:()=>{!function(e){if(e.support.touch="ontouchend"in document,e.support.touch){var t,n=e.ui.mouse.prototype,i=n._mouseInit,o=n._mouseDestroy;n._touchStart=function(e){!t&&this._mouseCapture(e.originalEvent.changedTouches[0])&&(t=!0,this._touchMoved=!1,r(e,"mouseover"),r(e,"mousemove"),r(e,"mousedown"))},n._touchMove=function(e){t&&(this._touchMoved=!0,r(e,"mousemove"))},n._touchEnd=function(e){t&&(r(e,"mouseup"),r(e,"mouseout"),this._touchMoved||r(e,"click"),t=!1)},n._mouseInit=function(){var t=this;t.element.bind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),i.call(t)},n._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),o.call(t)}}function r(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var n=e.originalEvent.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}}}(jQuery)},7161:()=>{var e;e=jQuery,mutate_event_stack=[{name:"width",handler:function(t){return n={el:t},e(n.el).data("mutate-width")||e(n.el).data("mutate-width",e(n.el).width()),!(!e(n.el).data("mutate-width")||e(n.el).width()==e(n.el).data("mutate-width")||(e(n.el).data("mutate-width",e(n.el).width()),0))}},{name:"height",handler:function(t){if(element=t,e(element).data("mutate-height")||e(element).data("mutate-height",e(element).height()),e(element).data("mutate-height")&&e(element).height()!=e(element).data("mutate-height"))return e(element).data("mutate-height",e(element).height()),!0}},{name:"top",handler:function(t){if(e(t).data("mutate-top")||e(t).data("mutate-top",e(t).css("top")),e(t).data("mutate-top")&&e(t).css("top")!=e(t).data("mutate-top"))return e(t).data("mutate-top",e(t).css("top")),!0}},{name:"bottom",handler:function(t){if(e(t).data("mutate-bottom")||e(t).data("mutate-bottom",e(t).css("bottom")),e(t).data("mutate-bottom")&&e(t).css("bottom")!=e(t).data("mutate-bottom"))return e(t).data("mutate-bottom",e(t).css("bottom")),!0}},{name:"right",handler:function(t){if(e(t).data("mutate-right")||e(t).data("mutate-right",e(t).css("right")),e(t).data("mutate-right")&&e(t).css("right")!=e(t).data("mutate-right"))return e(t).data("mutate-right",e(t).css("right")),!0}},{name:"left",handler:function(t){if(e(t).data("mutate-left")||e(t).data("mutate-left",e(t).css("left")),e(t).data("mutate-left")&&e(t).css("left")!=e(t).data("mutate-left"))return e(t).data("mutate-left",e(t).css("left")),!0}},{name:"hide",handler:function(t){if(e(t).is(":hidden"))return!0}},{name:"show",handler:function(t){if(e(t).is(":visible"))return!0}},{name:"scrollHeight",handler:function(t){if(e(t).data("prev-scrollHeight")||e(t).data("prev-scrollHeight",e(t)[0].scrollHeight),e(t).data("prev-scrollHeight")&&e(t)[0].scrollHeight!=e(t).data("prev-scrollHeight"))return e(t).data("prev-scrollHeight",e(t)[0].scrollHeight),!0}},{name:"scrollWidth",handler:function(t){if(e(t).data("prev-scrollWidth")||e(t).data("prev-scrollWidth",e(t)[0].scrollWidth),e(t).data("prev-scrollWidth")&&e(t)[0].scrollWidth!=e(t).data("prev-scrollWidth"))return e(t).data("prev-scrollWidth",e(t)[0].scrollWidth),!0}},{name:"scrollTop",handler:function(t){if(e(t).data("prev-scrollTop")||e(t).data("prev-scrollTop",e(t)[0].scrollTop()),e(t).data("prev-scrollTop")&&e(t)[0].scrollTop()!=e(t).data("prev-scrollTop"))return e(t).data("prev-scrollTop",e(t)[0].scrollTop()),!0}},{name:"scrollLeft",handler:function(t){if(e(t).data("prev-scrollLeft")||e(t).data("prev-scrollLeft",e(t)[0].scrollLeft()),e(t).data("prev-scrollLeft")&&e(t)[0].scrollLeft()!=e(t).data("prev-scrollLeft"))return e(t).data("prev-scrollLeft",e(t)[0].scrollLeft()),!0}}]},2594:()=>{var e;e=jQuery,mutate={speed:1,event_stack:mutate_event_stack,stack:[],events:{},add_event:function(e){mutate.events[e.name]=e.handler},add:function(e,t,n,i){mutate.stack[mutate.stack.length]={event_name:e,selector:t,callback:n,false_callback:i}}},function t(){var n=mutate;"undefined"!=n.event_stack&&n.event_stack.length&&e.each(n.event_stack,(function(e,t){mutate.add_event(t)})),n.event_stack=[],e.each(n.stack,(function(t,i){e(i.selector).each((function(e,t){!0===n.events[i.event_name](t)?i.callback&&i.callback(t,i):i.false_callback&&i.false_callback(t,i)}))})),setTimeout(t,mutate.speed)}(),e.fn.extend({mutate:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var t=!1,n=arguments[1],i=this,o=arguments[2]?arguments[2]:function(){};return"extend"==arguments[0].toLowerCase()?(mutate.add_event(n),this):(e.each(e.trim(arguments[0]).split(" "),(function(e,r){t=r,mutate.add(t,i,n,o)})),this)}))})},653:()=>{document.lang_values={"btn-publish":"Publish","btn-revert":"Revert","btn-revisions":"Revisions","btn-preview":"Preview","btn-toggle-boxes":"Toggle boxes","btn-add-container":"Add container","btn-add-box":"Add box","btn-cancle":"Cancel","btn-save":"Save","btn-make-reusable":"Make reusable","btn-wp-media":"Mediendatei einfügen","state-display":{published:"Published!",draft:"Is draft…"},"default-style":"Default style","rev-by-author":"by","placeholder-search-box":"Search boxes","title-tab-containers":"New container","title-tab-reuse-container":"Reusable container","title-wp-media":"Choose an image","label-title":"Title:","label-title-url":"Title URL (for internals links please use a relative path starting with '/'):","label-prolog":"Prolog:","label-epilog":"Epilog:","label-readmore":"Read more link label:","label-readmore-url":"Read more link URL (for internals links please use a relative path starting with '/'):","label-style":"Style:","label-b-before":"Prolog","label-b-dynamic":"Box specific settings","label-b-after":"Epilog",err_publish:"Could not publish…",err_revert:"Could not revert Grid…",err_container_reuse:"Error while trying to make container reusable!",err_container_save:"Could not save container.",err_container_delete:"Could not delete container.",err_slot_style:"Could not save slot style.",err_box_trash:"Could not delete box.",err_move_container:"Could not move containers. Site will reload!","err-move-box":"Error while moving box!","err-box-reuse":"Could not make box reusable. Please reload the page and try again.","err-box-save":"Could not save the box. Please reload the page and try again.",warn_container_edited:"Please finish container editing first.",warn_container_reuse_need_title:"The container needs a title to be reusable. Please try again.",warn_toggle_boxes_container_edited:"Please finish the container editing first.",prom_container_reuse_title:"Once a container is reusable you cannot modify it within this grid anymore. If you want to proceed choose a Reuse-Title and confirm:","confirm-box-reuse":"Once a box is reusable you cannot modify it within this grid anymore.\nProceed?","confirm-leave-page":"Do you really want to leave Grid?","confirm-grid-revert":"Delete all changes?","info-wp-hide-adminbar":"You can expand the admin menu here. Grid needs some more space, so the admin menu is automatically collapsed."}},0:()=>{window.Revisions=GridBackbone.Collection.extend({model:Revision,initialize:function(e){if(!(e&&e.grid&&e.grid instanceof Grid))throw"InvalidConstructArgs Revisions need a Grid";this.grid=e.grid},getGridID:function(){return GRID.log(this),this.grid.getGridID()},sync:function(e,t,n){GridRequest.revisions(t,n)}}),window.ContainerTypes=GridBackbone.Collection.extend({model:ContainerType,sync:function(e,t,n){GridRequest.containertypes(t,n)}}),window.ReusableContainers=GridBackbone.Collection.extend({model:ContainerType,sync:function(e,t,n){GridRequest.reusablecontainers(t,n)}}),window.BoxTypes=GridBackbone.Collection.extend({model:BoxType,sync:function(e,t,n){GridRequest.boxtypes(t,n)}}),window.Styles=GridBackbone.Collection.extend({model:StyleType,initialize:function(e){if(!e||!e.type)throw"InvalidConstructArgs Styles";this.type=e.type},sync:function(e,t,n){GridRequest.styles(t,n)}}),window.Containers=GridBackbone.Collection.extend({model:Container,move:function(e,t){var n=this;return GridRequest.container.update(e,{action:"move",index:t,success:function(i){n.remove(e),n.add(e,{at:t})}}),this}}),window.Slots=GridBackbone.Collection.extend({model:Slot}),window.Boxes=GridBackbone.Collection.extend({model:Box})},1579:()=>{window.GridBoxBlueprints=GridBackbone.Collection.extend({model:GridBoxBlueprint,initialize:function(e){},sync:function(e,t,n){GridRequest.boxblueprints(t,n)}})},545:()=>{window.GridAuthor=GridBackbone.Model.extend({defaults:function(){return{has_lock:!1,request_lock:!1}},initialize:function(e){if(!e)throw"No parameters in constructor of author";if(!e.id)throw"InvalidConstructArgs GridAuthor needs id";if(!e.name)throw"InvalidConstructArgs GridAuthor needs name"}})},1055:()=>{function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}window.GridBoxBlueprint=GridBackbone.Model.extend({initialize:function(t){if(!t||!t.type||""==t.type)throw"InvalidConstructArgs GridBoxBlueprint: needs type";if(!t.content||"object"!=e(t.content))throw"InvalidConstructArgs GridBoxBlueprint: needs content"}})},239:()=>{boxEditorControls.checkbox=GridBackbone.View.extend({className:"grid-editor-widget grid-editor-widget-checkbox",render:function(){var e="<label><input type='checkbox' "+(this.model.container[this.model.structure.key]?"checked=checked":"")+" /> "+this.model.structure.label+"</label>";return this.$el.html(e),this},fetchValue:function(){return this.$el.find("input[type=checkbox]").is(":checked")}})},5285:()=>{function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}boxEditorControls.file=GridBackbone.View.extend({className:"grid-editor-widget grid-editor-widget-file",initialize:function(){},render:function(){jQuery,this.model.container[this.model.structure.key];var t=jQuery("<div class='form-item file-upload'>");t.append("<label>"+this.model.structure.label+"</label>"),this.$preview=jQuery("<div></div>").addClass("file-upload-preview"),t.append(this.$preview);var n=jQuery("<input type='file' data-path='"+this.model.parentpath+this.model.structure.key+"' class='form-file' />");t.append(n);var i=this.model.container[this.model.structure.key];this.$key_field=jQuery("<input type='hidden' data-key='"+this.model.structure.key+"' value='"+("undefined"!==e(i)?i:"")+"' class='dynamic-value' />"),t.append(this.$key_field),this.$progress_display=jQuery("<p>").addClass("progress"),this.$progress_bar_wrapper=jQuery("<div class='progress-bar-wrapper'><div class='bar'></div>"),this.$progress_bar_status=this.$progress_bar_wrapper.children(".bar"),""===this.model.container[this.model.structure.key]||void 0===this.model.container[this.model.structure.key]?this.$progress_display.text(this.getFileChooseHelp()):(this.$progress_display.text(this.getFileReplaceHelp()),this.$progress_bar_status.addClass("done")),t.append(this.$progress_display).append(this.$progress_bar_wrapper);var o=this;return n.fileupload({url:this.model.structure.uploadpath,dataType:"json",paramName:"file",done:function(e,t){o.uploadDone(e,t),o.loadPreview()},progressall:function(e,t){o.progressall(e,t)},always:function(e,t){GRID.log(e,t)}}).bind("fileuploadsubmit",{self:o},this.getFormData),this.$el.append(t),this.loadPreview(),this},loadPreview:function(){this.$preview.empty();var t=this.$key_field.val(),n=this.model.parentpath+this.model.structure.key;if("undefined"!==e(t)&&""!==t){var i=this,o=this.model.box,r=[o.getGrid().getGridID(),o.getContainer().get("id"),o.getSlot().get("id"),o.getIndex(),n,t];new GridAjax("getFileInfo",r,{success_fn:function(e){i.$preview.append(jQuery("<img>").css("max-width","200px").attr("src",e.result.src))}})}},getFormData:function(e,t){var n=e.data.self,i=n.model.parentpath+n.model.structure.key,o=n.model.box;t.formData={gridid:GRID.ID,container:o.getContainer().get("id"),slot:o.getSlot().get("id"),box:o.getIndex(),key:i},n.$progress_bar_status.removeClass("done")},progressall:function(e,t){var n=t.loaded/t.total*100;this.$progress_display.text(Math.round(n)+"%"),this.$progress_bar_status.css("width",n+"%")},uploadDone:function(e,t){var n=t.result;this.$key_field.val(n.result),this.$progress_display.text("OK!"),this.$progress_bar_status.addClass("done"),jQuery(document).trigger("grid-fileupload-done",[n.result,e.target])},fetchValue:function(){return this.$key_field.val()},getFileReplaceHelp:function(){return void 0!==this.model.structure.fileReplacementHelp?this.model.structure.fileReplacementHelp:"Choose another picture to override the old one."},getFileChooseHelp:function(){return void 0!==this.model.structure.fileChooseHelp?this.model.structure.fileChooseHelp:"Please choose a picture..."}})},8726:()=>{boxEditorControls.hidden=GridBackbone.View.extend({className:"grid-editor-widget grid-editor-widget-hidden",initialize:function(){},render:function(){return this},fetchValue:function(){return this.model.container[this.model.structure.key]}})},8711:()=>{boxEditorControls.info=GridBackbone.View.extend({className:"grid-editor-widget grid-editor-widget-info",initialize:function(){},render:function(){return null!=this.model.structure.label?jQuery(this.el).html("<label>"+this.model.structure.label+"</label><p class='info'>"+this.model.structure.text+"</p>"):jQuery(this.el).html("<p class='info'>"+this.model.structure.text+"</p>"),this},fetchValue:function(){return{}}})},3868:()=>{function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}boxEditorControls.input=GridBackbone.View.extend({className:"grid-editor-widget grid-editor-widget-input",initialize:function(){},render:function(){this.$el.empty();var t=this.model.container[this.model.structure.key];return this.$el.append(jQuery("<label />").text(this.model.structure.label)),this.$el.append(jQuery("<input />").addClass("dynamic-value").attr("type",this.model.structure.inputType).val("undefined"===e(t)?"":t)),this.$el.addClass("grid-editor-widget-input__"+this.model.structure.inputType),this},fetchValue:function(){return jQuery(this.$el).find("input").val()}})},7053:()=>{boxEditorControls.number=GridBackbone.View.extend({className:"grid-editor-widget grid-editor-widget-number",initialize:function(){},render:function(){var e=this.model.container[this.model.structure.key];return e||(e=""),this.$el.html("<label>"+this.model.structure.label+"</label><input type=number class='dynamic-value' value='"+e+"'/>"),this},fetchValue:function(){return jQuery(this.$el).find("input").val()}})},5867:()=>{boxEditorControls.text=GridBackbone.View.extend({className:"grid-editor-widget grid-editor-widget-text",initialize:function(){},render:function(){return this.$el.empty(),this.$el.append(jQuery("<label/>").text(this.model.structure.label)),this.$el.append(jQuery("<input type=text class='dynamic-value'/>").val(this.model.container[this.model.structure.key]||"")),this},fetchValue:function(){return jQuery(this.$el).find("input").val()}})},4851:()=>{boxEditorControls.textarea=GridBackbone.View.extend({className:"grid-editor-widget grid-editor-widget-textarea",initialize:function(){},render:function(){var e=this.model.container[this.model.structure.key];return e||(e=""),this.$el.html("<label>"+this.model.structure.label+"</label><textarea class='dynamic-value form-textarea'>"+e+"</textarea>"),this},fetchValue:function(){return jQuery(this.$el).find("textarea").val()}})},7748:()=>{function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}boxEditorControls["wp-mediaselect"]=GridBackbone.View.extend({className:"grid-editor-widget grid-editor-widget-wp-mediaselect",events:{"click .upload_image_button":"open_wp_media"},initialize:function(){},render:function(){var t=this.model.structure,n=this.model.container[t.key];return this.$el.append("<label>"+t.label+"</label>"),this.media_type="*","undefined"!=e(t.media_type)&&(this.media_type=t.media_type),this.$img_wrapper=jQuery("<div></div>"),this.$img_wrapper.addClass("wp-mediaselect-image-wrapper"),this.$el.append(this.$img_wrapper),this.$upload_btn=jQuery("<button class='button upload_image_button'>Media</button>"),this.$el.append(this.$upload_btn),this.$input=jQuery("<input />").attr("value",JSON.stringify(n)).attr("type","hidden").addClass("dynamic-value form-json").attr("data-path",this.model.parentpath+t.key).attr("data-key",t.key),this.$el.append(this.$input),this.$select_image_size=jQuery("<select class='image-sizes'></select>"),this.$el.append(this.$select_image_size),this.$select_image_size.on("change",(function(){var e=jQuery(this),t=JSON.parse(e.siblings(".dynamic-value").val());t.size=e.val(),e.siblings(".dynamic-value").val(JSON.stringify(t))})),this.buildImageSizeSelect(),this.buildImagePreview(),this},open_wp_media:function(){var e=this,t=wp.media({multiple:!1,library:{type:this.media_type},button:{text:"Insert"}});return t.on("open",(function(){var n=t.state().get("selection"),i=e.$input.val(),o=JSON.parse(i),r=wp.media.attachment(o.id);n.add(r?[r]:[])})),t.on("close",(function(){t.state().get("selection"),jQuery.each(t.state().get("selection")._byId,(function(t,n){var i=n.get("sizes");void 0===i&&(function(e){throw new TypeError('"sizes" is read-only')}(),i={full:{height:"",width:"",url:n.get("url"),orientation:""}});var o={id:n.id,size:"full",sizes:i};return e.$input.val(JSON.stringify(o)),e.buildImageSizeSelect(),e.buildImagePreview(),!1}))})),t.open(),!1},get_json_from_input:function(){var e=null;if("object"!=this.$input.val())try{e=JSON.parse(this.$input.val())}catch(t){e=null}else e=this.$input.val();return e},buildImagePreview:function(){var t=this.get_json_from_input();if(null!=t&&""!=t&&e(t)==e({})&&e(t.sizes)==e({})&&e(t.sizes.thumbnail)==e({})&&e(t.sizes.thumbnail.url)==e("")){var n=jQuery("<img/>");n.addClass("wp-mediaselect-image-preview").attr("src",t.sizes.thumbnail.url).attr("width",t.sizes.thumbnail.width).attr("height",t.sizes.thumbnail.height),this.$img_wrapper.empty(),this.$img_wrapper.append(n)}},buildImageSizeSelect:function(){var t=this;if(""!=this.$input.val()){var n=this.get_json_from_input();null!=n&&""!=n&&e(n)==e({})&&e(n.sizes)==e({})?(this.$select_image_size.empty(),jQuery.each(n.sizes,(function(e,i){var o="";n.size==e&&(o="selected='selected'"),jQuery("<option "+o+" >"+e+"</option>").attr("value",e).appendTo(t.$select_image_size)})),this.$select_image_size.children().length>0?this.$select_image_size.show():this.$select_image_size.hide()):this.$select_image_size.hide()}},fetchValue:function(){var e="";try{e=JSON.parse(this.$input.val())}catch(e){GRID.log("empty image box")}return e}})},2730:()=>{window.Author=GridBackbone.View.extend({tagName:"li",className:"grid-author",events:{"click .author-lock-sender":"onClickSendLock","click .author-lock-requester":"onClickRequestLock"},initialize:function(){this.listenTo(this.model,"change:request_lock",this.onRequestLock)},render:function(){var e=this.model.toJSON();return e.have_lock=GRID.authors.haveLock(),this.$el.empty(),this.$el.append(ich.tpl_author(e)),this.onRequestLock(),this},onClickSendLock:function(){GRID.async.locking_handover(this.model.get("id"))},onClickRequestLock:function(){GRID.async.locking_request_lock()},onRequestLock:function(){this.model.get("request_lock")?this.$el.addClass("async-request-lock"):this.$el.removeClass("async-request-lock")}})},6634:()=>{window.Authors=GridBackbone.View.extend({className:"grid-authors",initialize:function(){this.listenTo(GRID.authors,"add",this.onAddAuthor),this.listenTo(GRID.authors,"remove",this.render),this.listenTo(GRID.authors,"reset",this.render),this.listenTo(GRID.authors,"change",this.render)},render:function(){this.$el.empty(),this.$el.append(ich.tpl_authors()),this.$list=this.$el.find(".authors-list");var e=this;return GRID.authors.each((function(t){e.onAddAuthor(t)})),this},onResize:function(e){this.$list.css("height",e+"px")},onAddAuthor:function(e){e=new Author({model:e}),this.$list.append(e.render().$el)}})},5760:()=>{window.GridSlotStyleChangerView=GridBackbone.View.extend({className:"grid-slot-style-changer style-changer",tagName:"div",events:{"click li":"changeStyle"},initialize:function(){this.listenTo(GRID.getSlotStyles(),"add",this.render)},render:function(){var e=[],t="Default Style",n=this;GRID.getSlotStyles().each((function(i){i.get("slug")==n.model.get("style")&&(t=i.get("title")),e.push(i.toJSON())}));var i=this.model.getContainer();return this.$el.html(ich.tpl_slotstylechanger({styles:e,activestyle:t,reused:i.get("reused")})),this},changeStyle:function(e){this.model.set("style",jQuery(e.target).attr("data-style")),this.model.save()}})},4477:()=>{window.GridToolBoxBlueprintsView=GridBackbone.View.extend({className:"grid-box-blueprints",timer:null,blueprints:null,events:{"keyup .grid-box-blueprints-search input":"searchString"},render:function(){if(this.blueprints=this.model.getBlueprints(),this.box_type=this.model.get("type"),this.listenTo(this.blueprints,"add",this.addBlueprintBox),this.model.searchBoxes(),this.delegateEvents(),this.model.get("criteria").length>0){var e=jQuery('<div class="grid-box-blueprints-search"><input placeholder="Which do you need?" type="text" value="" /></div>');this.$el.append(e),this.searchString({target:e.find("input")})}return this.$blueprintslist=jQuery("<div class='grid-box-blueprints-list'></div>"),this.$el.append(this.$blueprintslist),this},addBlueprintBox:function(e,t,n){var i=e.toJSON();return i.cid=e.cid,i.reusable="reference"==this.box_type,this.$blueprintslist.append(ich.tpl_toolBoxesBlueprint(i)),this.initializesDraggable(),this},searchString:function(e){var t=jQuery(e.target).val(),n=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){n.stopListening(n.blueprints),n.blueprints=n.model.search(t,n.model.criteria),n.$blueprintslist.empty(),n.listenTo(n.blueprints,"add",n.addBlueprintBox)}),300)},initializesDraggable:function(){var e=this;return jQuery(this.el).find(".grid-box-dragger").draggable({helper:function(e,t){return jQuery("<div class='dragger-helper'></div>")},cursorAt:{left:30,top:30},zIndex:199,appendTo:GRID.getView().$el,addClass:!0,start:function(t,n){jQuery;var i=jQuery(GRID.getView().el).find(".grid-container-type-c[data-reused=false] .grid-slot .grid-boxes-wrapper, .grid-container-type-sc .grid-slot .grid-boxes-wrapper");GRID.log(i),i.children(".grid-box").before(jQuery(document.createElement("div")).addClass("grid-box-drop-area-wrapper")),i.append(jQuery(document.createElement("div")).addClass("grid-box-drop-area-wrapper")),i.find(".grid-box-drop-area-wrapper").append(jQuery(document.createElement("div")).addClass("grid-box-drop-area")),i.find(".grid-box-drop-area").droppable({accept:".grid-box-dragger",hoverClass:"hover",drop:function(t,n){var i=jQuery(n.draggable),o=jQuery(this),r=o.parents(".grid-slot"),s=r.parents(".grid-container"),a=GRID.getModel().getContainers().get(s.data("id")).getSlots().get(r.data("id")),l=e.blueprints.get(i.data("cid")),c=o.parent().addClass("grid-new-box-place").removeClass("grid-box-drop-area-wrapper");GRID.getView().$el.find(".grid-box-drop-area-wrapper").remove(),a.createBox(l,c.index())}})},stop:function(e,t){GRID.getView().$el.find(".grid-box-drop-area-wrapper").remove()}}),this}})},8307:()=>{window.GridToolBoxTypesView=GridBackbone.View.extend({className:"grid-tool grid-element-box",events:{"click .grid-box-type":"toggleBoxType"},render:function(){this.$el.empty();var e={boxtypes:[]};return this.collection.each((function(t,n){var i=t.toJSON();i.index=n,e.boxtypes.push(i)})),this.$el.append(ich.tpl_toolBoxes(e)),this.delegateEvents(),this},toggleBoxType:function(e){var t=jQuery(e.currentTarget);if(t.toggleClass("active"),t.hasClass("active")){var n=new GridToolBoxBlueprintsView({model:this.collection.at(t.data("index"))});t.next("dd").append(n.render().el)}else t.next("dd").empty()}})},6556:()=>{window.GridToolbarView=GridBackbone.View.extend({id:"grid-toolbar",_toolContainersView:null,_toolBoxesView:null,_revisionsView:null,events:{"click .grid-toolbar [role=publish]":"publish","click .grid-toolbar [role=preview]":"preview","click .grid-toolbar [role=revert]":"revert","click .grid-toolbar [role=revisions]":"revisions","click .grid-toolbar [role=authors]":"onClickAuthors","click .grid-element-type[data-type=box]:not(.active)":"showBoxTools","click .grid-element-type[data-type=container]:not(.active)":"showContainerTools"},initialize:function(){this.listenTo(this.model,"change:isDraft",this.setState),this.listenTo(GRID.authors,"add",this.onUpdateAuthors),this.listenTo(GRID.authors,"remove",this.onUpdateAuthors),this.listenTo(GRID.authors,"reset",this.onUpdateAuthors),this.setState()},render:function(){this.$el.html(ich.tpl_toolbar(this.model.toJSON())),this.$toolbar=this.$el.find(".grid-toolbar"),this.$tool_elements=this.$el.find(".grid-tool-elements"),this.$tool_element_content=this.$el.find(".grid-element-type-content"),this.$tab_container=this.$el.find(".grid-element-type[data-type=container]"),this.$tab_box=this.$el.find(".grid-element-type[data-type=box]"),this.$element_trash=this.$el.find(".grid-element-trash"),this.$authors_count=this.$el.find(".indicator-authors-count"),"grid"==GRID.mode&&(this._revisionsView=new GridRevisionsView({collection:GRID.revisions}),this.$el.append(this._revisionsView.$el.hide()));var e="container";return"container"!=GRID.mode&&GRID.getRights().get("create-container")||(this.$tab_container.remove(),e="box"),GRID.getRights().get("create-box")||(this.$tab_box.remove(),e=!1),"container"==e?this.showContainerTools():"box"==e&&this.showBoxTools(),this.onUpdateAuthors(),this},publish:function(){if(!GRID.getRights().get("publish")||GRID.locked())return alert("You have no rights for that..."),!1;this.model.save()},setState:function(){var e=this.model.get("isDraft");this.$el.find(".grid-toolbar").attr("data-draft",e);var t=this.$el.find(".grid-tool-state span");e?t.html("Draft"):t.html("Published")},preview:function(){window.open(this.model.get("PREVIEW_URL"),"grid_preview")},revert:function(){if(!GRID.getRights().get("revert")||GRID.locked())return alert("You have no rights for that..."),!1;GRID.revert()},revisions:function(){this._revisionsView.$el.slideToggle(),jQuery("html, body").animate({scrollTop:0},300)},toggleBoxes:function(){GRID.log("BTN toggleBoxes")},getToolContainersView:function(){return this._toolContainersView instanceof GridToolContainersView||(this._toolContainersView=new GridToolContainersView({collection:GRID.getContainerTypes()})),this._toolContainersView},containerToolsVisible:function(){return 1==this.$el.find(this.getToolContainersView().el).length},toggleContainerTools:function(){this.hideBoxTools(),this.containerToolsVisible()?this.hideContainerTools():this.showContainerTools()},showContainerTools:function(){this.hideBoxTools(),this.containerToolsVisible()||(this.$el.find(this.getToolContainersView().el).remove(),this.$el.find(".grid-element-type-content").append(this.getToolContainersView().render().el),this.$tab_container.addClass("active"))},hideContainerTools:function(){this.containerToolsVisible()&&(this.$el.find(this.getToolContainersView().el).remove(),this.$tab_container.removeClass("active"))},getToolBoxesView:function(){return this._toolBoxesView instanceof GridToolBoxTypesView||(this._toolBoxesView=new GridToolBoxTypesView({collection:GRID.getBoxTypes()})),this._toolBoxesView},boxToolsVisible:function(){return 1==this.$el.find(this.getToolBoxesView().el).length},toggleBoxTools:function(){this.hideContainerTools(),this.boxToolsVisible()?this.hideBoxTools():this.showBoxTools()},showBoxTools:function(){this.hideContainerTools(),this.boxToolsVisible()||(this.$el.find(".grid-element-type-content").append(this.getToolBoxesView().render().el),this.$tab_box.addClass("active"))},hideBoxTools:function(){this.boxToolsVisible()&&(this.$tab_box.removeClass("active"),this.$el.find(this.getToolBoxesView().el).remove())},onResize:function(){var e=jQuery(window).height()-this.$el.offset().top-this.$tab_container.outerHeight();this.$tool_element_content.css("height",e),this.trigger("toolbar_resize",e)},onUpdateAuthors:function(){GRID.authors.getCount()<2?this.$authors_count.parents("li").hide():(this.$authors_count.parents("li").show(),this.$authors_count.text(GRID.authors.getCount())),this.$toolbar.removeClass("async-request-lock");var e=this;GRID.authors.each((function(t){t.get("request_lock")&&e.$toolbar.addClass("async-request-lock")}))},onClickAuthors:function(e){GRID.toggleAuthors(),this.$toolbar.removeClass("async-request-lock")},async_request_lock:function(){this.$toolbar.addClass("async-request-lock")}})},3010:e=>{function t(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=t,t.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(e){this.ms=e},t.prototype.setMax=function(e){this.max=e},t.prototype.setJitter=function(e){this.jitter=e}},3704:(e,t)=>{!function(e){"use strict";t.encode=function(t){var n,i=new Uint8Array(t),o=i.length,r="";for(n=0;n<o;n+=3)r+=e[i[n]>>2],r+=e[(3&i[n])<<4|i[n+1]>>4],r+=e[(15&i[n+1])<<2|i[n+2]>>6],r+=e[63&i[n+2]];return o%3==2?r=r.substring(0,r.length-1)+"=":o%3==1&&(r=r.substring(0,r.length-2)+"=="),r},t.decode=function(t){var n,i,o,r,s,a=.75*t.length,l=t.length,c=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),d=new Uint8Array(u);for(n=0;n<l;n+=4)i=e.indexOf(t[n]),o=e.indexOf(t[n+1]),r=e.indexOf(t[n+2]),s=e.indexOf(t[n+3]),d[c++]=i<<2|o>>4,d[c++]=(15&o)<<4|r>>2,d[c++]=(3&r)<<6|63&s;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},1355:(e,t,n)=>{var i,o,r;!function(s){"use strict";o=[n(3609),n(6891)],void 0===(r="function"==typeof(i=function(e){function t(t){var n="dragover"===t;return function(i){i.dataTransfer=i.originalEvent&&i.originalEvent.dataTransfer;var o=i.dataTransfer;o&&-1!==e.inArray("Files",o.types)&&!1!==this._trigger(t,e.Event(t,{delegatedEvent:i}))&&(i.preventDefault(),n&&(o.dropEffect="copy"))}}var n;e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file"/>').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,uniqueFilenames:void 0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,n){return t=this.messages[t]||t.toString(),n&&e.each(n,(function(e,n){t=t.replace("{"+e+"}",n)})),t},formData:function(e){return e.serializeArray()},add:function(t,n){if(t.isDefaultPrevented())return!1;(n.autoUpload||!1!==n.autoUpload&&e(this).fileupload("option","autoUpload"))&&n.process().done((function(){n.submit()}))},processData:!1,contentType:!1,cache:!1,timeout:0},_promisePipe:(n=e.fn.jquery.split("."),Number(n[0])>1||Number(n[1])>7?"then":"pipe"),_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var i=e-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=(t-this.loaded)*(1e3/i)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(n=[],e.each(t.formData,(function(e,t){n.push({name:e,value:t})})),n):[]},_getTotal:function(t){var n=0;return e.each(t,(function(e,t){n+=t.size||1})),n},_initProgressObject:function(t){var n={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,n):t._progress=n},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)Object.prototype.hasOwnProperty.call(e._response,t)&&delete e._response[t];else e._response={}},_onProgress:function(t,n){if(t.lengthComputable){var i,o=Date.now?Date.now():(new Date).getTime();if(n._time&&n.progressInterval&&o-n._time<n.progressInterval&&t.loaded!==t.total)return;n._time=o,i=Math.floor(t.loaded/t.total*(n.chunkSize||n._progress.total))+(n.uploadedBytes||0),this._progress.loaded+=i-n._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(o,this._progress.loaded,n.bitrateInterval),n._progress.loaded=n.loaded=i,n._progress.bitrate=n.bitrate=n._bitrateTimer.getBitrate(o,i,n.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),n),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var n=this,i=t.xhr?t.xhr():e.ajaxSettings.xhr();i.upload&&(e(i.upload).on("progress",(function(e){var i=e.originalEvent;e.lengthComputable=i.lengthComputable,e.loaded=i.loaded,e.total=i.total,n._onProgress(e,t)})),t.xhr=function(){return i})},_deinitProgressListener:function(t){var n=t.xhr?t.xhr():e.ajaxSettings.xhr();n.upload&&e(n.upload).off("progress")},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_getUniqueFilename:function(e,t){return t[e=String(e)]?(e=e.replace(/(?: \(([\d]+)\))?(\.[^.]+)?$/,(function(e,t,n){return" ("+(t?Number(t)+1:1)+")"+(n||"")})),this._getUniqueFilename(e,t)):(t[e]=!0,e)},_initXHRData:function(t){var n,i=this,o=t.files[0],r=t.multipart||!e.support.xhrFileUpload,s="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),r&&!t.blob&&this._isInstanceOf("File",o)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(o.uploadName||o.name)+'"'),r?e.support.xhrFormDataFileUpload&&(t.postMessage?(n=this._getFormData(t),t.blob?n.push({name:s,value:t.blob}):e.each(t.files,(function(i,o){n.push({name:"array"===e.type(t.paramName)&&t.paramName[i]||s,value:o})}))):(i._isInstanceOf("FormData",t.formData)?n=t.formData:(n=new FormData,e.each(this._getFormData(t),(function(e,t){n.append(t.name,t.value)}))),t.blob?n.append(s,t.blob,o.uploadName||o.name):e.each(t.files,(function(o,r){if(i._isInstanceOf("File",r)||i._isInstanceOf("Blob",r)){var a=r.uploadName||r.name;t.uniqueFilenames&&(a=i._getUniqueFilename(a,t.uniqueFilenames)),n.append("array"===e.type(t.paramName)&&t.paramName[o]||s,r,a)}}))),t.data=n):(t.contentType=o.type||"application/octet-stream",t.data=t.blob||o),t.blob=null},_initIframeSettings:function(t){var n=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&n&&n!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var n=e(t.fileInput),i=t.paramName;return i?e.isArray(i)||(i=[i]):(i=[],n.each((function(){for(var t=e(this),n=t.prop("name")||"files[]",o=(t.prop("files")||[1]).length;o;)i.push(n),o-=1})),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,i){var o=e.Deferred(),r=o.promise();return n=n||this.options.context||r,!0===t?o.resolveWith(n,i):!1===t&&o.rejectWith(n,i),r.abort=o.promise,this._enhancePromise(r)},_addConvenienceMethods:function(t,n){var i=this,o=function(t){return e.Deferred().resolveWith(i,t).promise()};n.process=function(t,r){return(t||r)&&(n._processQueue=this._processQueue=(this._processQueue||o([this]))[i._promisePipe]((function(){return n.errorThrown?e.Deferred().rejectWith(i,[n]).promise():o(arguments)}))[i._promisePipe](t,r)),this._processQueue||o([this])},n.submit=function(){return"pending"!==this.state()&&(n.jqXHR=this.jqXHR=!1!==i._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)&&i._onSend(t,this)),this.jqXHR||i._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",i._trigger("fail",null,this),i._getXHRPromise(!1))},n.state=function(){return this.jqXHR?i._getDeferredState(this.jqXHR):this._processQueue?i._getDeferredState(this._processQueue):void 0},n.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===i._getDeferredState(this._processQueue)},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(t,n){t.uploadedBytes=t.uploadedBytes||0;var i,o,r=this,s=t.files[0],a=s.size,l=t.uploadedBytes,c=t.maxChunkSize||a,u=this._blobSlice,d=e.Deferred(),h=d.promise();return!(!(this._isXHRUpload(t)&&u&&(l||("function"===e.type(c)?c(t):c)<a))||t.data)&&(!!n||(l>=a?(s.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",s.error])):(o=function(){var n=e.extend({},t),h=n._progress.loaded;n.blob=u.call(s,l,l+("function"===e.type(c)?c(n):c),s.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+l+"-"+(l+n.chunkSize-1)+"/"+a,r._trigger("chunkbeforesend",null,n),r._initXHRData(n),r._initProgressListener(n),i=(!1!==r._trigger("chunksend",null,n)&&e.ajax(n)||r._getXHRPromise(!1,n.context)).done((function(i,s,c){l=r._getUploadedBytes(c)||l+n.chunkSize,h+n.chunkSize-n._progress.loaded&&r._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-n.uploadedBytes,total:l-n.uploadedBytes}),n),t.uploadedBytes=n.uploadedBytes=l,n.result=i,n.textStatus=s,n.jqXHR=c,r._trigger("chunkdone",null,n),r._trigger("chunkalways",null,n),l<a?o():d.resolveWith(n.context,[i,s,c])})).fail((function(e,t,i){n.jqXHR=e,n.textStatus=t,n.errorThrown=i,r._trigger("chunkfail",null,n),r._trigger("chunkalways",null,n),d.rejectWith(n.context,[e,t,i])})).always((function(){r._deinitProgressListener(n)}))},this._enhancePromise(h),h.abort=function(){return i.abort()},o(),h)))},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,n,i,o){var r=o._progress.total,s=o._response;o._progress.loaded<r&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:r,total:r}),o),s.result=o.result=t,s.textStatus=o.textStatus=n,s.jqXHR=o.jqXHR=i,this._trigger("done",null,o)},_onFail:function(e,t,n,i){var o=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),o.jqXHR=i.jqXHR=e,o.textStatus=i.textStatus=t,o.errorThrown=i.errorThrown=n,this._trigger("fail",null,i)},_onAlways:function(e,t,n,i){this._trigger("always",null,i)},_onSend:function(t,n){n.submit||this._addConvenienceMethods(t,n);var i,o,r,s,a=this,l=a._getAJAXSettings(n),c=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,i=i||((o||!1===a._trigger("send",e.Event("send",{delegatedEvent:t}),l))&&a._getXHRPromise(!1,l.context,o)||a._chunkedUpload(l)||e.ajax(l)).done((function(e,t,n){a._onDone(e,t,n,l)})).fail((function(e,t,n){a._onFail(e,t,n,l)})).always((function(e,t,n){if(a._deinitProgressListener(l),a._onAlways(e,t,n,l),a._sending-=1,a._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var i=a._slots.shift();i;){if("pending"===a._getDeferredState(i)){i.resolve();break}i=a._slots.shift()}0===a._active&&a._trigger("stop")}))};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(r=e.Deferred(),this._slots.push(r),s=r[a._promisePipe](c)):(this._sequence=this._sequence[a._promisePipe](c,c),s=this._sequence),s.abort=function(){return o=[void 0,"abort","abort"],i?i.abort():(r&&r.rejectWith(l.context,o),c())},this._enhancePromise(s)):c()},_onAdd:function(t,n){var i,o,r,s,a=this,l=!0,c=e.extend({},this.options,n),u=n.files,d=u.length,h=c.limitMultiFileUploads,f=c.limitMultiFileUploadSize,p=c.limitMultiFileUploadSizeOverhead,g=0,m=this._getParamName(c),E=0;if(!d)return!1;if(f&&void 0===u[0].size&&(f=void 0),(c.singleFileUploads||h||f)&&this._isXHRUpload(c))if(c.singleFileUploads||f||!h)if(!c.singleFileUploads&&f)for(r=[],i=[],s=0;s<d;s+=1)g+=u[s].size+p,(s+1===d||g+u[s+1].size+p>f||h&&s+1-E>=h)&&(r.push(u.slice(E,s+1)),(o=m.slice(E,s+1)).length||(o=m),i.push(o),E=s+1,g=0);else i=m;else for(r=[],i=[],s=0;s<d;s+=h)r.push(u.slice(s,s+h)),(o=m.slice(s,s+h)).length||(o=m),i.push(o);else r=[u],i=[m];return n.originalFiles=u,e.each(r||u,(function(o,s){var c=e.extend({},n);return c.files=r?s:[s],c.paramName=i[o],a._initResponseObject(c),a._initProgressObject(c),a._addConvenienceMethods(t,c),l=a._trigger("add",e.Event("add",{delegatedEvent:t}),c)})),l},_replaceFileInput:function(t){var n=t.fileInput,i=n.clone(!0),o=n.is(document.activeElement);t.fileInputClone=i,e("<form></form>").append(i)[0].reset(),n.after(i).detach(),o&&i.trigger("focus"),e.cleanData(n.off("remove")),this.options.fileInput=this.options.fileInput.map((function(e,t){return t===n[0]?i[0]:t})),n[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(t,n){var i,o=this,r=e.Deferred(),s=[],a=function(e){e&&!e.entry&&(e.entry=t),r.resolve([e])},l=function(){i.readEntries((function(e){e.length?(s=s.concat(e),l()):function(e){o._handleFileTreeEntries(e,n+t.name+"/").done((function(e){r.resolve(e)})).fail(a)}(s)}),a)};return n=n||"",t.isFile?t._file?(t._file.relativePath=n,r.resolve(t._file)):t.file((function(e){e.relativePath=n,r.resolve(e)}),a):t.isDirectory?(i=t.createReader(),l()):r.resolve([]),r.promise()},_handleFileTreeEntries:function(t,n){var i=this;return e.when.apply(e,e.map(t,(function(e){return i._handleFileTreeEntry(e,n)})))[this._promisePipe]((function(){return Array.prototype.concat.apply([],arguments)}))},_getDroppedFiles:function(t){var n=(t=t||{}).items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,(function(e){var t;return e.webkitGetAsEntry?((t=e.webkitGetAsEntry())&&(t._file=e.getAsFile()),t):e.getAsEntry()}))):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){var n,i,o=(t=e(t)).prop("webkitEntries")||t.prop("entries");if(o&&o.length)return this._handleFileTreeEntries(o);if((n=e.makeArray(t.prop("files"))).length)void 0===n[0].name&&n[0].fileName&&e.each(n,(function(e,t){t.name=t.fileName,t.size=t.fileSize}));else{if(!(i=t.prop("value")))return e.Deferred().resolve([]).promise();n=[{name:i.replace(/^.*\\/,"")}]}return e.Deferred().resolve(n).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles))[this._promisePipe]((function(){return Array.prototype.concat.apply([],arguments)})):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,i={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(i.fileInput).always((function(o){i.files=o,n.options.replaceFileInput&&n._replaceFileInput(i),!1!==n._trigger("change",e.Event("change",{delegatedEvent:t}),i)&&n._onAdd(t,i)}))},_onPaste:function(t){var n=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,i={files:[]};n&&n.length&&(e.each(n,(function(e,t){var n=t.getAsFile&&t.getAsFile();n&&i.files.push(n)})),!1!==this._trigger("paste",e.Event("paste",{delegatedEvent:t}),i)&&this._onAdd(t,i))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=this,i=t.dataTransfer,o={};i&&i.files&&i.files.length&&(t.preventDefault(),this._getDroppedFiles(i).always((function(i){o.files=i,!1!==n._trigger("drop",e.Event("drop",{delegatedEvent:t}),o)&&n._onAdd(t,o)})))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_destroy:function(){this._destroyEventHandlers()},_setOption:function(t,n){var i=-1!==e.inArray(t,this._specialOptions);i&&this._destroyEventHandlers(),this._super(t,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),n=t.pop();return t.shift(),new RegExp(t.join("/"),n)},_isRegExpOption:function(t,n){return"url"!==t&&"string"===e.type(n)&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var t=this,n=this.options,i=this.element.data();e.each(this.element[0].attributes,(function(e,o){var r,s=o.name.toLowerCase();/^data-/.test(s)&&(s=s.slice(5).replace(/-[a-z]/g,(function(e){return e.charAt(1).toUpperCase()})),r=i[s],t._isRegExpOption(s,r)&&(r=t._getRegExp(r)),n[s]=r)}))},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var n=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always((function(e){t.files=e,n._onAdd(null,t)})):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n,i,o=this,r=e.Deferred(),s=r.promise();return s.abort=function(){return i=!0,n?n.abort():(r.reject(null,"abort","abort"),s)},this._getFileInputFiles(t.fileInput).always((function(e){i||(e.length?(t.files=e,(n=o._onSend(null,t)).then((function(e,t,n){r.resolve(e,t,n)}),(function(e,t,n){r.reject(e,t,n)}))):r.reject())})),this._enhancePromise(s)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})})?i.apply(t,o):i)||(e.exports=r)}()},8767:e=>{function t(e){if(e)return function(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<i.length;o++)if((n=i[o])===t||n.fn===t){i.splice(o,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var o=(n=n.slice(0)).length;i<o;++i)n[i].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},1227:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let i=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(i++,"%c"===e&&(o=i))})),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(2447)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2447:(e,t,n)=>{e.exports=function(e){function t(e){let n,o=null;function r(...e){if(!r.enabled)return;const i=r,o=Number(new Date),s=o-(n||o);i.diff=s,i.prev=n,i.curr=o,n=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,o)=>{if("%%"===n)return"%";a++;const r=t.formatters[o];if("function"==typeof r){const t=e[a];n=r.call(i,t),e.splice(a,1),a--}return n})),t.formatArgs.call(i,e),(i.log||t.log).apply(i,e)}return r.namespace=e,r.useColors=t.useColors(),r.color=t.selectColor(e),r.extend=i,r.destroy=t.destroy,Object.defineProperty(r,"enabled",{enumerable:!0,configurable:!1,get:()=>null===o?t.enabled(e):o,set:e=>{o=e}}),"function"==typeof t.init&&t.init(r),r}function i(e,n){const i=t(this.namespace+(void 0===n?":":n)+e);return i.log=this.log,i}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.names=[],t.skips=[];const i=("string"==typeof e?e:"").split(/[\s,]+/),o=i.length;for(n=0;n<o;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(7824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},3549:e=>{e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},5983:(e,t,n)=>{const i=n(2192);e.exports=(e,t)=>new i(e,t),e.exports.Socket=i,e.exports.protocol=i.protocol,e.exports.Transport=n(6496),e.exports.transports=n(3352),e.exports.parser=n(9743)},2192:(e,t,n)=>{const i=n(3352),o=n(8767),r=n(1227)("engine.io-client:socket"),s=n(9743),a=n(4187),l=n(1830);class c extends o{constructor(e,t={}){super(),e&&"object"==typeof e&&(t=e,e=null),e?(e=a(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=a(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{}},t),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=l.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){r('creating transport "%s"',e);const t=function(e){const t={};for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.opts.query);t.EIO=s.protocol,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return r("options: %j",n),new i[e](n)}open(){let e;if(this.opts.rememberUpgrade&&c.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){const e=this;return void setTimeout((function(){e.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return r("error while creating transport: %s",e),this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){r("setting transport %s",e.name);const t=this;this.transport&&(r("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))}probe(e){r('probing transport "%s"',e);let t=this.createTransport(e,{probe:1}),n=!1;const i=this;function o(){if(i.onlyBinaryUpgrades){const e=!this.supportsBinary&&i.transport.supportsBinary;n=n||e}n||(r('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(o){if(!n)if("pong"===o.type&&"probe"===o.data){if(r('probe transport "%s" pong',e),i.upgrading=!0,i.emit("upgrading",t),!t)return;c.priorWebsocketSuccess="websocket"===t.name,r('pausing current transport "%s"',i.transport.name),i.transport.pause((function(){n||"closed"!==i.readyState&&(r("changing transport and sending upgrade packet"),h(),i.setTransport(t),t.send([{type:"upgrade"}]),i.emit("upgrade",t),t=null,i.upgrading=!1,i.flush())}))}else{r('probe transport "%s" failed',e);const n=new Error("probe error");n.transport=t.name,i.emit("upgradeError",n)}})))}function s(){n||(n=!0,h(),t.close(),t=null)}function a(n){const o=new Error("probe error: "+n);o.transport=t.name,s(),r('probe transport "%s" failed because of error: %s',e,n),i.emit("upgradeError",o)}function l(){a("transport closed")}function u(){a("socket closed")}function d(e){t&&e.name!==t.name&&(r('"%s" works - aborting "%s"',e.name,t.name),s())}function h(){t.removeListener("open",o),t.removeListener("error",a),t.removeListener("close",l),i.removeListener("close",u),i.removeListener("upgrading",d)}c.priorWebsocketSuccess=!1,t.once("open",o),t.once("error",a),t.once("close",l),this.once("close",u),this.once("upgrading",d),t.open()}onOpen(){if(r("socket open"),this.readyState="open",c.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){r("starting upgrade probes");let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(r('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else r('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(r("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}write(e,t,n){return this.sendPacket("message",e,t,n),this}send(e,t,n){return this.sendPacket("message",e,t,n),this}sendPacket(e,t,n,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof n&&(i=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const o={type:e,data:t,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){const e=this;function t(){e.onClose("forced close"),r("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function i(){e.once("upgrade",n),e.once("upgradeError",n)}return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){this.upgrading?i():t()})):this.upgrading?i():t()),this}onError(e){r("socket error %j",e),c.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)}onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){r('socket close with reason: "%s"',e);const n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}}filterUpgrades(e){const t=[];let n=0;const i=e.length;for(;n<i;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}c.priorWebsocketSuccess=!1,c.protocol=s.protocol,e.exports=c},6496:(e,t,n)=>{const i=n(9743),o=n(8767),r=n(1227)("engine.io-client:transport");e.exports=class extends o{constructor(e){super(),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,t){const n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState?this.write(e):r("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,this.emit("open")}onData(e){const t=i.decodePacket(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){this.emit("packet",e)}onClose(){this.readyState="closed",this.emit("close")}}},3352:(e,t,n)=>{const i=n(2777),o=n(3416),r=n(9785),s=n(4442);t.polling=function(e){let t,n=!1,s=!1;const a=!1!==e.jsonp;if("undefined"!=typeof location){const t="https:"===location.protocol;let i=location.port;i||(i=t?443:80),n=e.hostname!==location.hostname||i!==e.port,s=e.secure!==t}if(e.xdomain=n,e.xscheme=s,t=new i(e),"open"in t&&!e.forceJSONP)return new o(e);if(!a)throw new Error("JSONP disabled");return new r(e)},t.websocket=s},9785:(e,t,n)=>{const i=n(9015),o=n(3549),r=/\n/g,s=/\\n/g;let a;e.exports=class extends i{constructor(e){super(e),this.query=this.query||{},a||(a=o.___eio=o.___eio||[]),this.index=a.length;const t=this;a.push((function(e){t.onData(e)})),this.query.j=this.index}get supportsBinary(){return!1}doClose(){this.script&&(this.script.onerror=()=>{},this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),super.doClose()}doPoll(){const e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};const n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){const e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)}doWrite(e,t){const n=this;let i;if(!this.form){const e=document.createElement("form"),t=document.createElement("textarea"),n=this.iframeId="eio_iframe_"+this.index;e.className="socketio",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.target=n,e.method="POST",e.setAttribute("accept-charset","utf-8"),t.name="d",e.appendChild(t),document.body.appendChild(e),this.form=e,this.area=t}function o(){a(),t()}function a(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{const e='<iframe src="javascript:0" name="'+n.iframeId+'">';i=document.createElement(e)}catch(e){i=document.createElement("iframe"),i.name=n.iframeId,i.src="javascript:0"}i.id=n.iframeId,n.form.appendChild(i),n.iframe=i}this.form.action=this.uri(),a(),e=e.replace(s,"\\\n"),this.area.value=e.replace(r,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&o()}:this.iframe.onload=o}}},3416:(e,t,n)=>{const i=n(2777),o=n(9015),r=n(8767),{pick:s}=n(6839),a=n(3549),l=n(1227)("engine.io-client:polling-xhr");function c(){}const u=null!=new i({xdomain:!1}).responseType;class d extends r{constructor(e,t){super(),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.create()}create(){const e=s(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new i(e),n=this;try{l("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&t.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(e){}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof t.status?t.status:0)}),0))},l("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){n.onError(e)}),0)}"undefined"!=typeof document&&(this.index=d.requestsCount++,d.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(e){this.emit("data",e),this.onSuccess()}onError(e){this.emit("error",e),this.cleanup(!0)}cleanup(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=c,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete d.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&this.onData(e)}hasXDR(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR}abort(){this.cleanup()}}function h(){for(let e in d.requests)d.requests.hasOwnProperty(e)&&d.requests[e].abort()}d.requestsCount=0,d.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",h):"function"==typeof addEventListener&&addEventListener("onpagehide"in a?"pagehide":"unload",h,!1)),e.exports=class extends o{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}const t=e&&e.forceBase64;this.supportsBinary=u&&!t}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new d(this.uri(),e)}doWrite(e,t){const n=this.request({method:"POST",data:e}),i=this;n.on("success",t),n.on("error",(function(e){i.onError("xhr post error",e)}))}doPoll(){l("xhr poll");const e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e}},e.exports.Request=d},9015:(e,t,n)=>{const i=n(6496),o=n(1830),r=n(9743),s=n(2281),a=n(1227)("engine.io-client:polling");e.exports=class extends i{get name(){return"polling"}doOpen(){this.poll()}pause(e){const t=this;function n(){a("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){let e=0;this.polling&&(a("we are currently polling - waiting to pause"),e++,this.once("pollComplete",(function(){a("pre-pause polling complete"),--e||n()}))),this.writable||(a("we are currently writing - waiting to pause"),e++,this.once("drain",(function(){a("pre-pause writing complete"),--e||n()})))}else n()}poll(){a("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(e){const t=this;a("polling got data %s",e),r.decodePayload(e,this.socket.binaryType).forEach((function(e,n,i){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():a('ignoring poll - transport state "%s"',this.readyState))}doClose(){const e=this;function t(){a("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(a("transport open - closing"),t()):(a("transport not open - deferring close"),this.once("open",t))}write(e){this.writable=!1,r.encodePayload(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emit("drain")}))}))}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let n="";return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=s()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),e.length&&(e="?"+e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}}},866:(e,t,n)=>{const i=n(3549);e.exports={WebSocket:i.WebSocket||i.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer"}},4442:(e,t,n)=>{const i=n(6496),o=n(9743),r=n(1830),s=n(2281),{pick:a}=n(6839),{WebSocket:l,usingBrowserWebSocket:c,defaultBinaryType:u}=n(866),d=n(1227)("engine.io-client:websocket"),h="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class f extends i{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,n=h?{}:a(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=c&&!h?t?new l(e,t):new l(e):new l(e,t,n)}catch(e){return this.emit("error",e)}this.ws.binaryType=this.socket.binaryType||u,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){const t=this;this.writable=!1;let n=e.length,i=0;const r=n;for(;i<r;i++)!function(e){o.encodePacket(e,t.supportsBinary,(function(i){const o={};!c&&(e.options&&(o.compress=e.options.compress),t.opts.perMessageDeflate)&&("string"==typeof i?Buffer.byteLength(i):i.length)<t.opts.perMessageDeflate.threshold&&(o.compress=!1);try{c?t.ws.send(i):t.ws.send(i,o)}catch(e){d("websocket closed before onclose event")}--n||(t.emit("flush"),setTimeout((function(){t.writable=!0,t.emit("drain")}),0))}))}(e[i])}onClose(){i.prototype.onClose.call(this)}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let n="";return this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=s()),this.supportsBinary||(e.b64=1),e=r.encode(e),e.length&&(e="?"+e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}check(){return!(!l||"__initialize"in l&&this.name===f.prototype.name)}}e.exports=f},6839:e=>{e.exports.pick=(e,...t)=>t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})},2777:(e,t,n)=>{const i=n(8058),o=n(3549);e.exports=function(e){const t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||i))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(e){}if(!t)try{return new(o[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},1712:e=>{const t=Object.create(null);t.open="0",t.close="1",t.ping="2",t.pong="3",t.message="4",t.upgrade="5",t.noop="6";const n=Object.create(null);Object.keys(t).forEach((e=>{n[t[e]]=e})),e.exports={PACKET_TYPES:t,PACKET_TYPES_REVERSE:n,ERROR_PACKET:{type:"error",data:"parser error"}}},4965:(e,t,n)=>{const{PACKET_TYPES_REVERSE:i,ERROR_PACKET:o}=n(1712);let r;"function"==typeof ArrayBuffer&&(r=n(3704));const s=(e,t)=>{if(r){const n=r.decode(e);return a(n,t)}return{base64:!0,data:e}},a=(e,t)=>{switch(t){case"blob":return e instanceof ArrayBuffer?new Blob([e]):e;case"arraybuffer":default:return e}};e.exports=(e,t)=>{if("string"!=typeof e)return{type:"message",data:a(e,t)};const n=e.charAt(0);return"b"===n?{type:"message",data:s(e.substring(1),t)}:i[n]?e.length>1?{type:i[n],data:e.substring(1)}:{type:i[n]}:o}},2929:(e,t,n)=>{const{PACKET_TYPES:i}=n(1712),o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),r="function"==typeof ArrayBuffer,s=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)};e.exports=({type:e,data:t},n,a)=>{return o&&t instanceof Blob?n?a(t):s(t,a):r&&(t instanceof ArrayBuffer||(l=t,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(l):l&&l.buffer instanceof ArrayBuffer))?n?a(t instanceof ArrayBuffer?t:t.buffer):s(new Blob([t]),a):a(i[e]+(t||""));var l}},9743:(e,t,n)=>{const i=n(2929),o=n(4965),r=String.fromCharCode(30);e.exports={protocol:4,encodePacket:i,encodePayload:(e,t)=>{const n=e.length,o=new Array(n);let s=0;e.forEach(((e,a)=>{i(e,!1,(e=>{o[a]=e,++s===n&&t(o.join(r))}))}))},decodePacket:o,decodePayload:(e,t)=>{const n=e.split(r),i=[];for(let e=0;e<n.length;e++){const r=o(n[e],t);if(i.push(r),"error"===r.type)break}return i}}},8058:e=>{try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},5592:(e,t,n)=>{var i,o,r;o=[n(3609)],void 0===(r="function"==typeof(i=function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"})?i.apply(t,o):i)||(e.exports=r)},6891:(e,t,n)=>{var i,o,r;o=[n(3609),n(5592)],void 0===(r="function"==typeof(i=function(e){var t,n=0,i=Array.prototype.slice;return e.cleanData=(t=e.cleanData,function(n){var i,o,r;for(r=0;null!=(o=n[r]);r++)try{(i=e._data(o,"events"))&&i.remove&&e(o).triggerHandler("remove")}catch(e){}t(n)}),e.widget=function(t,n,i){var o,r,s,a={},l=t.split(".")[0],c=l+"-"+(t=t.split(".")[1]);return i||(i=n,n=e.Widget),e.isArray(i)&&(i=e.extend.apply(null,[{}].concat(i))),e.expr[":"][c.toLowerCase()]=function(t){return!!e.data(t,c)},e[l]=e[l]||{},o=e[l][t],r=e[l][t]=function(e,t){if(!this._createWidget)return new r(e,t);arguments.length&&this._createWidget(e,t)},e.extend(r,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),(s=new n).options=e.widget.extend({},s.options),e.each(i,(function(t,i){e.isFunction(i)?a[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function o(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,r=this._superApply;return this._super=e,this._superApply=o,t=i.apply(this,arguments),this._super=n,this._superApply=r,t}}():a[t]=i})),r.prototype=e.widget.extend(s,{widgetEventPrefix:o&&s.widgetEventPrefix||t},a,{constructor:r,namespace:l,widgetName:t,widgetFullName:c}),o?(e.each(o._childConstructors,(function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,r,n._proto)})),delete o._childConstructors):n._childConstructors.push(r),e.widget.bridge(t,r),r},e.widget.extend=function(t){for(var n,o,r=i.call(arguments,1),s=0,a=r.length;s<a;s++)for(n in r[s])o=r[s][n],r[s].hasOwnProperty(n)&&void 0!==o&&(e.isPlainObject(o)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],o):e.widget.extend({},o):t[n]=o);return t},e.widget.bridge=function(t,n){var o=n.prototype.widgetFullName||t;e.fn[t]=function(r){var s="string"==typeof r,a=i.call(arguments,1),l=this;return s?this.length||"instance"!==r?this.each((function(){var n,i=e.data(this,o);return"instance"===r?(l=i,!1):i?e.isFunction(i[r])&&"_"!==r.charAt(0)?(n=i[r].apply(i,a))!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+r+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+r+"'")})):l=void 0:(a.length&&(r=e.widget.extend.apply(null,[r].concat(a))),this.each((function(){var t=e.data(this,o);t?(t.option(r||{}),t._init&&t._init()):e.data(this,o,new n(r,this))}))),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,(function(e,n){t._removeClass(n,e)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,o,r,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},i=t.split("."),t=i.shift(),i.length){for(o=s[t]=e.widget.extend({},this.options[t]),r=0;r<i.length-1;r++)o[i[r]]=o[i[r]]||{},o=o[i[r]];if(t=i.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=n}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,i,o;for(n in t)o=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&o&&o.length&&(i=e(o.get()),this._removeClass(o,n),i.addClass(this._classes({element:i,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var n=[],i=this;function o(o,r){var s,a;for(a=0;a<o.length;a++)s=i.classesElementLookup[o[a]]||e(),s=t.add?e(e.unique(s.get().concat(t.element.get()))):e(s.not(t.element).get()),i.classesElementLookup[o[a]]=s,n.push(o[a]),r&&t.classes[o[a]]&&n.push(t.classes[o[a]])}return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&o(t.keys.match(/\S+/g)||[],!0),t.extra&&o(t.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,(function(i,o){-1!==e.inArray(t.target,o)&&(n.classesElementLookup[i]=e(o.not(t.target).get()))}))},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,i){i="boolean"==typeof i?i:n;var o="string"==typeof e||null===e,r={extra:o?t:n,keys:o?e:t,element:o?this.element:e,add:i};return r.element.toggleClass(this._classes(r),i),this},_on:function(t,n,i){var o,r=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=o=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),e.each(i,(function(i,s){function a(){if(t||!0!==r.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof s?r[s]:s).apply(r,arguments)}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?o.on(c,u,a):n.on(c,a)}))},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var n=this;return setTimeout((function(){return("string"==typeof e?n[e]:e).apply(n,arguments)}),t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,i){var o,r,s=this.options[t];if(i=i||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(o in r)o in n||(n[o]=r[o]);return this.element.trigger(n,i),!(e.isFunction(s)&&!1===s.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,n){e.Widget.prototype["_"+t]=function(i,o,r){var s;"string"==typeof o&&(o={effect:o});var a=o?!0===o||"number"==typeof o?n:o.effect||n:t;"number"==typeof(o=o||{})&&(o={duration:o}),s=!e.isEmptyObject(o),o.complete=r,o.delay&&i.delay(o.delay),s&&e.effects&&e.effects.effect[a]?i[t](o):a!==t&&i[a]?i[a](o.duration,o.easing,r):i.queue((function(n){e(this)[t](),r&&r.call(i[0]),n()}))}})),e.widget})?i.apply(t,o):i)||(e.exports=r)},7824:e=>{var t=1e3,n=60*t,i=60*n,o=24*i;function r(e,t,n,i){var o=t>=1.5*n;return Math.round(e/n)+" "+i+(o?"s":"")}e.exports=function(e,s){s=s||{};var a,l,c=typeof e;if("string"===c&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(r){var s=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===c&&isFinite(e))return s.long?(a=e,(l=Math.abs(a))>=o?r(a,l,o,"day"):l>=i?r(a,l,i,"hour"):l>=n?r(a,l,n,"minute"):l>=t?r(a,l,t,"second"):a+" ms"):function(e){var r=Math.abs(e);return r>=o?Math.round(e/o)+"d":r>=i?Math.round(e/i)+"h":r>=n?Math.round(e/n)+"m":r>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},1830:(e,t)=>{t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),i=0,o=n.length;i<o;i++){var r=n[i].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}},4187:e=>{var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var i,o,r=e,s=e.indexOf("["),a=e.indexOf("]");-1!=s&&-1!=a&&(e=e.substring(0,s)+e.substring(s,a).replace(/:/g,";")+e.substring(a,e.length));for(var l,c,u=t.exec(e||""),d={},h=14;h--;)d[n[h]]=u[h]||"";return-1!=s&&-1!=a&&(d.source=r,d.host=d.host.substring(1,d.host.length-1).replace(/;/g,":"),d.authority=d.authority.replace("[","").replace("]","").replace(/;/g,":"),d.ipv6uri=!0),d.pathNames=(i=d.path,o=i.replace(/\/{2,9}/g,"/").split("/"),"/"!=i.substr(0,1)&&0!==i.length||o.splice(0,1),"/"==i.substr(i.length-1,1)&&o.splice(o.length-1,1),o),d.queryKey=(l=d.query,c={},l.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(c[t]=n)})),c),d}},751:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=t.io=t.Manager=t.protocol=void 0;const i=n(6744),o=n(7703),r=n(2277);Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return r.Socket}});const s=n(1227)("socket.io-client");e.exports=t=l;const a=t.managers={};function l(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};const n=i.url(e,t.path),r=n.source,l=n.id,c=n.path,u=a[l]&&c in a[l].nsps;let d;return t.forceNew||t["force new connection"]||!1===t.multiplex||u?(s("ignoring socket cache for %s",r),d=new o.Manager(r,t)):(a[l]||(s("new io instance for %s",r),a[l]=new o.Manager(r,t)),d=a[l]),n.query&&!t.query&&(t.query=n.queryKey),d.socket(n.path,t)}t.io=l;var c=n(5485);Object.defineProperty(t,"protocol",{enumerable:!0,get:function(){return c.protocol}}),t.connect=l;var u=n(7703);Object.defineProperty(t,"Manager",{enumerable:!0,get:function(){return u.Manager}}),t.default=l},7703:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Manager=void 0;const i=n(5983),o=n(2277),r=n(5485),s=n(5657),a=n(3010),l=n(8791),c=n(1227)("socket.io-client:manager");class u extends l.StrictEventEmitter{constructor(e,t){super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new a({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const n=t.parser||r;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(c("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=i(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const o=s.on(t,"open",(function(){n.onopen(),e&&e()})),r=s.on(t,"error",(t=>{c("error"),n.cleanup(),n._readyState="closed",this.emitReserved("error",t),e?e(t):n.maybeReconnectOnOpen()}));if(!1!==this._timeout){const e=this._timeout;c("connect attempt will timeout after %d",e),0===e&&o();const n=setTimeout((()=>{c("connect attempt timed out after %d",e),o(),t.close(),t.emit("error",new Error("timeout"))}),e);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}return this.subs.push(o),this.subs.push(r),this}connect(e){return this.open(e)}onopen(){c("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(s.on(e,"ping",this.onping.bind(this)),s.on(e,"data",this.ondata.bind(this)),s.on(e,"error",this.onerror.bind(this)),s.on(e,"close",this.onclose.bind(this)),s.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){this.emitReserved("packet",e)}onerror(e){c("error",e),this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n||(n=new o.Socket(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const e of t)if(this.nsps[e].active)return void c("socket %s is still active, skipping close",e);this._close()}_packet(e){c("writing packet %j",e);const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){c("cleanup"),this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){c("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e){c("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();c("will wait %dms before reconnect attempt",t),this._reconnecting=!0;const n=setTimeout((()=>{e.skipReconnect||(c("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(c("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):(c("reconnect success"),e.onreconnect())})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}t.Manager=u},5657:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=void 0,t.on=function(e,t,n){return e.on(t,n),function(){e.off(t,n)}}},2277:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;const i=n(5485),o=n(5657),r=n(8791),s=n(1227)("socket.io-client:socket"),a=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class l extends r.StrictEventEmitter{constructor(e,t,n){super(),this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const e=this.io;this.subs=[o.on(e,"open",this.onopen.bind(this)),o.on(e,"packet",this.onpacket.bind(this)),o.on(e,"error",this.onerror.bind(this)),o.on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(a.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');t.unshift(e);const n={type:i.PacketType.EVENT,data:t,options:{}};n.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(s("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++);const o=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return!this.flags.volatile||o&&this.connected?this.connected?this.packet(n):this.sendBuffer.push(n):s("discard packet as the transport is not currently writable"),this.flags={},this}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){s("transport is open - connecting"),"function"==typeof this.auth?this.auth((e=>{this.packet({type:i.PacketType.CONNECT,data:e})})):this.packet({type:i.PacketType.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e){s("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case i.PacketType.CONNECT:if(e.data&&e.data.sid){const t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case i.PacketType.EVENT:case i.PacketType.BINARY_EVENT:this.onevent(e);break;case i.PacketType.ACK:case i.PacketType.BINARY_ACK:this.onack(e);break;case i.PacketType.DISCONNECT:this.ondisconnect();break;case i.PacketType.CONNECT_ERROR:const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];s("emitting event %j",t),null!=e.id&&(s("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e)}ack(e){const t=this;let n=!1;return function(...o){n||(n=!0,s("sending ack %j",o),t.packet({type:i.PacketType.ACK,id:e,data:o}))}}onack(e){const t=this.acks[e.id];"function"==typeof t?(s("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):s("bad ack %s",e.id)}onconnect(e){s("socket connected with id %s",e),this.id=e,this.connected=!0,this.disconnected=!1,this.emitReserved("connect"),this.emitBuffered()}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>this.packet(e))),this.sendBuffer=[]}ondisconnect(){s("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(s("performing disconnect (%s)",this.nsp),this.packet({type:i.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}t.Socket=l},8791:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StrictEventEmitter=void 0;const i=n(8767);t.StrictEventEmitter=class extends i{on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}emit(e,...t){return super.emit(e,...t),this}emitReserved(e,...t){return super.emit(e,...t),this}listeners(e){return super.listeners(e)}}},6744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.url=void 0;const i=n(4187),o=n(1227)("socket.io-client:url");t.url=function(e,t="",n){let r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e=void 0!==n?n.protocol+"//"+e:"https://"+e),o("parse %s",e),r=i(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+t,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}},7719:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reconstructPacket=t.deconstructPacket=void 0;const i=n(2986);function o(e,t){if(!e)return e;if(i.isBinary(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=o(e[i],t);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const i in e)e.hasOwnProperty(i)&&(n[i]=o(e[i],t));return n}return e}function r(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=r(e[n],t);else if("object"==typeof e)for(const n in e)e.hasOwnProperty(n)&&(e[n]=r(e[n],t));return e}t.deconstructPacket=function(e){const t=[],n=e.data,i=e;return i.data=o(n,t),i.attachments=t.length,{packet:i,buffers:t}},t.reconstructPacket=function(e,t){return e.data=r(e.data,t),e.attachments=void 0,e}},5485:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.PacketType=t.protocol=void 0;const i=n(8767),o=n(7719),r=n(2986),s=n(1227)("socket.io-parser");var a;t.protocol=5,function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(a=t.PacketType||(t.PacketType={})),t.Encoder=class{encode(e){return s("encoding packet %j",e),e.type!==a.EVENT&&e.type!==a.ACK||!r.hasBinary(e)?[this.encodeAsString(e)]:(e.type=e.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,this.encodeAsBinary(e))}encodeAsString(e){let t=""+e.type;return e.type!==a.BINARY_EVENT&&e.type!==a.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data)),s("encoded %j as %s",e,t),t}encodeAsBinary(e){const t=o.deconstructPacket(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i}};class l extends i{constructor(){super()}add(e){let t;if("string"==typeof e)t=this.decodeString(e),t.type===a.BINARY_EVENT||t.type===a.BINARY_ACK?(this.reconstructor=new c(t),0===t.attachments&&super.emit("decoded",t)):super.emit("decoded",t);else{if(!r.isBinary(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emit("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===a[n.type])throw new Error("unknown packet type "+n.type);if(n.type===a.BINARY_EVENT||n.type===a.BINARY_ACK){const i=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const o=e.substring(i,t);if(o!=Number(o)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"===e.charAt(t+1)){const i=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);n.nsp=e.substring(i,t)}else n.nsp="/";const i=e.charAt(t+1);if(""!==i&&Number(i)==i){const i=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!l.isPayloadValid(n.type,i))throw new Error("invalid payload");n.data=i}return s("decoded %s as %j",e,n),n}static isPayloadValid(e,t){switch(e){case a.CONNECT:return"object"==typeof t;case a.DISCONNECT:return void 0===t;case a.CONNECT_ERROR:return"string"==typeof t||"object"==typeof t;case a.EVENT:case a.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case a.ACK:case a.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}t.Decoder=l;class c{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},2986:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasBinary=t.isBinary=void 0;const n="function"==typeof ArrayBuffer,i=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),r="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);function s(e){return n&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||o&&e instanceof Blob||r&&e instanceof File}t.isBinary=s,t.hasBinary=function e(t,n){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let n=0,i=t.length;n<i;n++)if(e(t[n]))return!0;return!1}if(s(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return!0;return!1}},1311:function(e,t,n){e.exports=function(){var e="1.13.1",t="object"==typeof self&&self.self===self&&self||"object"==typeof n.g&&n.g.global===n.g&&n.g||Function("return this")()||{},i=Array.prototype,o=Object.prototype,r="undefined"!=typeof Symbol?Symbol.prototype:null,s=i.push,a=i.slice,l=o.toString,c=o.hasOwnProperty,u="undefined"!=typeof ArrayBuffer,d="undefined"!=typeof DataView,h=Array.isArray,f=Object.keys,p=Object.create,g=u&&ArrayBuffer.isView,m=isNaN,E=isFinite,T=!{toString:null}.propertyIsEnumerable("toString"),C=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],v=Math.pow(2,53)-1;function I(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),i=Array(n),o=0;o<n;o++)i[o]=arguments[o+t];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i);case 2:return e.call(this,arguments[0],arguments[1],i)}var r=Array(t+1);for(o=0;o<t;o++)r[o]=arguments[o];return r[t]=i,e.apply(this,r)}}function D(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function O(e){return void 0===e}function b(e){return!0===e||!1===e||"[object Boolean]"===l.call(e)}function y(e){var t="[object "+e+"]";return function(e){return l.call(e)===t}}var R=y("String"),_=y("Number"),K=y("Date"),k=y("RegExp"),w=y("Error"),S=y("Symbol"),x=y("ArrayBuffer"),N=y("Function"),A=t.document&&t.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof A&&(N=function(e){return"function"==typeof e||!1});var L=N,B=y("Object"),P=d&&B(new DataView(new ArrayBuffer(8))),F="undefined"!=typeof Map&&B(new Map),$=y("DataView"),M=P?function(e){return null!=e&&L(e.getInt8)&&x(e.buffer)}:$,j=h||y("Array");function H(e,t){return null!=e&&c.call(e,t)}var q=y("Arguments");!function(){q(arguments)||(q=function(e){return H(e,"callee")})}();var G=q;function z(e){return _(e)&&m(e)}function U(e){return function(){return e}}function V(e){return function(t){var n=e(t);return"number"==typeof n&&n>=0&&n<=v}}function W(e){return function(t){return null==t?void 0:t[e]}}var X=W("byteLength"),Q=V(X),Y=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,J=u?function(e){return g?g(e)&&!M(e):Q(e)&&Y.test(l.call(e))}:U(!1),Z=W("length");function ee(e,t){t=function(e){for(var t={},n=e.length,i=0;i<n;++i)t[e[i]]=!0;return{contains:function(e){return t[e]},push:function(n){return t[n]=!0,e.push(n)}}}(t);var n=C.length,i=e.constructor,r=L(i)&&i.prototype||o,s="constructor";for(H(e,s)&&!t.contains(s)&&t.push(s);n--;)(s=C[n])in e&&e[s]!==r[s]&&!t.contains(s)&&t.push(s)}function te(e){if(!D(e))return[];if(f)return f(e);var t=[];for(var n in e)H(e,n)&&t.push(n);return T&&ee(e,t),t}function ne(e,t){var n=te(t),i=n.length;if(null==e)return!i;for(var o=Object(e),r=0;r<i;r++){var s=n[r];if(t[s]!==o[s]||!(s in o))return!1}return!0}function ie(e){return e instanceof ie?e:this instanceof ie?void(this._wrapped=e):new ie(e)}function oe(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,X(e))}ie.VERSION=e,ie.prototype.value=function(){return this._wrapped},ie.prototype.valueOf=ie.prototype.toJSON=ie.prototype.value,ie.prototype.toString=function(){return String(this._wrapped)};var re="[object DataView]";function se(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;return("function"===o||"object"===o||"object"==typeof t)&&function e(t,n,i,o){t instanceof ie&&(t=t._wrapped),n instanceof ie&&(n=n._wrapped);var s=l.call(t);if(s!==l.call(n))return!1;if(P&&"[object Object]"==s&&M(t)){if(!M(n))return!1;s=re}switch(s){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return r.valueOf.call(t)===r.valueOf.call(n);case"[object ArrayBuffer]":case re:return e(oe(t),oe(n),i,o)}var a="[object Array]"===s;if(!a&&J(t)){if(X(t)!==X(n))return!1;if(t.buffer===n.buffer&&t.byteOffset===n.byteOffset)return!0;a=!0}if(!a){if("object"!=typeof t||"object"!=typeof n)return!1;var c=t.constructor,u=n.constructor;if(c!==u&&!(L(c)&&c instanceof c&&L(u)&&u instanceof u)&&"constructor"in t&&"constructor"in n)return!1}o=o||[];for(var d=(i=i||[]).length;d--;)if(i[d]===t)return o[d]===n;if(i.push(t),o.push(n),a){if((d=t.length)!==n.length)return!1;for(;d--;)if(!se(t[d],n[d],i,o))return!1}else{var h,f=te(t);if(d=f.length,te(n).length!==d)return!1;for(;d--;)if(!H(n,h=f[d])||!se(t[h],n[h],i,o))return!1}return i.pop(),o.pop(),!0}(e,t,n,i)}function ae(e){if(!D(e))return[];var t=[];for(var n in e)t.push(n);return T&&ee(e,t),t}function le(e){var t=Z(e);return function(n){if(null==n)return!1;var i=ae(n);if(Z(i))return!1;for(var o=0;o<t;o++)if(!L(n[e[o]]))return!1;return e!==fe||!L(n[ce])}}var ce="forEach",ue=["clear","delete"],de=["get","has","set"],he=ue.concat(ce,de),fe=ue.concat(de),pe=["add"].concat(ue,ce,"has"),ge=F?le(he):y("Map"),me=F?le(fe):y("WeakMap"),Ee=F?le(pe):y("Set"),Te=y("WeakSet");function Ce(e){for(var t=te(e),n=t.length,i=Array(n),o=0;o<n;o++)i[o]=e[t[o]];return i}function ve(e){for(var t={},n=te(e),i=0,o=n.length;i<o;i++)t[e[n[i]]]=n[i];return t}function Ie(e){var t=[];for(var n in e)L(e[n])&&t.push(n);return t.sort()}function De(e,t){return function(n){var i=arguments.length;if(t&&(n=Object(n)),i<2||null==n)return n;for(var o=1;o<i;o++)for(var r=arguments[o],s=e(r),a=s.length,l=0;l<a;l++){var c=s[l];t&&void 0!==n[c]||(n[c]=r[c])}return n}}var Oe=De(ae),be=De(te),ye=De(ae,!0);function Re(e){if(!D(e))return{};if(p)return p(e);var t=function(){};t.prototype=e;var n=new t;return t.prototype=null,n}function _e(e){return D(e)?j(e)?e.slice():Oe({},e):e}function Ke(e){return j(e)?e:[e]}function ke(e){return ie.toPath(e)}function we(e,t){for(var n=t.length,i=0;i<n;i++){if(null==e)return;e=e[t[i]]}return n?e:void 0}function Se(e,t,n){var i=we(e,ke(t));return O(i)?n:i}function xe(e){return e}function Ne(e){return e=be({},e),function(t){return ne(t,e)}}function Ae(e){return e=ke(e),function(t){return we(t,e)}}function Le(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,o){return e.call(t,n,i,o)};case 4:return function(n,i,o,r){return e.call(t,n,i,o,r)}}return function(){return e.apply(t,arguments)}}function Be(e,t,n){return null==e?xe:L(e)?Le(e,t,n):D(e)&&!j(e)?Ne(e):Ae(e)}function Pe(e,t){return Be(e,t,1/0)}function Fe(e,t,n){return ie.iteratee!==Pe?ie.iteratee(e,t):Be(e,t,n)}function $e(){}function Me(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}ie.toPath=Ke,ie.iteratee=Pe;var je=Date.now||function(){return(new Date).getTime()};function He(e){var t=function(t){return e[t]},n="(?:"+te(e).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(o,t):e}}var qe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Ge=He(qe),ze=He(ve(qe)),Ue=ie.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Ve=/(.)^/,We={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Xe=/\\|'|\r|\n|\u2028|\u2029/g;function Qe(e){return"\\"+We[e]}var Ye=/^\s*(\w|\$)+\s*$/,Je=0;function Ze(e,t,n,i,o){if(!(i instanceof t))return e.apply(n,o);var r=Re(e.prototype),s=e.apply(r,o);return D(s)?s:r}var et=I((function(e,t){var n=et.placeholder,i=function(){for(var o=0,r=t.length,s=Array(r),a=0;a<r;a++)s[a]=t[a]===n?arguments[o++]:t[a];for(;o<arguments.length;)s.push(arguments[o++]);return Ze(e,i,this,this,s)};return i}));et.placeholder=ie;var tt=I((function(e,t,n){if(!L(e))throw new TypeError("Bind must be called on a function");var i=I((function(o){return Ze(e,i,t,this,n.concat(o))}));return i})),nt=V(Z);function it(e,t,n,i){if(i=i||[],t||0===t){if(t<=0)return i.concat(e)}else t=1/0;for(var o=i.length,r=0,s=Z(e);r<s;r++){var a=e[r];if(nt(a)&&(j(a)||G(a)))if(t>1)it(a,t-1,n,i),o=i.length;else for(var l=0,c=a.length;l<c;)i[o++]=a[l++];else n||(i[o++]=a)}return i}var ot=I((function(e,t){var n=(t=it(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=t[n];e[i]=tt(e[i],e)}return e})),rt=I((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),st=et(rt,ie,1);function at(e){return function(){return!e.apply(this,arguments)}}function lt(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}var ct=et(lt,2);function ut(e,t,n){t=Fe(t,n);for(var i,o=te(e),r=0,s=o.length;r<s;r++)if(t(e[i=o[r]],i,e))return i}function dt(e){return function(t,n,i){n=Fe(n,i);for(var o=Z(t),r=e>0?0:o-1;r>=0&&r<o;r+=e)if(n(t[r],r,t))return r;return-1}}var ht=dt(1),ft=dt(-1);function pt(e,t,n,i){for(var o=(n=Fe(n,i,1))(t),r=0,s=Z(e);r<s;){var a=Math.floor((r+s)/2);n(e[a])<o?r=a+1:s=a}return r}function gt(e,t,n){return function(i,o,r){var s=0,l=Z(i);if("number"==typeof r)e>0?s=r>=0?r:Math.max(r+l,s):l=r>=0?Math.min(r+1,l):r+l+1;else if(n&&r&&l)return i[r=n(i,o)]===o?r:-1;if(o!=o)return(r=t(a.call(i,s,l),z))>=0?r+s:-1;for(r=e>0?s:l-1;r>=0&&r<l;r+=e)if(i[r]===o)return r;return-1}}var mt=gt(1,ht,pt),Et=gt(-1,ft);function Tt(e,t,n){var i=(nt(e)?ht:ut)(e,t,n);if(void 0!==i&&-1!==i)return e[i]}function Ct(e,t,n){var i,o;if(t=Le(t,n),nt(e))for(i=0,o=e.length;i<o;i++)t(e[i],i,e);else{var r=te(e);for(i=0,o=r.length;i<o;i++)t(e[r[i]],r[i],e)}return e}function vt(e,t,n){t=Fe(t,n);for(var i=!nt(e)&&te(e),o=(i||e).length,r=Array(o),s=0;s<o;s++){var a=i?i[s]:s;r[s]=t(e[a],a,e)}return r}function It(e){var t=function(t,n,i,o){var r=!nt(t)&&te(t),s=(r||t).length,a=e>0?0:s-1;for(o||(i=t[r?r[a]:a],a+=e);a>=0&&a<s;a+=e){var l=r?r[a]:a;i=n(i,t[l],l,t)}return i};return function(e,n,i,o){var r=arguments.length>=3;return t(e,Le(n,o,4),i,r)}}var Dt=It(1),Ot=It(-1);function bt(e,t,n){var i=[];return t=Fe(t,n),Ct(e,(function(e,n,o){t(e,n,o)&&i.push(e)})),i}function yt(e,t,n){t=Fe(t,n);for(var i=!nt(e)&&te(e),o=(i||e).length,r=0;r<o;r++){var s=i?i[r]:r;if(!t(e[s],s,e))return!1}return!0}function Rt(e,t,n){t=Fe(t,n);for(var i=!nt(e)&&te(e),o=(i||e).length,r=0;r<o;r++){var s=i?i[r]:r;if(t(e[s],s,e))return!0}return!1}function _t(e,t,n,i){return nt(e)||(e=Ce(e)),("number"!=typeof n||i)&&(n=0),mt(e,t,n)>=0}var Kt=I((function(e,t,n){var i,o;return L(t)?o=t:(t=ke(t),i=t.slice(0,-1),t=t[t.length-1]),vt(e,(function(e){var r=o;if(!r){if(i&&i.length&&(e=we(e,i)),null==e)return;r=e[t]}return null==r?r:r.apply(e,n)}))}));function kt(e,t){return vt(e,Ae(t))}function wt(e,t,n){var i,o,r=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,l=(e=nt(e)?e:Ce(e)).length;a<l;a++)null!=(i=e[a])&&i>r&&(r=i);else t=Fe(t,n),Ct(e,(function(e,n,i){((o=t(e,n,i))>s||o===-1/0&&r===-1/0)&&(r=e,s=o)}));return r}function St(e,t,n){if(null==t||n)return nt(e)||(e=Ce(e)),e[Me(e.length-1)];var i=nt(e)?_e(e):Ce(e),o=Z(i);t=Math.max(Math.min(t,o),0);for(var r=o-1,s=0;s<t;s++){var a=Me(s,r),l=i[s];i[s]=i[a],i[a]=l}return i.slice(0,t)}function xt(e,t){return function(n,i,o){var r=t?[[],[]]:{};return i=Fe(i,o),Ct(n,(function(t,o){var s=i(t,o,n);e(r,t,s)})),r}}var Nt=xt((function(e,t,n){H(e,n)?e[n].push(t):e[n]=[t]})),At=xt((function(e,t,n){e[n]=t})),Lt=xt((function(e,t,n){H(e,n)?e[n]++:e[n]=1})),Bt=xt((function(e,t,n){e[n?0:1].push(t)}),!0),Pt=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Ft(e,t,n){return t in n}var $t=I((function(e,t){var n={},i=t[0];if(null==e)return n;L(i)?(t.length>1&&(i=Le(i,t[1])),t=ae(e)):(i=Ft,t=it(t,!1,!1),e=Object(e));for(var o=0,r=t.length;o<r;o++){var s=t[o],a=e[s];i(a,s,e)&&(n[s]=a)}return n})),Mt=I((function(e,t){var n,i=t[0];return L(i)?(i=at(i),t.length>1&&(n=t[1])):(t=vt(it(t,!1,!1),String),i=function(e,n){return!_t(t,n)}),$t(e,i,n)}));function jt(e,t,n){return a.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function Ht(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:jt(e,e.length-t)}function qt(e,t,n){return a.call(e,null==t||n?1:t)}var Gt=I((function(e,t){return t=it(t,!0,!0),bt(e,(function(e){return!_t(t,e)}))})),zt=I((function(e,t){return Gt(e,t)}));function Ut(e,t,n,i){b(t)||(i=n,n=t,t=!1),null!=n&&(n=Fe(n,i));for(var o=[],r=[],s=0,a=Z(e);s<a;s++){var l=e[s],c=n?n(l,s,e):l;t&&!n?(s&&r===c||o.push(l),r=c):n?_t(r,c)||(r.push(c),o.push(l)):_t(o,l)||o.push(l)}return o}var Vt=I((function(e){return Ut(it(e,!0,!0))}));function Wt(e){for(var t=e&&wt(e,Z).length||0,n=Array(t),i=0;i<t;i++)n[i]=kt(e,i);return n}var Xt=I(Wt);function Qt(e,t){return e._chain?ie(t).chain():t}function Yt(e){return Ct(Ie(e),(function(t){var n=ie[t]=e[t];ie.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),Qt(this,n.apply(ie,e))}})),ie}Ct(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=i[e];ie.prototype[e]=function(){var n=this._wrapped;return null!=n&&(t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0]),Qt(this,n)}})),Ct(["concat","join","slice"],(function(e){var t=i[e];ie.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Qt(this,e)}}));var Jt=Yt({__proto__:null,VERSION:e,restArguments:I,isObject:D,isNull:function(e){return null===e},isUndefined:O,isBoolean:b,isElement:function(e){return!(!e||1!==e.nodeType)},isString:R,isNumber:_,isDate:K,isRegExp:k,isError:w,isSymbol:S,isArrayBuffer:x,isDataView:M,isArray:j,isFunction:L,isArguments:G,isFinite:function(e){return!S(e)&&E(e)&&!isNaN(parseFloat(e))},isNaN:z,isTypedArray:J,isEmpty:function(e){if(null==e)return!0;var t=Z(e);return"number"==typeof t&&(j(e)||R(e)||G(e))?0===t:0===Z(te(e))},isMatch:ne,isEqual:function(e,t){return se(e,t)},isMap:ge,isWeakMap:me,isSet:Ee,isWeakSet:Te,keys:te,allKeys:ae,values:Ce,pairs:function(e){for(var t=te(e),n=t.length,i=Array(n),o=0;o<n;o++)i[o]=[t[o],e[t[o]]];return i},invert:ve,functions:Ie,methods:Ie,extend:Oe,extendOwn:be,assign:be,defaults:ye,create:function(e,t){var n=Re(e);return t&&be(n,t),n},clone:_e,tap:function(e,t){return t(e),e},get:Se,has:function(e,t){for(var n=(t=ke(t)).length,i=0;i<n;i++){var o=t[i];if(!H(e,o))return!1;e=e[o]}return!!n},mapObject:function(e,t,n){t=Fe(t,n);for(var i=te(e),o=i.length,r={},s=0;s<o;s++){var a=i[s];r[a]=t(e[a],a,e)}return r},identity:xe,constant:U,noop:$e,toPath:Ke,property:Ae,propertyOf:function(e){return null==e?$e:function(t){return Se(e,t)}},matcher:Ne,matches:Ne,times:function(e,t,n){var i=Array(Math.max(0,e));t=Le(t,n,1);for(var o=0;o<e;o++)i[o]=t(o);return i},random:Me,now:je,escape:Ge,unescape:ze,templateSettings:Ue,template:function(e,t,n){!t&&n&&(t=n),t=ye({},t,ie.templateSettings);var i=RegExp([(t.escape||Ve).source,(t.interpolate||Ve).source,(t.evaluate||Ve).source].join("|")+"|$","g"),o=0,r="__p+='";e.replace(i,(function(t,n,i,s,a){return r+=e.slice(o,a).replace(Xe,Qe),o=a+t.length,n?r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?r+="'+\n((__t=("+i+"))==null?'':__t)+\n'":s&&(r+="';\n"+s+"\n__p+='"),t})),r+="';\n";var s,a=t.variable;if(a){if(!Ye.test(a))throw new Error("variable is not a bare identifier: "+a)}else r="with(obj||{}){\n"+r+"}\n",a="obj";r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{s=new Function(a,"_",r)}catch(e){throw e.source=r,e}var l=function(e){return s.call(this,e,ie)};return l.source="function("+a+"){\n"+r+"}",l},result:function(e,t,n){var i=(t=ke(t)).length;if(!i)return L(n)?n.call(e):n;for(var o=0;o<i;o++){var r=null==e?void 0:e[t[o]];void 0===r&&(r=n,o=i),e=L(r)?r.call(e):r}return e},uniqueId:function(e){var t=++Je+"";return e?e+t:t},chain:function(e){var t=ie(e);return t._chain=!0,t},iteratee:Pe,partial:et,bind:tt,bindAll:ot,memoize:function(e,t){var n=function(i){var o=n.cache,r=""+(t?t.apply(this,arguments):i);return H(o,r)||(o[r]=e.apply(this,arguments)),o[r]};return n.cache={},n},delay:rt,defer:st,throttle:function(e,t,n){var i,o,r,s,a=0;n||(n={});var l=function(){a=!1===n.leading?0:je(),i=null,s=e.apply(o,r),i||(o=r=null)},c=function(){var c=je();a||!1!==n.leading||(a=c);var u=t-(c-a);return o=this,r=arguments,u<=0||u>t?(i&&(clearTimeout(i),i=null),a=c,s=e.apply(o,r),i||(o=r=null)):i||!1===n.trailing||(i=setTimeout(l,u)),s};return c.cancel=function(){clearTimeout(i),a=0,i=o=r=null},c},debounce:function(e,t,n){var i,o,r,s,a,l=function(){var c=je()-o;t>c?i=setTimeout(l,t-c):(i=null,n||(s=e.apply(a,r)),i||(r=a=null))},c=I((function(c){return a=this,r=c,o=je(),i||(i=setTimeout(l,t),n&&(s=e.apply(a,r))),s}));return c.cancel=function(){clearTimeout(i),i=r=a=null},c},wrap:function(e,t){return et(t,e)},negate:at,compose:function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},after:function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},before:lt,once:ct,findKey:ut,findIndex:ht,findLastIndex:ft,sortedIndex:pt,indexOf:mt,lastIndexOf:Et,find:Tt,detect:Tt,findWhere:function(e,t){return Tt(e,Ne(t))},each:Ct,forEach:Ct,map:vt,collect:vt,reduce:Dt,foldl:Dt,inject:Dt,reduceRight:Ot,foldr:Ot,filter:bt,select:bt,reject:function(e,t,n){return bt(e,at(Fe(t)),n)},every:yt,all:yt,some:Rt,any:Rt,contains:_t,includes:_t,include:_t,invoke:Kt,pluck:kt,where:function(e,t){return bt(e,Ne(t))},max:wt,min:function(e,t,n){var i,o,r=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,l=(e=nt(e)?e:Ce(e)).length;a<l;a++)null!=(i=e[a])&&i<r&&(r=i);else t=Fe(t,n),Ct(e,(function(e,n,i){((o=t(e,n,i))<s||o===1/0&&r===1/0)&&(r=e,s=o)}));return r},shuffle:function(e){return St(e,1/0)},sample:St,sortBy:function(e,t,n){var i=0;return t=Fe(t,n),kt(vt(e,(function(e,n,o){return{value:e,index:i++,criteria:t(e,n,o)}})).sort((function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index})),"value")},groupBy:Nt,indexBy:At,countBy:Lt,partition:Bt,toArray:function(e){return e?j(e)?a.call(e):R(e)?e.match(Pt):nt(e)?vt(e,xe):Ce(e):[]},size:function(e){return null==e?0:nt(e)?e.length:te(e).length},pick:$t,omit:Mt,first:Ht,head:Ht,take:Ht,initial:jt,last:function(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:qt(e,Math.max(0,e.length-t))},rest:qt,tail:qt,drop:qt,compact:function(e){return bt(e,Boolean)},flatten:function(e,t){return it(e,t,!1)},without:zt,uniq:Ut,unique:Ut,union:Vt,intersection:function(e){for(var t=[],n=arguments.length,i=0,o=Z(e);i<o;i++){var r=e[i];if(!_t(t,r)){var s;for(s=1;s<n&&_t(arguments[s],r);s++);s===n&&t.push(r)}}return t},difference:Gt,unzip:Wt,transpose:Wt,zip:Xt,object:function(e,t){for(var n={},i=0,o=Z(e);i<o;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},range:function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var i=Math.max(Math.ceil((t-e)/n),0),o=Array(i),r=0;r<i;r++,e+=n)o[r]=e;return o},chunk:function(e,t){if(null==t||t<1)return[];for(var n=[],i=0,o=e.length;i<o;)n.push(a.call(e,i,i+=t));return n},mixin:Yt,default:ie});return Jt._=Jt,Jt}()},2281:e=>{"use strict";var t,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i={},o=0,r=0;function s(e){var t="";do{t=n[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function a(){var e=s(+new Date);return e!==t?(o=0,t=e):e+"."+s(o++)}for(;r<64;r++)i[n[r]]=r;a.encode=s,a.decode=function(e){var t=0;for(r=0;r<e.length;r++)t=64*t+i[e.charAt(r)];return t},e.exports=a},3609:e=>{"use strict";e.exports=jQuery}},t={};function i(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,i),r.exports}i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};i.r(e),i.d(e,{VERSION:()=>t,after:()=>xt,all:()=>Jt,allKeys:()=>pe,any:()=>Zt,assign:()=>xe,before:()=>Nt,bind:()=>vt,bindAll:()=>Ot,chain:()=>mt,chunk:()=>Bn,clone:()=>Be,collect:()=>Ut,compact:()=>yn,compose:()=>St,constant:()=>Q,contains:()=>en,countBy:()=>fn,create:()=>Le,debounce:()=>Kt,default:()=>$n,defaults:()=>Ne,defer:()=>Rt,delay:()=>yt,detect:()=>qt,difference:()=>_n,drop:()=>On,each:()=>zt,escape:()=>ot,every:()=>Jt,extend:()=>Se,extendOwn:()=>xe,filter:()=>Qt,find:()=>qt,findIndex:()=>Pt,findKey:()=>Lt,findLastIndex:()=>Ft,findWhere:()=>Gt,first:()=>Dn,flatten:()=>Rn,foldl:()=>Wt,foldr:()=>Xt,forEach:()=>zt,functions:()=>ke,get:()=>je,groupBy:()=>dn,has:()=>He,head:()=>Dn,identity:()=>qe,include:()=>en,includes:()=>en,indexBy:()=>hn,indexOf:()=>jt,initial:()=>In,inject:()=>Wt,intersection:()=>Sn,invert:()=>Ke,invoke:()=>tn,isArguments:()=>V,isArray:()=>G,isArrayBuffer:()=>L,isBoolean:()=>R,isDataView:()=>q,isDate:()=>S,isElement:()=>_,isEmpty:()=>se,isEqual:()=>fe,isError:()=>N,isFinite:()=>W,isFunction:()=>F,isMap:()=>De,isMatch:()=>ae,isNaN:()=>X,isNull:()=>b,isNumber:()=>w,isObject:()=>O,isRegExp:()=>x,isSet:()=>be,isString:()=>k,isSymbol:()=>A,isTypedArray:()=>ne,isUndefined:()=>y,isWeakMap:()=>Oe,isWeakSet:()=>ye,iteratee:()=>We,keys:()=>re,last:()=>bn,lastIndexOf:()=>Ht,map:()=>Ut,mapObject:()=>Qe,matcher:()=>Ge,matches:()=>Ge,max:()=>rn,memoize:()=>bt,methods:()=>ke,min:()=>sn,mixin:()=>Fn,negate:()=>wt,noop:()=>Ye,now:()=>tt,object:()=>An,omit:()=>vn,once:()=>At,pairs:()=>_e,partial:()=>Ct,partition:()=>pn,pick:()=>Cn,pluck:()=>nn,property:()=>ze,propertyOf:()=>Je,random:()=>et,range:()=>Ln,reduce:()=>Wt,reduceRight:()=>Xt,reject:()=>Yt,rest:()=>On,restArguments:()=>D,result:()=>ft,sample:()=>an,select:()=>Qt,shuffle:()=>ln,size:()=>En,some:()=>Zt,sortBy:()=>cn,sortedIndex:()=>$t,tail:()=>On,take:()=>Dn,tap:()=>Pe,template:()=>ht,templateSettings:()=>st,throttle:()=>_t,times:()=>Ze,toArray:()=>mn,toPath:()=>Fe,transpose:()=>xn,unescape:()=>rt,union:()=>wn,uniq:()=>kn,unique:()=>kn,uniqueId:()=>gt,unzip:()=>xn,values:()=>Re,where:()=>on,without:()=>Kn,wrap:()=>kt,zip:()=>Nn}),i(3609),i(2650),i(2039),i(1355),i(7161),i(2594),i(6554),i(5509);var t="1.13.1",n="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},o=Array.prototype,r=Object.prototype,s="undefined"!=typeof Symbol?Symbol.prototype:null,a=o.push,l=o.slice,c=r.toString,u=r.hasOwnProperty,d="undefined"!=typeof ArrayBuffer,h="undefined"!=typeof DataView,f=Array.isArray,p=Object.keys,g=Object.create,m=d&&ArrayBuffer.isView,E=isNaN,T=isFinite,C=!{toString:null}.propertyIsEnumerable("toString"),v=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],I=Math.pow(2,53)-1;function D(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),i=Array(n),o=0;o<n;o++)i[o]=arguments[o+t];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i);case 2:return e.call(this,arguments[0],arguments[1],i)}var r=Array(t+1);for(o=0;o<t;o++)r[o]=arguments[o];return r[t]=i,e.apply(this,r)}}function O(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function b(e){return null===e}function y(e){return void 0===e}function R(e){return!0===e||!1===e||"[object Boolean]"===c.call(e)}function _(e){return!(!e||1!==e.nodeType)}function K(e){var t="[object "+e+"]";return function(e){return c.call(e)===t}}const k=K("String"),w=K("Number"),S=K("Date"),x=K("RegExp"),N=K("Error"),A=K("Symbol"),L=K("ArrayBuffer");var B=K("Function"),P=n.document&&n.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof P&&(B=function(e){return"function"==typeof e||!1});const F=B,$=K("Object");var M=h&&$(new DataView(new ArrayBuffer(8))),j="undefined"!=typeof Map&&$(new Map),H=K("DataView");const q=M?function(e){return null!=e&&F(e.getInt8)&&L(e.buffer)}:H,G=f||K("Array");function z(e,t){return null!=e&&u.call(e,t)}var U=K("Arguments");!function(){U(arguments)||(U=function(e){return z(e,"callee")})}();const V=U;function W(e){return!A(e)&&T(e)&&!isNaN(parseFloat(e))}function X(e){return w(e)&&E(e)}function Q(e){return function(){return e}}function Y(e){return function(t){var n=e(t);return"number"==typeof n&&n>=0&&n<=I}}function J(e){return function(t){return null==t?void 0:t[e]}}const Z=J("byteLength"),ee=Y(Z);var te=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const ne=d?function(e){return m?m(e)&&!q(e):ee(e)&&te.test(c.call(e))}:Q(!1),ie=J("length");function oe(e,t){t=function(e){for(var t={},n=e.length,i=0;i<n;++i)t[e[i]]=!0;return{contains:function(e){return t[e]},push:function(n){return t[n]=!0,e.push(n)}}}(t);var n=v.length,i=e.constructor,o=F(i)&&i.prototype||r,s="constructor";for(z(e,s)&&!t.contains(s)&&t.push(s);n--;)(s=v[n])in e&&e[s]!==o[s]&&!t.contains(s)&&t.push(s)}function re(e){if(!O(e))return[];if(p)return p(e);var t=[];for(var n in e)z(e,n)&&t.push(n);return C&&oe(e,t),t}function se(e){if(null==e)return!0;var t=ie(e);return"number"==typeof t&&(G(e)||k(e)||V(e))?0===t:0===ie(re(e))}function ae(e,t){var n=re(t),i=n.length;if(null==e)return!i;for(var o=Object(e),r=0;r<i;r++){var s=n[r];if(t[s]!==o[s]||!(s in o))return!1}return!0}function le(e){return e instanceof le?e:this instanceof le?void(this._wrapped=e):new le(e)}function ce(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,Z(e))}le.VERSION=t,le.prototype.value=function(){return this._wrapped},le.prototype.valueOf=le.prototype.toJSON=le.prototype.value,le.prototype.toString=function(){return String(this._wrapped)};var ue="[object DataView]";function de(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;return("function"===o||"object"===o||"object"==typeof t)&&he(e,t,n,i)}function he(e,t,n,i){e instanceof le&&(e=e._wrapped),t instanceof le&&(t=t._wrapped);var o=c.call(e);if(o!==c.call(t))return!1;if(M&&"[object Object]"==o&&q(e)){if(!q(t))return!1;o=ue}switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return s.valueOf.call(e)===s.valueOf.call(t);case"[object ArrayBuffer]":case ue:return he(ce(e),ce(t),n,i)}var r="[object Array]"===o;if(!r&&ne(e)){if(Z(e)!==Z(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;r=!0}if(!r){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,l=t.constructor;if(a!==l&&!(F(a)&&a instanceof a&&F(l)&&l instanceof l)&&"constructor"in e&&"constructor"in t)return!1}i=i||[];for(var u=(n=n||[]).length;u--;)if(n[u]===e)return i[u]===t;if(n.push(e),i.push(t),r){if((u=e.length)!==t.length)return!1;for(;u--;)if(!de(e[u],t[u],n,i))return!1}else{var d,h=re(e);if(u=h.length,re(t).length!==u)return!1;for(;u--;)if(!z(t,d=h[u])||!de(e[d],t[d],n,i))return!1}return n.pop(),i.pop(),!0}function fe(e,t){return de(e,t)}function pe(e){if(!O(e))return[];var t=[];for(var n in e)t.push(n);return C&&oe(e,t),t}function ge(e){var t=ie(e);return function(n){if(null==n)return!1;var i=pe(n);if(ie(i))return!1;for(var o=0;o<t;o++)if(!F(n[e[o]]))return!1;return e!==ve||!F(n[me])}}var me="forEach",Ee=["clear","delete"],Te=["get","has","set"],Ce=Ee.concat(me,Te),ve=Ee.concat(Te),Ie=["add"].concat(Ee,me,"has");const De=j?ge(Ce):K("Map"),Oe=j?ge(ve):K("WeakMap"),be=j?ge(Ie):K("Set"),ye=K("WeakSet");function Re(e){for(var t=re(e),n=t.length,i=Array(n),o=0;o<n;o++)i[o]=e[t[o]];return i}function _e(e){for(var t=re(e),n=t.length,i=Array(n),o=0;o<n;o++)i[o]=[t[o],e[t[o]]];return i}function Ke(e){for(var t={},n=re(e),i=0,o=n.length;i<o;i++)t[e[n[i]]]=n[i];return t}function ke(e){var t=[];for(var n in e)F(e[n])&&t.push(n);return t.sort()}function we(e,t){return function(n){var i=arguments.length;if(t&&(n=Object(n)),i<2||null==n)return n;for(var o=1;o<i;o++)for(var r=arguments[o],s=e(r),a=s.length,l=0;l<a;l++){var c=s[l];t&&void 0!==n[c]||(n[c]=r[c])}return n}}const Se=we(pe),xe=we(re),Ne=we(pe,!0);function Ae(e){if(!O(e))return{};if(g)return g(e);var t=function(){};t.prototype=e;var n=new t;return t.prototype=null,n}function Le(e,t){var n=Ae(e);return t&&xe(n,t),n}function Be(e){return O(e)?G(e)?e.slice():Se({},e):e}function Pe(e,t){return t(e),e}function Fe(e){return G(e)?e:[e]}function $e(e){return le.toPath(e)}function Me(e,t){for(var n=t.length,i=0;i<n;i++){if(null==e)return;e=e[t[i]]}return n?e:void 0}function je(e,t,n){var i=Me(e,$e(t));return y(i)?n:i}function He(e,t){for(var n=(t=$e(t)).length,i=0;i<n;i++){var o=t[i];if(!z(e,o))return!1;e=e[o]}return!!n}function qe(e){return e}function Ge(e){return e=xe({},e),function(t){return ae(t,e)}}function ze(e){return e=$e(e),function(t){return Me(t,e)}}function Ue(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,o){return e.call(t,n,i,o)};case 4:return function(n,i,o,r){return e.call(t,n,i,o,r)}}return function(){return e.apply(t,arguments)}}function Ve(e,t,n){return null==e?qe:F(e)?Ue(e,t,n):O(e)&&!G(e)?Ge(e):ze(e)}function We(e,t){return Ve(e,t,1/0)}function Xe(e,t,n){return le.iteratee!==We?le.iteratee(e,t):Ve(e,t,n)}function Qe(e,t,n){t=Xe(t,n);for(var i=re(e),o=i.length,r={},s=0;s<o;s++){var a=i[s];r[a]=t(e[a],a,e)}return r}function Ye(){}function Je(e){return null==e?Ye:function(t){return je(e,t)}}function Ze(e,t,n){var i=Array(Math.max(0,e));t=Ue(t,n,1);for(var o=0;o<e;o++)i[o]=t(o);return i}function et(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}le.toPath=Fe,le.iteratee=We;const tt=Date.now||function(){return(new Date).getTime()};function nt(e){var t=function(t){return e[t]},n="(?:"+re(e).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(o,t):e}}const it={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},ot=nt(it),rt=nt(Ke(it)),st=le.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var at=/(.)^/,lt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ct=/\\|'|\r|\n|\u2028|\u2029/g;function ut(e){return"\\"+lt[e]}var dt=/^\s*(\w|\$)+\s*$/;function ht(e,t,n){!t&&n&&(t=n),t=Ne({},t,le.templateSettings);var i=RegExp([(t.escape||at).source,(t.interpolate||at).source,(t.evaluate||at).source].join("|")+"|$","g"),o=0,r="__p+='";e.replace(i,(function(t,n,i,s,a){return r+=e.slice(o,a).replace(ct,ut),o=a+t.length,n?r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?r+="'+\n((__t=("+i+"))==null?'':__t)+\n'":s&&(r+="';\n"+s+"\n__p+='"),t})),r+="';\n";var s,a=t.variable;if(a){if(!dt.test(a))throw new Error("variable is not a bare identifier: "+a)}else r="with(obj||{}){\n"+r+"}\n",a="obj";r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{s=new Function(a,"_",r)}catch(e){throw e.source=r,e}var l=function(e){return s.call(this,e,le)};return l.source="function("+a+"){\n"+r+"}",l}function ft(e,t,n){var i=(t=$e(t)).length;if(!i)return F(n)?n.call(e):n;for(var o=0;o<i;o++){var r=null==e?void 0:e[t[o]];void 0===r&&(r=n,o=i),e=F(r)?r.call(e):r}return e}var pt=0;function gt(e){var t=++pt+"";return e?e+t:t}function mt(e){var t=le(e);return t._chain=!0,t}function Et(e,t,n,i,o){if(!(i instanceof t))return e.apply(n,o);var r=Ae(e.prototype),s=e.apply(r,o);return O(s)?s:r}var Tt=D((function(e,t){var n=Tt.placeholder,i=function(){for(var o=0,r=t.length,s=Array(r),a=0;a<r;a++)s[a]=t[a]===n?arguments[o++]:t[a];for(;o<arguments.length;)s.push(arguments[o++]);return Et(e,i,this,this,s)};return i}));Tt.placeholder=le;const Ct=Tt,vt=D((function(e,t,n){if(!F(e))throw new TypeError("Bind must be called on a function");var i=D((function(o){return Et(e,i,t,this,n.concat(o))}));return i})),It=Y(ie);function Dt(e,t,n,i){if(i=i||[],t||0===t){if(t<=0)return i.concat(e)}else t=1/0;for(var o=i.length,r=0,s=ie(e);r<s;r++){var a=e[r];if(It(a)&&(G(a)||V(a)))if(t>1)Dt(a,t-1,n,i),o=i.length;else for(var l=0,c=a.length;l<c;)i[o++]=a[l++];else n||(i[o++]=a)}return i}const Ot=D((function(e,t){var n=(t=Dt(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=t[n];e[i]=vt(e[i],e)}return e}));function bt(e,t){var n=function(i){var o=n.cache,r=""+(t?t.apply(this,arguments):i);return z(o,r)||(o[r]=e.apply(this,arguments)),o[r]};return n.cache={},n}const yt=D((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),Rt=Ct(yt,le,1);function _t(e,t,n){var i,o,r,s,a=0;n||(n={});var l=function(){a=!1===n.leading?0:tt(),i=null,s=e.apply(o,r),i||(o=r=null)},c=function(){var c=tt();a||!1!==n.leading||(a=c);var u=t-(c-a);return o=this,r=arguments,u<=0||u>t?(i&&(clearTimeout(i),i=null),a=c,s=e.apply(o,r),i||(o=r=null)):i||!1===n.trailing||(i=setTimeout(l,u)),s};return c.cancel=function(){clearTimeout(i),a=0,i=o=r=null},c}function Kt(e,t,n){var i,o,r,s,a,l=function(){var c=tt()-o;t>c?i=setTimeout(l,t-c):(i=null,n||(s=e.apply(a,r)),i||(r=a=null))},c=D((function(c){return a=this,r=c,o=tt(),i||(i=setTimeout(l,t),n&&(s=e.apply(a,r))),s}));return c.cancel=function(){clearTimeout(i),i=r=a=null},c}function kt(e,t){return Ct(t,e)}function wt(e){return function(){return!e.apply(this,arguments)}}function St(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}}function xt(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function Nt(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}const At=Ct(Nt,2);function Lt(e,t,n){t=Xe(t,n);for(var i,o=re(e),r=0,s=o.length;r<s;r++)if(t(e[i=o[r]],i,e))return i}function Bt(e){return function(t,n,i){n=Xe(n,i);for(var o=ie(t),r=e>0?0:o-1;r>=0&&r<o;r+=e)if(n(t[r],r,t))return r;return-1}}const Pt=Bt(1),Ft=Bt(-1);function $t(e,t,n,i){for(var o=(n=Xe(n,i,1))(t),r=0,s=ie(e);r<s;){var a=Math.floor((r+s)/2);n(e[a])<o?r=a+1:s=a}return r}function Mt(e,t,n){return function(i,o,r){var s=0,a=ie(i);if("number"==typeof r)e>0?s=r>=0?r:Math.max(r+a,s):a=r>=0?Math.min(r+1,a):r+a+1;else if(n&&r&&a)return i[r=n(i,o)]===o?r:-1;if(o!=o)return(r=t(l.call(i,s,a),X))>=0?r+s:-1;for(r=e>0?s:a-1;r>=0&&r<a;r+=e)if(i[r]===o)return r;return-1}}const jt=Mt(1,Pt,$t),Ht=Mt(-1,Ft);function qt(e,t,n){var i=(It(e)?Pt:Lt)(e,t,n);if(void 0!==i&&-1!==i)return e[i]}function Gt(e,t){return qt(e,Ge(t))}function zt(e,t,n){var i,o;if(t=Ue(t,n),It(e))for(i=0,o=e.length;i<o;i++)t(e[i],i,e);else{var r=re(e);for(i=0,o=r.length;i<o;i++)t(e[r[i]],r[i],e)}return e}function Ut(e,t,n){t=Xe(t,n);for(var i=!It(e)&&re(e),o=(i||e).length,r=Array(o),s=0;s<o;s++){var a=i?i[s]:s;r[s]=t(e[a],a,e)}return r}function Vt(e){var t=function(t,n,i,o){var r=!It(t)&&re(t),s=(r||t).length,a=e>0?0:s-1;for(o||(i=t[r?r[a]:a],a+=e);a>=0&&a<s;a+=e){var l=r?r[a]:a;i=n(i,t[l],l,t)}return i};return function(e,n,i,o){var r=arguments.length>=3;return t(e,Ue(n,o,4),i,r)}}const Wt=Vt(1),Xt=Vt(-1);function Qt(e,t,n){var i=[];return t=Xe(t,n),zt(e,(function(e,n,o){t(e,n,o)&&i.push(e)})),i}function Yt(e,t,n){return Qt(e,wt(Xe(t)),n)}function Jt(e,t,n){t=Xe(t,n);for(var i=!It(e)&&re(e),o=(i||e).length,r=0;r<o;r++){var s=i?i[r]:r;if(!t(e[s],s,e))return!1}return!0}function Zt(e,t,n){t=Xe(t,n);for(var i=!It(e)&&re(e),o=(i||e).length,r=0;r<o;r++){var s=i?i[r]:r;if(t(e[s],s,e))return!0}return!1}function en(e,t,n,i){return It(e)||(e=Re(e)),("number"!=typeof n||i)&&(n=0),jt(e,t,n)>=0}const tn=D((function(e,t,n){var i,o;return F(t)?o=t:(t=$e(t),i=t.slice(0,-1),t=t[t.length-1]),Ut(e,(function(e){var r=o;if(!r){if(i&&i.length&&(e=Me(e,i)),null==e)return;r=e[t]}return null==r?r:r.apply(e,n)}))}));function nn(e,t){return Ut(e,ze(t))}function on(e,t){return Qt(e,Ge(t))}function rn(e,t,n){var i,o,r=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,l=(e=It(e)?e:Re(e)).length;a<l;a++)null!=(i=e[a])&&i>r&&(r=i);else t=Xe(t,n),zt(e,(function(e,n,i){((o=t(e,n,i))>s||o===-1/0&&r===-1/0)&&(r=e,s=o)}));return r}function sn(e,t,n){var i,o,r=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,l=(e=It(e)?e:Re(e)).length;a<l;a++)null!=(i=e[a])&&i<r&&(r=i);else t=Xe(t,n),zt(e,(function(e,n,i){((o=t(e,n,i))<s||o===1/0&&r===1/0)&&(r=e,s=o)}));return r}function an(e,t,n){if(null==t||n)return It(e)||(e=Re(e)),e[et(e.length-1)];var i=It(e)?Be(e):Re(e),o=ie(i);t=Math.max(Math.min(t,o),0);for(var r=o-1,s=0;s<t;s++){var a=et(s,r),l=i[s];i[s]=i[a],i[a]=l}return i.slice(0,t)}function ln(e){return an(e,1/0)}function cn(e,t,n){var i=0;return t=Xe(t,n),nn(Ut(e,(function(e,n,o){return{value:e,index:i++,criteria:t(e,n,o)}})).sort((function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index})),"value")}function un(e,t){return function(n,i,o){var r=t?[[],[]]:{};return i=Xe(i,o),zt(n,(function(t,o){var s=i(t,o,n);e(r,t,s)})),r}}const dn=un((function(e,t,n){z(e,n)?e[n].push(t):e[n]=[t]})),hn=un((function(e,t,n){e[n]=t})),fn=un((function(e,t,n){z(e,n)?e[n]++:e[n]=1})),pn=un((function(e,t,n){e[n?0:1].push(t)}),!0);var gn=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function mn(e){return e?G(e)?l.call(e):k(e)?e.match(gn):It(e)?Ut(e,qe):Re(e):[]}function En(e){return null==e?0:It(e)?e.length:re(e).length}function Tn(e,t,n){return t in n}const Cn=D((function(e,t){var n={},i=t[0];if(null==e)return n;F(i)?(t.length>1&&(i=Ue(i,t[1])),t=pe(e)):(i=Tn,t=Dt(t,!1,!1),e=Object(e));for(var o=0,r=t.length;o<r;o++){var s=t[o],a=e[s];i(a,s,e)&&(n[s]=a)}return n})),vn=D((function(e,t){var n,i=t[0];return F(i)?(i=wt(i),t.length>1&&(n=t[1])):(t=Ut(Dt(t,!1,!1),String),i=function(e,n){return!en(t,n)}),Cn(e,i,n)}));function In(e,t,n){return l.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function Dn(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:In(e,e.length-t)}function On(e,t,n){return l.call(e,null==t||n?1:t)}function bn(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:On(e,Math.max(0,e.length-t))}function yn(e){return Qt(e,Boolean)}function Rn(e,t){return Dt(e,t,!1)}const _n=D((function(e,t){return t=Dt(t,!0,!0),Qt(e,(function(e){return!en(t,e)}))})),Kn=D((function(e,t){return _n(e,t)}));function kn(e,t,n,i){R(t)||(i=n,n=t,t=!1),null!=n&&(n=Xe(n,i));for(var o=[],r=[],s=0,a=ie(e);s<a;s++){var l=e[s],c=n?n(l,s,e):l;t&&!n?(s&&r===c||o.push(l),r=c):n?en(r,c)||(r.push(c),o.push(l)):en(o,l)||o.push(l)}return o}const wn=D((function(e){return kn(Dt(e,!0,!0))}));function Sn(e){for(var t=[],n=arguments.length,i=0,o=ie(e);i<o;i++){var r=e[i];if(!en(t,r)){var s;for(s=1;s<n&&en(arguments[s],r);s++);s===n&&t.push(r)}}return t}function xn(e){for(var t=e&&rn(e,ie).length||0,n=Array(t),i=0;i<t;i++)n[i]=nn(e,i);return n}const Nn=D(xn);function An(e,t){for(var n={},i=0,o=ie(e);i<o;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n}function Ln(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var i=Math.max(Math.ceil((t-e)/n),0),o=Array(i),r=0;r<i;r++,e+=n)o[r]=e;return o}function Bn(e,t){if(null==t||t<1)return[];for(var n=[],i=0,o=e.length;i<o;)n.push(l.call(e,i,i+=t));return n}function Pn(e,t){return e._chain?le(t).chain():t}function Fn(e){return zt(ke(e),(function(t){var n=le[t]=e[t];le.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),Pn(this,n.apply(le,e))}})),le}zt(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=o[e];le.prototype[e]=function(){var n=this._wrapped;return null!=n&&(t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0]),Pn(this,n)}})),zt(["concat","join","slice"],(function(e){var t=o[e];le.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Pn(this,e)}}));const $n=le;var Mn=Fn(e);Mn._=Mn;const jn=Mn;window.GridView=GridBackbone.View.extend({tagName:"div",className:"grid-wrapper",initialize:function(){this._containersView=new ContainersView({collection:this.model.getContainers()})},render:function(){return this.$el.empty(),this.$el.append(ich.tpl_grid(this.model.toJSON())),this.renderContainers(),this},renderContainers:function(){return this.$el.find(".containers-wrapper").replaceWith(this._containersView.render().el),this}}),window.ContainersView=GridBackbone.View.extend({tagName:"div",className:"grid-containers-wrapper containers-wrapper",initialize:function(){this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"remove",this.render)},render:function(){var e=this;return this.$el.empty(),this.collection.each((function(t){var n=new ContainerView({model:t});e.$el.append(n.render().el)})),GRID._initializeBoxSortable(),this}}),window.ContainerView=GridBackbone.View.extend({className:"grid-container",events:{"click [role=trash]":"selfdestruct","click [role=edit]":"onEdit","click [role=reuse]":"onReuse","click [role=toggleslotstyles]":"onToggleSlotStyles"},initialize:function(){var e=this;jn.each(["title","titleurl","prolog","epilog","readmore","readmoreurl","style","style_label"],(function(t,n,i){e.listenTo(e.model,"change:"+t,e.render)})),this._slotsView=new SlotsView({collection:this.model.getSlots()})},render:function(){var e=this.model.toJSON();this.$el.attr("data-id",e.id).attr("data-type",e.type).attr("data-style",e.style).attr("data-reused",e.reused).attr("data-cid",this.model.cid).attr("data-space-left",this.model.getSpace("left")).attr("data-space-right",this.model.getSpace("right")),this.$el.addClass("grid-container-type-"+this.model.getType()),this.$el.addClass("grid-container-"+e.type),this.$el.addClass("grid-container-left-space-"+e.space_to_left),this.$el.addClass("grid-container-right-space-"+e.space_to_right);var t=60;if(e.title&&(e.title_short=e.title.length<=t?e.title:e.title.substring(0,t)+"&hellip;"),e.prolog){var n=jQuery("<div>"+e.prolog+"</div>").text();e.prolog_short="<p>"+(n.length<=t?n:n.substring(0,t)+"&hellip;")+"</p>"}if(e.epilog){var i=jQuery("<div>"+e.epilog+"</div>").text();e.epilog_short="<p>"+(i.length<=t?i:i.substring(0,t)+"&hellip;")+"</p>"}return e.right_edit=GRID.getRights().get("edit-container"),e.right_delete=GRID.getRights().get("delete-container"),e.right_options=!0,e.right_delete||e.right_edit&&!e.reused||(e.right_options=!1),e.right_move=GRID.getRights().get("move-container"),e.isSidebar=e.type.startsWith("s"),this.$el.empty(),this.$el.append(ich.tpl_container(e)),this.$slots_wrapper=this.$el.find(".grid-slots-wrapper"),this.$slots_wrapper.replaceWith(this._slotsView.render().el),this},onEdit:function(){var e=new GridContainerEditor({model:this.model});GRID.showEditor((function(){GRID.$root_editor.html(e.render().el)}))},saveEditor:function(){var e=this;return console.debug("ContainerView saveEditor",e),jQuery.each(this.$el.find(".form-val"),(function(t,n){var i=jQuery(n),o=i.attr("scope");e.model.set(o,i.val())})),this.model.save(),this.render()},onReuse:function(){var e=prompt("Bitte gib einen Titel für den Container ein");if(""==e||0==e||null==e)return!1;var t=this;return this.model.save(null,{reusetitle:e,action:"reuse",success:function(e){t.render()}}),this},onToggleSlotStyles:function(){this.$el.toggleClass("grid-container-show-slot-styles")},selfdestruct:function(){this.model.destroy({wait:!0}),this.remove()}}),window.SlotsView=GridBackbone.View.extend({tagName:"div",className:"grid-slots-wrapper slots-wrapper",initialize:function(){this.collection.bind("add",this.render,this),this.collection.bind("remove",this.render,this)},render:function(){var e=this;return this.$el.empty(),this.collection.each((function(t){var n=new SlotView({model:t});n._parentView=e,e.$el.append(n.render().el)})),this}}),window.SlotView=GridBackbone.View.extend({tagName:"div",className:"grid-slot",initialize:function(){this._boxesView=new BoxesView({collection:this.model.getBoxes()}),"box"!=GRID.mode&&(this._slotStyleChangerView=new GridSlotStyleChangerView({model:this.model})),this.listenTo(this.model,"change",this.render)},render:function(){var e=this.model.toJSON();return this.$el.attr("data-style",e.style).attr("data-id",e.id).attr("data-dimension",e.dimension),this.$el.addClass("grid-slot-"+e.dimension),this.$el.html(ich.tpl_slot(this.model.toJSON())),"box"!=GRID.mode&&(this.$el.find(".style-changer").replaceWith(this._slotStyleChangerView.render().el),this._slotStyleChangerView.delegateEvents()),this._boxesView.render(),this.$el.find(".boxes-wrapper").replaceWith(this._boxesView.$el),this}}),window.BoxesView=GridBackbone.View.extend({tagName:"div",className:"grid-boxes-wrapper boxes-wrapper",initialize:function(){this.collection.bind("add",this.render,this)},render:function(){var e=this;return this.$el.empty(),this.collection.each((function(t){var n=new BoxView({model:t});n._parentView=e,e.$el.append(n.render().el)})),this}}),window.BoxView=GridBackbone.View.extend({className:"grid-box box",events:{"click .grid-box-edit":"edit","click .grid-box-delete":"deleteBox","click .grid-box-duplicate":"duplicateBox"},initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.selfdestruct)},render:function(){var e=this.model.toJSON();this.$el.attr("data-id",e.id).attr("data-type",e.type).attr("data-style",e.style),this.$el.addClass("grid-box-"+e.type),"reference"==e.type&&(e.reference=!0),e.right_move=GRID.getRights().get("move-box"),e.right_edit=GRID.getRights().get("edit-box"),e.right_create=GRID.getRights().get("create-box"),e.right_delete=GRID.getRights().get("delete-box"),e.right_none=!1,e.right_move||e.right_edit||e.right_delete||(e.right_none=!0),GRID.log(["render box",e]);for(var t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;t.test(e.html);)e.html=e.html.replace(t,"");for(;t.test(e.epilog);)e.epilog=e.epilog.replace(t,"");for(;t.test(e.prolog);)e.prolog=e.prolog.replace(t,"");return this.model.isDuplicated()&&(this.model.unsetDuplicated(),this.$el.addClass("is-duplicated")),this.$el.html(ich.tpl_box(e)),this},edit:function(){var e=new BoxEditor({model:this.model});GRID.showEditor((function(){GRID.$root_editor.html(e.render().el)}))},deleteBox:function(){this.model.destroy()},duplicateBox:function(){this.model.duplicate()},selfdestruct:function(){this.remove()}}),window.BoxEditor=GridBackbone.View.extend({events:{"click .btn-cancel":"onCancel","click .grid-editor-legend":"onToggle","click .btn-save":"onSave","click .btn-make-reusable":"onMakeReusable"},initialize:function(){},render:function(){GRID.log(this.model.toJSON());var e=GRID.getBoxStyles().toJSON(),t=this;jn.each(e,(function(e){e.slug==t.model.get("style")?e.selected="selected":e.selected=""})),this.$el.html(ich.tpl_boxeditor({lang_values:document.lang_values,box:this.model.toJSON(),b_index:this.model.getIndex(),c_id:this.model.getContainer().get("id"),s_id:this.model.getSlot().get("id"),styles:e}));var n=this.model.get("contentstructure"),i=jQuery(this.$el).find(".dynamic-fields .field-wrapper"),o=[];return t=this,jn.each(n,(function(e){var n=e.type,r=new boxEditorControls[n]({model:{structure:e,container:t.model.get("content"),box:t.model,parentpath:""}});o.push(r),i.append(r.render().el)})),this.views=o,jQuery.each(jQuery(this.$el).find(".form-html"),(function(e,t){CKEDITOR.replace(t,{customConfig:document.PathToConfig})})),GRID.getBoxStyles().length<1&&jQuery(this.$el).find(".box-styles-wrapper").hide(),this},onCancel:function(){GRID.hideBoxEditor((function(){jQuery("div#new-grid-boxeditor").html("")}))},onToggle:function(e){jQuery(e.target).siblings(".field-wrapper").slideToggle(300)},onMakeReusable:function(e){confirm(document.lang_values["confirm-box-reuse"])&&(this.model.save(null,{action:"reuse"}),GRID.hideBoxEditor((function(){jQuery("div#new-grid-boxeditor").html("")})))},onSave:function(e){var t={};jn.each(this.views,(function(e){t[e.model.structure.key]=e.fetchValue()})),this.model.set("content",t),this.model.set("title",jQuery(this.$el).find(".f-b-title").val()),this.model.set("titleurl",jQuery(this.$el).find(".f-b-titleurl").val()),this.model.set("prolog",CKEDITOR.instances["f-b-prolog"].getData()),this.model.set("epilog",CKEDITOR.instances["f-b-epilog"].getData()),this.model.set("readmore",jQuery(this.$el).find(".f-b-readmore").val()),this.model.set("readmoreurl",jQuery(this.$el).find(".f-b-readmoreurl").val()),this.model.set("style",jQuery(this.$el).find(".box-styles-wrapper select").val()),this.model.save(),GRID.hideBoxEditor((function(){jQuery("div#new-grid-boxeditor").html("")}))}}),window.boxEditorControls={},i(7758);var Hn=function(e){return jQuery(e).data("ckeditor")},qn=function(e){return new Promise((function(t,n){!function(e){return Hn(e)}(e)?t(CKEDITOR.replace(e,{customConfig:document.PathToConfig})):t(Hn(e))}))};function Gn(e){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zn(e){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Un(e){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vn(e){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wn(e){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.GridContainerEditor=GridBackbone.View.extend({className:"grid-container-editor",events:{"click .grid-editor-controls [role=cancel]":"onCancel","click .grid-editor-controls [role=save]":"onSave","click .grid-editor-legend":"onToggle","click .grid-editor-url-button":"onUrlToggle"},initialize:function(){},render:function(){var e=this;GRID.log(this.model.toJSON());var t=GRID.getContainerStyles().toJSON(),n=this;return jn.each(t,(function(e){e.slug==n.model.get("style")?e.selected="selected":e.selected=""})),this.$el.html(ich.tpl_containereditor({lang_values:document.lang_values,model:this.model.toJSON(),styles:t})),qn(this.el.querySelector(".grid-editor-prolog")).then((function(t){return e.prologEditor=t})),qn(this.el.querySelector(".grid-editor-epilog")).then((function(t){return e.epilogEditor=t})),this.$el.find(".grid-collapsable-shown").addClass("grid-active"),jQuery.each(this.$el.find(".grid-editor-url-input"),(function(e,t){var n=jQuery(t);""==n.val()&&n.siblings("button").trigger("click")})),this},onToggle:function(e){jQuery(e.currentTarget).parent().toggleClass("grid-active")},onUrlToggle:function(e){var t=jQuery(e.target).parent();t.hasClass("grid-editor-url-show")?(t.find("input").attr("disabled","disabled").val(""),t.find("button").html("Add link")):(t.find("button").html("Delete Link"),t.find("input").removeAttr("disabled")),jQuery(e.target).parent().toggleClass("grid-editor-url-show")},onCancel:function(){GRID.hideEditor((function(){jQuery(GRID.$root_editor).html("")}))},onSave:function(e){this.model.set("title",this.$el.find(".grid-editor-title").val()),this.model.set("titleurl",this.$el.find(".grid-editor-titleurl").val()),this.model.set("prolog",this.prologEditor.getData()),this.model.set("epilog",this.epilogEditor.getData()),this.model.set("readmore",this.$el.find(".grid-editor-readmore").val()),this.model.set("readmoreurl",this.$el.find(".grid-editor-readmoreurl").val()),this.model.set("style",this.$el.find(".grid-editor-style").val()),this.model.set("style_label",jQuery(this.$el).find(".grid-editor-style option:selected").text()),this.model.save(),GRID.hideEditor((function(){GRID.$root_editor.html("")}))}}),window.BoxEditor=GridBackbone.View.extend({className:"grid-box-editor",events:{"click .grid-editor-controls [role=cancel]":"onCancel","click .grid-editor-legend":"onToggle","click .grid-editor-controls [role=save]":"onSave","click .grid-editor-controls [role=reuse]":"onMakeReusable","click .grid-editor-url-button":"onUrlToggle"},initialize:function(){},render:function(){var e=this,t=GRID.getBoxStyles().toJSON(),n=this;jn.each(t,(function(e){e.slug===n.model.get("style")?e.selected="selected":e.selected=""})),this.$el.html(ich.tpl_boxeditor({lang_values:document.lang_values,box:this.model.toJSON(),b_index:this.model.getIndex(),c_id:this.model.getContainer().get("id"),s_id:this.model.getSlot().get("id"),styles:t}));var i=this.model.get("contentstructure"),o=this.$el.find(".grid-dynamic-fields .grid-editor-field-wrapper"),r=[];return jn.each(i,(function(e){var t=e.type,i=new boxEditorControls[t]({model:{structure:e,container:n.model.get("content"),box:n.model,parentpath:""}});r.push(i),o.append(i.render().el)})),this.views=r,qn(this.el.querySelector(".grid-editor-prolog")).then((function(t){return e.prologEditor=t})),qn(this.el.querySelector(".grid-editor-epilog")).then((function(t){return e.epilogEditor=t})),GRID.getBoxStyles().length<1&&this.$el.find(".grid-editor-box-styles-wrapper").hide(),this.$el.find(".grid-collapsable-shown").addClass("grid-active"),jQuery.each(this.$el.find(".grid-editor-url-input"),(function(e,t){var n=jQuery(t);""==n.val()&&n.siblings("button").trigger("click")})),this},onCancel:function(){GRID.hideEditor((function(){GRID.$root_editor.html("")}))},onToggle:function(e){jQuery(e.currentTarget).parent().toggleClass("grid-active")},onUrlToggle:function(e){var t=jQuery(e.target).parent();t.hasClass("grid-editor-url-show")?(t.find("input").attr("disabled","disabled").val(""),t.find("button").html("Add link")):(t.find("button").html("Delete Link"),t.find("input").removeAttr("disabled")),jQuery(e.target).parent().toggleClass("grid-editor-url-show")},onMakeReusable:function(e){confirm(document.lang_values["confirm-box-reuse"])&&(this.model.save(null,{action:"reuse"}),GRID.hideEditor((function(){GRID.$root_editor.html("")})))},onSave:function(e){var t={};jn.each(this.views,(function(e){t[e.model.structure.key]=e.fetchValue()})),this.model.set("content",t),this.model.set("title",this.$el.find(".grid-editor-title").val()),this.model.set("titleurl",this.$el.find(".grid-editor-titleurl").val()),this.model.set("prolog",this.prologEditor.getData()),this.model.set("epilog",this.epilogEditor.getData()),this.model.set("readmore",this.$el.find(".grid-editor-readmore").val()),this.model.set("readmoreurl",this.$el.find(".grid-editor-readmoreurl").val()),this.model.set("style",this.$el.find(".grid-editor-styles-wrapper select").val()),this.model.save(),GRID.hideEditor((function(){GRID.$root_editor.html("")}))}}),boxEditorControls={},boxEditorControls.autocomplete=GridBackbone.View.extend({className:"grid-editor-widget grid-editor-widget-autocomplete",events:{"keyup .i-autocomplete":"keyup","click .suggestion-list li":"listItemSelected","click .cancel":"cancelSelection"},initialize:function(){},render:function(){var e="<label>"+this.model.structure.label+"</label>",t="autocomplete-wrapper form-autocomplete dynamic-value",n="",i=!1,o=this.model.container[this.model.structure.key];if("undefined"!==Gn(o)&&""!==o&&(t+=" locked",n="readonly=readonly",i=!0),e+="<div class='"+t+"'><input type=text class='form-text autocomplete i-autocomplete' "+n+"/>",e+="<div class='loading'></div>",e+="<div class='cancel icon-cancel'></div>",e+="<ul class='suggestion-list'></ul>",this.$el.html(e),i){this.$el.find(".loading").addClass("go"),this.$el.find("input.i-autocomplete").data("key",o);var r=this.model.box,s=this;new GridAjax("typeAheadGetText",[r.getGrid().getGridID(),r.getContainer().get("id"),r.getSlot().get("id"),r.getIndex(),this.model.parentpath+this.model.structure.key,o],{success_fn:function(e){s.$el.find(".loading").removeClass("go"),s.$el.find("input.i-autocomplete").val(e.result)}})}return this},fetchValue:function(){return this.$el.find("input.i-autocomplete").data("key")},keyup:function(e){if(13==e.which)this.selectItem(this.$el.find(".suggestion-list li").first());else{var t=this.$el.find("input.i-autocomplete").val();this.$el.find(".loading").addClass("go"),clearTimeout(this.searching);var n=this;this.searching=setTimeout((function(){n.doSearch(t)}),1e3)}},doSearch:function(e){var t=this,n=this.model.box;new GridAjax("typeAheadSearch",[n.getGrid().getGridID(),n.getContainer().get("id"),n.getSlot().get("id"),n.getIndex(),this.model.parentpath+this.model.structure.key,e],{success_fn:function(e){t.$el.find(".suggestion-list").empty(),jn.each(e.result,(function(e){t.$el.find(".suggestion-list").append(jQuery("<li/>").text(e.value).attr("data-key",e.key))})),t.$el.find(".loading").removeClass("go")}})},selectItem:function(e){var t=e.data("key"),n=e.text();this.$el.find(".autocomplete-wrapper").addClass("locked"),this.$el.find("input.i-autocomplete").val(n).attr("readonly","readonly").data("key",t),this.$el.find(".suggestion-list").empty()},listItemSelected:function(e){this.selectItem(jQuery(e.target))},cancelSelection:function(e){this.$el.find(".autocomplete-wrapper").removeClass("locked"),this.$el.find("input.i-autocomplete").data("key","").removeAttr("readonly").val(""),this.old_search_string=""}}),boxEditorControls["autocomplete-with-links"]=GridBackbone.View.extend({className:"grid-editor-widget grid-editor-autocomplete-with-links",events:{"keyup .i-autocomplete":"keyup","click .suggestion-list li":"listItemSelected","click .cancel":"cancelSelection"},initialize:function(){},render:function(){var e="<label>"+this.model.structure.label+"</label>",t="autocomplete-wrapper form-autocomplete dynamic-value",n="",i=!1,o=this.model.container[this.model.structure.key];if("undefined"!==zn(o)&&""!==o&&(t+=" locked",n="readonly",i=!0),e+="<div class='"+t+"'>",e+="<input type=text class='form-text autocomplete i-autocomplete' "+n+"/>",e+="<div class='cancel'><span class='icon-cancel'></span></div>",e+="<ul class='suggestion-list'></ul>",e+='<p class="links">',e+='<a class="empty" data-raw="'+this.model.structure.emptyurl+'" href="'+this.model.structure.emptyurl+'" target="_blank">'+this.model.structure.emptylinktext+"</a>",e+='<a class="full" data-raw="'+this.model.structure.url+'" href="" target="_blank">'+this.model.structure.linktext+"</a>",e+="</p>",e+="</div>",jQuery(this.$el).html(e),i){this.$el.find("input.i-autocomplete").data("key",o);var r=this.model.box,s=this;new GridAjax("typeAheadGetText",[r.getGrid().getGridID(),r.getContainer().get("id"),r.getSlot().get("id"),r.getIndex(),this.model.parentpath+this.model.structure.key,o],{success_fn:function(e){s.$el.find("input.i-autocomplete").val(e.result)}});var a=this.$el.find("a.full");a.attr("href",a.data("raw").replace("%",o))}return this},fetchValue:function(){return this.$el.find("input.i-autocomplete").data("key")},keyup:function(e){var t=this.$el.find("input.i-autocomplete");if(void 0===t.attr("readonly")&&!1!==t.attr("readonly"))if(13===e.which)this.selectItem(this.$el.find(".suggestion-list li").first());else{var n=this.$el.find("input.i-autocomplete").val();if(n==this.old_search_string)return;var i=this;this.$el.find(".loading").show(),clearTimeout(this.searching),this.searching=setTimeout((function(){i.doSearch(n)}),1e3)}},doSearch:function(e){var t=this,n=this.model.box;new GridAjax("typeAheadSearch",[n.getGrid().getGridID(),n.getContainer().get("id"),n.getSlot().get("id"),n.getIndex(),this.model.parentpath+this.model.structure.key,e],{success_fn:function(n){t.old_search_string=e,t.$el.find(".suggestion-list").empty(),jn.each(n.result,(function(e){t.$el.find(".suggestion-list").append(jQuery("<li/>").text(e.value).attr("data-key",e.key))})),t.$el.find(".loading").hide()}})},selectItem:function(e){var t=e.data("key"),n=e.text();this.$el.find(".autocomplete-wrapper").addClass("locked"),this.$el.find("input.i-autocomplete").val(n).attr("readonly","readonly").data("key",t),this.$el.find(".suggestion-list").empty();var i=this.$el.find("a.full");i.attr("href",i.data("raw").replace("%",t))},listItemSelected:function(e){this.selectItem(jQuery(e.target))},cancelSelection:function(e){this.$el.find(".autocomplete-wrapper").removeClass("locked"),this.$el.find("input.i-autocomplete").data("key","").removeAttr("readonly").val(""),this.old_search_string=""}}),i(239),i(5285),i(8726),boxEditorControls.html=GridBackbone.View.extend({className:"grid-editor-widget grid-editor-widget-html",render:function(){var e=this,t=this.model.container[this.model.structure.key]||"";return this.$el.html("<label>"+this.model.structure.label+"</label><textarea name='"+this.cid+"' class='dynamic-value form-html'>"+t.replace(/\'/g,"&#39;")+"</textarea>"),qn(this.el.querySelector(".form-html")).then((function(t){e.editor=t})),this},fetchValue:function(){return this.editor.getData()}}),i(8711),i(3868),boxEditorControls.list=GridBackbone.View.extend({className:"grid-editor-widget grid-editor-widget-list",initialize:function(){},render:function(){this.$el.empty(),jQuery("<label></label>").text(this.model.structure.label).appendTo(this.$el),this.$list=jQuery("<div></div>").addClass("grid-editor-widget-list-items"),this.$el.append(this.$list);var e=this.model.container[this.model.structure.key],t=this,n=[];return jQuery("<button><span class='icon-plus'></span>Add item</button>").addClass("grid-editor-widget-list-add").appendTo(this.$el).on("click",(function(e){e.preventDefault(),t.onAdd()})),jn.each(e,(function(e){var i=new boxEditorControls.listitem({model:{structure:t.model.structure.contentstructure,container:e,box:t.model.box,parentpath:t.model.parentpath+t.model.structure.key+"."}});n.push(i),t.$list.append(i.render().$el)})),this.views=n,this.$list.on("click",".widget-list-sort-button",{self:this},this.sortItem),this.$list.on("click",".widget-list-remove-item-button",{self:this},this.onRemove),this},sortItem:function(e){var t=e.data.self,n=jQuery(e.currentTarget),i=n.closest(".grid-editor-widget-listitem"),o=i.index(),r=t.views,s=r[o],a=o;switch(n.attr("data-dir")){case"up":(a=o-1)<0&&(a=0),i.insertBefore(i.prev());break;case"down":a=o+1,i.insertAfter(i.next())}r.splice(o,1),r.splice(a,0,s)},onRemove:function(e){var t=e.data.self,n=jQuery(e.currentTarget).closest(".grid-editor-widget-listitem").index();t.model.container[t.model.structure.key].splice(n,1),t.views[n].removed=!0,t.views[n].remove(),t.views.splice(n,1),console.log(["remove",e,t])},onAdd:function(){var e=new boxEditorControls.listitem({model:{structure:this.model.structure.contentstructure,container:{},box:this.model.box,parentpath:this.model.parentpath+this.model.structure.key+"."}});this.views.push(e),this.$list.append(e.render().el)},fetchValue:function(){var e=[];return jn.each(this.views,(function(t){t.removed||e.push(t.fetchValue())})),e}}),boxEditorControls.listitem=GridBackbone.View.extend({className:"grid-editor-widget-listitem",removed:!1,initialize:function(){},render:function(){var e=[],t=this;return jn.each(this.model.structure,(function(n){var i=n.type,o=new boxEditorControls[i]({model:{structure:n,container:t.model.container,box:t.model.box,parentpath:t.model.parentpath}});e.push(o),t.$el.append(o.render().el)})),jQuery("<button class='widget-list-remove-item-button'><span class='icon-minus'></span>Remove item</button>").appendTo(this.$el),jQuery("<button class='widget-list-move-up-item-button widget-list-sort-button' data-dir='up'><span class='icon-dir-up'></span></button>").appendTo(this.$el),jQuery("<button class='widget-list-move-down-item-button widget-list-sort-button' data-dir='down'><span class='icon-dir-down'></span></button>").appendTo(this.$el),this.views=e,this},fetchValue:function(){var e={};return jn.each(this.views,(function(t){e[t.model.structure.key]=t.fetchValue()})),e}}),boxEditorControls["multi-autocomplete"]=GridBackbone.View.extend({className:"grid-editor-widget grid-editor-widget-multi-autocomplete",events:{"keyup .i-autocomplete":"keyup","click .suggestion-list li":"listItemSelected"},initialize:function(){},render:function(){var e="<label>"+this.model.structure.label+"</label>",t=!1;if(""==this.model.container[this.model.structure.key]&&0!==this.model.container[this.model.structure.key]||(t=!0),e+="<div class='autocomplete-wrapper form-autocomplete dynamic-value'><input type=text class='form-text autocomplete i-autocomplete' />",e+="<div class='loading'></div>",e+="<ul class='suggestion-list'></ul>",this.$el.html(e),this.$el.on("click",".icon-cancel",(function(e){var t=jQuery(this).parent();t.empty(),t.remove()})),t){var n=this,i=this.model.box,o=this.model.container[this.model.structure.key];"undefined"===Un(o)?o=[]:Un(o)!==Un([])&&(o=[o]),jQuery.each(o,(function(e,t){n.$el.find(".loading").addClass("go"),new GridAjax("typeAheadGetText",[i.getGrid().getGridID(),i.getContainer().get("id"),i.getSlot().get("id"),i.getIndex(),n.model.parentpath+n.model.structure.key,t],{success_fn:function(e){n.$el.find(".loading").removeClass("go"),n.$el.find(".autocomplete-wrapper").append("<div class='autocomplete-multiselect-item' data-key='"+t+"'><span>"+e.result+"</span><span class='icon icon-cancel'></span></div>")}})}))}return this},fetchValue:function(){var e=[];return this.$el.find(".autocomplete-multiselect-item").each((function(t,n){e.push(jQuery(n).data("key"))})),e},keyup:function(e){if(13==e.which)this.selectItem(this.$el.find(".suggestion-list li").first());else{var t=this,n=this.$el.find("input.i-autocomplete").val();if(this.$el.find("input.i-autocomplete").val()==this.old_search_string)return;t.old_search_string=n,this.$el.find(".loading").addClass("go"),clearTimeout(this.searching),this.searching=setTimeout((function(){t.doSearch(n)}),1e3)}},doSearch:function(e){var t=this,n=this.model.box;new GridAjax("typeAheadSearch",[n.getGrid().getGridID(),n.getContainer().get("id"),n.getSlot().get("id"),n.getIndex(),this.model.parentpath+this.model.structure.key,e],{success_fn:function(e){t.$el.find(".suggestion-list").empty(),jn.each(e.result,(function(e){t.$el.find(".suggestion-list").append(jQuery("<li/>").text(e.value).attr("data-key",e.key))})),t.$el.find(".loading").removeClass("go")}})},selectItem:function(e){var t=e.data("key"),n=e.text();jQuery(".autocomplete-multiselect-item[data-key='"+t+"']").length?(this.$el.find(".suggestion-list").empty(),this.$el.find("input.i-autocomplete").removeAttr("value")):this.$el.find(".autocomplete-wrapper").append(jQuery("<div></div>").addClass("autocomplete-multiselect-item").text(n).attr({"data-key":t}).append(jQuery("<span></span>").addClass("icon icon-cancel").click((function(){var e=jQuery(this).parent();e.empty(),e.remove()})))),this.$el.find(".suggestion-list").empty(),this.$el.find("input.i-autocomplete").val("")},listItemSelected:function(e){this.selectItem(jQuery(e.target))}}),i(7053),boxEditorControls.select=GridBackbone.View.extend({className:"grid-editor-widget grid-editor-widget-select",initialize:function(){},render:function(){var e=this.model.structure,t=this.model.container,n="undefined"!==Vn(e.multiple)&&e.multiple,i=t[e.key],o=Vn(i)===Vn([]),r=e.selections,s=n?"multiple='multiple'":"",a=!n||r.size<8?"":r.length<12?"size='6'":"size='8'",l="<label>"+this.model.structure.label+"</label><select "+s+" "+a+">";return jn.each(r,(function(e){var t="";(!o&&"".concat(i)==="".concat(e.key)||o&&jn.indexOf(i,e.key)>-1)&&(t="selected"),l+="<option "+t+" value='"+e.key+"'>"+e.text+"</option>"})),l+="</select>",jQuery(this.el).html(l),this},fetchValue:function(){return jQuery(this.$el).find("select").val()}}),i(5867),i(4851),i(7748),window.GridRevisionsView=GridBackbone.View.extend({tagName:"div",className:"grid-revisions",events:{"click [role=preview]":"onPreview","click [role=delete]":"onDelete","click [role=revert]":"onRevert"},initialize:function(){this.listenTo(this.collection,"add",this.render),this.$list=jQuery("<div class='grid-revisions-list'></ul>"),this.$el.append(this.$list),this.interval=setInterval(this.onRevisionsScroll.bind(this),1e3)},render:function(){var e=this.collection.toJSON();jn.each(e,(function(e){if(e.isDraft=!1,e.isPublished=!1,e.isDeprecated=!1,"published"==e.state?e.isPublished=!0:"draft"==e.state?e.isDraft=!0:"deprecated"==e.state&&(e.isDeprecated=!0),e.readable_date="--.--.----",void 0!==e.date&&""!=e.date&&null!=e.date){var t=new Date(1e3*parseInt(e.date));e.readable_date=t.getDate()+"."+(t.getMonth()+1)+"."+t.getFullYear()+" &bull; "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}void 0!==e.editor&&""!=e.editor&&null!==e.editor||(e.editor="unknown")})),this.$list.html(ich.tpl_revisions({revisions:e,lang_values:document.lang_values}));var t=this.$list.children().length*this.$list.children().last().outerWidth(!0);return this.$list.css("width",t),this},onRevisionsScroll:function(){if(-1!=this.collection.nextpage&&this.$el.is(":visible")){var e=this.$list.outerWidth(!0)-Math.abs(this.$list.position().left);(e-=this.$el.outerWidth(!0))<300&&this.collection.fetch({page:this.collection.nextpage})}},onPreview:function(e){var t=jQuery(e.target).parents(".grid-revision"),n=GRID.PREVIEW_PATTERN.replace("{REV}",t.data("revision"));window.open(n,"_blank"),this.$el.parents(".rev-wrapper").toggle()},onDelete:function(e){if(!GRID.getRights().get("revert")||GRID.locked())return alert("You have no rights for that..."),!1;GRID.revert()},onRevert:function(e){if(!GRID.getRights().get("revert")||GRID.locked())return alert("You have no rights for that..."),!1;var t=jQuery(e.target).parents(".grid-revision").data("revision");GRID.setToRevision(t)}}),i(6556),window.GridToolContainersView=GridBackbone.View.extend({className:"grid-tool grid-element-container",events:{"click .grid-container-type":"renderContainerType"},render:function(){return this.$el.empty(),this.$el.append(ich.tpl_toolContainers({})),this.delegateEvents(),this},renderContainerType:function(e){var t=jQuery(e.currentTarget);t.toggleClass("active");var n=t.attr("role"),i="";if("reusable"===n){var o=this.getReusable();i=this.getRenderedContainerList(o)}else{var r=this.getContainers(n);i=this.getRenderedContainerList(r)}return t.hasClass("active")?t.next("dd").append(i):t.next("dd").empty(),this.initializesDraggable(),this},getRenderedContainerList:function(e){return ich.tpl_toolContainersContainer(e)},getContainers:function(e){var t=this.collection,n={containers:this.collection.toJSON()};return jn.each(n.containers,(function(e,i,o){if(0!==e.type.indexOf("c-"))delete n.containers[i];else{e.slots=[];for(var r=t.at(i).getDimension().split("-"),s=0;s<e.numslots;s++)e.slots.push({dimension:r[s]})}})),n},getReusable:function(){return{containers:GRID.getReusableContainers().toJSON()}},initializesDraggable:function(){return jQuery(this.el).find(".grid-new-element").draggable({helper:function(e,t){return jQuery("<div class='dragger-helper'></div>")},cursorAt:{left:30,top:30},zIndex:99,appendTo:GRID.getView().$el,scroll:!0,start:function(e,t){GRID.log("Start dragging"),jQuery;var n=GRID.getView().$el,i=n.find(".grid-container"),o=jQuery(document.createElement("div")).addClass("container-drop-area-wrapper").attr("data-type","container-drop-area-wrapper");n.find(".containers-wrapper").prepend(o.clone()),i.after(o.clone()),n.find(".container-drop-area-wrapper").append(jQuery(document.createElement("div")).addClass("container-drop-area")),n.find(".container-drop-area").droppable({accept:".grid-new-element",hoverClass:"hover",drop:function(e,t){var n=jQuery(t.draggable),i=n.data("reusable"),o=n.data("type"),r=jQuery(this).parent();r.removeClass("container-drop-area-wrapper").addClass("new-container-target"),GRID.getView().$el.find(".container-drop-area-wrapper").remove();var s=r.index();if(1==i||"true"==i){var a=GRID.getReusableContainers().at(n.index());return GRID.getModel().addReuseContainer(a,s),void GRID.log(["REUSED",a])}GRID.getModel().createContainer(o,s)}})},stop:function(e,t){GRID.getView().$el.find(".container-drop-area-wrapper").remove()}}),this}}),i(8307),i(4477),i(5760),i(6634),i(2730),window.ContainerType=GridBackbone.Model.extend({getDimension:function(){var e="",t=0;return jn.each(this.get("type").split("-"),(function(n,i,o){0!=n&&0!=t++&&(e+="-"+n)})),e.substring(1)},getType:function(){return this.get("type").split("-")[0]}}),window.BoxType=GridBackbone.Model.extend({defaults:function(){return{type:null,criteria:null,blueprints:null}},getBlueprints:function(){return this.blueprints instanceof GridBoxBlueprints||(this.blueprints=new GridBoxBlueprints),this.blueprints},searchBoxes:function(){GRID.log(["BoxType->searchBoxes",this]);var e=this.getBlueprints();return e.fetch({type:this.get("type"),criteria:this.get("criteria"),searchString:""}),this.set("blueprints",e),e},search:function(e,t){var n=new GridBoxBlueprints;return n.fetch({type:this.get("type"),criteria:t,searchString:e}),n}}),window.StyleType=GridBackbone.Model.extend({}),window.Revision=GridBackbone.Model.extend({initialize:function(e){this.set("id",e.revision)}}),window.Grid=GridBackbone.Model.extend({defaults:function(){return{id:-1,DEBUGGING:!1,SERVER:"/grid_ajax_endpoint",PREVIEW_URL:window.location.pathname+"/preview",isDraft:!0}},getGridID:function(){return GRID.ID},initialize:function(e){if(!e||!e.id)throw"InvalidConstructArgs";this.fetch({success:e.fn_success})},createContainer:function(e,t,n){var i=this,o=new Container({type:e,parent:this});void 0===n?o.set("reused",!1):o.set("reused",n),o.save(null,{index:t,action:"create",success:function(e,n,o){GRID.log("CreateContainerSuccess::"),GRID.log([e,n,o]),i.addContainer(e,t)},error:function(e,t,n){GRID.log("CreateContainerror::"),GRID.log([e,t,n])}})},addContainer:function(e,t){if(!(e instanceof Container))throw"Try to add an not Container Object: Grid.addContainer";var n={};"number"==typeof t&&(n.at=t),e.set("parent",this),this.getContainers().add(e,n)},addReuseContainer:function(e,t){var n=this;return GridRequest.grid.addReuseContainer(e,t,(function(e){n.addContainer(new Container(e.result),t)})),this},getContainers:function(){return this.get("collection_containers")||this.set("collection_containers",new Containers),this.get("collection_containers")},getContainer:function(e){return this.getContainers().at(e)},moveBox:function(e,t,n){GridRequest.grid.moveBox(e,t,n,(function(i){var o=e.clone();e.getSlot().getBoxes().remove(e),t.addBox(o,n)}))},duplicateBox:function(e,t){var n=e.clone();GridRequest.box.create(n,{index:t,success:function(){n.setDuplicated(),e.getSlot().addBox(n,t)}})},checkIsDraft:function(){GridRequest.grid.read(this,{action:"checkdraft"})},sync:function(e,t,n){"function"==typeof GridRequest.grid[e]?GridRequest.grid[e](t,n):GRID.log("grid sync metod not defined "+e)}}),window.Container=ContainerType.extend({getGrid:function(){return this.get("parent")},getGridID:function(){return this.get("parent").getGridID()},initialize:function(e){this.setSlots(e.slots),this.set("left_space",this.getSpace("left")),this.set("right_space",this.getSpace("right"))},getSpace:function(e){void 0===e&&(e="left");var t=this.get("space_to_"+e);if(""==t||null==t)return 0;var n=t.split("d");return n[0]/n[1]},getIndex:function(){return this.get("parent").getContainers().indexOf(this)},setSlots:function(e){this.getSlots().reset();var t=this,n=this.getDimension().split("-"),i=0;jn.each(e,(function(e){e.dimension=n[i++],t.addSlot(new Slot(e))}))},addSlot:function(e,t){if(!(e instanceof Slot))throw"Try to add an not Slot Object: Container.addSlot";var n={};"number"==typeof t&&(n.at=t),e.set("parent",this),this.getSlots().add(e,n)},getSlots:function(){return this.get("collection_slots")||this.set("collection_slots",new Slots),this.get("collection_slots")},getSlot:function(e){return this.getSlots().at(e)},sync:function(e,t,n){GridRequest.container[e](t,n)}}),window.Slot=GridBackbone.Model.extend({getGrid:function(){return this.get("parent").getGrid()},getGridID:function(){return this.get("parent").getGridID()},getContainer:function(){return this.get("parent")},initialize:function(e){var t=this;GRID.log("init Slot"),GRID.log(e),jn.each(e.boxes,(function(e){GRID.log("add Box"),t.addBox(new Box(e))}))},createBox:function(e,t){var n=this,i=e.toJSON();i.parent=this,new Box(i).save(null,{index:t,success:function(e,i,o){GRID.log("CreateboxSuccess::"),GRID.log([e,i,o]),n.addBox(e,t)},error:function(e,t,n){GRID.log("Createboxrror::"),GRID.log([e,t,n])}})},addBox:function(e,t){if(!(e instanceof Box))throw"Try to add an not Box Object: Slot.addBox";var n={};"number"==typeof t&&(n.at=t),e.set("parent",this),this.getBoxes().add(e,n)},getBoxes:function(){return this.get("collection_boxes")||this.set("collection_boxes",new Boxes),this.get("collection_boxes")},getBox:function(e){return this.getBoxes().at(e)},sync:function(e,t,n){GridRequest.slot[e](t,n)}}),window.Box=GridBackbone.Model.extend({unsetDuplicated:function(){this.unset("isDuplicated")},setDuplicated:function(){this.set("isDuplicated",!0)},isDuplicated:function(){return!0===this.get("isDuplicated")},getGrid:function(){return this.get("parent").getGrid()},getGridID:function(){return this.get("parent").getGridID()},getSlot:function(){return this.get("parent")},getContainer:function(){return this.getSlot().getContainer()},initialize:function(e){},getIndex:function(){return this.get("parent").getBoxes().indexOf(this)},duplicate:function(){this.getGrid().duplicateBox(this,this.getIndex()+1)},sync:function(e,t,n){GridRequest.box[e](t,n)}}),i(1055),window.GridRights=GridBackbone.Model.extend({initialize:function(e){},setNoRights:function(){var e=this;jn.each(this.attributes,(function(t,n,i){e.set(n,!1)}))},logRights:function(){jn.each(this.attributes,(function(e,t,n){GRID.log(t+" "+e)}))},sync:function(e,t,n){GridRequest.rights(t,n)}}),i(545),i(0),i(1579),window.GridAuthors=GridBackbone.Collection.extend({model:GridAuthor,async_authors_list:function(e){var t=this;jn.each(e,(function(e){t.add({id:e.identifier,name:e.author})}))},resetLock:function(){this.each((function(e){e.set("has_lock",!1)}))},setLock:function(e){this.get(e).set("has_lock",!0)},haveLock:function(){return void 0===this.findWhere({has_lock:!0})},getCount:function(){return this.length+1},async_authors_joined:function(e){this.add({id:e.identifier,name:e.author})},async_authors_left:function(e){this.remove(this.get(e))},async_disconnect:function(){this.reset(),this.resetLock()}}),window.GridAjax=function(e,t,n){var i={};i.method=e,i.params=t,"object"!=Wn(n)&&(n={}),void 0===n.checkIsDraft&&(n.checkIsDraft=!0),this.settings={url:GRID.SERVER,async:!0,type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",error:function(t,i,o){GRID.finishLoading(),GRID.DEBUGGING&&(GRID.log(t.responseText),jQuery(".error-messages").html("Method: "+e+"<br>Status: ("+t.status+") -> "+i+"<br>ResponseText: <br><pre>"+t.responseText+"</pre>").show()),"function"==typeof n.error_fn&&n.error_fn(t,i,o)},beforeSend:function(e,t){GRID.startLoading()},success:function(e,t,i){GRID.finishLoading(),GRID.log(["AJAX Success",n]),"function"==typeof n.success_fn&&n.success_fn(e,t,i),1==n.checkIsDraft&&(GRID.getModel().checkIsDraft(),GRID.revisions.fetch())},data:JSON.stringify(i),wait:!1},jQuery.extend(!0,this.settings,n),this.send=function(){jQuery.ajax(this.settings)},this.settings.wait||this.send()},window.GridRequest={grid:{create:function(e,t){GRID.log("Request grid create")},read:function(e,t){switch(GRID.log("Grid->update "+t.action),t.action){case"checkdraft":new GridAjax("checkDraftStatus",[e.getGridID()],{success_fn:function(t){e.set("isDraft",t.result)},checkIsDraft:!1});break;default:new GridAjax("loadGrid",[e.getGridID()],{success_fn:function(n){e.attributes=jn.extend(e.attributes,n.result),e.getContainers().reset(),jn.each(n.result.container,(function(t){GRID.log("Add new Container"),e.addContainer(new Container(t))})),t.success(),t.reverted&&GRID.flash()}})}},update:function(e,t){switch(GRID.log("Grid->update"),t.action){case"revertDraft":new GridAjax("revertDraft",[e.getGridID()],{success_fn:function(t){GRID.log(["revertDraft success",t]),e.fetch()}});break;case"setToRevision":var n=[e.getGridID(),t.revision];new GridAjax("setToRevision",n,{success_fn:function(t){GRID.log("setToRevision success"),GRID.log(t),e.fetch({reverted:!0})}});break;default:new GridAjax("publishDraft",[e.getGridID()],{success_fn:function(t){GRID.log("publishDraft success"),GRID.log(t),e.set("isDraft",!1)}})}},moveBox:function(e,t,n,i){var o=[e.getGridID(),e.getContainer().get("id"),e.getSlot().get("id"),e.getIndex(),t.getContainer().get("id"),t.get("id"),n];new GridAjax("moveBox",o,{success_fn:i})},addReuseContainer:function(e,t,n){var i=[GRID.ID,t,e.get("id")];new GridAjax("addReuseContainer",i,{success_fn:n})},destroy:function(e,t){GRID.log("Grid->destroy")}},revisions:function(e,t){GRID.log("revisions->read");var n="undefined"!=Wn(t.page)?t.page:0;e.nextpage=-1,new GridAjax("getGridRevisions",[e.getGridID(),n],{success_fn:function(t){GRID.log("getGridRevisions succes"),t.result.length>0&&(e.nextpage=n+1),0==n&&e.reset(),jn.each(t.result,(function(t){e.add(new Revision(t))}))},checkIsDraft:!1})},containertypes:function(e,t){GRID.log("Containertypes->read"),new GridAjax("getContainerTypes",[GRID.ID],{success_fn:function(t){GRID.log("getContainerTypes succes"),GRID.log(t),e.reset(),jn.each(t.result,(function(t){e.add(new ContainerType(t))}))},checkIsDraft:!1})},reusablecontainers:function(e,t){new GridAjax("getReusableContainers",[GRID.ID],{success_fn:function(t){GRID.log(["reusablecontainers data",t]),jn.each(t.result,(function(t){e.add(new ContainerType(t))}))},checkIsDraft:!1})},boxtypes:function(e,t){GRID.log("Boxtypes->read"),new GridAjax("getMetaTypesAndSearchCriteria",[GRID.ID],{success_fn:function(t){GRID.log("getMetaTypesAndSearchCriteria succes"),GRID.log(t),jn.each(t.result,(function(t){e.add(new BoxType(t))}))},checkIsDraft:!1})},boxblueprints:function(e,t){var n=[GRID.ID,t.type,t.searchString,t.criteria];GRID.log(["blueprints",e,t,n]),new GridAjax("Search",n,{success_fn:function(t){GRID.log(["blueprints search",t]),jn.each(t.result,(function(t,n,i){var o=new GridBoxBlueprint(t);e.add(o)}))},checkIsDraft:!1})},styles:function(e,t){GRID.log(e.type+"Styles->read"),new GridAjax("get"+e.type+"Styles",[],{success_fn:function(t){GRID.log("get"+e.type+"Styles succes"),GRID.log(t),e.reset(),jn.each(t.result,(function(t){e.add(new StyleType(t))}))},checkIsDraft:!1})},rights:function(e,t){GRID.log("Rights->read"),new GridAjax("Rights",[],{success_fn:function(n){GRID.log(["rights",n]),jn.each(n.result,(function(t,n,i){e.set(t,!0)})),Wn(t)==Wn({})&&"function"==typeof t.success&&t.success(n)},checkIsDraft:!1})},container:{create:function(e,t){GRID.log("Container->create");var n=[e.getGridID(),e.get("type"),t.index];GRID.log(n),new GridAjax("addContainer",n,{success_fn:function(n){GRID.log("addContainer success"),GRID.log(n),e.set("id",n.result.id),e.set("slots",n.result.slots),e.set("style",n.result.style),e.set("space_to_right",n.result.space_to_right),e.set("space_to_left",n.result.space_to_left),e.setSlots(n.result.slots),t.success()}})},read:function(e,t){GRID.log("Container->read")},update:function(e,t){switch(GRID.log("Container->update"),t.action){case"reuse":var n=[e.getGridID(),e.get("id"),t.reusetitle];new GridAjax("reuseContainer",n,{success_fn:function(n){e.set("reused",!0),t.success(n)},checkIsDraft:!1});break;case"move":n=[e.getGridID(),e.get("id"),t.index],new GridAjax("moveContainer",n,{success_fn:t.success});break;default:var i=jn.clone(e.attributes);delete i.slots,delete i.collection_slots,delete i.classes,delete i.parent,n=[e.getGridID(),e.get("id"),i],GRID.log(n),new GridAjax("updateContainer",n,{success_fn:function(e){t.success()},error_fn:t.error})}},delete:function(e,t){var n=[e.getGridID(),e.get("id")];GRID.log(n),new GridAjax("deleteContainer",n,{success_fn:function(n){GRID.getModel().getContainers().remove(e),t.success()}})}},slot:{create:function(e,t){GRID.log("slot->create")},read:function(e,t){GRID.log("slot->read")},update:function(e,t){GRID.log("slot->update");var n=[e.getGridID(),e.get("parent").get("id"),e.get("id"),e.get("style")];GRID.log(n),new GridAjax("updateSlotStyle",n,{success_fn:function(e){GRID.log("updateSlotStyle success"),t.success()}})},delete:function(e,t){GRID.log("slot->destroy")}},box:{create:function(e,t){GRID.log("box->create");var n=[e.getGridID(),e.getContainer().get("id"),e.getSlot().get("id"),t.index,e.get("type"),e.get("content")];new GridAjax("createBox",n,{success_fn:function(n){GRID.log("createBox success"),GRID.log(n),e.set("id",n.result.id),t.success()}})},read:function(e,t){GRID.log("box->read");var n=[e.getGridID(),e.getContainer().get("id"),e.getSlot().get("id"),e.getIndex()];GRID.log(n),new GridAjax("fetchBox",n,{success_fn:function(t){GRID.log("fetchBox success"),GRID.log(t),e.attributes=jn.extend(e.attributes,t.result),e.trigger("change")},checkIsDraft:!1})},update:function(e,t){switch(GRID.log("box->update "+t.action),t.action){case"reuse":var n=[e.getGridID(),e.getSlot().getContainer().get("id"),e.getSlot().get("id"),e.getIndex()];GRID.log(n),new GridAjax("reuseBox",n,{success_fn:function(t){e.attributes=t.result,e.trigger("change")},checkIsDraft:!1});break;case"move":break;default:var i=jn.clone(e.attributes);GRID.log("attributes"),GRID.log(i),delete i.classes,delete i.contentstructure,delete i.parent,n=[e.getGridID(),e.getSlot().getContainer().get("id"),e.getSlot().get("id"),e.getIndex(),i],GRID.log(n),new GridAjax("UpdateBox",n,{success_fn:function(n){GRID.log("UpdateBox success"),GRID.log(n),t.success(),e.fetch()}})}},delete:function(e,t){GRID.log("box->destroy");var n=[e.getGridID(),e.getContainer().get("id"),e.getSlot().get("id"),e.getIndex()];GRID.log(n),new GridAjax("removeBox",n,{success_fn:function(e){GRID.log("removeBox success"),GRID.log(e),t.success()}})}}};var Xn=i(751);Xn.Manager;const Qn=Xn;function Yn(){var e=this;this.domain=document.grid.async.domain,this.path=document.grid.async.path,this.author=document.grid.async.author,this.timeout=document.grid.async.timeout,this.observers=[],this.browser_identifier=window.localStorage.getItem("grid_browser_identifier"),null==this.browser_identifier&&(this.browser_identifier=Math.random().toString(36).substring(7),window.localStorage.setItem("grid_browser_identifier",this.browser_identifier)),this.last_time=(new Date).getTime(),this._onIdleInterval=function(){(new Date).getTime()-e.last_time>=1e3*this.timeout&&GRID.authors.length>0&&GRID.authors.haveLock()&&window.location.reload(!0)},setInterval((function(){e._onIdleInterval()}),1e3),this._onActivity=function(){e.last_time=(new Date).getTime()},jQuery("body").on("mousemove",(function(){e._onActivity()})).on("keypress",(function(){e._onActivity()})),this.init=function(){""!=document.grid.async.service&&(this.socket=Qn(document.grid.async.service),this.initEvents())},this.addObserver=function(e){this.observers.push(e)},this.removeObserver=function(e){this.observers=jn.without(this.observers,e)},this.notifyAll=function(e,t){jn.each(this.observers,(function(n,i,o){"function"==typeof n["async_"+e]&&n["async_"+e](t)}))},this.initEvents=function(){this.on("connect","connect"),this.on("disconnect","disconnect"),this.on("authors.list","authors_list"),this.on("authors.joined","authors_joined"),this.on("authors.left","authors_left"),this.on("authors.multiplehits","authors_multihit"),this.on("locking.isLocked","locking_is_locked"),this.on("locking.lockRequested","locking_lock_requested"),this.on("ping.send","ping_send")},this.on=function(e,t){var n=this;this.socket.on(e,(function(e){n[t](e)}))},this.connect=function(e){this.authors_join()},this.disconnect=function(e){this.notifyAll("disconnect"),this.notifyAll("locking_is_locked")},this.authors_join=function(){this.socket.emit("authors.join",{domain:this.domain,path:this.path,author:this.author,identity:this.browser_identifier})},this.locking_request_lock=function(){this.socket.emit("locking.requestLock")},this.locking_handover=function(e){GRID.authors.each((function(e){e.set("request_lock",!1)})),this.socket.emit("locking.handover",e)},this.locking_deny_handover=function(e){this.socket.emit("locking.denyHandover",e)},this.authors_list=function(e){this.notifyAll("authors_list",e)},this.authors_joined=function(e){this.notifyAll("authors_joined",e)},this.authors_left=function(e){this.notifyAll("authors_left",e)},this.authors_multihit=function(e){alert("You have opened this grid on "+e+" browser windows. As parallel editing is not allowed you're locked out here.")},this.locking_is_locked=function(e){GRID.authors.resetLock(),e.isLocked&&GRID.authors.setLock(e.identifier),this.notifyAll("locking_is_locked")},this.locking_lock_requested=function(e){var t=GRID.authors.get(e.identifier);t instanceof GridAuthor&&t.set("request_lock",!0),this.notifyAll("request_lock")},this.ping_send=function(){e.socket.emit("ping.received")}}function Jn(e){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){for(var e,t=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],i=n.length,o=window.console=window.console||{};i--;)o[e=n[i]]||(o[e]=t)}(),window.GRID={};var Zn=window.GRID={$body:null,dom_root:"#new-grid-wrapper",$root:null,dom_root_editor:"#new-grid-editor-wrapper",$root_editor:null,dom_root_authors:"#grid-authors-wrapper",$root_authors:null,ID:null,DEBUGGING:!1,SERVER:"/grid_ajax_endpoint",PREVIEW_URL:window.location.pathname+"/preview",PREVIEW_PATTERN:window.location.pathname+"/{REV}/preview",grid:null,gridView:null,types_box:null,types_container:null,reusable_containers:null,styles_container:null,styles_slot:null,styles_box:null,revisions:null,async:null,authors:null,init:function(){if(this._initConstants(),void 0===Zn.ID||null===Zn.ID)return!1;Zn.$loading=ich.tpl_loading(),this.$root.append(Zn.$loading),Zn.$loading.addClass("grid-init-loading"),this.getBoxTypes().fetch(),this.getContainerTypes().fetch(),this.getReusableContainers().fetch(),this.getContainerStyles().fetch(),this.getSlotStyles().fetch(),this.getBoxStyles().fetch(),this.async=new Yn,this.authors=new GridAuthors,this.async.addObserver(this),this.async.addObserver(this.authors),this.getRights().fetch({success:function(){Zn.grid=new Grid({id:Zn.ID,SERVER:Zn.SERVER,PREVIEW_URL:Zn.PREVIEW_URL,DEBUGGING:Zn.DEBUGGING,fn_success:Zn.new_grid_success})}});var e=this.$body;function t(t){t?e.addClass("is-alt-pressed"):e.removeClass("is-alt-pressed")}return e.on("keydown",(function(e){t(e.altKey)})).on("keyup",(function(e){t(e.altKey)})),this},reload:function(){this.grid.destroy(),this.grid=null,this.$root_authors.empty(),null!=this.gridView&&this.gridView.remove(),this.newGrid()},newGrid:function(){return this.grid=new Grid({id:Zn.ID,SERVER:this.SERVER,PREVIEW_URL:this.PREVIEW_URL,DEBUGGING:this.DEBUGGING,fn_success:Zn.new_grid_success}),this},new_grid_success:function(e){Zn.$root.empty(),Zn.$root.append(Zn.$loading),Zn.gridview=new GridView({model:Zn.getModel()}),Zn.gridview.listenTo(Zn.getRights(),"change",Zn.onRights),Zn.$root.append(Zn.getView().render().el),Zn._initializeContainerSortable(),Zn._initializeBoxSortable(),Zn.revisions=new Revisions({grid:Zn.getModel()}),Zn.revisions.fetch(),Zn.toolbar=new GridToolbarView({model:Zn.getModel()}),Zn.async.addObserver(Zn.toolbar),Zn.$root.prepend(Zn.toolbar.render().el),Zn.$loading.removeClass("grid-init-loading"),Zn.async.init(),jQuery(window).resize((function(){Zn.toolbar.onResize()})).trigger("resize")},getModel:function(){return this.grid},getView:function(){return this.gridview},getContainerTypes:function(){return this.types_container instanceof ContainerTypes||(this.types_container=new ContainerTypes),this.types_container},getReusableContainers:function(){return this.reusable_containers instanceof ReusableContainers||(this.reusable_containers=new ReusableContainers),this.reusable_containers},getBoxTypes:function(){return this.types_box instanceof BoxTypes||(this.types_box=new BoxTypes),this.types_box},getContainerStyles:function(){return this.styles_container instanceof Styles||(this.styles_container=new Styles({type:"container"})),this.styles_container},getSlotStyles:function(){return this.styles_slot instanceof Styles||(this.styles_slot=new Styles({type:"slot"})),this.styles_slot},getBoxStyles:function(){return this.styles_box instanceof Styles||(this.styles_box=new Styles({type:"box"})),this.styles_box},getRights:function(){return this.rights instanceof GridRights||(this.rights=new GridRights),this.rights},setToRevision:function(e){Zn.locked()||GridRequest.grid.update(Zn.grid,{action:"setToRevision",revision:e})},onRights:function(e){Zn.log(["onrights",e]),Zn.getView().render(),Zn.toolbar.render()},_initConstants:function(){this.$body=jQuery("body"),this.$root=jQuery(this.dom_root),this.$root_editor=jQuery(this.dom_root_editor),this.$root_authors=jQuery(this.dom_root_authors),this.mode=document.gridmode,this.$root.addClass("gridmode-"+this.mode),this.DEBUGGING=document.grid_debug_mode,this.ID=document.ID,this.SERVER="/grid_ajax_endpoint",void 0!==document.gridajax&&null!=document.gridajax&&""!=document.gridajax&&(this.SERVER=document.gridajax),this.PREVIEW_URL=this.PREVIEW_URL.replace("//","/"),"undefined"!=Jn(document.previewurl)&&null!=document.previewurl&&""!=document.previewurl&&(this.PREVIEW_URL=document.previewurl);var e=window.location.pathname+"/{REV}/preview";"undefined"!=Jn(document.previewpattern)&&null!=document.previewpattern&&""!=document.previewpattern&&(e=document.previewpattern),this.PREVIEW_PATTERN=e},publish:function(){if(!Zn.getRights().get("publish")||Zn.locked())return alert("Sorry you have no rights for that..."),!1;new GridAjax("publishDraft",[Zn.ID])},revert:function(){Zn.locked()||GridRequest.grid.update(Zn.grid,{action:"revertDraft"})},log:function(e){this.DEBUGGING&&console.log(e)},showEditor:function(e){Zn.$root.animate({width:0},220,(function(){Zn.$root.hide()})),setTimeout((function(){Zn.$root_editor.show(),Zn.$root_editor.animate({width:"100%"},250,(function(){e()})),window.scrollTo(0,0)}),50)},hideEditor:function(e){Zn.$root_editor.animate({width:"0%"},220,(function(){Zn.$root_editor.hide()})),setTimeout((function(){Zn.$root.show(),Zn.$root.animate({width:"100%"},220,(function(){e()})),window.scrollTo(0,0)}),50)},toggleAuthors:function(){if(""==Zn.$root_authors.html()){Zn.$root_authors.empty();var e=new Authors;Zn.$root_authors.append(e.render().$el),e.listenTo(Zn.toolbar,"toolbar_resize",e.onResize)}Zn.$root.toggleClass("is-active-authors"),Zn.$root_authors.toggleClass("is-active"),Zn.toolbar.onResize()},showAuthors:function(){this.hideAuthors(),this.toggleAuthors()},hideAuthors:function(){Zn.$root.removeClass("is-active-authors"),Zn.$root_authors.removeClass("is-active")},locked:function(){return!Zn.authors.haveLock()},async_locking_is_locked:function(){Zn.locked()?(Zn.$root.addClass("grid-is-locked"),Zn.showAuthors()):Zn.$root.hasClass("grid-is-locked")&&(Zn.reload(),Zn.$root.removeClass("grid-is-locked"),this.hideAuthors())},async_disconnect:function(){this.async_locking_is_locked()},_initializeContainerSortable:function(){if(!Zn.getRights().get("move-container")||Zn.locked())return!1;var e,t;e=!1,jQuery(this.getView().el).sortable({handle:".grid-container-sorthandle, .grid-container-reused-layer",items:".grid-container:not(.grid-container-type-sc)",placeholder:"grid-container-sort-placeholder",pullPlaceholder:!0,appendTo:this.getView().$el,refreshPositions:!0,helper:function(e,t){return jQuery("<div class='dragger-helper'></div>")},cursorAt:{left:30,bottom:30},start:function(n,i){Zn.log(["container sort START"],n,i);var o=i.item.data("id");jQuery(".grid-element-trash").addClass("grid-active").droppable({accept:".grid-container",hoverClass:"grid-hover",drop:function(n,i){t=Zn.getModel().getContainers().get(o),e=!0}})},stop:function(n,i){jQuery(".grid-element-trash").removeClass("grid-active"),e&&t.destroy()},update:function(t,n){if(!e){var i=n.item.attr("data-cid"),o=n.item.index(),r=Zn.getModel().getContainers().get(i);Zn.getModel().getContainers().indexOf(r),Zn.getModel().getContainers().move(r,o)}}})},_initializeBoxSortable:function(){if(!Zn.getRights().get("move-box")||Zn.locked())return!1;var e,t,n,i,o,r,s,a;s=!1,a=!1,jQuery(this.getView().el).find(".grid-container-type-c[data-reused=false] .grid-boxes-wrapper, .grid-container-type-sc .grid-boxes-wrapper").sortable({items:".grid-box",handle:".grid-box-controls",connectWith:".grid-container-type-c[data-reused=false] .grid-boxes-wrapper, .grid-element-trash",placeholder:"grid-box-sort-placeholder",forcePlaceholderSize:!0,distance:10,refreshPositions:!0,helper:function(e,t){return jQuery("<div class='dragger-helper'></div>")},cursorAt:{left:30,top:30},start:function(i,o){a=!1,s=!1,e=o.item.index(),t=o.item.parents(".grid-slot").data("id"),n=o.item.parents(".grid-container").data("id"),Zn.log(["START BOX SORT",e,t,n]),jQuery(".grid-element-trash").addClass("grid-active").droppable({accept:".grid-slot .grid-box",hoverClass:"grid-hover",over:function(){s=!0},out:function(){s=!1},drop:function(i,o){Zn.getModel().getContainers().get(n).getSlots().get(t).getBox(e).destroy(),s=!0}}),jQuery(".grid-element-duplicate").addClass("grid-active").droppable({accept:".grid-slot .grid-box",hoverClass:"grid-hover",over:function(){a=!0},out:function(){a=!1},drop:function(i,o){a=!0;var r=Zn.getModel().getContainers().get(n).getSlots().get(t).getBox(e);Zn.getModel().duplicateBox(r,e+1)}})},beforeStop:function(e,t){jQuery(".grid-element-trash").removeClass("grid-active"),jQuery(".grid-element-duplicate").removeClass("grid-active"),(s||a)&&e.preventDefault()},stop:function(s,a){if(r=a.item.parents(".grid-container").data("id"),o=a.item.parents(".grid-slot").data("id"),i=a.item.index(),Zn.log(["STOP BOX SORT",e,t,n,i,o,r]),n!=r||t!=o||e!=i){var l=Zn.getModel().getContainers().get(n).getSlots().get(t).getBox(e),c=Zn.getModel().getContainers().get(r).getSlots().get(o);Zn.getModel().moveBox(l,c,i)}}})},flash:function(){Zn.gridview.$el.fadeIn(100).fadeOut(100).fadeIn(100)},startLoading:function(){clearTimeout(Zn.loading_hide_timeout),Zn.$loading.show(),Zn.$loading.addClass("loading")},finishLoading:function(){Zn.$loading.removeClass("loading"),clearTimeout(Zn.loading_hide_timeout),Zn.loading_hide_timeout=setTimeout((function(){Zn.$loading.hide()}),1200)}};jQuery((function(){Zn.init()})),i(653)})()})();
//# sourceMappingURL=grid-editor.map